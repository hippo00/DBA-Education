[{"name":"Learning Plan","description":"qingzou@cn.ibm.com;shangjin@cn.ibm.com","owner":"@Qing Zou,@Jin Shang","path":"/BusinessProcessManager/GeneralBPM/Learningroadmap","text":"Date: 2019-08-02\n\nIBM Business Automation Workflow Product Overview\n\nIBM Business Automation Workflow is software that combines IBM Business Process Manager (BPM) and IBM Case Manager capabilities in a single integrated workflow solution. It unites information process, and users to provide a 360-degree view of work to help drive more successful business outcomes.\n\nWorkflow applications coordinate work between tasks performed by humans and automated tasks to improve daily business operations. Workflow applications have four main components:\n\nAn authoring environment to create and configure the application.\nFrameworks or models for sequencing and delegating work. With Business Automation Workflow, the models can be either structured processes or unstructured cases. You can choose your model based on the pattern of your workflow and not be limited to a case or a process.\nA user experience for interacting with the application. To provide consistent user experiences, standardized workflows can be reused across the organization.\nAdministrative tools for optimizing how the application runs, deploying new versions and managing security.\n\n See how Business Automation Workflow improves the productivity of a new account opening workflow:\n\nIBM BPM Architecture\n\n IBM BPM Key Components\n\nAuthoring tools\n\nIBM Process Designer is the primary authoring tool for business processes; use it to efficiently model and test business processes in all editions of the product. An Business Automation Workflow Advanced deployment environment also includes IBM Integration Designer for building services that are self-contained, or that start other existing services (for example, web services, enterprise resource applications, or applications running in CICS and IMS).\n\nThe Workflow Center repository\n\nThe Workflow Center (aka Process Center) includes a repository for all processes, services, and other assets created in the Process Designer and Integration Designer.\n\nWorkflow Server and runtime environments\n\nWorkflow Server (aka Process Server) provides a single runtime environment that can support a range of business processes, service orchestration, and integration capabilities.\n\nBusiness process administration tools\n\nYou can use a set of administration tools to accomplish tasks ranging from installing and managing snapshots to administering processes and working with the resources in your IT environment, including of Workflow Center Console (aka Process Center Console), Process Admin Console, Business Performance Admin Console, WAS administrative console, etc.\n\nProcess Portal\n\nProcess Portal is the user interface that is provided with all editions of Business Automation Workflow for participating in processes. It can be configured for a single Business Automation Workflow system or federated environments that include IBM Process Federation Server. From Process Portal, users can launch processes, dashboards, and startable services, and work on their tasks.\n\nHands-on Sample Workflow\nIBM Workflow Center includes a complete Hiring Sample process application that you can view and run in IBM Process Designer.\n\nThe instructions for recreating the sample for yourself are in the Hiring tutorial for Process Designer. See Hiring tutorial.\n\nInstructions for running the Hiring Sample process application:\nHiring Sample Overview: The Hiring Sample is included with Workflow Center. The sample introduces the features of Process Designer by showing you how to run a sample process.\nManaging access to the Hiring Sample process application (for administrators): Administrators must provide access to the Hiring Sample process application so that users can view and run the process.\nVerifying access to the Hiring Sample process application: If the Hiring Sample process application is not already available in the IBM Workflow Center Console, you must import it.\nOpening the Hiring Sample process application: To begin running the process in IBM Process Desinger.\nChanging the Hiring Sample: Using the Hiring Sample process application to learn the product. Do not use it as a starting point for your own application because changing this process application might cause errors later.\nPlaying back the Standard HR Open New Position process: Run the Standard HR Open New Position process in the Inspector view in IBM Process Designer to see the process run step by step.\n\n Recommended Badges\n\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"15%\" style=\"text-align:center;\";\n    Business Process Manager\n    Business Automation Workflow\n  \n  \n    Basic\n    <a href=\"https://www-03.ibm.com/services/learning/ites.wss/zz-en?pageType=badges&id=5bf38a9f-066b-4a46-bca0-67a26e5f7344\" target=\"_blank\"IBM Business Process Manager Introduction \n    \n  \n  \n    Intermediate\n    <a href=\"https://www.ibm.com/services/learning/ites.wss/zz-en?pageType=badges&id=f72abfbd-791f-4d40-89f1-db3bf6c6c490\" target=\"_blank\"IBM Business Process Manager Advanced V8.6 Developer \n    <a href=\"https://www.ibm.com/services/learning/ites.wss/zz-en?pageType=badges&id=e88a39cb-cb86-4deb-8692-0b2ba5c1eea0\" target=\"_blank\"IBM Certified Business Analyst - Blueworks Live and Business Automation Workflow v18 \n  \n  \n    <a href=\"https://www-03.ibm.com/services/learning/ites.wss/zz-en?pageType=badges&id=fe01c26f-5104-4d0b-89eb-7ee4f1bdeb7d\" target=\"_blank\"IBM Certified Application Developer using Process Designer - Business Process Manager V8.6 \n    <a href=\"https://www.ibm.com/services/learning/ites.wss/zz-en?pageType=badges&id=03891df7-04e1-40b9-ba24-813cd8b2909e\" target=\"_blank\"IBM Business Automation Workflow V18 Developer\n  \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Deep Dive","description":"qingzou@cn.ibm.com","owner":"@Qing Zou","path":"/BusinessProcessManager/GeneralBPM/DeepDive","text":"<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"27%\" style=\"text-align:center;\";Topic\n    Education Material\n  \n  \n    Install/DE Configuration\n    (Content Needed) \n  \n  \n    Upgrade/Migration \n    <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21610883\" target=\"_blank\"[Publication] Supported Migration \n  \n  \n    [Presentation] BPM Upgrade 101 \n  \n  \n    [Presentation] BPM Migration \n  \n  \n    [Recording] BPM Migration 1 \n  \n  \n    [Recording] BPM Migration 2 \n  \n\n  \n    Disaster Recovery\n    [Publication] Disaster recovery guidance  \n  \n  \n    Configuration\n    [Presentation] BPM Configuration  \n  \n\n  \n    [Recording] BPM Configuration  \n  \n  \n    EAR Deployment\n    [Recording] Advanced Deployment Demo  \n  \n  \n    Snapshot Management\n    [Presentation] Online Deployment   \n  \n  \n    [Presentation] STD deployment  \n  \n\n    [Recording] STD deployment troubleshooting  \n  \n  \n    Instance Migration\n    [Presentation] Migration Instances  \n  \n  \n    [Publication] Migrating inn-flight Instances  \n  \n  \n    IBM Integration DesignerProcess DesignerInspectorRepository \n    [Presentation] Life Cycle full guide  \n  \n  \n    [Recording]Processes, Snapshots, and Tracks  \n  \n  \n    [Presentation]Processes, Snapshots, and Tracks  \n  \n  \n    [Presentation] PC index  \n  \n  \n    [Recording] PC index   \n  \n  \n    Server Connection \n    [Recording] PC connectivity   \n  \n  \n    Cache Tuning \n    [Publication] Tuning branch and snapshot  \n  \n  \n    [Publication] Recommend Heap Size  \n  \n  \n    High CPU \n    [Presentation] Performance Overall troubleshooting guide   \n  \n  \n    [Presentation] Performance checklist   \n  \n  \n    [Recording] Performance checklist  \n  \n  \n    [Publication] Performance issue tools   \n  \n  \n    Out of Memory/High Memory \n    [Presentation] OOM Problem Determination   \n  \n  \n    [Presentation] OOM Review   \n  \n  \n    [Recording] OOM Review  \n  \n  \n    [Presentation] Class loader OOM  \n  \n  \n    Database \n    [Recording] BPM Database Troubleshooting  \n  \n  \n    [Recording] Troubleshooting ORA-02049 errors in BPM   \n  \n  \n    [Presentation] Tips & Tricks  \n  \n  \n    [Recording] Tips & Tricks  \n  \n  \n    Housekeeping \n    [Publication] Purging data in IBM Business Process Manager   \n  \n  \n    [Publication] DB Cleanup   \n  \n  \n    Process Portal \n    [Presentation] Overview Process Portal Search Index  \n  \n  \n    [Presentation] Process Portal Search Index - Process Instance Creation Trace   \n  \n  \n     [Presentation] Process Portal Search Index - Task Update & Completed Trace  \n  \n  \n    [Recording] Search Indexing Process    \n  \n  \n    [Presentation] Process Portal Performance Tuning    \n  \n  \n    [Recording] Process Portal Performance Tuning    \n  \n  \n    [Presentation] Process Portal UI & Coaches: Database Tables   \n  \n  \n    [Recording] Process Portal UI & Coaches: Database Tables   \n  \n  \n    Coaches\n    [Presentation] Coach Best Practices   \n  \n  \n    [Recording] Coach Best Practices    \n  \n  \n    Human Services\n    (Content Needed) \n  \n  \n    Toolkit Controls \n    [Presentation] SPARK UI Toolkits   \n  \n  \n    Business Space \n    (Content Needed) \n  \n  \n    Process Federated Server \n    [Presentation] PFS Technical Overview  \n  \n  \n    [Recording] PFS Configuration  \n  \n  \n    [Presentation] PFS BPD and BPEL Indexing  \n  \n  \n    [Presentation] PFS REST Service   \n  \n  \n    Business Automation Insights\n    [Presentation] BAI - Architecture   \n  \n  \n    [Presentation] BAI - Install and Prereqs  \n  \n  \n    [Recording] BAI - Install and Prereqs   \n  \n  \n    [Presentation] BAI - Flink   \n  \n  \n    [Recording] BAI - Flink   \n  \n  \n    [Presentation] BAI – Elasticsearch and Kibana   \n  \n  \n    [Recording] BAI – Elasticsearch and Kibana  \n  \n  \n    [Presentation] BAI - BPMN Event Processing   \n  \n  \n    [Presentation] BAI - Business Data Protection - Anonymization   \n  \n  \n    [Recording] BAI - BPMN & anonymization   \n  \n  \n    [Presentation] BAI - Troubleshooting  \n  \n  \n    [Recording] BAI - Troubleshooting   \n  \n  \n    Business Monitor\n    [Lab] Introduction to Monitor Model Management and Dashboards  \n  \n  \n    [Lab] Monitor Event Processing 1   \n  \n  \n    [Lab Recording] Monitor Event Processing 1   \n  \n  \n    [Lab Asset] Event Processing 1    \n  \n  \n     [Lab] Monitor Event Processing 2 - Failed Events   \n  \n  \n     [Lab Recording] Monitor Event Processing 2 - Failed Events   \n  \n  \n     [Presentation] Cognos Monitor Overview  \n  \n  \n    [Recording] Cognos Monitor Overview   \n  \n  \n    [Presentation] Cognos BI Architecture Overview  \n  \n  \n    Performance Data Warehouse \n    [Publication] Performance Data Warehouse database (PDWDB) growing fast. How can we reduce the size?   \n  \n  \n    [Publication] How to resolve com.ibm.ws.sib.processor.exceptions.SIMPLimitExceededException for PostLoadCalculationQueue?  \n  \n  \n    [Publication] How to resolve huge amount of PDW tracking data transfer errors on DB table LSWDATATRANSFER_ERRORS ?  \n  \n  \n    <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21612755\" target=\"blank\"[Publication] How to clean up the Performance Data Warehouse database and the LSWPERFDATATRANSFER table for IBM Business Process Manager (BPM)  \n  \n  \n    [Publication] How to identify processes (BPDs) and toolkits where autotracking is enabled?   \n  \n  \n    Security Scans\n    (Content Needed) \n  \n  \n    SSL \n    [Presentation] BPM Security Hardening   \n  \n  \n    SSO \n    [Publication] Administering SPNEGO within WebSphere Application Server  \n  \n  \n    User and Group Security \n    <a href=\"https://www.ibm.com/developerworks/community/blogs/aimsupport/entry/howtotroubleshoota_bpmuserauthorizationproblempart1?lang=en\" target=\"blank\"[Publication] How to troubleshoot a BPM user authorization problem - Part I   \n  \n  \n    <a href=\"https://www.ibm.com/developerworks/community/blogs/aimsupport/entry/howtotroubleshoota_bpmuserauthorizationproblempart2?lang=en\" target=\"blank\"[Publication] How to troubleshoot a BPM user authorization problem - Part II  \n  \n  \n    [Presentation] BPM Security Best Practices and Solutions  \n  \n  \n    [Presentation] Active Directory Tuning Trick   \n  \n  \n    [Recording] Active Directory Tuning Trick   \n  \n  \n    Advanced Integration Service\n    [Publication] Configuring error handling for Advanced Integration Services   \n  \n  \n    Business Process Choreographer \n    [Publication] Authorization and staff resolution in Business Process Choreographer: Part 1: Understanding the concepts and components of staff resolution   \n  \n  \n    [Publication] Authorization and staff resolution in Business Process Choreographer: Part 2: Understanding the programming model for staff resolution   \n  \n  \n    [Publication] Authorization and staff resolution in Business Process Choreographer: Part 3: Customization options for staff resolution  \n  \n  \n    [Publication] Authorization and staff resolution in Business Process Choreographer: Part 4: Staff resolution specifications and reference guide  \n  \n  \n    Business Object \n    (Content Needed) \n  \n  \n    Bindings \n    (Content Needed) \n  \n  \n    Service Component Architecture \n    (Content Needed) \n  \n  \n    Service Integration Bus  \n    [Presentation] SIB Best Practices  \n  \n  \n    Failed Events \n    [Recording] Understanding Failed Event Manager Part 1   \n  \n  \n    [Recording] Understanding Failed Event Manager Part 2   \n  \n  \n     Adapters  \n    (Content Needed) \n  \n  \n    Mediation \n    (Content Needed) \n  \n  \n    BPD & Service Engine \n    [Presentation] Understand BPD & Activity Due Dates   \n  \n  \n    [Recording] Understand BPD & Activity Due Dates   \n  \n  \n    [Presentation] Demystifying the AbstractBPDTask traces   \n  \n  \n    [Recording] Demystifying the AbstractBPDTask traces   \n  \n  \n    Event Manager \n    <a href=\"https://www.ibm.com/developerworks/community/blogs/aimsupport/entry/ibmbpmeventmanagercommonproblems?lang=en\" target=\"blank\"[Publication] IBM Business Process Manager Event Manager - Common symptoms and how to resolve them   \n  \n  \n    <a href=\"https://www-01.ibm.com/support/docview.wss?uid=swg21439613 \" target=\"_blank\"[Publication] Understanding and Tuning the Event Manager   \n  \n  \n    [Presentation] BPM Event manager Stuck Token Problem Determination   \n  \n  \n    JavaScript & REST API \n    [Recording] Managing Orphan Tokens using REST API   \n  \n  \n    [Recording] BPM REST APIs and External Services  \n  \n  \n    Web Services \n    (Content Needed)  \n  \n  \n    Undercover Agent (UCA) \n    [Recording] UCA and Message Event Problem Determination   \n  \n  \n    [Recording] Case review for UCA problem (part 1)   \n  \n  \n    [Recording] Case review for UCA problem (part 2)   \n  \n  \n    Process Admin Console \n    (Content Needed) \n  \n  \n    Document Store & ECM Integration \n    [Recording] Case Sharing - Content Management Document List   \n  \n  \n    [Recording] Case Sharing - ECM Event Process   \n  \n  \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Skills Transfer (Dev/L3-L2, SWAT-L2)","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/GeneralBPM/SkillsTransfer","text":"Getting to know Digital Business Automation (DBA) Series\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n    <th width=\"20%\"style=\"text-align:center\"Date\n  \n  \n    Getting to know Digital Business Automation (DBA) - End-to-end intro. and BAW （I）\n    https://ec.yourlearning.ibm.com/w3/playback/10039262\n    2019-07\n  \n  \n    Getting to know Digital Business Automation (DBA) - End-to-end intro. and BAW （II） \n    https://ec.yourlearning.ibm.com/w3/playback/10039158\n    2019-07\n  \n  \n    Getting to know Digital Business Automation (DBA) - ODM, BAI, and Datacap\n    https://ec.yourlearning.ibm.com/w3/playback/10039706\n    2019-07\n  \n\n    \nDigital Business Automation (DBA) Platform Series\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n    <th width=\"20%\"style=\"text-align:center\"Date\n  \n  \n    DBA Studio Introduction\n    [Presentation]\n    2019-06\n  \n  \n    [Recording]\n    2019-06\n  \n  \n    DBA Studio Architecture Overview\n    [Presentation]\n    2019-06\n  \n  \n    User Management Service Introduction\n    [Presentation]\n    2019-06\n  \n  \n    [Recording]\n    2019-06\n  \n  \n    Base Images Introduction\n    [Presentation]\n    2019-06\n  \n  \n    [Recording]\n    2019-06\n  \n  \n    Low-Code Application Designer Introduction\n    [Presentation]\n    2019-06\n  \n  \n    [Recording]\n    2019-06\n  \n  \n    IBM Content Navigator Architecture Overview\n    [Presentation]\n    2019-06\n  \n\nBPM Troubleshooting Session\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n    <th width=\"20%\"style=\"text-align:center\"Date\n  \n  \n    BPM Application OOM Troubleshooting Instructions\n    <a href=\"https://ibm.ent.box.com/notes/474462666608?s=a0n8v176cc7cc4hw6u3z8ylrubp02qzm\" target=\"_blank\"[Presentation]\n    2019-06\n  \n  \n    [Recording]\n    2019-06\n  \n","wordCount":0,"topics":[],"type":"Content"},{"name":"CFs Training","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/GeneralBPM/CFsTraining","text":"IBM Business Automation Workflow 19.0.0.2 - Education & Deep Dive\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n  \n  \n    Simplified Quickstart\n    https://ibm.ent.box.com/file/488703634686\n  \n  \n    Carbon Theme\n    https://ibm.ent.box.com/file/493129081343\n  \n  \n    REST Binding  REST APIs\n    https://ibm.ent.box.com/file/492872846437\n  \n\n  \n    Web Service Discovery Timeouts\n    https://ibm.ent.box.com/file/492872599515\n  \n  \n    BAW Case/Activity & Bpm Content Objects Synchronization - Role & Team Membership Synchronization\n    https://ibm.ent.box.com/file/491942637710\n  \n  \n    Script Task in Service Flows\n    https://ibm.ent.box.com/file/492333356552\n  \n  \n    Relationships between Case Role, BPM Team, and User Group\n    https://ibm.ent.box.com/file/488697947438\n  \n\nIBM Business Automation Workflow 19.0.0.1 - Education & Deep Dive\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n  \n  \n    Session1 Recording\n    https://ibm.ent.box.com/file/382467477193\n  \n  \n    Session2 Recording\n    https://ibm.ent.box.com/file/384072591957\n  \n  \n    Session1 Intro\n    https://ibm.ent.box.com/file/492872846437\n  \n  \n    Session2 Intro\n    https://ibm.ent.box.com/file/383477927181\n  \n  \n    RPA update\n    https://ibm.ent.box.com/file/381469282920\n  \n  \n    New configuration script for CaseEventEmitter\n    https://ibm.ent.box.com/file/382405957522\n  \n  \n    New REST APIs for user/group synchronization\n    https://ibm.ent.box.com/file/369251317589\n  \n  \n    Performance update\n    https://ibm.ent.box.com/file/381394538335\n  \n  \n    Support for an external Elasticsearch 6.x cluster in PFS\n    https://ibm.ent.box.com/file/369181973368\n  \n  \n    BUE update\n    https://ibm.ent.box.com/file/359065615490\n  \n  \n    https://ibm.ent.box.com/file/359040489004\n  \n  \n    https://ibm.ent.box.com/file/359058622139\n  \n  \n    Runtime serviceability items\n    https://ibm.ent.box.com/file/369643828623\n  \n  \n    https://ibm.ent.box.com/file/369644410298\n  \n  \n    https://ibm.ent.box.com/file/369637305194\n  \n  \n    External CPE configuration\n    https://ibm.ent.box.com/file/376669161246\n  \n  \n    BAW on CAM 18.0.0.2\n    https://ibm.ent.box.com/file/378910402674\n  \n  \n    Straight Through Processing & Integration updates\n    https://ibm.ent.box.com/file/383441133751\n  \n  \n    Update REST Server APIs\n    https://ibm.ent.box.com/file/383434773208\n  \n  \n    Web Service enhancements\n    https://ibm.ent.box.com/file/383427893207\n  \n  \n    Improved Java External Services\n    https://ibm.ent.box.com/file/383434550458\n  \n  \n    Discovery of REST services from URL\n    https://ibm.ent.box.com/file/380966856485\n  \n  \n    New JavaScript APIs in Service Flows\n    https://ibm.ent.box.com/file/380956117694\n  \n  \n    Business Rules improvements and fixes\n    https://ibm.ent.box.com/file/380999677045\n  \n\nIBM Business Automation Workflow 18.0.0.1 - Education & Deep Dive\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n  \n  \n    Session1 Recording\n    https://ibm.ent.box.com/file/323356144883\n  \n  \n    Session2 Recording\n    https://ibm.ent.box.com/file/325979932225\n  \n  \n    Session3 Recording\n    https://ibm.ent.box.com/file/335036583729\n  \n  \n    Session1 Intro\n    https://ibm.ent.box.com/file/323343225889\n  \n  \n    Session2 Intro\n    https://ibm.ent.box.com/file/325270019879\n  \n  \n    Session3 Intro\n    https://ibm.ent.box.com/file/334484986800\n  \n  \n    BAI Case - Introduction and Architecture\n    https://ibm.ent.box.com/file/322746982017\n  \n  \n    BAI Case - Enabling BAI for Case\n    https://ibm.ent.box.com/file/322744126614\n  \n  \n    https://ibm.ent.box.com/file/322696852165\n  \n  \n    https://ibm.ent.box.com/file/323270631809\n  \n  \n    https://ibm.ent.box.com/file/322670552757\n  \n  \n    BAI Process Flow - Enable Event Correlation\n    https://ibm.ent.box.com/file/323374318383\n  \n  \n    BAI Service Flow - Enable Event Correlation\n    https://ibm.ent.box.com/file/322646577972\n  \n  \n    IID v18.0.0.1 installation updates\n    https://ibm.ent.box.com/file/319538930596\n  \n  \n    IID v18.0.0.1 Updates\n    https://ibm.ent.box.com/file/322660868265\n  \n  \n    BAW 18.0.0.1 - Performance Summary\n    https://ibm.ent.box.com/file/317846338129\n  \n  \n    Context Root customization in BAW\n    https://ibm.ent.box.com/file/323955623926\n  \n  \n    BAW-CAM - Overview\n    https://ibm.ent.box.com/file/334858939361\n  \n  \n    BAW-CAM - Installation & Configuration\n    https://ibm.ent.box.com/file/334838782848\n  \n\nIBM Business Automation Workflow 18.0.0.0 - Education & Deep Dive\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n  \n  \n    Session Recording Part 1\n    https://ibm.ent.box.com/file/287424563908\n  \n  \n    Session Recording Part 2\n    https://ibm.ent.box.com/file/287854435684\n  \n  \n    Decision tables in service flows\n    https://ibm.ent.box.com/file/287831245028\n  \n  \n    Launch Web Process  Designer  from IBM Case Manager Builder\n    https://ibm.ent.box.com/file/287817895616\n  \n  \n    Add Document from Case\n    https://ibm.ent.box.com/file/286017882618\n  \n  \n    Business Objects Support in Case Package\n    https://ibm.ent.box.com/file/286776004686\n  \n  \n    Create Advanced Integration Services in web PD \n    https://ibm.ent.box.com/file/285347186685\n  \n  \n    IBM Robotic Process Automation with Automation Anywhere\n    https://ibm.ent.box.com/file/287476146285\n  \n  \n    GDPR relevant REST_APIs\n    https://ibm.ent.box.com/file/287454979261\n  \n  \n    What's new in IBM Case Manager 5.3.3\n    https://ibm.ent.box.com/file/286599092965\n  \n  \n    IID v18.0.0.1 Updates\n    https://ibm.ent.box.com/file/322660868265\n  \n  \n    Validation Improvements (Client Side)\n    https://ibm.ent.box.com/file/287246325905\n  \n  \n    Toggle List view and Table view in Work Dashboard\n    https://ibm.ent.box.com/file/286640961788\n  \n  \n    DEF events  for service  flows\n    https://ibm.ent.box.com/file/286807211791\n  \n  \n    Viewing an IBM Business Process Manager process from Case Manager Builder\n    https://ibm.ent.box.com/file/286794851876\n  \n  \n    Launching a Process From a Document\n    https://ibm.ent.box.com/file/286657867314\n  \n  \n    Next Task Dashboard\n    https://ibm.ent.box.com/file/286586031453\n  \n  \n    Restrict Save Search Creation\n    https://ibm.ent.box.com/file/283677369906\n  \n  \n    Monitoring improvement with JMX\n    https://ibm.ent.box.com/file/282585680936\n  \n\nIBM Business Process Manager 8.6 CF2017.12 - Education & Deep Dive\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n  \n  \n    Session Recording Part 1\n    https://ibm.ent.box.com/file/265915307579\n  \n  \n    Session Recording Part 2\n    https://ibm.ent.box.com/file/267259081973\n  \n  \n    Validation Improvements\n    https://ibm.ent.box.com/file/263868834694\n  \n  \n    Restrict the rights to create or edit personal saved searches in Process Portal\n    https://ibm.ent.box.com/file/267218666061\n  \n  \n    Low Code\n    https://ibm.ent.box.com/file/266895535872\n  \n  \n    Serviceability\n    https://ibm.ent.box.com/file/266287199362\n  \n  \n    Robotic Process Automation with Coaches\n    https://ibm.ent.box.com/file/264675449771\n  \n  \n    BAL Rule Support in Service Flows\n    https://ibm.ent.box.com/file/263765080890\n  \n  \n    Indexers monitoring and administration with JMX\n    https://ibm.ent.box.com/file/258859800684\n  \n  \n    IBM RPA\n    https://ibm.ent.box.com/file/264970417241\n  \n  \n    PFS Index Diagnostic Tool\n    https://ibm.ent.box.com/file/264512319608\n  \n  \n    DEF events for service flows\n    https://ibm.ent.box.com/file/263667051178\n  \n  \n    BPM Swinging Profiles\n    https://ibm.ent.box.com/file/262145635547\n  \n  \n    BPM Work List in IBM Content Navigator\n    https://ibm.ent.box.com/file/257980318823\n  \n\n  IBM Business Process Manager 8.6 GA - Education & Deep Dive\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n  \n  \n    Session Recording Part 1\n    https://ibm.ent.box.com/file/236564039188\n  \n  \n    Session Recording Part 2\n    https://ibm.ent.box.com/file/237211193432\n  \n  \n    Digital Process Automation with BPM and Blockchain\n    https://ibm.ent.box.com/file/236512313987\n  \n  \n    Performance Dashboard\n    https://ibm.ent.box.com/file/234901465572\n  \n  \n    Performance and Scalability Summary\n    https://ibm.ent.box.com/file/236217958617\n  \n  \n    IBM RPA\n    https://ibm.ent.box.com/file/236174016926\n  \n  \n    Content Coach Views\n    https://ibm.ent.box.com/file/235678532953\n  \n  \n    Global Where Used In WebPD\n    https://ibm.ent.box.com/file/235624961754\n  \n  \n    UI Conversion\n    https://ibm.ent.box.com/file/235587994074\n  \n  \n    WebPD-Eclipse Modeling Gaps Addressed\n    https://ibm.ent.box.com/file/229928177840\n  \n  \n    Continous Delivery squad\n    https://ibm.ent.box.com/file/227018758988\n  \n  \n    InstanceMigrationAPI\n    https://ibm.ent.box.com/file/226363099135\n  \n  \n    Portal\n    https://ibm.ent.box.com/file/226104022344\n  \n  \n    Advanced Integration Service (AIS) support in Web PD\n    https://ibm.ent.box.com/file/223894999904\n  \n  \n    BPD and BPEL index logging improvements\n    https://ibm.ent.box.com/file/219913919576\n  \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Test Environments","description":"enricom@cn.ibm.com","owner":"@Enrico Monteleone","path":"/BusinessProcessManager/GeneralBPM/TestEnvironments","text":"\nSummary\nThis section provides links and information about building and maintaining software testing environments for training and for case handling. For case handling, always use an IBM-approved environment and properly secure and maintain your environment to ensure security compliance.\n\nPlease send feedback to <a href=\"mailto:enricom@cn.ibm.com?subject=IBadges%20-%20Test%20Environments\"enricom@cn.ibm.com.\n\n Contents\n<a href=\"#day1\"Test Environments for New IBMers on Day 1\n<a href=\"#virtualization\"Virtualization Basics\n<a href=\"#workstation\"Workstation Software\n<a href=\"#cases\"Test Environments for Cases - Use Castle\n<a href=\"#training\"Test Environments for Training (everything else)\n\n---\n\nTest Environments for New IBMers on Day 1\n\nWelcome to IBM! As a new IBMer, it may take time to setup your user accounts, so here are some quick ways to get started now. Find your product below, check the overview, and explore the test environment. Work with your team lead or onboarding buddy to assist with setup and access.\n\n&nbsp;\n\n Business Process Manager (BPM) and Business Automation Workflow (BAW)\n\nBPM Overview: https://www.ibm.com/support/knowledgecenter/SSFTBX8.5.7/com.ibm.wbpm.main.doc/topics/ibmbmpoverview.html\n\nBAW Overview: https://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.workflow.main.doc/topics/overview.html\n\nTest Environment: (Need local BAW virtual machine due to w3 ID requirements)\n\n&nbsp;\n\nOperation Decision Manager (ODM)\n\nODM Overview: https://www.ibm.com/products/operational-decision-manager\n\nODM Test Environment (Need local BAW virtual machine due to w3 ID requirements)\n\n&nbsp;\n\n Blueworks Live (BWL)\n\nBWL Overview: https://www.ibm.com/products/blueworkslive\n\nBlueworks Live: :https://www.blueworkslive.com/sLogin.html\n\n&nbsp;\n\nRobotic Process Automation (RPA)\n\nRPA Overview: https://www.ibm.com/automation/software/rpa\n\nRPA Test Environment (Need local BAW virtual machine due to w3 ID requirements)\n\n&nbsp;\n\nThis is the end of the Day 1 section. To continue to the next sections, you may need to wait for your IBM w3 ID or wait for additional security access requests.\n\n---\n\n Virtualization Basics\n\nVMware Virtualization 101: https://yourlearning.ibm.com/#activity/URL-6LDY9BATAQC\n\nDocker and Containers: https://yourlearning.ibm.com/#activity/URL-TE77BE4006052:BE387B81-043C-4B0D-8CAE-25E5F47E8F88\n\nRed Hat OpenShift 101: https://yourlearning.ibm.com/#activity/URL-1FC0F699E132\n\n&nbsp;\n\nFor additional learning, search Your Learning: https://yourlearning.ibm.com/\n\n---\n\nWorkstation Software\n\nTo access different remote servers and test environments, setup the necessary software on your laptop or workstation.\n\n&nbsp;\n\n Apple MacOS\n\nMac@IBM: In MacOS, open the Mac@IBM App Store.\n\nMicrosoft Remote Desktop: Install from Apple App Store (Install official Microsoft app)\n\nSSH: In MacOS, open Terminal to use SSH to connect to remote hosts.\n\nVNC: Currently, there are no IBM officially supported VNC options.\n\n&nbsp;\n\nMicrosoft Windows\n\nPC@IBM: http://w3-01.ibm.com/download/standardsoftware/PC/lang_en/issiCatalogPC.html\n\nPuTTY: In PC@IBM, search for \"PuTTY\"\n\nMicrosoft Remote Desktop (RDP): In Microsoft Windows, Start  type \"mstsc\" [Enter]\n\nVNC: Currently, there are no IBM officially supported VNC options.\n\n&nbsp;\n\n Redhat Linux\n\nLinux@IBM: https://w3-connections.ibm.com/communities/service/html/communitystart?communityUuid=801cf8e1-364a-48ec-ac2d-aa091376fff6\n\nSoftware: You can use the Linux graphical user interface to install software or use the yum package manager in the terminal. The IBM Linux OpenClient has most of the software you will need pre-installed.\n\nSSH: Use the terminal.\n\nVNC: Currently, there are no IBM officially supported VNC options.\n\n---\n\nTest Environments for Cases\n\nDo not copy case information outside of the official case handling IBM systems, Salesforce for Support (Cognitive Support Platform) and Castle. These are special systems designed to comply with all security requirments.\n\nCastle secure enviroment for support cases: https://castle1.fyre.ibm.com/\n\nSee the Castle website for onboarding and use details.\n\n---\n\n Test Environments for Training - No Client Data Here!\n\nYou can use the following resources to create test environments for learning or for case testing, but do not copy or import any client data into these enviornments. For handling cases with client information, use Salesforce and Castle systems.\n\nDocker images for BAW 19.0.0.3 (2019-12-19, Klaus)  \nYou can use to quickly create a BAW test server on Castle and Fyre or on your local machine (Mac and Linux currently working).  \n  \nPlease have a look at https://github.ibm.com/klaus-ulrich/bpmbpm-and-baw-on-docker-for-castle-and-fyre for all the details needed to get started with this approach.  \n  \nThe wiki space https://github.ibm.com/klaus-ulrich/bpm/wiki has some additional infos and links to previous presentations with recordings.  \n  \nIf anything is not working as described/expected, feel free to open a github issue on https://github.ibm.com/klaus-ulrich/bpm/issues  \n  \nI have installed a BAW 19.0.0.3 test environment on Fyre, which is connected to a BAI environment running on OpenShift. You can use/access this environment as a playground. \n  \nPlease have a look at https://github.ibm.com/klaus-ulrich/openshift/wiki/BAW-and-BAI-Test-Server for further details.  \n\nBAI on OpenShift (2019-09, Klaus)\n\nhttps://github.ibm.com/klaus-ulrich/openshift\n\n&nbsp;\n\n Install a private Docker Registry with a Web admin interface (2019-09, Klaus)\n\nhttps://github.ibm.com/klaus-ulrich/registry\n\n&nbsp;\n\nLocal workstation with Docker (2019-09, Klaus)\n\nhttps://github.ibm.com/klaus-ulrich/bpm\n\n&nbsp;\n\n Fyre (2019-09)\n\nFyre.ibm.com (currently at capacity, but you can submit your request for onboarding.)  \nhttps://fyre.ibm.com/\n\nFyre Help  \nFyre can be used by a developer to deploy individual VMs (we call them \"Embers\") or sets of VMs (which we call \"Stacks\"). Fyre can also deploy clusters of baremetal systems on various types of hardware.  \nhttps://fyre.ibm.com/help  \n\nSlack: #fyre-announcements\n\n&nbsp;\n\nRing Cloud + Minishift (2019-09)\n\nIf you want a small Openshift test environment, then you can try Minishift. Although not efficient, it is possible to install Minishift on top of a virtual machine in the Ring Cloud, so you do not need to install any extra software on your laptop.\n\nMinishift Home\n\nGenral Instructions:\n\nCreate a Ring Cloud virtual machine.\n\nSubmit a <a href=\"https://oneticket.rtp.raleigh.ibm.com/OneTicket/frontend/mainpage/index.html!/login\" target=\"_blank\"OneTicket request to enable VT/VX on the virtual machine. Requires virtual machine to be shutdown.\n\n<a href=\"https://docs.okd.io/latest/minishift/getting-started/setting-up-virtualization-environment.html#setting-up-virtualbox-driver\" target=\"_blank\"Install Virtual Box.\n\nInstall Minishift.\n\n&nbsp;\n\nRing Cloud (2019-09)\n\nFor team members located in Beijing, you can use the Ring Cloud.\n\nStep 1) Ensure you have your IBM w3 ID.\n\nStep 2) Login to https://itaas.cn.ibm.com/\n\nStep 3) Contact your team lead or manager to request team resources in the Ring Cloud. Estimate a minimum of 4 CPU, 16GB RAM, 100GB disk per test server.\n\nStep 4) Create a virtual machine, Linux or Microsoft Windows.\n\nStep 5) Download your desired IBM product installation software.\n\nStep 5a) Primary (Linux example)  mount -t nfs 9.111.141.56:/dba-share1 /mnt/dba-share1\n\nStep 5a) Primary (Windows example) C:\\ net use s: \\\\9.111.141.56\\dba-share1 /user:dba-share\nTo get Windows credentials for \\\\9.111.141.56\\dba-share1, run C:\\ net view 9.111.141.56\n\nStep 5b) Alternate: https://w3-03.ibm.com/software/xl/download/ticket.wss, Example search, \"IBM Business Process Manager 8.6 Windows\" or search for the Assembly number.\n\n&nbsp;\n\n Blue Demos (2019-09)\n\nhttps://ibm.ent.box.com/v/DBADaL19-0GettingStarted\n\nhttps://bluedemos.com/search\n\n&nbsp;\n\nIBM Cloud (CIO internal) (2019-09)\nhttps://console.w3ibm.bluemix.net/\n\n&nbsp;\n\n IBM Cloud (Public) (2019-09)\nhttps://console.ng.bluemix.net/\n\n---\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Knowledge Buckets","description":"","path":"/BusinessProcessManager/GeneralBPM/Knowledgebuckets","text":"\nDocker and Source Code Search Utility Training\nDate: 2019-07-31\n\n Links:\nRecording: <a href=\" https://github.ibm.com/klaus-ulrich/bpm/wiki#presentation-on-2019-07-31---search-engine-demo-session\" target=\"_blank\" https://github.ibm.com/klaus-ulrich/bpm/wiki#presentation-on-2019-07-31---search-engine-demo-session\nGitHub: https://github.ibm.com/klaus-ulrich/bpm\nDBA Source Code Search Utility: https://search-engine.w3ibm.mybluemix.net/\nCloud Pak for Automation Support Education: https://yourlearning.ibm.com/#activity/CPB-1565210900553","wordCount":0,"topics":[],"type":"Content"},{"name":"Installation","description":"FHERDADE@de.ibm.com","owner":"@Fabiola Herdade","path":"/BusinessProcessManager/Install,Upgrade,Configuration/Installation","text":"BPM/BAW Installation Fundamentals Education \n\nBPM/BAW (Business Process Manager/Business Automation Workflow) Fundamentals Education is an overview of BPM/BAW products. This module teaches the basics of installing and troubleshooting BPM/BAW. This module serves as the basis for in-depth education modules on BPM/BAW Installation. \n\n 1. IBM Installation Manager (IIM):\n\nIBM Installation Manager is a tool that you can use to install and maintain your IBM software packages. Wizards guide you through the steps that you must take to install, modify, update, roll back, or uninstall your IBM products. \nIBM Installation Manager is used to install WAS/BPM binary files. \n\na. How to reinstall Installation Manager without removing installed IBM product \nhttp://www-01.ibm.com/support/docview.wss?uid=swg21290142 \n\nb. What are the critical directories that you must back up in case of Installation Manager data loss or corruption?\nhttp://www-01.ibm.com/support/docview.wss?uid=swg21665878\n\nc. Installing packages by using Installation Manager command line tool (imcl) https://www.ibm.com/support/knowledgecenter/en/SSDV2W1.8.1/com.ibm.cic.commandline.doc/topics/timcl_install.html\n\nd. IM log files\nhttps://www.ibm.com/support/knowledgecenter/en/SSVJJU6.4.0/com.ibm.IBMDS.doc6.4/cigibmimsdslog_files.html\n\n  the IM log is a xml file you will find it under IMHOME/data/logs i.e 201804041014.xml\n  there are different tags available:\n    Info = Green\n    Warning = Yellow\n    Error = Red\n\ne. Using the imcl command to rollback:\nhttps://www.ibm.com/developerworks/community/blogs/aimsupport/entry/usingimclcommandlinetorollbackwebsphereapplicationserverfixpacks?lang=en\n\nf. KC link to Rolling back packages by using imcl commands:\nhttps://www.ibm.com/support/knowledgecenter/en/SSDV2W1.8.5/com.ibm.cic.commandline.doc/topics/timcl_rollingback.html\n\n2. BPM Installation\n\nEach of the IBM Business Process Manager configurations has its own roadmap to guide through installing and configuring that version of the software. \n\na. Installation directories for the product and profiles\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.doc/topics/rinsinstallation_paths.html\n\nb. Deprecated and removed features\nCheck in the KC for the \"Deprecated and removed features\" for the specific versions\n\nc. BPM Software Requirements:\nBusiness Process Manager detailed system requirements\nhttp://www-01.ibm.com/support/docview.wss?uid=swg27023005\n\nIBM Business Process Manager Express detailed system requirements\nhttps://www-01.ibm.com/support/docview.wss?uid=swg27023008\n\nJava compatible matrix\nhttp://www-01.ibm.com/support/docview.wss?uid=swg21639640\n\nIBM Business Process Manager Tools & Add-Ons detailed system requirements\nhttps://www-01.ibm.com/support/docview.wss?uid=swg27023009\n\nd. BAW software requirements\nIBM Business Automation Workflow detailed system requirements\nhttps://www-01.ibm.com/support/docview.wss?uid=swg27051102\n\n 3. Troubleshoting the BPM / BAW Installation\n\na. Installation and profile creation log files:\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/rinslogfiles.html\n\nb. Mustgather installation / upgrade:\n\n 1)Ask for the mustgather as described in this technote\n http://www-01.ibm.com/support/docview.wss?uid=swg21506937\n\n 2)Ask for the versioninfo:\n Exporting a versioninfo from install_root/bin/ using\n  versionInfo -fixpacks -ifixes  versioninfo.txt\n  or\n  versionInfo -long  versioninfo.txt\n\n 3)Check for the following points:\n  Is configuration described in the problem description supported?\n\n Check the software requirement report\n  Is there any errors in the problem description or logs?\n\n Search for the error in RTC or Prosol to check if this is a known issue\n\nc. important files to request/review\ninstall_root/logs/* -- general installation log files (BPMConfig)\nDmgr/properties/service/productDir/* -- configAction log files\nDmgr/logs/* -- BPMProfileUpgrade, bootstrapProcessServerData, BPMConfig files\n\nd. Successfull Installation\nWhen using IM Graphical mode\nLaunch the Installation Manager GUI, and verify the installation by going to File  View Installed Packages.\n\nWhen using imcl command\n./imcl listInstalledPackages | imcl.exe listInstalledPackages\nThe output of this command will display a list indicating which packages this Installation Manager has installed.\nFor example:\n\nWhen the -log option was used during installation, you can verify that the resulting log file does not contain any errors.\n\ne. Rollback failed\n\nMost part of the time the problem is:\n1)There is no installation history anymore. The customer has a new installation of IM and did not make a backup of his data repository.\n2)The data repository is in other path, not in the same as the IM_HOME\n3)The data repository is corrupted (in this case only L3 can help)\n\nAsk for the versioninfo: Exporting a versioninfo from install_root/bin/versionInfo -fixpacks -ifixes  versioninfo.txt\n\nInstallation Manager (IM) Saved Files for Rollback:\nFiles are saved in the IMShared directory. The default behavior is to save the files for rollback. To view or change this option:\nUsing Graphical mode:  File  Preferences  Files for RollBack  Check or Uncheck Save Files for RollBack\nUsing console mode:  imcl -c (from IM_HOME/eclipse/tools )\nSelect \"P\"\nSelect \"3\"\nSelect \"1\" to save or not to save files for rollback\n\nQuestions to ask to the customer\nif can tell you the product installation History.\nto see the possible rollback versions run the command imcl listInstalledPackages -verbose\nto see the versions to which the customer can perform a rollback imcl listInstalledPackages –rollbackVersions\n\n4. iFix Installation:\na. the instructions how to install a an ifix is always in the readme file\nb. check if the ifix has a prerequisite, if yes inform the customer\nc. Technote explaining how to install an ifix:\nhttps://www-01.ibm.com/support/docview.wss?uid=swg21417656\n\nExporting a versioninfo from install_root/bin/ checking it for the iFix number is sufficient:\nversionInfo -fixpacks -ifixes  versioninfo.txt\nor\nversionInfo -long  versioninfo.txt\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Upgrade","description":"bjzysun@cn.ibm.com","owner":"@Zhen Ye Sun","path":"/BusinessProcessManager/Install,Upgrade,Configuration/Upgrade","text":"BAW/BPM Upgrade and Migration\n\n Overview \nAlways encourage client to upgrate to the latest software versions to avoid running production systems on an unsupported configuration. Note that upgrades are different from migrations. Upgrades are an in-place upgrade of software. Migrations involve moving to a different platform, a different database, operating system or hardware.\n\nBAW 18 Upgrade Note (2019-12-24):  \nIf BAW 18 was installed using the Typical Installation method, then complete step 20 BEFORE upgrading.\nUpgrading profiles from IBM Business Automation Workflow V18.0.0.x or V19.0.0.x to IBM Business Automation Workflow V19.0.0.3  \nhttps://www.ibm.com/support/pages/node/1103457  \n\n1.IBM Installation Manager (IIM):\n\nIBM Installation Manager is a tool that you can use to upgrade your IBM software packages. Wizards guide you through the steps that you must take to install, modify, update, roll back, or uninstall your IBM products.\nIBM Installation Manager is used to install WAS/BPM binary files.\n\na. What are the critical directories that you must back up in case of Installation Manager data loss or corruption?\nhttp://www-01.ibm.com/support/docview.wss?uid=swg21665878\n\nb. IM log files\nhttps://www.ibm.com/support/knowledgecenter/en/SSVJJU6.4.0/com.ibm.IBMDS.doc6.4/cigibmimsdslog_files.html\n\n  the IM log is a xml file you will find it under IMHOME/data/logs i.e. 201804041014.xml\n  there are different tags available:\n    Info = Green\n    Warning = Yellow\n    Error = Red\n\n 2.BPM/BAW Upgrade Roadmap:\n\nEach of the IBM Business Process Manager configurations has its own roadmap to guide through upgrading and configuring that version of the software. \n\nFind all the supported upgrade roadmaps(for different source and target versions) from below link: \nhttps://www-01.ibm.com/support/docview.wss?uid=swg21610883\n\na.\tBPM upgrade:\nhttps://www-01.ibm.com/support/docview.wss?uid=swg27050085\n\nb.\tBAW upgrade: \nhttps://www-01.ibm.com/support/docview.wss?uid=swg27050790\n\nc.\tAttention:\nThere are some steps you can ignore/skip for Advanced-Only setup.\nBPMv860 ships option to switch to Java 1.8\nUsually rollback is needed if DBUpgrade task failed\nUsually rollback is not needed if BootstrapProcessServerData or Toolkit upgrade fails  \n\n3.BPM/BAW Upgrade log:\n\na.\tProvide the log files if the profiles have already been created.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compress all files from the following directory :\n\ndeploymentmanager profile_root/logs/            \n(contain logs related to database initialization and upgrade) \ndeploymentmanager profile_root/properties/\n(contain logs related to configAction and logs) \ndeploymentmanager profile_root/workspace/\n(contain flags related to successful upgrade)\n\nb.\tMonitor the /properties/service/productDir/logs/runConfigActions.log file to see the activity that is in progress during the profile upgrade process.\nlogs to check: /logs\nDBUpgrade_timestamp.log (upgrade database schemas and data)\nbootstrapProcessServerData.log (loading DB with system information)\nBPMConfig_xxxxx.log (create, update, upgrade or delete an IBM BPM deployment environment)\nBPMUpdateSystemApp_xxxxx.log (update on app [twx] level)\n\nCheck for INSTCONFSUCCESS or INSTCONFFAILED If running DBUpgrade was unsuccessful, correct the errors and restore your databases from the backup before running the command again.\n\nc.\tThose log can be collected by using the IBM Business Process Manager data collector:\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/ttroisa.html\n\nd. To enable wsadmin.properties trace for an upgrade issue with the BPMUpdateSystemApp/bootstrap command, do the following:  \nModify the wsadmin.properties file located in the following directory:  \ninstallroot/profiles/profilename/properties/  \n  \nReplace following line:  \n    com.ibm.ws.scripting.traceString=com.ibm.*=all=enabled  \n  \nWith this line:  \n    com.ibm.ws.scripting.traceString=WLE.=all:org.springframework.jdbc.=all:WAS.clientinfopluslogging=all \n\n4.BPM Upgrade troubleshooting checklist\n\na.\tYou should be able to find the product version info from dbupgradexxx.log file:\nSource version is : 8.6.1.xxxxxx\nThis version info should match that in BPM configuration properties if customer follow the upgrade procedure correctly\n(you may find the log shows upgrade from version XXX to version YYY, but XXX and YYY are not correct version, that does not mean upgrade goes wrong. It’s output in middle of upgrade process)\n\nb.\tMake sure the database table upgrade is successful in dbupgradexxx.log\nIf it failed, you will find an error in this log\n\nc.\tIn BPMconfigupgradexxx.log, make sure you can find the upgradeApplicaiton records for those BPM applications. So that you know the upgrade does happen. You should also make sure there is no error found in this log.\n\nd.\tIn bootstrapProcessServerData.log, you should find: bootstrapping of data completed successfully if the upgrade procedure is good. There will be an error message if upgrade fails.\n\ne.\tIn BPMUpdateSystemApp_xxxxx.log, you should be able to find BPMUpdateSystemApp completed successfully in at the end of log if the upgrade procedure is good.\n\nf.\tAfter checking those logs under DMGR profile, you need also check the BPMconfigxxx.log under node profile, make sure there is no error.\n\ng.\tCheck the nodeagent snycNode.log, make sure the Synchronization is successful.\n\n 5.BPM Environment Backup\n\nBPM environments need backup before upgrade.\n\na.\tInstallation Manager Backup --- You need backup four Installation Manager folds: 1)IM Registry File, 2)IMShared, 3)IM Agent Data, 4)IM Install Dir\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use OS utility or OS command to backup above IIM paths.\n\nb.\tProfile Backup --- Before you upgrade a product, run the backupConfig command to back up the configuration files of each profile.\n\nc.\tDatabase (BPMDB, CMNDB, PDWDB) --- Ask database administrator to backup BPM databases. Make a backup of the databases at the same time as making the profile backup.\n\nd.\tBPM customization --- Backup customized artefacts before upgrade, in case any customization is missing during upgrade. ( theme.css、collaboration.css、img)\n\n6.BPM Upgrade failure samples\n\nIf BPM/BAW upgrade fails, find the correct log by referring “BPM/BAW Upgrade log” section. There are some samples here:\n\na. Upgrade failed at bootstrapping of the Process Server, check databasebootstrapProcessServerData.log and find:\n[xxxxxx] xxxxxx AntTasksHelpe I  UserId could not retrieved, Either DeAdmin role is not set or Cell Admin role is not set\n\nPossible solution:\nCheck whether the right user id with appropriate authorization was deployed and have a look at table LSWUSRXREF in the Process Server database to confirm that the upgrading user id is listed there.\n\nb. Upgrade failed at BPMUpdateSystemApp failed, check BPMUpdateSystemApp.log and find:\n\n[xxxxx] MutableSnapsh W CWLLG0523I: Ignoring identical dependency PODependency(source=TWProcess.ed8d1a03-7895-4126-ac69-e94ea4349be8, sourceReferenceLocation=Coach:2025.3b7ce7d2-b133-40b9-91bc-8543896da95b/CoachView:/64.ad2b879f-ee68-4bc9-9b1b-fb7c0856a48e, reference=Ref[/CoachView.ad2b879f-ee68-4bc9-9b1b-fb7c0856a48e]).\n\nPossible solution:\nThe only explanation for this appears to be the BPM database may have been corrupted during the initial BPMUpdateSystemApp run. If the Toolkits are not upgraded properly, there is a potential problem with mismatch between the System Application, installed binary and toolkits in the database.\n\nNeed revert the system back to the time before they started the upgrade so they applied a backup of the database and the BPM binaries\n\nc. Upgrade failed at DBUpgrade command, (Customer upgrade from 8.5.5 to 19.0.0.2) check DBUpgrade_timestamp.log and find:\n\n[xxxxx] failed at 8.5.6 to 8.5.7\n[xxxxx] 00000001 FINE: com.lombardisoftware.tools.SQLFileExec.handleError - ORA-30556: either functional or bitmap join index is defined on the column to be modified ORA-06512: at line 9\njava.sql.SQLException: ORA-30556: either functional or bitmap join index is defined on the column to be modified ORA-06512: at line 9\n\nPossible solution:\nBPM database upgrade failed at 8.5.6 to 8.5.7 step with bitmap join index error. That needs to check if there is bitmap join index and disable it. After correcting the error and restore the database from the backup, then run the DBUpgrade command again. That will see upgrade 8.5.6 to 8.5.7 success.\n\nWhat can be seen from these samples is that it is important to understand where the upgrade failed and find the correct log file to check. Usually you need look at the very first failure that occurred in the log files to find the real cause and resolve the problem.\n\n News \n\n2019-12-24 - Typical Installation Upgrade Warning BAW 18 to BAW 19\nIf you performed a Typical Installation for BAW 18, then upgrade to BAW 19, you must complete the CPE configuration tasks, as BAW 19 requires this before upgrade.\n\n(STEP 20 MUST BE COMPLETED BEFORE UPGRADING). Upgrading profiles from IBM Business Automation Workflow V18.0.0.x or V19.0.0.x to IBM Business Automation Workflow V19.0.0.3  \nhttps://www.ibm.com/support/pages/node/1103457  \n  \ncreateObjectStoreForContent command  \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.ref.doc/topics/rref_createobjectstoreforcontent.html  \n\nRunning the development environment case configuration tasks  \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.imuc.doc/topics/acmin123.html  \n\n2019-09 - BPM Upgrade Information\n\nFriendly reminder to please us this link with BPM customers when discussing upgrading to the latest product level. This is a good link to send to any customer still using BPM to warn them of the impending EOS dates but especially for an upgrade discussion.  \nhttps://www.ibm.com/support/pages/upgrading-business-process-manager-latest-product-level\n\nAlso if you happen across an ESB customer we do have this similar link for them:  \nhttps://www.ibm.com/support/pages/upgrading-websphere-enterprise-service-bus-wesb-or-ibm-business-process-manager-enterprise-service-bus-bpm-esb\n\n 2019-09 - Oracle Support\n\nFor background, Oracle changed their lifecycle policies. It is described in this article:  \nhttps://support.oracle.com/knowledge/Oracle%20Database%20Products/742060_1.html\n\nOur customers have been a bit confused by this and are starting to ask a lot of questions regarding Oracle support.  \nThe following things can be shared with customers:  \nOracle 12.2 is supported starting with BPM 8.6 2017.12  \nWe are changing our SPCRs so that 18C is also supported by all releases which support 12.2.  \nDetailed System Requirement reports are now updated and we do support Oracle 19c with all BPM 8.6 and BAW 18.x  \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Migration","description":"bjzysun@cn.ibm.com","owner":"@Zhen Ye Sun","path":"/BusinessProcessManager/Install,Upgrade,Configuration/Migration","text":"Date:2019-11-11\n\nOverview\n\nBusiness Process Manager/Business Automation Workflow  (BPM/BAW) Fundamentals Education is an overview of BPM/BAW products. This module teaches the basics of migration and troubleshooting BPM/BAW migration issues. This module serves as the basis for in-depth education modules on BPM/BAW migration.\n\n 1.Migration Overview:\n\nA product migration applies when you want to move the current installed product version to a new product version. In most of the cases you can identify a migration by checking the product version number. The major product version is defined by the first digits and the cumulative fixes packs by the last digits. \nFor example:\n\nMajor version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\t\t\tCumulative fix\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BPM 8.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.0.1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BPM 8.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.5.5 / 8.5.6 /8.5.7\n\nA version to version migration requires a full installation of the binary files of the new version.The new binary files (the new version) are in a different directory than the old binary files (the old versions).\n\nA hardware migration requires a full installation of the binary files of the new version.The new binary files (the new version) are in a different location(hardware) than the old binary files (the old versions).\n\nFind all the supported upgrade roadmaps(for different source and target versions) from below link: \nhttps://www-01.ibm.com/support/docview.wss?uid=swg21610883\n\n2.IBM Installation Manager (IIM):\n\nIBM Installation Manager is a program that helps you to install IBM products. Wizards guide you through the steps that you must take to install, modify, update, roll back, or uninstall your IBM products. It keeps track of what you are about to install, software components that you have already installed, and components that are available for you to install. \n\nIn a migration process, if the IIM is installed on new hardware you must  make a backup of the agent data location directory of the old installation to keep track of the installation history:\n\nHere is a technote how to restore the IM history with BPM and BAW:  \nhttps://www.ibm.com/support/pages/restoring-ibm-installation-manager-history-ibm-business-process-manager-bpm-and-websphere-enterprise-service-bus-wesb\n\nNOTE: Changing the content, files, or directories in the agent data location directory or subdirectories is not supported. Any modification to this data is likely to cause corruption of the installed packages making it impossible to update, uninstall, modify, rollback, or install any packages in the future.\n\na. What are the critical directories that you must back up in case of Installation Manager data loss or corruption?\nhttp://www-01.ibm.com/support/docview.wss?uid=swg21665878\n\nb. IM log files\nhttps://www.ibm.com/support/knowledgecenter/en/SSVJJU6.4.0/com.ibm.IBMDS.doc6.4/cigibmimsdslog_files.html\n\nthe IM log is a xml file you will find it under IMHOME/data/logs i.e. 201804041014.xml\nthere are different tags available:\n  Info = Green\n  Warning = Yellow\n  Error = Red\n\n 3.BPM/BAW Migration:\n\na. BPM Migration:\n\nMost customers use the Interactive Migration Guide to prepare migration from systemX/BPMX -- systemY/BPMY. \nInteractive Migration Guide link:\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.imuc.doc/topics/bpmmigroadmapform.html\n\nMigration Mustgather: \nhttps://www-01.ibm.com/support/docview.wss?uid=swg21663802\n/profiles/dmgrprofilename/dbscripts\n/logs\n/profiles/dmgrprofilename/logs\n<BPMinstallroot/profiles/profile_name/logs\n/logs\n\nb. BAW Specific:\nPlanning Migration:\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB418.0.0/com.ibm.wbpm.imuc.doc/topics/cplnmig_planning.html\n\nc. Same version to new hardware:\nExport config from old env with BPMConfig \nImport config to new env with BPMConfig:\nhttps://www.ibm.com/support/knowledgecenter/SS8JB418.0.0/com.ibm.wbpm.imuc.doc/topics/newhwde.html\n\n4.BPM/BAW Migration Troubleshooting\n\nIf your deployment environment was not migrated successfully, you can take steps to resolve issues. Consider the following possibilities: \nSOAP invocation timeout might have occurred; \nMigration commands for the target environment failed.\nMigration commands for the source environment failed.\n\nRead this page if any migration issue:\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/rmigtrouble.html\n\na. SOAP invocation timeout\nIf you are using a SOAP connection, the migration command can take longer to complete than the specified SOAP timeout value. You might see an exception like java.net.SocketTimeoutException: Read timed out.\n\nTo prevent this problem, modify the value of the com.ibm.SOAP.requestTimeout property in the soap.client.props file.\n\nIf you installed the new version of the product on the same computer as the source environment, the file is found in BPMhome8.5/util/migration/resources/.\n\nIf you installed the new version of the product on a different computer and copied the migration files to the source environment, the file is found in remotemigrationutility/util/migration/resources/.\n\nb. Migration commands on target environment\nTo diagnose the reason for a migration failure, you can enable tracing and rerun a command. To enable tracing for migration commands, complete the following steps:\n\n1)Locate the logging.properties file.\nFor the DBUpgrade command-line utility, \nthe file is in BPMhome8.5/util/dbUpgrade. \n\nFor the following command-line utilities:\nBPMExtractSourceInformation\nBPMManageApplications\nBPMMigrate\nthe file is in BPMhome8.5/util/migration/resources. \n\n2)Set the log level in the logging.properties file. \n\nThe default log level is FINE for both global logging level and file output log level. Change both properties to FINEST to capture more detail in the log. \n\nc. Migration commands on source environment\nIf you ran all the migration commands on the source environment and created a snapshot before the migration failed, you do not need to rerun all the migration commands again from the beginning. If the migration failed on the target, for example at the database upgrade step or when you ran the BPMMigrate command, you can restore the database and rerun the commands on the target only.\n\nPlease see the Upgrade page.  \nhttps://pages.github.ibm.com/dba-support/DBA-Education//BusinessProcessManager/Install,Upgrade,Migration/Upgrade\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Disaster Recovery","description":"enricom@cn.ibm.com","owner":"@Enrico Monteleone","path":"/BusinessProcessManager/Install,Upgrade,Configuration/DisasterRecovery","text":"\n\nBackup, High Availability (HA), and Disaster Recovery (DR)\n\n Business Automation Workflow (BAW) / Business Process Manager (BPM)\n\nStrategy\n\nBackup and recovery planning depends on business requirements. When planning a production environment, all stakeholders should be involved in the planning process to create a system that will meet business requirements with respect to data loss tolerance and time to recovery, balanced with costs.\n\n Tools\n\nMany IBM and third-party tools exist for backup and recovery for every component in the production environment. All stakeholders, including networking, systems, storage, database and application teams must work together to create a complete plan that ensures a stable environment and minimizes risk against unplanned outages by using the best set of hardware and software to manage, maintain and test backup, high-availability, and recovery systems.\n\nBackup\n\nBacking up data\n\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.admin.doc/topics/cadmrecoverybackup.html\n\nBacking up databases\n\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.imuc.doc/topics/tinsbackupdatabases.html\n\n Troubleshooting Backups\n\nHigh-Availability (HA)\n\nConsiderations for HADR setup and configuration\n\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.imuc.doc/topics/chadr_considerations.html\n\nBusiness Automation Workflow Workflow with DB2 HADR for Production\n\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.cloud.vap.doc/topics/rbpmpriclovsppredfconfig.html\n\n Troubleshooting HA\n\nDisaster Recovery (DR)\n\n Troubleshooting DR\n\nWebSphere (WAS)\n\nSince IBM Business Process Manager (BPM) runs on WebSphere Application Server (WAS), you may also need to consider WAS HA and DR, especially if other non-BPM applications are hosted on WAS. Clients often must work with their WAS and infrastructure teams to ensure an overall and complete HA and DR configuration.\n\nWebSphere Application Server\nhttps://www.ibm.com/support/knowledgecenter/SSAW57/mapfiles/productwelcomewasnd.html\n\n Database\n\nSince IBM Business Process Manager supports IBM Db2, Microsoft SQL Server and Oracle databases, you also must consider the database HA and DR strategy and configuration. Clients often must work with their database administrators (DBAs) to ensure an overall and complete database HA and DR configuration.\n\nIBM Db2\n\nIBM Db2 Version 11.1 Knowledge Center\nhttps://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.welcome.doc/doc/welcome.html\n\nDb2 - Troubleshooting HADR\nhttps://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.admin.trb.doc/doc/c0060652.html\n\n Microsoft SQL Server\nhttps://docs.microsoft.com/en-us/sql\n\nOracle Database\nhttps://docs.oracle.com/en/database/oracle/oracle-database/index.html\n","wordCount":0,"topics":[],"type":"Content"},{"name":"DE Configuration","description":"enricom@cn.ibm.com","owner":"@Enrico Monteleone","path":"/BusinessProcessManager/Install,Upgrade,Configuration/DE Configuration","text":"Configuration\n\n Contents\n<a href=\"#acronyms\"Acronyms  \n<a href=\"#overview\"Overview  \n<a href=\"#prerequisites\"Prerequisites  \n<a href=\"#components\"Components and Troubleshooting  \n<a href=\"#tools\"References  \n\n---\n\nAcronyms\nICPA - IBM Cloud Pak for Automation  \nBAW - IBM Business Automation Workflow (In this document, BAW refers to either BAW or BPM)  \nBPM - IBM Business Process Manager  \nCLI - Command Line Interface  \nGUI - Graphical User Interface\n\n---\n\n Overview\nThis section describes the tools and procedures for BAW configuration. Since BAW includes different components, there are different configurations to understand. BAW also provides multiple tools and interfaces for configuration, such as GUI-based configuration tools and command-line configuration tools.\n\nFrom an Open Systems Interconnection (OSI) model perspective, we can consider the following aspects of BAW configuration:\nNetwork - IPv4, IPv6, DNS, NTP\nTransport - TCP/UDP ports\nSessions - Communications wait times and timeouts\nPresentation - Security protocols, SSL, Kerberos\nApplication - WebSphere (WAS), databases, web browser application\n\nFrom a system lifecycle perspective, we can consider the following aspects of BAW configuration:\nInstallation setup and configuration, including the IBM Installation Manager itself\nMaintenance and tuning for specific environments\nTroubleshooting, configuring log files and and traces\nUpgrades and migrations\n\n---\n\nPrerequisites\n\nConfiguration of BAW/BPM requires a basic understanding of the product and related components, including WebSphere and the database (DB2, Oracle, or Microsoft SQL Server). For command-line tasks, you should be familiar with Linux and Microsoft Windows command-line scripting, including bash shell scripts, Microsoft Windows command prompt and batch (BAT) files, and Microsoft Windows PowerShell environments.\n\n---\n\n Components and Troubleshooting\n\nOperating System\nCPU and memory\nDisk and storage\nNetworking and time synchronization\nUser, gorup, and role management\nFirewall and security\n\nFor the operating system, ensure systems meet the minimum system requirements by checking the Software Product Compatibility Reports (SPCR) https://www.ibm.com/software/reports/compatibility/clarity/softwareReqsForProduct.html\n\nFor networking, ensure systems, including databases, are properly configured to communicate on the network. Ensure systems can resolve DNS names.\n\nVerify that Network Time Protocol (NTP) is enabled to ensure time synchronization between all servers. For Microsoft Windows, ensure the Windows Time service is configured and running. For Linux, ensure the ntpd service is configured and running. Failure to properly configure NTP results in mis-matched date/time stamps on server logs and may cause security protocols to fail, making troubleshooting more difficult.\n\nEnsure that you follow the BAW documentation regarding any prerequsites to configure operating systems properly before installing BAW.  \n\n Operating Systems Troubleshooting\n\nSpecific operating system troubleshooting is beyond the scope of this reference, but in general, you should always check operating system and networking configuration to eliminate these components as the root cause of problems.\n\nFirewalls and Antivirus Software  \nIf you are troubleshooting connection issues, if possible try to test with firewalls and antivirus temporarily disabled. This can be a quick test to isolate whether the problem is with BAW or not. Security policies may limit firewall and antivirus configuration, so discuss with clients. It is recommended to disable antivirus scanning on BAW application folders. If you are unable to disable firewalls and antivirus software for troubleshooting, check the firewall and antiviurs log files for any helpful messages.\n\nLinux example:   \n\n  &gt; sestatus  \n  &gt; iptables --list  \n \n\nMicrosoft Windows example:   \n\n  C:\\ sc query mpssvc  \n  C:\\ netsh advfirewall show allprofiles  \n\nNTP  \nIf secure communicaiton and security protocols are failing, check the time on each system. Ensure system times are synchronized.   \n\nBefore asking clients to collect log files for detailed troubleshooting, check each system from which you will collect log files to ensure system times are synchronized. If times are not synchronized, then matching date/time stamps from different log files will be very difficult and will waste time.  \n\nLinux example:  \n\n  &gt; systemctl status ntpd  \n  &gt; ntpq -p  \n\nMicrosoft Windows example:   \n\n  C:\\ w32tm /query /status  \n\nDatabase. \nNetworking\nUser, gorup, and role management  \nStructured Query Language (SQL)  \nData Definition and Manipulation statements (DDL and DML)  \nDatabase storage  \nDatabase indexes  \n\nBAW supports different databases and versions, including DB2, Oracle and Microsoft SQL Server databases, so specific database configuration is beyond the scope of this document, but you should be familiar with basic database configuration concepts and tasks, including SQL, security, and database drivers.   \n\nRelational database management systems usually run on dedicated servers and are managed by a database administrator, so you may need to provide configuration information or scripts to a database administrator to configure BAW.   \n\nEnsure that you follow the BAW documentation regarding any prerequsites to configure database systems properly before installing BAW.  \n\nDatabase configuration for BAW consists of the following general steps. Depending on the database system and the BAW installation method, some or all of these steps may be automated.\nDatabase system installation  \nBAW database creation  \nBAW table creation  \nBootstrapping  \n\nDatabase system installation\nDatabase system instalation is usually done by a database administrator, unless you are installing a local database for a development or testing environment. The BAW installation packages include an express version of Db2. If you use the included Db2 database system, then ensure to record the user names and TCP communications ports that you choose, as these are required for subsequent BPM configuration.\n\n  \n\nBAW database creation  \nAfter you install the BAW binary files, you must ensure the required databases are created before you can create the WebSphere deployment environment to actually run BAW.\n\nIf you install BAW using Launchpad, then the databases are created automatically.  \nIf you do not use Launchpad, then you must manually create the databases.  \nNote: Launchpad is deprecated:\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.workflow.main.doc/topics/gbpm_deprecationlist.html\n\nDatabase Creation:\na. Install BAW binary files with Installation Manager.  \nb. Locate the database scripts.  \nc. Copy and modify the database scripts to create the necessary databases.  \nd. Run the database creation scripts against your database to create the databases.  \n\nLinux example:  \n\n/opt/IBM/BPM860PC1/BPM/dbscripts/DB2/Create  \nrootls -l    \n-rwxr-xr-x 1 root root    494 Sep 18  2017 createDatabase.sh  \n-rw-r--r-- 1 root root   1117 Sep 18  2017 createDatabase.sql  \n\n/opt/IBM/BPM860PC1/db2/bin  \nroot./db2 -stvf cmndb-setup.sql  \ncreate database CMNDB3 automatic storage yes  using codeset UTF-8 territory US pagesize 32768  \nDB20000I  The CREATE DATABASE command completed successfully.  \n  \nconnect to CMNDB3  \n\n   Database Connection Information  \n   \n Database server        = DB2/LINUXX8664 11.1.0  \n SQL authorization ID   = ROOT  \n Local database alias   = CMNDB3  \n  \nCREATE USER TEMPORARY TABLESPACE USRTMPSPC1  \nDB20000I  The SQL command completed successfully.  \n  \ngrant dbadm on database to user db2admin  \nDB20000I  The SQL command completed successfully.  \n  \nUPDATE DB CFG FOR CMNDB3 USING LOGFILSIZ 16384 DEFERRED  \nDB20000I  The UPDATE DATABASE CONFIGURATION command completed successfully.  \n  \nUPDATE DB CFG FOR CMNDB3 USING LOGSECOND 64 IMMEDIATE  \nDB20000I  The UPDATE DATABASE CONFIGURATION command completed successfully.  \n  \nconnect reset  \nDB20000I  The SQL command completed successfully.  \n\nBAW table creation  \nDatabase table creation happens during the WebSphere deployment envioronment creation.  If you use the WebSphere web interface to create your deployment environment, you have the option to create or defer table creation. If you are scripting your installation, then you also can choose to create the tables immediately or defer table creation until later using a generated script, which you can provide to your database administrator.  \n\n  \n  \n    \n\nBootstrapping  \nWhen you create a deployment environment, the ‘bootstrapProcessServerData’ command must be completed successfully before you try to start or use Process Server or Process Center.\nRun the ‘bootstrapProcessServerData’ command successfully at least once for each deployment environment before you start using the environment.\nWhen you created the deployment environment either by setting the bpm.de.deferSchemaCreationparameter to falsefor the BPMConfigcommand or by enabling Create Tables in the Deployment Environment wizard, the bootstrapProcessServerDatacommand is run automatically.\nAfter run the command, check the bootstrapProcessServerDatalog for errors:DMgrprofile_root/logs/bootstrapProcesServerData.clusterName.log.\n\n Database Troubleshooting  \n\nAs with the operating system, system requirements and networking are equally important, so remember to include the database system in your troubleshooting strategy.\n\nEnsure the database is started. This is common in testing environments where the database is installed locally on a testing server. Test servers may be frequently restarted, and the database is often overlooked in the startup process.\n\nWebSphere\nCells, nodes, clusters, applications\nProfiles\nDeployment environments\nUser, groups, and roles\nSecurity and SSL certificates\n\n  \n\n. \n\n WebSphere Graphical User Interface (GUI)  \nWebSphere 8.5.5 - Using the administrative console  \nhttps://www.ibm.com/support/knowledgecenter/SSAW578.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/tconconsole.html\n\nProcess Center\nInstallation Manager\nInstallation\nUser, groups, and roles\nSecurity and SSL certificates\nProcess Application snapshots\nLogging\n\n Process Server\nInstallation Manager\nInstallation\nUser, groups, and roles\nSecurity and SSL certificates\nProcess Application snapshots\nLogging\n\nScript - Process Center to Process Server Communications Configuration  \n\nSeveral configuration settings are require for Process Center to Process Server communication. When you install a new Process Server, you can choose whether to use Process Server offline or online. The Process Server configuration must match the Process Center configuration, including user names and passwords and SSL settings. Clients who add Process Servers to their environment or make changes to their existing environment may encounter communications issues between Process Center and Process Server. This script assists in checking configurations and troubleshooting. \n\nBPM 8.6 on Linux: bxPcpscommunication.sh  \nhttps://github.ibm.com/dba-support/dba-scripts/blob/master/linux/bawbpm/bxPcpscommunication.sh\n\n---\n\n References\n\nSoftware Product Compatibility Reports (SPCR)\nhttps://www.ibm.com/software/reports/compatibility/clarity/softwareReqsForProduct.html\n\n Operating Systems\n\nBAW supports different operating systems and verisons, so specific operating system configuration is beyond the scope of this document, but you should be familiar with basic operating system configuration concepts and tasks, including networking, security, and file system management.\n\nLinux  \n[TO-DO: Dba-scripts script to collect basic OS and networking information.  \n\n Windows\n[TO-DO: Dba-scripts script to collect basic OS and networking information.  \n\nDatabases\n\n[TO-DO: Add RHEL and Windows dba-scripts for common DB2 configuration tasks.]\n\nDB2 database privileges\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.doc/topics/rplndbprivilegesdb2.html?view=embed\n\nOracle database privileges\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.doc/topics/rplndbprivilegesoracle.html?view=embed\n\nUser ID or schema name privileges\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.doc/topics/rplnuseridprivilegedb.html?view=embed\n\n WebSphere\n\nWebSphere 8.5.5 - Command-line utilities  \nhttps://www.ibm.com/support/knowledgecenter/SSAW578.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/welcrefadmcmd.html\n\nWebSphere 8.5.5 - wsadmin scripting tool  \nhttps://www.ibm.com/support/knowledgecenter/SSAW578.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/rxmlcommandline.html\n\nmanageprofiles (BAW 19.0.0.2)  \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.ref.doc/topics/rins_manageprofiles.html\n\nwsadmin (BAW 19.0.0.2)  \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.ref.doc/topics/welcrefadm_script.html\n\nBPMConfig\n\nBPMConfig (BPM 8.6)  \nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS_8.6.0/com.ibm.wbpm.ref.doc/topics/rbpmconfig.html\n\nBPMConfig (BAW 19.0.0.2)  \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.ref.doc/topics/rbpmconfig.html\n\nCreating profiles, network deployment environments and database tables using BPMConfig (BPM 8.6.0)  \nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/bpmcfgcreatewindb2.html\n\nIBM BPM 8.5.x BPMConfig command line utility overview (BP3 external website)  \nhttps://support.bp-3.com/hc/en-us/articles/202784686-IBM-BPM-8-5-x-BPMConfig-command-line-utility-overview\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Endpoint Configuration","description":"shyuan@cn.ibm.com","owner":"@Yuan Shang","path":"/BusinessProcessManager/Install,Upgrade,Configuration/Endpoint Configuration","text":"2019-11-4\n\nOverview\n\nIf the user's browser requests pass through a web server or load-balancing server before the request reaches the BPM server, you must configure the virtual host information that is used by BPM to generate URLs. Depending on the complexity of your topology and security setup, you might have to configure several different types of URLs.  BPM Endpoint configuration can fulfill this request. \n\n Prerequisites (Optional)\n\nBefore reading this chapter, it’s recommended to understand the basic configuration of a BPM deployment environment and how we modify the DE configuration using BPM utility commands.   Also, understanding the BPM topology types and how BPM interact with other products within the over IT infrastructure is also essential. \n\nComponent\n\n1.When do you need to configure & change BPM endpoint?\n\nIn a network deployment environment, you can configure a routing server (such as IBM HTTP Server, WebSphere Application Server proxy server, or other similar servers) as a proxy server for workload balancing and failover purposes. Instead of incoming HTTP requests going directly to an application server, they go to the proxy server, which then distributes the requests across multiple application servers that perform the work.\n\nYou do not have to use IBM HTTP Server for load balancing. Instead, you can use any other type of routing server; for example, WebSphere Application Server proxy server, any other web server, reverse proxy server, or network layer IP sprayer. \n\nIBM BPM and WebSphere Application Server support the following major proxy servers:\nApache Server 2.2\nIBM HTTP Server\nIBM HTTP Server for i5/OS\nLotus Domino\nMicrosoft Internet Information Services\nNGINX 1.X\nNGINX Plus Release 9\nOracle iPlanet Web Server 7\n\nWebSphere Application Server 8.5.5.X Compatibility Report \nhttps://www.ibm.com/support/pages/websphere-application-server-detailed-system-requirements8.5.5 \n\nIBM BPM generates many different types of URLs for action links in the external browser client, internal communications, and connections to internal services. If your topology or security setup requires that IBM BPM must generate certain types of URLs differently, there are various ways to configure them. \n\nIt is important to identify the different entry points in your network, such as load balancers and web servers, for external and internal clients. For example, generally, the protocol, host name, and port number of the entry point server must be used in any generated links that are served to clients. Sometimes the endpoints can be defined as a static URL, but in more complex topologies it might be necessary to use a dynamic strategy, such as extracting the information from the header of the request. Below is a typical topology which requires the endpoint configuration. \n\nComplete Procedure used to Configure BPM Endpoints\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/tsecthirdpartyauthentication_endpointservice.html \n\n** Endpoint configuration should be considered and configured by the unit of deployment environment. \n\n2.Default BPM Endpoint Scenario\na) Default BPM Endpoint Scenario Keys\n\nEXTERNAL_CLIENT\nThis generic scenario key is intended for non-relative URLs to be used by clients that are outside the data center, such as web browsers, to connect to the IBM BPM server. \n\nINTERNAL_CLIENT\nThis generic scenario key is intended for non-relative URLs to be used by clients that are inside the data center, such IBM BPM calling itself. \n\nRELATIVE\nThis generic scenario key is intended for relative URLs to facilitate access to browser-based web applications through various entry points in your topology. For example, some users might access IBM BPM through a reverse proxy whereas others might connect directly to the web server.\n\n  If all external or internal clients connect directly to the IBM BPM server, there is no need to change the default value.\n  If all external or internal clients use one entry point into your network, such as a web server, you can define the EXTERNALCLIENT or INTERNALCLIENT scenario to use a static virtual host object or a static URL.\n  If you have multiple entry points for external or internal clients, for example, a load balancer and a web server, using a single virtual host setting or a static URL is not appropriate, and you must define the EXTERNALCLIENT or INTERNALCLIENT scenario to use one or more dynamic strategies.\n\n** These defaults are only used for a generated URL if the optional scenario that is specific to the URL type is not defined.\n\nb. Strategies of Endpoint Scenarios\n\nFor each endpoint configuration scenario, BPM endpoint defines a list of strategies. \nThe strategies are attempted in the order that is specified until one returns the required information. Each strategy uses a different approach to determine the transport protocol, host, and port that are used to generate URLs, for example, by extracting them from a particular header in the request. The IBM BPM endpoint can also reference an IBM BPM virtual host that contains fixed values for the transport protocol, host name, port number of the virtual host, and any URL prefix.\n\nHere’s a table which lists all strategies that are available for BPM and you could check the details. \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/rcfgepstrategies.html \n\nHere I would like to show you the default strategies BPM defines for our default scenarios. \n\nc. Changing Default Scenarios\n\nBy using the command utilities setBPMVirtualHost, setBPMDefaultVirtualHost, and setBPMEndpoint. We could make changes on the default scenarios as needed. \n\nDetailed procedure for changing default scenarios. \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/tcfgep.html \n\n3.Optional Scenario Keys\n\nExcept for default scenario keys, client may need to configure optional scenarios for specific types of generated URLs.  Most of time, default scenarios are used if the optional scenarios are not defined.   However, if any of the optional scenarios get set up, it takes precedence over the default scenarios. \n\nFor example, If we setup the optional scenarios AETOPS with it’s strategies and URL, when PD is trying to connected to PC or PS, it no longer uses the EXTERNALCLIENT, but the one defined at AETO_PS. \n\nHere is the list of optional scenario keys available\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/rcfgepoptscnkey.html \n\nSetting up Optional Scenarios for complex topologies\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/tcfgepcreatescn.html \n\nConfiguring endpoints for dynamic URLs \nhttps://www.ibm.com/support/pages/node/1074580 \n\n4.Endpoint Lookup \n\nWhen an endpoint lookup is required by a particular product feature, there is an optional and a default scenario associated with each specific lookup. When the lookup is performed, the following actions are taken in order until an endpoint URL value is returned.\nThe optional scenario is checked.\nThe default scenario is checked.\nThe default virtual host for the deployment environment is checked.\nThe CurrentJVMDefaultTransportStrategy is used.\n\nBy default, most lookups will use the CurrentJVMDefaultTransportStrategy if no changes have been made to the endpoint settings, which results in a URL pointing at the HTTPS port of the current JVM. For most cases, you can modify only the default scenarios or rely on the default behavior.\n\nTroubleshooting\n\n Data Collection\n\n1.Logs & Trace\n\nFor endpoint lookup \nTrace String: =info: WLE.=all:com.ibm.bpm.endpoint.*=all\n\nFor general BPM connectivity including endpoint\n=info: WLE.=all:com.ibm.bpm.endpoint.=all:org.apache.commons.httpclient.=all\n\n2.Resetting endpoint service cache\n\nIf client need to enable the endpoint trace above, sometimes it’s necessary to reset the endpoint service cache because the resulting traces do not contain the initial computation of the URLs.\n\nPlease use the following link to reset the cache before enabling the runtime trace\nhttps://www.ibm.com/support/pages/resetting-endpoint-service-cache-ibm-business-process-manager-bpm \n\n3.Configuration Files\n\nSuggested directory: bpmroot/profiles/dmgrroot/config/\n\nData Analysis\n\nStep 1: Understand the correct topology and expected behaviors\n\nFirstly, in order to diagnose an endpoint issue appropriately, we must identify the components and structure of client’s topology. Components to consider include such things as load balancers, external web servers, reverse proxies, firewalls, internal web servers, Process Server, and Process Centers.\n\nTry to clarify the topology and expected behavior with client, we could use topology diagram to help on the complicated infrastructure.   The purpose of doing this is to come up with the expected configuration based on the behaviors they plan. \n\nFor example, client wants all of their external coming request went through a load balancer first before reaching to BPM servers.  \n\nStep 2: Check the current configuration\n\nFor simple topology, we could directly use the configuration files to locate the endpoint scenarios defined.  For complicated scenarios like dynamic strategy which requires computation of the URLs generated, the suggested endpoint trace should be applied. \n\nBoth configuration file and the endpoint tracing should illustrate client’s current configuration very clear. \n\nFor example, check client’s configuration (from cell-bpm.xml /dmgrroot/config/cells/cellname/cell-bpm.xml) as below:\nKey Objects:  ‘virtualHosts’，‘bpmurls’\n\nBased on the given configuration above, we could see that \n   Client defined a default virtual host with host name ‘bpm-web’\n   Client updated the default scenario EXTERNAL_CLIENT to use strategies WebsphereProxyHeaderStrategy, XForwardedHeaderStrategy, and HttpProtocolHostStrategy. \n   Client set the URL for scenario as https://bpm-test which makes the virtual host meaningless. \n\nThe strategies WebsphereProxyHeaderStrategy and XForwardedHeaderStrategy use the different methods to compute the URLs needed for external clients.  Also, the URL defined overwrite the host name given, but client was intended to define host name rather than URL.   Therefore, the overall config doesn’t fit for client’s requirement which is use the load balancer as the single entry point.  Therefore, we will need to correct their current configuration. \n\nStep 3: Correct the configuration \n\nBy checking the strategy list, we would recommend client to use the default strategy WCCMConfigStrategy to extract the protocol, host, and port from a defined virtual host. \n\nTherefore, client could use the command line setBPMVirtualHost to make sure it contains all of the information of the load balancer as below:\n\nAdminTask.setBPMVirtualHost(['-de', deploymentenvname, '-name', 'default_vh', '-hostname', 'example .com', '-port', '9443'])\n\nAnd then update the EXTERNAL_CLIENT scenario with the defined virtual host. \n\nAdminTask.setBPMEndpoint( [ '-de', deploymentenvname, '-scenario', scenario, '-virtualHost', 'default_vh' ] )\n\nAdminTask.setBPMEndpoint( [ '-de', deploymentenvname, '-scenario', scenario, '-strategies', WCCMConfigStrategy' ] )\n\nAlso, client used the parameter URL while they set up the endpoint earlier, and it led to the fact virtualHost setting is ignored. For each scenario, if the url attribute is specified, that URL is returned before any of the strategies are attempted.   We should remind client of this mistake as well for their future configuration.  \n\n Reference (Optional)\n\nResetting the endpoint service cache in IBM Business Process Manager (BPM) \nhttps://www.ibm.com/support/pages/resetting-endpoint-service-cache-ibm-business-process-manager-bpm\n\nclearBPMEndpointServiceCache command\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.ref.doc/topics/rrefclearbpmendpointservicecache.html \n\nWebSphere Application Server 8.5.5.X Compatibility Report \nhttps://www.ibm.com/support/pages/websphere-application-server-detailed-system-requirements#8.5.5 \n\nBusiness Process Management Deployment Guide Using IBM Business Process Manager V8.5\nhttp://www.redbooks.ibm.com/abstracts/sg248175.html?Open&mhsrc=ibmsearch_a&mhq=bpm%20deployment%20guide%20redbook \n\nStrategies for identifying endpoint information\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.imuc.ebpm.doc/topics/rcfgepstrategies.html \n\nConfiguring endpoints for dynamic URLs \nhttps://www.ibm.com/support/pages/node/1074580 \n","wordCount":0,"topics":[],"type":"Content"},{"name":"EAR Deployment","description":"shyuan@cn.ibm.com","owner":"@Yuan Shang","path":"/BusinessProcessManager/ApplicationManagement/EARDeployment","text":"2019-11-1\n\nOverview\n\nAfter you develop and test a service module in IBM Integration Designer and are satisfied that the module is working as designed, you can deploy it into the runtime environment.  Business Process Manager enables you to deploy and run business integration components such as BPEL business processes, human tasks, business state machines, business rules, and other components. The process of deployment is the topic of this chapter. \n\n Prerequisites (Optional)\n\nThis chapter requires our audience to get prepared on what an EAR file is and how it gets deployed to a BPM server. \n\nDeploying BPM Service Modules\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/cdplyovw.html \n\nWebSphere Application Server: Deploying Applications\nhttps://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/welc6topdeploying.html \n\nComponent\n\nUnlike Snapshot deployment, EAR deployment is not a function BPM owns but borrows from WebSphere Application Server.  From the perspective of application install or deploy, BPM doesn’t change the fundamental mechanism on how it works.  Therefore, to understand how an EAR gets deployed, we will need to get back to WebSphere Application Server. \n\n1.Enterprise Application Deployment\n\nAs part of deploying an application, you install application files on a server configured to hold installable modules. \n\nYou can install the following enterprise modules on a server:\nEnterprise archive (EAR)\nEnterprise bean (EJB)\nWeb archive (WAR)\nSession Initiation Protocol (SIP) module (SAR)\nResource adapter (connector or RAR)\nApplication client modules\n\nEAR file is one of the enterprise application modules we are going to cover in the article. \n\nWebSphere Application Server provides a few different ways to install the modules including the administrative console, adding modules to the monitored directory, wsadmin command line, and Java programs. \n\nWays to install enterprise applications or modules\nhttps://www.ibm.com/support/knowledgecenter/SSAW578.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/crunapp_install.html \n\n2.EAR File Overview\n\nAn EAR file is a critical piece in deploying a service application to a production server. It is a compressed file that contains the libraries, enterprise beans, and JAR files that the application requires for deployment.\n\nYou create a JAR file when you export your application modules from Integration Designer. Use this JAR file and any other artifact libraries or objects as input to the installation process.  The serviceDeploy command creates an EAR file from the input files that contain the component descriptions and Java code that make up the application.\n\nBPM have some default applications installed once you have your deployment environment ready. You could take a look at the EAR packages along with them as examples.   Location: /installroot/profiles/profilename/installedApps/\n\n3.Libraries and JAR files Overview\n\nModules often use artifacts that are located in libraries, which are special projects in Integration Designer used for storing shared resources. At deployment time, Integration Designer libraries are transformed into utility JAR files and packaged in the applications to be run.\n\nWhile developing a module, you might identify certain resources or components that could be used by other modules. These artifacts can be shared by using a library.\n\nLibrary\n\nA library is a special project in Integration Designer that is used for the development, version management, and organization of shared resources, such as those resources that are typically shared between modules. Only a subset of artifact types can be created and stored in a library, including:\n\nInterfaces or web services descriptors (files with a .wsdl extension)\nBusiness object XML schema definitions (files with an .xsd extension)\nBusiness object maps (files with a .map extension)\nRelationship and role definitions (files with a .rel and .rol extension)\n\nIn BPM, a JAR file also contains an application, which is the assembled version of the module with all the supporting references and interfaces to any other service components used by the module. To completely install the application, you need this JAR file, any other dependent JAR, web services archive (WAR), resource archive (RAR), staging libraries (Enterprise JavaBeans) JAR files, and any other archives. You then create an installable EAR file using the serviceDeploy command. \nThe figure below shows how an application contains components and related libraries.\n\n4.Installation Procedure\n\nAs mentioned above, you can either use the administrative console or a script to install the application. \n\nUsing Script:\n\n1.Copy the module and other files onto the production server. The modules and resources (EAR, JAR, RAR, and WAR files) needed by the application are moved to your production environment.\n\n2.Run the serviceDeploy command to create an installable EAR file. This step defines the module to the server in preparation for installing the application into production.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Locate the JAR file that contains the module to deploy.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Issue the serviceDeploy command using the JAR file from the previous step as input.\n\n3.Install the EAR file from step 2. How you install the applications depends on whether you are installing the application on a stand alone server or a server in a cell.\n\n4.Save the configuration. The module is now installed as an application.\n\n5.Start the application.\n\nServiceDeploy:\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.ref.doc/topics/rdevservicedeploy.html \n\nUsing Administrative console: (As this is the method is provided by WebSphere Application Server, I will only put link here for reference.) \nhttps://www.ibm.com/support/knowledgecenter/SSAW578.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/trunappinstalldefault.html?pos=2 \n\nTroubleshooting\n\nBased on our experience, we have two types typical issues falling into this category.   First is about clients’ own libraries or module design at Integration Designer.   Second is about the install/deploy mechanism maintained by WebSphere Application Server team. \n\n Data Collection\n\nWe have two sets of mustgather materials we usually use to collect data from clients.  \nIf the issue is related to BPM/IID capability, product design, BPEL, and SCA module, here is the list of data collection.\n\n1.Log Files + Trace\n\nTrace String\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    Description\n    Trace string\n  \n  \n    General trace string On DMgr and App cluster members\n    =info:WAS.clientinfopluslogging=all: com.ibm.bpm.=all\n  \n  \n    SCA and bindings issues On DMgr\n    SCA.=all:SCA.Bindings.=all\n  \n  \n    BPEL issues On DMgr and App cluster members\n    com.ibm.bpe.*=all\n  \n\n  \n    WAS config and sync On Dmgr\n    com.ibm.ws.management.=all:  com.ibm.websphere.management.=all\n  \n  \n    Authorization issues\n    com.ibm.ws.security.*=all\n  \n\nThe log files need to be gathered from the deployment manager profile and each node containing an app cluster member. If the needed trace is not clear just provide the log files. \n\n2.EAR or TWX export\nIf your issue is with EAR deployment, provide the EAR you are attempting to deploy. \nLet us know how the EAR was created. \nWe may also need a PI export from IID if there are issues with the EAR. \n\nIf your issue is with a snapshot deployment, provide a TWX export of the snapshot you are trying to install as well. \n\n3.Profile config directory\n\nIn certain situations, we will need config information from the profiles. This is often the case if the install is failing to find certain files/classes and with application startup issues. If this is needed provide the following directories: \n\n/config directory from the DMgr profile\n/installedApps directory from the App cluster profile\n\nCollect troubleshooting data for EAR or Advanced Snapshot deployments with the IBM Business Process Manager (BPM) products\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-ear-or-advanced-snapshot-deployments-ibm-business-process-manager-bpm-products \n\nIf the issue is related to the installation process itself rather than the modules clients try to deploy, Or we could see the pretty obvious WAS strack from the trace collected at the first round based on the trace string given above like the exception of EJB modules or calls, engage WAS team on this could be another possible route.  The following items are the data we need to help client to prepare for WAS team. \n\nEAR File (Copy of the application) \nWebSphere Application Trace + WAS Collector\n\na. If possible, stop all WebSphere processes and clear the following directory: profile_root/logs\nb. Restart the Deployment Manager or Application Server process.\nc. Set the following Runtime mode trace:\n  In the administrative console, navigate to Troubleshooting  Logs and Trace  dmgr  Diagnostic Trace  Change Log Detail Levels.\n  Select the Runtime tab.\n\nNote: If you are in a Base environment, select server1 instead of the dmgr server. If the problem is the application is not expanded to the installedApps directory, then also enable the traces on the Node Agent process as well.\n  In the Change Log Detail Levels, modify the existing trace string to:\n=info:com.ibm.ws.console.app=all:com.ibm.ws.management.application.=all:com.ibm.websphere.management.application.=all\n  If the issue is coming from annotation scanning, modify the existing trace string to:\n=info:com.ibm.ws.console.app=all:com.ibm.config.eclipse.wtp=finer:com.ibm.ws.ecs=finer:com.ibm.config.annotations=finer:com.ibm.ws.management.application.=all:com.ibm.websphere.management.application.=all\n  Click Apply or OK so that the trace string is saved.\n\nd. If you are using wsadmin, enable the following tracing: \n  Modify the wsadmin.properties file located in the following directory:\nprofile_root/properties\n\nReplace the following line:\ncom.ibm.ws.scripting.traceString=com.ibm.*=all=enabled\nTo following line:\ncom.ibm.ws.scripting.traceString=com.ibm.ws.scripting.AdminAppClient.=all=enabled:com.ibm.ws.scripting.AbstractShell.=all=enabled:com.ibm.ws.management.=all=enabled:com.ibm.websphere.management.=all=enabled\nIf the issue is coming from annotation scanning, replace with following line instead:\ncom.ibm.ws.scripting.traceString=com.ibm.ws.scripting.AdminAppClient.=all=enabled:com.ibm.ws.scripting.AbstractShell.=all=enabled:com.ibm.ws.management.=all=enabled:com.ibm.websphere.management.=all=enabled:com.ibm.config.eclipse.wtp=fine=enabled:com.ibm.ws.metadata.annotations.=all=enabled:com.ibm.ws.websvcs.annotations.=all=enabled\ne. Recreate the problem.\nf.  Save a screen capture of the administrative console if an error is displayed on the console screen. \ng. Run the collector tool.\n\nMustGather: Problems during deployment of EAR/JAR/WAR files in WebSphere Application Server Traditional\nhttps://www.ibm.com/support/pages/mustgather-problems-during-deployment-earjarwar-files-websphere-application-server-traditional\n\nData Analysis\n\nTo diagnose an EAR deployment issue, it’s important to isolate the scope of problems and narrow down what possible root causes could be.  Before requesting data, some questions may help you as well. \n\nQuestion: \nWhether this issue happened to a specific application and jar file?  Or all of the applications hit this problem?  \n\nIf the problem only occurred on one specific application/Jar file, we might want to put our focus on the content of this application and it’s specific install process, \n\nIf the problem happened to ALL applications and files, the install service we provided or the environment may have issues, you probably want to ask if the client conducted any upgrade or environment changes on his/her end. \n\nTrace Stack:\n\nLike snapshot deployment you will need to understand the keyword of the installation process from the track stack to determine the time of start and ends of this deployment attempt. \nFor example,\nKeywords: thread name ‘InstallSchedu’\n[9/14/17 16:53:33:015 GMT+05:30] 00000619 InstallSchedu I ADMA5016I: Installation of BPMTestFlowNew_V1App started.\n\n[9/14/17 16:53:48:590 GMT+05:30] 00000619 InstallSchedu I ADMA5014E: The installation of application BPMTestFlowNew_V1App failed\n\n[3/20/18 4:36:14:285 GMT] 00000132 InstallSchedu I   ADMA5013I: Application BPMTestFlowNew_V1App installed successfully.\nNext, we will need to look into the error stack at ffdc to see which component it’s possibly related to. \n[8/24/16 14:59:19:183 EDT] 00000171 FfdcProvider W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on /opt/IBM/BPM/profiles/Dmgr01/logs/ffdc/dmgrbac390c716.08.24_14.59.19.1135999813550397244176.txt com.ibm.ws.management.application.SchedulerImpl.run 328\n[8/24/16 14:59:19:197 EDT] 00000171 InstallSchedu I ADMA5014E: The installation of application BPM TestOutboundApp failed.\n\nOpen the FFDC pointed, locate this NPE thrown to see the details. \n\nKeywords: DMGRDeployedBPCApplicationResolver.getDeployedBPCApplications\n[8/24/16 14:59:19:113 EDT] FFDC Exception:java.lang.NullPointerException SourceId:com.ibm.ws.management.application.SchedulerImpl.run ProbeId:328 Reporter:java.lang.Class@43240c3e\njava.lang.NullPointerException\nat com.ibm.bpe.management.application.DMGRDeployedBPCApplicationResolver.getDeployedBPCApplications(DMGRDeployedBPCApplicationResolver.java:566)\nat com.ibm.bpe.management.application.DMGRDeployedBPCApplicationResolver.isTemplateAlreadyDeployedOnTarget(DMGRDeployedBPCApplicationResolver.java:617)\nat com.ibm.bpe.management.application.DMGRDeployedBPCApplicationResolver.isProcessTemplateAlreadyDeployedOnTarget(DMGRDeployedBPCApplicationResolver.java:594)\nat com.ibm.bpe.management.application.TargetHasProcessTemplateNotAlreadyConfiguredRule.verify(TargetHasProcessTemplateNotAlreadyConfiguredRule.java:73)\nat com.ibm.bpe.management.application.AbstractDeploymentTask.runVerificationRules(AbstractDeploymentTask.java:371)\nat com.ibm.bpe.management.application.AbstractDeploymentTask.performTask(AbstractDeploymentTask.java:100)\nat com.ibm.ws.management.application.SchedulerImpl.run(SchedulerImpl.java:315)\nat java.lang.Thread.run(Thread.java:796)\nWe could confirm that it’s not a WAS issue and BPM/WPS code plays an important role here. And we could try to request the PI and try to install it locally to verify our guess.  At this point, if there is no known issue can be found, you might want to seek help from BPM L3 and point out this exception to them. \n\nHere for this case, based on our experience, to install a SCA application, one of the very tricky questions is that client may try to install and uninstall or fail to install an application for many times.  It’s reasonable that they want to try multiple times if the first one didn’t work.   However, they may forget to clear the configuration workspace created by the previous attempts. \n\nTherefore, we usually search the name of application or ear at the history logs and we found\nADMR0015I: User admin created document cells/mycell01/applications/ BPM _TestOutboundApp.ear/ BPM TestOutboundApp.ear.\nIf you asked client to provide all of the historical logs, you might be able to see the failed attempt initiated earlier before this attempt. \n\nIt shows that they cannot install an SCA application with BPEL content to the Process Server even though the application is not already installed and its artifacts do not exist in the file system. A NullPointerException is thrown with getDeployedBPCApplications. \n\nPI File\n\nExcept for pure EAR deployment, a snapshot install could fail caused by the advanced component in it.   We also classify this part of issue as EAR deployment failure due to its root cause.  \n\nFor example, a snapshot install could fail if clients have associated advanced content modules with the problematic  snapshot although they do not contain any AIS services or SCA components. \n\nError Stack:\nCWLLG2164E: Install did not complete successfully because of an unexpected exception. Error:  /tmp/tmp_8509242345/import.zip7171900072405698481\n    com.ibm.bpm.pal.PALException: Failed to execute advanced transition, Error: Process app was not started.\nIn Process Center, you might see an exception that is similar to the following text:\nCWLLG2164E: Install did not complete successfully because of an unexpected exception.\ncom.ibm.bpm.fds.common.FDSException: Failed to process contribution dependency, \nat com.ibm.bpm.pal.action.BaseActionsImpl.executeAction(BaseActionsImpl.java:363)\nat com.ibm.bpm.pal.action.ProcessServerActionsImpl.snapshotDeployed(ProcessServerActionsImpl.java:59)\nat com.ibm.bpm.flm.impl.WLEInstallSnapshotHelper.performDeployment(WLEInstallSnapshotHelper.java:235)\nat com.ibm.bpm.flm.impl.WLEInstallSnapshotHelper.deploySnapshot(WLEInstallSnapshotHelper.java:157 \nOn the target Process Server deployment manager, you might see the following exception:\nCWWMH0197E: Problems were encountered while attempting to start business-level application \"WebSphere:blaname=MYPA-S1\".  It is possible that the business-level application is not running or is only partially running.  Please refer to FFDC log entries for details on any failures which were encountered. \nOn the target Process Server application cluster, you might see an error that is similar to the following text:\nCWLLG2164E: Install did not complete successfully because of an unexpected exception. Error:  /tmp/tmp_856858345/import.zip123545775698481\ncom.ibm.bpm.pal.PALException: Failed to execute advanced transition, Error: Process app was not started. \nOn the target Process Server application cluster, FFDC files might show various exceptions that get the status for the BLA or one of its components. For example:\nRedundantStateChangeException: Composition Unit WebSphere:cuname=HSAV1-T1-HiringSampleAdvancedv801Library_0001.jar,cuedition=BASE already started \nDepending on the version, you might notice warning messages during the installation process that are similar to the following text when the uninstall phase occurs:\nCWSAM0001W: Package does not contain SCA artifacts.\nThis is an issue happened with quite high frequency, many clients are not cautious on their application design and don’t pay attention on these ‘empty’ modules they didn’t intend to create and lead to this issue.     For this case, we could help client to import their PI and found the empty SCA component which blocks the deployment process.  \n\nEngage WebSphere Application Server Team\n\nFor more other situations, we need to engage WAS team as the fundamental code for EAR deployment is owned by them.   Here are some general tips for the issues we should consult them for help. \n\nException is thrown from the calls to EJB deploy\nDeployment target cannot be found,  like ObjectName, nodeName, serverName…etc. \nIf client didn’t use serviceDeploy and console but other script provided by WAS as install method\n\nBesides, here is a list of common WAS issues happened during application deployment for reference.\nhttps://www.ibm.com/support/pages/troubleshoot-application-deployment-issues \n\n Reference (Optional)\n\nDeploying BPM Service Modules\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/cdplyovw.html \n\nWebSphere Application Server: Deploying Applications\nhttps://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/welc6topdeploying.html \n\nCollect troubleshooting data for EAR or Advanced Snapshot deployments with the IBM Business Process Manager (BPM) products\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-ear-or-advanced-snapshot-deployments-ibm-business-process-manager-bpm-products \n\nMustGather: Problems during deployment of EAR/JAR/WAR files in WebSphere Application Server Traditional\nhttps://www.ibm.com/support/pages/mustgather-problems-during-deployment-earjarwar-files-websphere-application-server-traditional#\n\nCommon WAS issues happened during application deployment.\nhttps://www.ibm.com/support/pages/troubleshoot-application-deployment-issues \n\nEducation Decks Shared by WASADM Team\nhttps://ibm.ent.box.com/s/zfsjxdmy9dai7o27f1rmcvs8gqi6yped/folder/47185220988 \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Snapshot Management","description":"shyuan@cn.ibm.com","owner":"@Yuan Shang","path":"/BusinessProcessManager/ApplicationManagement/SnapshotManagement","text":"2019-11-4\n\nOverview\n\nSnapshots record the state of library items within a process application or track at a specific point in time. You can create snapshots in the Process Center console or in IBM Process Designer. Snapshot management, such as installing, exporting, and archiving, is performed in the Process Center console.\n\n Prerequisites\n\nThis topic requires the basic understanding of BPM Process Center console and Process Designer.  Before reading the troubleshooting part, it’s suggested to have a good grasp of process application lifecycle from development to deployment. \n\nComponent\n\n1. Process Center\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;\tFrom the Process Center console, users can create process applications and toolkits and grant other users access to those process applications and toolkits.\n\n&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;\tUsers in IBM Process Designer create process models, services, and other assets within process applications and toolkits.\n\n&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;\tThe Process Center includes two main features-a Process Center server and Performance Data Warehouse. These features allow users working in Process Designer to run their process applications and store performance data for testing and playback purposes during development efforts.\n\n&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;\tFrom the Process Center console, administrators install process applications that are ready for testing or production on the Process Servers in those environments.\n\n2. Process Application, Track and Snapshot\n\n&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;\tProcess Application (Project) : Containers for the process models and supporting implementations that BPM analysts and developers create in Process Designer. You should create a process application for each business process to be automated using BPM.\n\n&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;\tTrack (Branch): Optional subdivisions in a process application based on team tasks or process application versions. You can determine if additional tracks are necessary for each process application and, if so, enable them at any time. \n\n&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;\tSnapshot: Record the state of the items within a process application or track at a specific point in time. From the Process Center console, you can create snapshots of your process applications. You can also deploy particular snapshots of your process applications on the process servers in development, test, staging, and production environments.\n\n&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;\tToolkit: Users can create toolkits to enable Process Designer users to share library items across process applications. Process applications can share library items from one or more toolkits, and toolkits can share library items from other toolkits.  A toolkit cannot be deployed on its own. \n\n&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;\tBLA: Business Level Application, any advanced content such as a module or library from Integration Designer. EARs and JARs created. \n\n3. Snapshot Deployment\n\nWhen you install a process application snapshot to a process server, the library items for that snapshot (including toolkit snapshots) are copied from the repository to the selected process server if they do not already exist on the process server. The process server can be connected or offline. Depending on your needs and whether the process server is connected or offline, you can use the Process Center console or wsadmin commands to install the snapshots.\n\nRepository Concepts:  https://ibm.box.com/s/k3xa5ftsgvbmycptjy23qgmsb7dysedv\nManaging and sharing assets in the Process Center repository\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/managingrepos_main.html \nInstalling process application snapshots to a connected Process Server\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/tadminstallextendedprocessapp.html \nInstalling snapshots to an offline server\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/tinstallingapps.html\n\n Troubleshooting\n\nTwo types of issues covered in this section are snapshot deployment and repository management. These two categories shared most of the data listed at data collection part, and we investigate them from different perspectives. \n\nData Collection\n\n1. Log files + Trace\n\nTrace String:\n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    General Trace String:\n    =info: WLE.=all: WAS.clientinfopluslogging=all: com.ibm.bpm.fds.*=all: ProcessApplicationLifecycle=all\n  \n  \n    Authorization Issues:\n    Include: com.ibm.ws.security.*=all\n  \n  \n    Connectivity Issues:\n    Include: com.ibm.bpm.endpoint.=all:org.apache.commons.httpclient.=all\n  \n  \n    Lightweight tracing:\n    WLE.wledeploy=all:WLE.wleexpimp=all\n  \n\n* *Regarding to the Advanced Content deployment issue, we will cover it under the topic of EAR deployment.\n\nNote:\n\nBefore enabling the trace, you may also need to increase the trace file size and number if the logs are rolling too fast. 20MB is a good starting point for the file size and you shouldn't increase it over 50MB. \nPlease make sure you enable the trace on both Process Center and Process Server. \n\n2.\tTWX File of the problematic snapshot\n\n3.\tConfiguration Files\n\nIf the issue is not clearly related to a specific configuration, request the entire configuration directory under DMGR profile could give us better understanding.  Directory: /dmgr_root/config/\n\nIf the issue is about PC PS connection, the following list of configuration files may help for further precise investigation. Please make sure you request them from BOTH PC and PS environments. \ninstallroot/profiles/dmgrname/config/cells/cell_name/cell-bpm.xml\ninstallroot/profiles/dmgrname/config/cells/cell_name/security.xml\ninstallroot/profiles/dmgrname/config/cells/cellname/clusters/clustername/cluster-\nbpm.xml (if you have more than one cluster, use the appTarget cluster here) \n\nIf there is any of the runtime configuration attributes is related to the issue, collect the specific configuration file and also request the runtime TWCR.xml file from the location below:\n\nManagedNodeProfileROOT\\config\\cells\\cellname\\nodes\\nodename\\servers\\servername\\process-center(server)\\config\\TeamWorksConfiguration.running.xml\n\n4. Related Database Tables\n\nFor most snapshot related issues,  it is helpful to have the following 3 snapshot related tables from the BPMDB. Depending on the issue there are various other tables that can provide useful data. \n    LSW_SNAPSHOT\n    LSW_BRANCH\n    LSW_PROJECT\n\nFor Snapshot Deployment specific issues, following tables could help as well. \n    Process Center: LSWSERVER; LSWDEPLOYMENT; LSWDEPLOYMENTPACKAGE\n    Process Server: LSW_INSTALLATION\n\nFor issues of repository, there could be various Persistent Objects (PO) related, we could request specific tables based on the objects client have problem with.  For instance, if clients cannot view or update the environment variables successfully, we may want to request the table LSWENVVAR and other related tables. \n\nData Analysis\n\nThe key of data analysis is to find out where or at which point the problem is.   The detailed analysis of data may depends on the case by case, most of the repository issues could end up with either database problems (data corruption or inconsistency) or Process Center issues (access permission, front-end issue..etc.) It’s relatively hard to locate and find where the problem is for snapshot deployment issues. Therefore, we will put our focus on snapshot install at this section.\n\nBPM provides two types of snapshot installation process, one is online install, and another is offline, to Diagnose and locate the point at which clients fail their snapshot install, we will need to understand all of the steps this procedure involves. \n\n1. PC PS Online Connection Mode\n\nA must-have prerequisite for any successful online deployment is that the connections between PC and PS are established and healthy. Therefore, we need to firstly guarantee the connection was good before the install started.  \n\nChecking the connection requires us to understand the basic connection mode behind PC and PS.  It’s not PC firstly connect to PS when developers decide to install a snapshot; Process Server chooses to configure to a particular Process Center repository at the first place.  The configuration at PS side can be performed during the PS deployment environment creation, and it can be also modified after that.     All of the configuration of the target Process Center will be stored at configuration files (bpm-cluster.xml) at Process Server side.   Once the configuration steps are well conducted, Process Server starts to send periodic heartbeats to Process Center.  Each heartbeat can be recorded at server logs and trace, and the contains the data of the Process Server itself including it’s host, port, user authentication alias and installed snapshots.  These data of Process Server will be sent and is supposed to be saved at Process Center’s database table named LSW_SERVER. \n\nIf all of the steps above are perfectly achieved, once a developer want to initiate a snapshot install, the Process Center will use the information stored at LSW_SERVER, connect to the specific Process Server, and send the deployment package to Process Server as expected. \n\nAny mistakes or problem at any steps mentioned above including misconfiguration, security (SSL) issue, or connection issues could abort the connection and lead to a fail snapshot install at the very beginning. \n\nTherefore, we could determine whether it’s a connection issue by checking the logs and trace and then use the configuration files and table output of LSW_SERVER to help verify the health of the connection.\n\nFor instance, if we see the snapshot install failed while PC trying to send package to PS as the trace below, we could firstly narrow the scope of the issue to the ‘connection’ between PC and PS. \n\nKeywords: installation failed after ‘Request Message for sending installation package to server .’\n[6/2/17 10:21:37:888 GMT+05:30] 000035f2 AbstractSuppo I   CWLLG0154I: test1 Remote login succeeded.\n[6/2/17 10:21:37:888 GMT+05:30] 000035f2 AbstractSuppo I   CWLLG0714I: test1 Sending export.\n[6/2/17 10:21:37:889 GMT+05:30] 000035f2 wle_deploy    3   Request Message for sending installation package to server ...\norg.apache.commons.httpclient.methods.PostMethod@6fdd7b6\n[6/2/17 10:21:37:889 GMT+05:30] 000035f2 wle_deploy    3   Sending request to server for snapshot deploy\n[6/2/17 10:21:38:556 GMT+05:30] 000035f2 HttpMethodBas 3 org.apache.commons.httpclient.HttpMethodBase getContentCharSet enter getContentCharSet( Header contentheader )\n[6/2/17 10:21:38:556 GMT+05:30] 000035f2 HttpMethodBas 1 org.apache.commons.httpclient.HttpMethodBase getContentCharSet Default charset used: ISO-8859-1\n[6/2/17 10:21:38:556 GMT+05:30] 000035f2 wle_deploy    3   Sending installation package to server failed!, Error Message ... \nMoved Temporarily, HTTP Code : 302\nGiven the error code HTTP 302, meaningful attempts are checking the connection configuration including security certificate between PC and PS, ruling out the possibilities caused by snapshot itself, confirming with client on their proxy/web server setting and other network topology,  and adding connectivity trace for further replication. \n\n2. Snapshot Deployment Procedure\n\nIf the snapshot package reaches to the Process Server successfully and start the installation service, we will need to concentrate on the log & trace on PS side as PC doesn’t play an important role at the following steps.  \n\nInstall the necessary library items and assets for the process application and referenced toolkits.\nRun the deployment service flow for each toolkit.\nRun the deployment service flow for the process application.\nMigrate data and process instances if there are running business process definition instances. \nSend tracking definitions to the Performance Data Warehouse.\nActivate scheduled undercover agents (UCAs).\nDeploy advanced content. \nOn a connected process server, send a message saying the installation is complete.\n\nBoth logs and trace enabled at PS side are quite readable and we could easily identify each phase of this procedure from the trace. \n\nPS Log   Keywords: thread ‘InstallMessag’\n\nInstall Request Received\n[3/1/18 16:45:05:545 CST] 00002469 InstallMessag I   CWLLG3578I: [BEGIN]  The process server received a request to install process application Test Application(TA), snapshot V839(V839) from the Process Center.\n[3/1/18 16:45:05:591 CST] 00002469 InstallMessag I   CWLLG3578I: [END]  The process server received a request to install process application Test Application(TA), snapshot V839(V839) from the Process Center.\nInstallation Service Triggered\n[3/1/18 16:45:06:716 CST] 00002469 InstallMessag I   CWLLG3579I: [BEGIN]  Starting the installation of process application Test Application(TA), snapshot V839(V839) as user deadmin.\n[3/1/18 16:45:06:841 CST] 00002469 InstallMessag I   CWLLG3579I: [END]  Starting the installation of process application Test Application(TA), snapshot V839(V839) as user deadmin.\nDevelopment Service for Each Toolkits and Process Application\n[3/1/18 16:45:06:841 CST] 00002469 InstallmentSt I   CWLLG3533I: Process Application: BPM Test Project, Snapshot: V101: The snapshot is being imported.\n[3/1/18 16:45:07:107 CST] 00002469 InstallMessag I   CWLLG3580I: [BEGIN]  Installing the library items and assets for the process application and referenced toolkits.\n[3/1/18 16:45:07:341 CST] 00002469 InstallMessag I   CWLLG3581I: [BEGIN]  Installing toolkit BPM Test Adapter(BTDEA), snapshot V024(V024).\n[3/1/18 16:45:23:044 CST] 00002469 InstallMessag I   CWLLG3581I: [END]  Installing toolkit BPM Test Adapter(BTDEA), snapshot V024(V024).\n[3/1/18 16:46:00:419 CST] 00002469 InstallMessag I   CWLLG3582I: [BEGIN]  Installing process application Test Application(TA), snapshot V839(V839).\n[3/1/18 16:46:14:950 CST] 00002469 InstallMessag I   CWLLG3582I: [END]  Installing process application Test Application(TA), snapshot V839(V839).\n[3/1/18 16:46:15:200 CST] 00002469 InstallMessag I   CWLLG3580I: [END]  Installing the library items and assets for the process application and referenced toolkits.\nMigrate BPD Instances\n[3/1/18 16:46:16:887 CST] 00002469 InstallMessag I   CWLLG3586I: [BEGIN]  Migrating global data.\n[3/1/18 16:46:16:903 CST] 00002469 wle_migration I   Migrating instances & data to snapshot: Snapshot.e7fed5e4-c865-49a0-a9b2-f14ebfcca53b\n[3/1/18 16:46:16:903 CST] 00002469 wle_migration I   Source snapshots to be migrated: []\n[3/1/18 16:46:16:903 CST] 00002469 wle_migration I   Source snapshots to be deleted: []\n[3/1/18 16:46:17:059 CST] 00002469 InstallMessag I   CWLLG3586I: [END]  Migrating global data.\n[3/1/18 16:46:17:090 CST] 00002469 InstallmentSt I   CWLLG3540I: Process Application: BPM Test Project, Snapshot: V101: The data for the snapshot was migrated successfully.\n[3/1/18 16:46:17:090 CST] 00002469 InstallmentSt I   CWLLG3541I: Process Application: BPM Test Project, Snapshot: V101: The instances of the snapshot are being migrated.\n[3/1/18 16:46:17:090 CST] 00002469 InstallMessag I   CWLLG3587I: [BEGIN]  Migrating process instances.\n[3/1/18 16:46:17:106 CST] 00002469 InstallMessag I   CWLLG3587I: [END]  Migrating process instances.\n[3/1/18 16:46:17:106 CST] 00002469 InstallmentSt I   CWLLG3542I: Process Application: BPM Test Project, Snapshot: V101: The instances of the snapshot were migrated successfully.\nSend Tracking Definition\n[3/1/18 16:46:17:121 CST] 00002469 InstallMessag I   CWLLG3588I: [BEGIN]  Sending tracking definitions to the Performance Data Warehouse server.\n[3/1/18 16:46:19:356 CST] 00002469 InstallMessag I   CWLLG3588I: [END]  Sending tracking definitions to the Performance Data Warehouse server.\nActivate Scheduled Undercover Agents\n[3/1/18 16:46:19:418 CST] 00002469 UCASchedulerH I   CWLLG3550I: Process Application: BPM Test Project, Snapshot: V101: The scheduled UCAs for the snapshot are being activated.\n[3/1/18 16:46:19:496 CST] 00002469 UCASchedulerH I   CWLLG3551I: Process Application: BPM Test Project, Snapshot: V101: The scheduled UCAs for the snapshot were activated successfully.\nDeploy Advanced Content\n[3/1/18 16:46:21:075 CST] 00002469 InstallMessag I   CWLLG3593I: [BEGIN]  Assembling and deploying advanced content.\n[3/1/18 16:46:21:075 CST] 00002469 InstallMessag I   CWLLG3598I:  Will wait at most 720 seconds for the BLA creation and deployment to complete. If the timeout occurs, the deployment of the BLA will continue but the install will report a failure.\n[3/1/18 16:46:21:340 CST] 00014207 Job           I   CWPFD2037I: The business level application preparation phase started for job e4397abe-a8b6-76s2-aee9-910ffb089879.\n[3/1/18 16:46:21:481 CST] 00014207 FDSExtensionH I   CWPFD3005I: Process Application: BPM Test Project, Snapshot: V101: Preparing installable content for the snapshot with the ID Snapshot.e7fed5e4-c865-49a0-a9b2-f14ebfcca53b\n[3/1/18 16:46:25:231 CST] 00014207 FDSExtensionH I   CWPFD3006I: Process Application: BPM Test Project, Snapshot: V101: Preparing advanced content\n…\n[3/1/18 16:46:33:481 CST] 00002469 InstallMessag E   CWLLG3604E:  The installation failed because the BLA deployment job failed. The failure message is: Service deploy failed with return code: -1. For additional error information, see the server logs.\n[3/1/18 16:46:33:496 CST] 00002469 InstallMessag I   CWLLG3593I: [FAIL]  Assembling and deploying advanced content.\nThe trace & logs with the keywords identified can help you easily locate the step client has problem with and most of them reveal the cause of the failure.  Like the example above, it failed while deploying the advanced content.  It’s more likely happened while the advanced Ear itself may contain any empty or incompatible content.  And we could add more advanced content trace to see the detailed stack trace and requested client to provide both TWX as well as the PI file to see if it’s possible to replicate the issue. \n\nIn summary, snapshot deployment issues could vary from snapshot design bug, environment upgrade failure, PC PS connection, advanced content issue, network, security and permission.  We are not able to cover all of the troubleshooting here.  This article introduces the basis and key to start working on a snapshot deployment issue, which is to locate the problematic step and isolate the possible root causes at the very first place. \n\n Reference\n\nCollect troubleshooting data for snapshot deployment and repository problems in IBM Business Process Manager (BPM) \nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-snapshot-deployment-and-repository-problems-ibm-business-process-manager-bpm \nConfigure Process Server to connect to Process Center using command line\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/tconnectto_pctr.html \nManaging and sharing assets in the Process Center repository\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/managingrepos_main.html \nInstalling process application snapshots\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/tinstallingsnapshots.html\nL2 Educational materials for Lifecycle\nhttps://ibm.ent.box.com/folder/89523256455 \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Instance Migration","description":"shyuan@cn.ibm.com","owner":"@Yuan Shang","path":"/BusinessProcessManager/ApplicationManagement/InstanceMigration","text":"2019-11-4\n\nOverview\n\nWhen a new snapshot of a process application is deployed, users want to migrate the running process instances from the old version of the snapshot to the new one. This kind of migration is referenced as Instance Migration.   Not only process instances, snapshot data can be migrated using similar procedure as well.  We will cover both snapshot data and process instance migration at this article. \n\n Prerequisites (Optional)\n\nThis section requires basic knowledge of snapshot deployment process and how process instances work for each snapshot of a process application.  Also, it’s suggested to understand how snapshot data including EPV, ENV, team and UCA are managed as needed at an runtime environment.\n\nComponent\n\nMigration Tasks covers the migrations of both Snapshot Data and Process Instances\n\nSnapshot data migration\n\nWhile snapshot data is migrated, various settings are migrated from the source snapshot to the destination. These actions are all performed as one transaction. The data for EPV, environment variables (ENVs), and teams is migrated depending on the following behaviors. After migration, the source snapshot is deactivated and the target snapshot is activated. If the source snapshot was the default, that property is also transferred to the target.\n\nEPV data migration\n  Runtime EPV changes are migrated from the source snapshot to the target snapshot. An entry is added for each effective date and value pair. Default values set at design time are not migrated.\n  If the  property is set to true, a runtime EPV change is applied to each EPV during deployment with an effective date of the deployment time and a value equal to the EPV's default value.\n\nEnvironment variable migration\n  Runtime environment variable and server configuration settings are migrated from the source to the target snapshot. Default values set at design time are not migrated. The changes to the environment variable or server configuration that occur during run time are migrated from the source if they have a modified date that is more recent than any change that occurred at run time in the target snapshot. A change at run time always overrides the snapshot default settings.\n\nTeam migration\n  The contents of teams from the source are merged with the teams in the target. Any users or groups listed for a team from the source snapshot are added to the team in the target. Dynamic teams cannot be migrated.\nIf the  property is set to true, teams are not migrated.\n\nProcess instance migration\n\nProcess instances with a status of active, failed, or suspended are migrated from the source to the target snapshot. Each process instance is migrated in its own transaction. Multiple threads process the instance migration work based on the value of the  setting. \nDo not use the source and target snapshot processes during migration because doing so could lead to lock contention and failures.\n\nTask migration\nTasks are migrated depending on the  and  settings. Depending on the  setting, all task, all tasks except closed ones, or no tasks are migrated. \n\n  By default, all tasks except closed ones are migrated. When the task is migrated, references to source snapshot objects are updated to target snapshot objects. If  is false, the task execution context is loaded and migrated to the target environment. If objects are missing from the source snapshot, migration failures might occur when the execution context is loaded. If task or execution context migration is skipped, migration occurs the next time the task runs. Business object definition version references are not updated in the task execution context.\n\n  If tasks are not migrated, deleting snapshots those tasks refer to is prevented. Certain deprecated task assignment methods lead to dynamic teams which cannot be migrated from the source snapshot. These tasks will block the original snapshot's deletion until they are deleted. \n\n  If a token policy file is used, you can move or delete tokens associated with an orphaned activity during the instance migration. Some token migration failures will not prevent instance migration. If this occurs, you can perform the token commands after the instance migration is completed. If all tokens for a process are deleted, the process moves to the completed state. The Process Inspector in the Process Admin Console shows orphaned tokens if any were created from instance migration.\n\nSnapshot data and process instance migration overview:\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/csnapshotandinstovw.html\n\n Troubleshooting\n\nThe migration failure of process instance and snapshot data could have a few different consequences.   Unlike other problems, they should be quite straightforward and easy to identify and troubleshoot.  More importantly, we have some corresponding remedies and solutions for most of the common issues, and I want to put my focus on the preventive suggestions at this section since our Standard Runtime section will cover the detailed troubleshooting part on how we could handle the runtime issues after instance migration.  Here I would like to bring up three typical scenarios for discussions: orphan token, unexpected symptoms after instance migration, and performance tuning issue during instance migration.  \n\nData Collection\n1.\tLog Files + Trace\n\nBecause snapshot data and instance migration can be triggered during snapshot deployment AND after a new snapshot gets installed manually.  Therefore, we could suggest client to enable the trace of snapshot deployment if the migration fails as a step of snapshot install. \n\nTrace String: \n=info: WLE.=all: WAS.clientinfopluslogging=all: com.ibm.bpm.fds.*=all: ProcessApplicationLifecycle=all\nIf it’s not happening during the snapshot deployment, but an in-flight data migration after installation, client could use the simplified database trace as below.\n\nTrace String:\n=info: WLE.=all: WAS.clientinfopluslogging=all\n\n2. DB Tables\n\nFor issues with instance migration, we are more likely to give a specific DB SQL query for client to run against their Process Server database and get the result back to us.  The SQL queries depend on the trace stack we find out at the 1. \n\nFor example, we could see the similar stack at the trace we collected:\nSELECT LSWBPDINSTANCE.INSTANCENAME as bpdname, \nLSWBPDINSTANCE.BPDINSTANCEID as bpdinstanceid, LSWBPDINSTANCE.DOCUMENTSSTATE as documentsstate FROM      LSWBPDINSTANCE\nWHERE      LSWBPDINSTANCE.EXECUTIONSTATUS IN (1, 3, 6) AND LSWBPDINSTANCE.SNAPSHOTID = ? AND MOD(LSWBPDINSTANCE.BPDINSTANCEID, ?) = ?\nOr we could check the specific instance which fails to migrate from source to target snapshot at the table LSWBPDINSTANCE.\n\n3. Configuration\n\nDue to the reason that we have different configuration properties which could decide how a instance migration works, we will need to check the runtime configuration file to make sure client set them correctly.   Client usually made changes on 100Custom.xml and we will check both 100Custom.xml and TeamWorksConfiguration.running.xml to verify the change. \n\nLocations: \nDmgrProfileRoot\\config\\cells\\cellname\\nodes\\nodename\\servers\\server_name\\process-server\\config\\system\\100Custom.xml\n\nManagedNodeProfileRooT\\config\\cells\\cellname\\nodes\\nodename\\servers\\servername\\process-\ncenter(server)\\config\\TeamWorksConfiguration.running.xml\nHere are some properties directly related to instance migration, we will need to pay close attention on them while checking the configuration files. \n\n4. TWX file\n\nUnder some circumstances, if we are not able to get direct evidence from trace and DB export, we may have to check the differences between two installed snapshot and helped client with the issue like orphan token. \n\nData Analysis\n\n1. Orphaned Token\n\nA token is a pointer that is associated with an activity. The token becomes orphaned when it is associated with an activity which has been deleted from the process.  When instance migration causes orphaned tokens, you must decide what to do with potential orphaned tokens or risk that the process instances won't complete.\n\nSome instance migrations fail with orphaned token, but some don’t.  Another typical symptom could be the migrated instances fail to proceed to certain steps.  We could verify this issue by either using log stack or checking the orphaned token via Process Admin console- Inspector. \n\nFor instance, you might see the very similar stack as below:\nCWLLG0531E: An exception occurred during migration. Log the error and move on to next instance.\ncom.lombardisoftware.core.TeamWorksException: Attempt to\naccess TWObject with classId TWClass.f1e801c6-7957-40b0-8659-27bb3ab1c9b3 that is not available\nrootContext=Snapshot.c137c120-ef38-4f82-a406-ff89ac6a6755\nat \ncom.lombardisoftware.core.TeamWorksException.asTeamWorksException(TeamWorksException.java:136)\nOr you might see the following exceptions while trying to access a particular instance at Process Admin console. \n\"CWTBG0047E:Process 'BPD.XXX-XXX-XXX-XXX-XXX' does not exist; it might have been deleted in the meantime\"\nMost of the orphan token issue are very obvious for us to find out.  The challenge for such issue is to implement the solutions as needed. \n\nTypical Recommendations:\n\na.\tApply Migration Policy File [Before migration]\n\nThe easiest way to identify and manage orphaned tokens is to generate a migration policy file and use it to specify whether each potential orphaned token should be moved or deleted during instance migration.\n\nInstruction on generating migration policy file before instance migration:\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/managingorphanswithpolicyfile.html \n\nb.\tMove Token [After migration]\n\nIf you migrate process instances without using a policy file, orphaned tokens might be created. In this case, you can use the REST API client to move these orphaned tokens. \n\nInstruction on using REST API to move token\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/tmovingtokens.html \n\nc.\tDelete Token [After migration]\n\nYou could also delete tokens if necessary.  To delete orphaned token, we offer both REST API and Process Admin console- Inspector to do this. \n\nREST API – Delete Token\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/tdeletingtokens.html \nProcess Inspector – Delete Token\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/tdeletingtokensinpi.html \n\n2. Unexpected symptoms After instance migration\n\nMany clients saw some unexpected symptoms after snapshot install or instance migration.  Other than the issues caused by orphaned token, clients may fail to delete the old snapshots, or the EPV/ENV values were not changed as expected.   Here is a case that we would like to bring up for discussion. \nProblem Description:\n\nWe migrated instances from snapshot A to snapshot B and then tried to delete the snapshot A as it’s no longer useful.  However, snapshot A cannot be deleted.\n\nError stack while executing the command line BPMDeleteSnapshot\nWASX7015E: Exception running command: \"AdminTask.BPMDeleteSnapshot('[-containerAcronym SASR -containerSnapshotAcronyms SAS_238 -force]')\"; exception information:\n\njava.lang.Exception: java.lang.Exception: You cannot delete a snapshot that is referenced by tasks belonging to BPD instances referencing another snapshot\nIn order to delete a snapshot successfully, we have to make sure there is no running instances & BPEL instances existing.  However, there is one situation which might block the snapshot deletion for that.  As client mentioned that they just performed instance migration from snapshot A to snapshot B, it’s possible that they left the closed or even all tasks on the snapshot A.   And the migrated instances which are related to these tasks could be still running. \n\nTherefore, we will firstly check whether they migrate all tasks to the new snapshot B or not.    We could verify this by enabling the trace suggested and find out the task ID which blocks the deletion.   Or we could check the configuration client used when they did the instance migration.  \n\nWe found the following stack from their configuration file 100Custom.xml and TeamWorksConfiguration.running.xml\n\nKeywords: migrate-tasks\n  \n\n5\n\nskip-closed\n\nfalse\n\n \nThe parameter  decides which tasks could be migrated.  Here are the three options for it. \n  \nChooses which tasks will be migration. The following options are availble: \n  all - Migrate all tasks\n  none - Migrate no tasks\n  skip-closed - Migrate all tasks except closed tasks\n\nSkip-closed is the default value in order to improve the performance of the entire process, and it also proved that there are closed tasks remained on snapshot A and led to this issue.   \n\nTo resolve this issue, we could either delete all of the closed tasks on snapshot A Or we could migrate the remaining closed tasks to a new snapshot then redo the snapshot deletion. \n\nDelete Tasks via Process Admin: https://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/bpmdbhealthtasks_delete.html \nDelete Tasks via command line BPMTasksCleanup\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.ref.doc/topics/rref_bpmtaskscleanup.html \n\n3. Performance Tuning \n\nWork attempted on existing instances for the process app could slow down the instance migration process or cause failures. Large instance migrations could also put a heavy workload on the database.    Therefore, another type of issues reported for instance migration is performance tuning.  Because of the large amount of data transaction, our clients may experience very suspicious performance slowdown. And the reasons behind the slowness could be various. \n\nLet’s take a look at this trace stack:\nKeywords: addGroupToInternalGroup and InstanceMigrationCore.performParticipantGroupMigration\n[2/13/16 0:46:50:945 CST] 0000008d ThreadMonitor W WSVR0605W: Thread \"WebContainer : 4\" (00000130) has been active for 720,534 milliseconds and may be hung. There is/are 1 thread(s) in total in the server that may be hung. at\njava.net.SocketInputStream.socketRead0(Native Method) at java.net.SocketInputStream.read(SocketInputStream.java:140) at\ncom.ibm.db2.jcc.t4.z.b(z.java:199) at com.ibm.db2.jcc.t4.z.c(z.java:259) ... at com.lombardisoftware.client.delegate.InternalGroupsDelegateDefault.addGroupToInternalGroup(InternalGroupsDelegateDefault.java:409) at com.lombardisoftware.server.ejb.migration.PGMigration.migrating(PGMigration.java:87) at\ncom.lombardisoftware.server.ejb.migration.InstanceMigrationCore.performParticipantGroupMigration(InstanceMigrationCore.java:266) at\ncom.lombardisoftware.server.ejb.migration.InstanceMigrationCore.performGlobalMigration(InstanceMigrationCore.java:192) at com.lombardisoftware.server.ejb.migration.InstanceMigrationCore.migrateGlobalData(InstanceMigrationCore.java:130) \nThe stack above explains that the performance issue detected may have something to do with the participant groups.  And it’s reasonable for us to query the total number of records in related tables such as LSWPARTICIPANTGROUP.   And also, we could try to add the database trace to find out the specific SQL query.  It turned out the issue was caused by the large number of user groups, and we could recommend our client to purge the user group data.\n\nExcept for this, client may encounter performance issues like database lock contention, thread hung with timeout and so on. Here are some performance tuning best practice related to instance migration that we could always suggest client to check and test. \n\nBest Practice of Performance Tuning:\nThread pool size for instance migration. The default size of parameter  is 5. This is the number of threads that concurrently perform migration activities. \n  \n    To be noticed that all of the snapshot data (ENV, EPV and Team) migration are performed in one transaction.   To the contrary, each process instance is migrated in its own transaction. Multiple threads process the instance migration work based on the value of the setting. \n  \nMigrate completed tasks or not. The default value is set to skip completed tasks during migration. As I mentioned at the previous example, we have three options for parameter , migrate all tasks could affect the entire performance and total time in a very large extent.  \n\nDefer to updating task execution context during migration or not. \n\n  Because the execution context for a BPD instance or task is saved as a binary large object (BLOB) data type, the migration program has to load and deserialize the BLOB data, analyze, and update it, then serialize and save it back to the database. These are expensive database operations. If the volume of BPD instances and tasks that need to be migrated is large, the overall instance migration time can be significant.\n\n  Deferring to updating task execution context  means that the migration program will not load, analyze, and write back the task execution context to the database. This process can save much time for migration because task execution context is saved as a BLOB, which requires expensive operations to load from and save to a database. The task execution context will be updated when the task is loaded in the future.\n\nPurge application data before instance migration \n\n  Data purge is also a good remedy for instance migration performance issue, we mainly focus on BPD instances and tasks as these data play significant roles on database activities.   We could use both PAC console and command lines BPMTasksCleanup BPMProcessInstancePurge to perform such purging.  For more detailed information, please check our chapter for ‘Housekeeping.’ \n\n Reference (Optional)\n\nOpening a process instance migrated from an old snapshot causes the CWTBG0047E error to appear in IBM Business Process Manager\n https://www.ibm.com/support/pages/opening-process-instance-migrated-old-snapshot-causes-cwtbg0047e-error-appear-ibm-business-process-manager-bpm \nWhy are user / group lookup causing instance migration performance issue?\nhttps://www.ibm.com/mysupport/s/question/0D50z000062kIuuCAE/why-are-user-group-lookup-causing-instance-migration-performance-issue?language=en_US\nInstance Migration\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/csnapshotandprocessmig.html \n","wordCount":0,"topics":[],"type":"Content"},{"name":"IBM Integration Designer","description":"Andreas.Jaensch@de.ibm.com","owner":"@Andreas Jaensch","path":"/BusinessProcessManager/BPMDevToolsandRepository/IBMIntegrationDesigner","text":"Date：2019-11-20\n\nOverview\n\nIBM Integration Designer (IID) is an integrated development environment (IDE) for building applications based on service-oriented architecture (SOA). It is the authoring tool for IBM Business Process Manager Process Server and IBM WebSphere Enterprise Service Bus.\n\nIID is built on IBM Rational Application Developer (RAD) Eclipse based technology. \n\nProcess Server and WebSphere Integration Developer components:\n\n1. &nbsp;&nbsp;Service components\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Business State Machines\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Business Processes\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Human Tasks\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Business Rules\n        \n2. &nbsp;&nbsp;Supporting Services\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Business Object Maps\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Relationships\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Selectors\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mediation Flows\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adapters\n3. &nbsp;&nbsp;SOA Core\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Service component architecture\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Business Objects\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Common Event Infrastructure\n\nThe information below gives you an overview of the product, starting with product installation, upgrade and configuration, sample use cases for self-study, and finally a section with information about troubleshooting in case of problems come up to you while using that tool.\n\n Prerequisites (Optional)\n\nTo be able to run the self-study exercises you should have a working IID installation. For that, please download the IID source files from the links below and follow the installation instruction from the IBM Knowledge Center (KC).\n\nSupport Lifecycle Policy for IID\nhttps://www.ibm.com/support/pages/ibm-business-automation-workflow-and-ibm-integration-designer-software-support-lifecycle-policy \nThis Policy gives an overview about the actual supported product version.\n\nIID support portal\nhttps://www.ibm.com/support/home/product/S604170I01562R93/IBMIntegrationDesigner \nGives you an overview of available documents, downloads, tools as well as existing communities\n\nGetting started with IBM Integration Designer\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wid.main.doc/prodoverview/topics/ctechprodovr.html\nA more detailed instruction to understand the product's architecture and features\n\nComponent\n\n1. Product Installation\n\na. &nbsp;&nbsp;Prerequisites\n&nbsp;&nbsp;&nbsp;&nbsp;OS: Windows OS\n&nbsp;&nbsp;&nbsp;&nbsp;IBM Installation Manager (IBM IM) version 1.8.9 or higher\n&nbsp;&nbsp;&nbsp;&nbsp;3 GB RAM minimum (4 – 6 GB recommended)\n&nbsp;&nbsp;&nbsp;&nbsp;IID 18.0.0.1 supports Java 8, Eclipse 4.4.2.1, RAD 9.5.0.2\n&nbsp;&nbsp;&nbsp;&nbsp;DB2 as used data base for Integrated Test Server\n&nbsp;&nbsp;&nbsp;&nbsp;Supported browser: IE, FF and Chrome\n\nb. &nbsp;&nbsp;Package download\nhttps://w3-03.ibm.com/software/xl/download/ticket.wss \n&nbsp;&nbsp;&nbsp;&nbsp;CNV60ML\t(Quick Start Guide)\n&nbsp;&nbsp;&nbsp;&nbsp;CNV61ML\t(IID tool)\n&nbsp;&nbsp;&nbsp;&nbsp;CNV62ML\n&nbsp;&nbsp;&nbsp;&nbsp;CNV63ML\n&nbsp;&nbsp;&nbsp;&nbsp;CNV64ML\t(Integrated Test Server)\n&nbsp;&nbsp;&nbsp;&nbsp;CNV65ML\n&nbsp;&nbsp;&nbsp;&nbsp;CNV66ML\n\nCreate a temporary folder and extract ALL files to the SAME temporary folder, not in a subfolder!!!\n\nc. &nbsp;&nbsp;Installation (Installing from the product launchpad)\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wid.imuc.doc/topics/tstartinstall_launchpad.html \n\nStart launchpad.exe (as local Administrator)\nStandard installation path C:\\IBM\\IID\\v18.0. (can be changed by custom installation)\nAdd userID and password for Test Server and DB2 installation\n\nd. &nbsp;&nbsp;Verification of Installation\n\nCheck for error messages during installation\nCheck the IBM IM log files for error messages (see troubleshooting)\nCheck log files of Integrated Test Server (Dmgr, NodeAgent, SingleCluster log) for exceptions\n\n2. Backup Installation for emergency recovery\nIn case of emergency recovery, you need a backup of \nIBM Installation Manager\nWAS file system\nBPM data bases\n\nBacking up IBM Installation Manager agent data and shared files for recovery with IBM Business Process Manager (BPM)\nhttps://www.ibm.com/support/pages/backing-ibm-installation-manager-agent-data-and-shared-files-recovery-ibm-business-process-manager-bpm\n\nConsistent backups for IBM Business Process Manager (BPM)\nhttps://www.ibm.com/mysupport/s/question/0D50z000062k66hCAA/consistent-backups-for-ibm-business-process-manager-bpm?language=de\n\n3. IID online training presentation\nThere are some good videos online available that give an overview of IID and how to use this tool\n\nIBM Integration Designer online training presentation\nhttps://www.youtube.com/watch?v=c-csDnC7XKQ \nhttps://www.youtube.com/watch?v=R6M8pjQoiyE\n\n4. Self-study samples\n\nThe samples are intended for beginners and show how to model business process designs or how to develop / deploy SCA application in WID/IID. In one section every single step of that exercise is explained in detail. You can follow this instruction and build your own application.\nIf you don’t want to create the application by yourself, you can also download the deployable application file, add it to your test system and run your own test.\n\nBPC sample\nhttp://publib.boulder.ibm.com/bpcsamp/index.html\n\nThe samples cover nearly all the service components available in IID. Although the samples were created for older IID version (7.5) and the predecessor product WebSphere Integration Developer (WID), they are still valid for the actual IID version.\n\nHere is another good link to a WID tutorial explaining the WID / IID components in detail, e.g.\nMediation flows overview\nTrace Primitives\nCustom Mediation Primitives\nMessage Filter Primitives\nMessage Logger Primitives\nFlow Order Primitives\nFlat File Inbound / Outbound Adapter\nJDBC Inbound / Outbound Adapter\nMessage Element Primitives\nEvent Emitter Primitives\nDatabase Lookup Primitives\nWTx Primitives\n\nhttps://de.slideshare.net/ravireddy76/wid-websphere-integration-development-guide\n\n Troubleshooting\n\nData Collection\n\n1. Troubleshooting and problem determination\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wid.admin.doc/topics/ttrouble.html\n\nThis section from Knowledge Center gives some information about troubleshooting for very common problems you may see when using IID. In most cases, especially for specific error messages related to IID you need to collect more information as described in the IID general Mustgather\n\n2. General Mustgather\nCollect troubleshooting data for IBM Integration Designer\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-ibm-integration-designer\n\nBeside the standard information (detailed problem description and versionInfo) an important IID logfile is  /.metadata/.log\nThis log file stores all the activities that happens when IID is started and activities happen in the workbench.\nIf the problem happens when testing the application we need additional logs from the test server logs located at /logs\n\nAdditionally, the general Mustgather shows a way how to activate specific trace settings in IID (Preferences  Logging and Tracing) as well as specific runtime trace strings\n\n3. MustGather: Java Application Hangs\nhttps://www.ibm.com/support/pages/mustgather-java-application-hangs\n\nAs IID is based on Java, you may see situation that the workbench freezes and isn’t responsive any longer. In that case we need to know what actually is running in the Java heap when that problem occurs. Javacore files are needed to be able to debug these types of problems. These documents outline how to trigger javacore files.\n\n4. JVM crashes\nhttps://www.ibm.com/support/pages/ibm-integration-designer-running-linux-throws-no-more-handles-mozillafivehomeusrlib64xulrunner-192-error-or-jvm-crashes-start \nhttps://www.ibm.com/support/pages/vm-terminated-exit-code-1-error-received-when-launching-websphere-integration-developer\n\nSuch kind of error happens at IID startup when the Java process is started (javaw) and it crashes. This is not an issue with IID itself but related to underlying ECLIPSE platform.\n\n5. IID in BPM environment – communication problem Process Center  IID\ntrace string in WID (Window  Preferences  Business Integration   Logging and Tracing):        \n                                            \n**com.ibm.wbit.lombardi.core.utils=fine:com.ibm.wbit.lombardi.core.rest=fi \nne:com.ibm.bpm.common.rest.impl=fine:com.ibm.wbit.ui.bpmrepository.actio \nns=fine**\n\n\\.metadata\\ folder that should contain\nbpmTrace.log \nbpmHistory.log\n.log\n  \n Data Analysis\n\n1. General\n\nIf the problem happens at development time (application modeling) you should check the content of \\.metadata\\ folder. Always check first the .log folder that is created when Eclipse workspace was initialized correctly and logs every standard activity you do at development time in the workspace\nIf the problem is related to application deployment / test, then check the Dmgr log files (deployment) and Application Server log files (application test) for warnings or exception.\n\\profile\\profile_name\\logs folder\nSystemout.log\nTrace.log\n\n2. JVM related problems and crashes (Eclipse)\n\nIf IID crashes at server startup time, the log environment in IID is not initialized yet and nothing is written to the .log file.\nIn that case check for javacore files created in \nAnother file that is needed for problem determination is eclipse.ini holding startup parameter for eclipse environment.\n\nHow to investigate startup issues of Eclipse based products where the Java Process terminates unexpectedly during the start-up\n\nRight after you started the application, it crashes and presents you an Eclipse pop-up window like the following:\n\nJava started but crashed with exit code=1\n\nPrepare yourself for some debug fun. If your coffee is gone, I recommend getting another one, then continuing with the below steps. If you still have coffee left, move right on to the next step. If javacore files are created check them for exception. If not, create Javacore files to gain more insight into the root cause of the crash.\n\nDid anybody mess with your Eclipse startup parameters? If this is not a new installation and the exception happened all of a sudden, maybe some JVM arguments were changed and are hence causing this crash. Always a good candidate is the -Xmx value, which specifies the maximum memory allocation pool for the Java Virtual Machine (JVM). A lot of users still think: The more, the better! Unfortunately, they over-tune the JVM and the memory allocation is simply too large for the JVM to be successfully created. If changes were made to the JVM settings, please revert those changes back to the default values (you can for example compare them to a working or untouched system). Then try to launch your Eclipse based application again.\n\nAs Eclipse is still in the start-up process when the crash occurs, the JVM errors cannot be written to the Eclipse error logs under /.metadata/.log\nHence, we need another way to get more information about the root cause. Open your eclipse.ini file (located in the  directory) and add the following line under -vmargs opt:\n\n-Xdump:java:events=vmstop\n\nThis should enforce the creation of a javacore.txt file in case of a JVM crash. In our case here, you will find it in the IID root directory after the next restart.\n\n3. Communication problems\n\nOne of my customers reported an issue that he cannot open a Process Application or Toolkit in IBM Integration Designer (IID). This problem did NOT occur for all Applications or Toolkits, but only for some. At least consistently, so that’s good.\nYou can imagine that this kind of error blocks the user doing any of their work properly.\nThe following exception occurred when the user tried to open a sample Toolkit in the IID workspace:\n\nThe error message from the workspace .log file and bpmHistory.log was as follows:\n!ENTRY com.ibm.wbit.ui 4 0 2016-04-06 04:58:10.982\n!MESSAGE Unable to retrieve the list of process applications and toolkits from Process Center. Contact your Process Center administrator for help.\n!STACK 0\ncom.ibm.wbit.lombardi.core.exceptions.TeamworksServerRetrieveException: Unable to retrieve the list of process applications and toolkits from Process Center. Contact your Process Center administrator for help.\n                at com.ibm.wbit.lombardi.core.rest.RestActionImpl2.refresh(RestActionImpl2.java:749)\n                at com.ibm.wbit.lombardi.core.utils.BPMRepoRESTUtils.refreshFromRepositorySelective(BPMRepoRESTUtils.java:1181)\n                at com.ibm.wbit.ui.bpmrepository.utils.ProcessCenterUtils$2.run(ProcessCenterUtils.java:219)\n                at com.ibm.wbit.lombardi.core.utils.AsyncThread.run(AsyncThread.java:50)\n                at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\nCaused by: java.lang.NullPointerException\n                at com.ibm.wbit.lombardi.core.rest.RestActionImpl2.refresh(RestActionImpl2.java:717)\n                ... 4 more\nFrom the exception text the problem is very likely related to\na.&nbsp;&nbsp;A connection problem: Process Center (PC)  IBM Integration Designer (IID)\n&nbsp;&nbsp;&nbsp;&nbsp;or\nb.&nbsp;&nbsp;A permission problem of user trying to open the Toolkit in IID workspace\n\nBeside of activation of trace settings on IID end\n**com.ibm.wbit.lombardi.core.utils=fine:com.ibm.wbit.lombardi.core.rest=fi \nne:com.ibm.bpm.common.rest.impl=fine:com.ibm.wbit.ui.bpmrepository.actio \nns=fine**                                                                \n\nalso check the Process Center (PC) server logs for logged exception messages. If the connection can be established to PC but is denied for any reason by PC it is logged in the server log file.\n\nAs the communication between PC and IID is made by http(s) calls you can also activate FIDDLER traces to see the communication between these 2 components. Maybe it shows some indication why the error happens. \n\nHow to capture HTTP traffic with the Fiddler web debugging proxy\nhttps://www.youtube.com/watch?v=mJ5o5qYPdVc\n\n4. Installation problems \nDid this installation ever worked or did you just install it? If this error shows up after a new installation of the Eclipse based product (IID), check out the installation logs to make sure it was installed without any exceptions. To do so, have a look at the IBM Installation Manager log files under /logs\n\nOpen the index.xml file and review all logs linked in there for any exceptions or failures during the installation.\n\nJR60033: INSTALLING IBM INTEGRATION DESIGNER V18.0.0.1 FAILS IF AN EARLIER VERSION OF IBM INTEGRATION DESIGNER IS ALREADY INSTALLED\nhttps://www-01.ibm.com/support/docview.wss?uid=swg1JR60033\n\nWhen you install IBM Integration Designer 18.0.0.1, the installation completes with warnings. If you look at the IBM Installation Manager log file, you see these warning messages:\n\nEclipse launcher \"C:\\IBM\\IID18\\eclipse.exe\" does not exist \nEclipse initialize returned with error status=1\n\nIf you try to start Integration Designer, nothing happens.\n\nReference (Optional)\n\n1.Best Practices using IID in BPM environment\n“Best practices when using IBM Integration Designer and IBM Process Designer together”\nhttps://www.ibm.com/developerworks/websphere/bpmjournal/1106taylor/1106taylor.html\n\n2.Hello World: WID (Skill Level: Beginner) – tutorial\nhttps://www6.software.ibm.com/developerworks/education/wes-hellowid/wes-hellowid-a4.pdf\n \n3.A beginner's guide to WebSphere Integration Developer\nhttps://it.toolbox.com/blogs/gregfullard/a-beginners-guide-to-websphere-integration-developer-061507\n\n4.SOA / SCA basic Tutorial\nhttps://docs.huihoo.com/soa/osoa/SCA-OASIS-Tutorial-part1.pdf\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Desktop Process Designer/Web PD","description":"michaela.trautwein@de.ibm.com","owner":"@Michaela Trautwein-Ostner","path":"/BusinessProcessManager/BPMDevToolsandRepository/DesktopProcessDesigner","text":"Date：2019-12-16\n\nOverview\n\nProcess Designer is the primary modeling and design tool in IBM® Business Automation Workflow. It is an editor that you access in a browser to model, implement, and inspect business processes.\n\nThe traditional desktop Process Designer (also known as heritage Process Designer) is deprecated.\n\nProcess applications that are developed in Process Designer can at any time be run on the Workflow Center server or saved to a snapshot and deployed on the Workflow Server.\n\nAll Process Designer projects are contained in process applications. Process applications can share assets that are in toolkits. You store process applications and associated artifacts in the Workflow Center repository.\n\n Prerequisites\n\nBasic information:\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/proc_designer.html\n\nWhere to edit Process Designer artifacts:\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/designer_overview.html\n\nIf you want to play around with WebPD you can use the Hiring Sample that comes with BAW and follow the steps in \nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.workflow.main.doc/topics/modifyingpackagedsample.html\n\nComponent\n\nStarting Web Process Designer:\nFrom Process Center or Workflow Center clicking ‘Open in Designer’ opens Web Process Designer by default\n\nWorking with Web Process Designer\n\nElements\n1 Artifact selection (by groups)\n2 Navigation Bar (dependent on selected artifact)\n3 Area to edit details\n\nCreating and editing artifacts\nWith the CreateNew Button you can directly select artifacts as shown below:\n\nAlternatively you can select artifacts by group (click on the + sign right of the group name):\n\nProcess: Create a new process\n\nHover over the elements to see the description as shown above\n\nThe overview of the process looks like\n\nUser Interface\n\nCreate and edit the User Interface\n\nHeritage Human Service (can only be edited in Eclipse based Web Process Designer)\n\nService\n\nCreate and edit one of the Service types shown below:\n\nEvents\n\nCreate and edit Events\n\nTeams\n\nAssign teams to a process\n\nData\n\nDefine Business Objects and EPVs\n\nPerformance\n\nDefine and edit Tracking Groups\n\nFiles\n\nImport external files\n\nIntegrating Toolkits\n\nAssets that need to be shared can be saved in Toolkits . You can work with toolkits dependencies like changing \nThe version, adding new toolkits, etc.\n\nFind references\n\nTo see where an artifact is used click References   on the bottom of the WebPD window.\n\nReferenced By: This list shows the artifacts in the current application or toolkit and their dependencies that use the library item or the artifacts across all toolkits, depending on the scope that you choose\n\nLocal scope shows where artifacts are used only in the current process application or toolkit and its dependencies. This is the default view. \n\nGlobal scope shows where artifacts are used across all the toolkits in the Workflow Center repository and is available only for library items in named snapshots of toolkits. \n\nThe BusinessObject ‘PersonData’ for example is used in the artifacts shown above.\n\nTesting your application\n\nUse the Inspector to run or debug processes.\n\nUse the Debug or Run Button for a User Interface to test it directly in Web Process Designer\n\n Troubleshooting\n\nData Collection\n\nGeneral MustGather\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-ibm-business-process-manager-products\n\nFiddler Trace\nhttps://www.ibm.com/support/pages/collect-http-traffic-capture-fiddler-or-your-web-browser\n\nFor Performance or Memory issues collect the data as described in\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-performance-problems-ibm-business-process-manager-bpm\nand \nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-hangs-crashes-and-out-memory-problems-ibm-business-process-manager-bpm\n\n Data Analysis\n\nTypical problems:\n\nTo analyze WebPD issues most of the time you will have to recreate the issue in Castle, and it is best is to have a simplified twx file from the customer.\n\nAs WebPD is running in a browser make sure to use the same browser as the customer – ask the customer for details about browser and version.\n\nTo debug Browser related issues use F12 in the browser or ask the customer for a Fiddler trace.\n\nIt can be helpful to have a recording of the problem.\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Server Connection","description":"shyuan@cn.ibm.com","owner":"@Yuan Shang","path":"/BusinessProcessManager/BPMDevToolsandRepository/ServerConnection","text":"2019-11-1\n\nOverview – Server Connections\nIn IBM Business Process Manager, there are several types of connections. Each connection type has its own specific behavior and settings.  This chapter will cover the basic behaviors behind these connections and how we could do to handle the issues with them. The main connection types are: \nProcess Server to Process Center\nProcess Center to Process Server\nProcess Designer to Process Center (Deprecated)\nProcess Designer to online Process Server (Deprecated)\nIntegration Designer to Process Center\nIntegration Designer to the unit test environment\n\n Prerequisites (Optional)\nIt’s recommended for readers to have a basic grasp of BPM/WAS topology which contains PC, PS, PD, and IID.  Also, it would be helpful to understand the chapter ‘Endpoint Configuration’ to have better understanding of the scenarios mentioned at this article.   \n** Most of the information covered at this chapter is applied for BPM 8.6.0 and later versions to BAW 19.0.0.2. \n\nComponent\n 1.Connections Diagram\n\n2.Connections between Process Server and Process Center\n\nBehaviors\n\nSettings\n\nKey Tasks:\nUpdate the host and port name of the Process Center connection details.\nChange Process Server from an offline server to a Process Center connected server (online server), and vice-versa.\nChange the Process Center connection URL. \nModify the security role mappings for ProcessCenterUser and BPMAuthor if necessary. \nConfigure SSL communication \nEnable HTTP access temporarily (Not Recommended) \n\n** HEARTBEATDESIGNATEDDEPLOYMENTENDPOINT (Default value is INTERNALCLIENT):  Configures the URL that is used by Process Center to deploy applications to Process Server. The endpoint must resolve to the teamworks.war web module in the IBMBPMTeamworks application. \n\nProcedure:\nUsing wsadmin commands to customize the Workflow Server settings used to connect to Workflow Center \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.admin.doc/topics/tconnecttopctr.html  \n\nUsing the administrative console to customize the Workflow Server used to connect to Workflow Center \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.admin.doc/topics/tconnecttopctr2.html \n\n 3.Connections from Process Designer to Process Center (deprecated) \nBehaviors\n\nSettings\n\nComponents of desktop Process Designer use multiple endpoints in communicating with Process Center. The initial connection is defined in the Process Designer eclipse.ini file as the value of the com.ibm.bpm.processcenter.url system property. The property value is set during Process Designer configuration based on the value of the EXTERNAL endpoint for bpmrepo-services.war that is configured on the Process Center.  \n\nIf the endpoint configuration of the bpmrepo-services.war file has changed, desktop Process Designer must be downloaded from the Process Center using a browser that is running on the machine where the Process Designer will be installed. Installing an interim fix also requires Process Designer to be downloaded and installed again. Developers should never update the connection information in the Process Designer eclipse.ini file. \n\nProblems with desktop Process Designer \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/startingae.html  \n** As the HTTPS communication is used by default here, the default port for it should be WCdefaulthostsecure, please noted it is the port of cluster member (server) rather than dmgr. \n\n4.Connections from Process Designer to online Process Server (deprecated)\nBehaviors\n\nSettings\n\nDesktop Process Designer uses the Process Server settings that are stored in Process Center to initially connect to the online process servers by using HTTP connections.  \n\nThe URLs that desktop Process Designer uses in an HTTP connection are determined by the Process Server endpoint configuration, which is loaded after the initial connection. By default, desktop Process Designer uses the generic scenario EXTERNAL_CLIENT for all URLs to access Process Server \n\nIf a different endpoint scenario is required, then you can use the following group of optional scenarios, which take precedence over the EXTERNAL_CLIENT:  (At PS Side)  \nAETOPS\nPROCESS_CENTER\nAEIMAGESPREFIX\nAEPORTALPREFIX\nAEWEBAPIPREFIX\nAESERVLETPREFIX\nAEBPMRESTSERVICECR_PREFIX\nAESOCIALBUSWEBAPP_PREFIX\nAERESTGATEWAYCRPREFIX\n\n** Process Designer uses only HTTP calls because httpProtocolOnly is set to true.  \n** ProviderID is the bootstrap address for EJB calls and is should be stored at PC side given by PS heartbeat. \n\n 5.Connections between Integration Designer to Process Center \nBehavior\n\nSettings\n\nAccessing the Process Center repository \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.wid.integ.doc/processcenter/topics/topenpc.html  \n\n** The default port of ORB BOOTSTRAP_ADDRESS is listening the request from IID to PC. \n\n** If the port is not accessible, the Process Center may reside behind a firewall and Integration Designer may reside outside the firewall. \n\n6.Connections between Integration Designer to the UTE\nBehavior\n\nIf you have developed modules or mediation modules in Integration Designer, you can deploy the modules to a UTE server in the Servers view for the purpose of testing using the integration test client. \nSettings\n\nIf you chose to install the Workflow Server test environment profile when you installed Integration Designer, then you will already have a default unit test environment (UTE) server that was automatically created. However, if you deleted the default server or if you are working with a standalone installation of Workflow Server, you will need to manually create a test environment server for testing your integration and mediation modules. \n\nWorking with Unit Testing Environment(UTE)\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.wid.admin.doc/deploy/topics/tworkuteserv.html \n\n Troubleshooting\nData Collection\n\n 1.Server Trace & Logs\nTrace needed for different issues are various.  Generally, we would suggest to enable the connectivity trace if there is no obvious exception can be traced.  \nConnectivity Trace String:  \n=info: WLE.=all:com.ibm.bpm.endpoint.=all:org.apache.commons.httpclient.=all \n\nSecurity Trace String:  \n=info:com.ibm.ws.security.=all:com.ibm.websphere.security.=all:com.ibm.websphere.wim.=all:com.ibm.wsspi.wim.=all:com.ibm.ws.wim.=all \n\nSSL Trace String: \n*=info:SSL=all \n\nHTTP Connection:  \n=info:com.ibm.ws.webcontainer=all: HTTPChannel=all\n\nIf IBM HTTP Server is configured and involved in the issue, please follow the instruction provided to collect IHS trace.   If you just would like to have a quick glance, collect the access.log should be sufficient.  \nhttps://www.ibm.com/support/pages/ihsdiag-utility-package-capturing-ibm-http-server-diagnostic-information \n\n2.Configuration Files\nIf there are no specific properties we would like to check, we would suggest collecting the entire directory from location:  dmgr_root/config/cells/\n\nFor PC PS Connectivity issue, here is a list of configuration files you may want to pay attention. Please make sure you check them at both PC and PS sides.  \ninstallroot/profiles/dmgrname/config/cells/cellname/cell-bpm.xml installroot/profiles/dmgrname/config/cells/cellname/security.xml installroot/profiles/dmgrname/config/cells/cellname/clusters/clustername/cluster-bpm.xml   \n(if you have more than one cluster, use the appTarget cluster here) \n\nIf there is any of the runtime configuration attributes is related to the issue, collect the specific configuration file and also request the runtime TWCR.xml file from the location below: \n\nManagedNodeProfileROOT\\config\\cells\\cellname\\nodes\\nodename\\servers\\servername\\process-center(server)\\config\\TeamWorksConfiguration.running.xml \n\n 3.Fiddler & Network trace\nFiddler trace collection procedure: \nhttps://www.ibm.com/support/pages/how-perform-fiddler-trace-capture-network-traffic-1 \n4.Trace add on Eclipse client side\nFor desktop Process Designer issue, we have specific trace could add on PD eclipse side. Please follow the instruction below to complete the steps.  \nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-ibm-process-designer-problems-ibm-business-process-manager-bpm  \n\nFor Integration Designer issue, please use this link here to apply the trace. \nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-ibm-integration-designer  \n 5.Database Table\nIf the issue is about connection to Process Server, then the information comes from Process Server is essential.  \nProcess Center: LSW_SERVER  \nProcess Server: LSW_SYSTEM \n\nData Analysis\nFor most of the connection issues, we will need to locate the problematic component from a complicated topology or architecture, and then to do more troubleshooting on the specific component.  That requires you to understand the topology or the involved severs and modules very clearly before data analysis part.  \n\nStep 1: Understand the topology and participant nodes/servers within the network. \n\nAs the very first step of the troubleshooting of a connection issue, you could request clients to explain the participant parties within this connection issue or provide their topology diagram if it’s quite complicated to describe.  \n\nStep 2: Use logs & trace to locate the problematic component.  \nFor example, if client’s PS failed to connect to PC, and they saw the redirect code HTTP: 302 at the PS logs \nCWLLG0095W: The repository contact failed with a status of: 302 \nOR \nCWLLG0095W: Unable to connect to Process Center. The contact failed with a status of: 302 \nThis could be caused by PS, PC or the other modules between them like IHS, web server, or Firewall.  \nWe could check the IHS and web browser of PC server first, if the logs of IHS (like access_timestamp.log) shows the request sent by PS has been sent but redirected for some reason. And there is no incoming request received by PC side.  We could basically confirm that the problem is at HTTP Server side.     \nIf the request passed through IHS successfully and got received by PC and redirected, then we should focus on the Process Center side.   It’s pretty straightforward.  \n\nStep 3: Common methods of analysis  \nOnce we focus on a specific component of BPM, we will need to rely on the data we collect from clients.  \nFor example, to check the current connection configuration between PC and PS, we could check the file cluster-bpm.xml (dmgrroot/config/cells/cellname/clusters/cluster_name/cluster-bpm.xml) at Process Server and you will see the following properties.  \nKey properties: processCenterUrl and heartBeatInterval \n \nThese properties illustrated that the Process Center was configured with URL http://ibmbpm:9080/ProcessCenter for connection, and PC is supposed to receive the heartbeats sent by PS every 10 seconds.   \nYou could verify this by 1. Entering the URL specified at a browser on the machine of Process Server. 2. Check if PC actually receive the heartbeat every 10 seconds.  \n\nIn order to verify it at PC side, you could check the database table LSW_SERVER and let client to export the entire table to you.  \nYou may see the table export like this \n(Only key columns are extracted here)  \n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    SERVER_ID\n    NAME\n    ADDRESS\n    PROVIDER_URL\n    PORT\n    IS_OFFLINE\n    LAST_HEARTBEAT \n    USER_NAME \n  \n  \n    8ac8f93-a26d-4ead-ab85-c644bfbde68d\n    Prod_PS\n    https://bpmpsprod:9443/teamworks\n    corbaname:iiop:bpmpsprod:9810 \n    9443\n    F\n    2019-10-01-02.03.19.091000\n    bpmadmin\n  \n\nWe could tell that there is a connected Process Server named Prod_PS with address https://bpmpsprod:9443/teamworks . The latest heartbeat PC received from PS was at 10/01/2019 02:03:19.   If client reported this issue after this time stamp, for instance at 10/25/2019, it basically proved that this connection has been lost for more than 25 days. We will need to focus on the PS and all of the participant nodes/servers between PC and PS.  \n\nIf we could use the step 2 to exclude the possibilities of other participant servers like IHS and web servers, between two servers, we should think about authentication and authorization issues at this moment.  \n\nTo validate our presumptions, we will need to verify whether the username & password are mapped to the correct authentication alias and given to the expected security role.   As I mentioned at the diagram for PC PS connection, the authentication alias of the role ProcessCenterUser has to be existed at Process Center and configured at Process Server. The user name & password mapped to it have to be same at both sides.  \n\nCheck the file cell-bpm.xml and security.xml (dmgrroot/config/cells/cellname/security.xml and cell-bpm.xml) to locate the ProcessCenteruser configured at PS. We could find out the following mapping: \n<authDataEntries xmi:id=\"JAASAuthData1542562019436\" alias=\"PROCCTRUSERALIASDe\" userId=\"bpmadmin\" password=\"{xor}DhGS762Xc\" description=\"\"/ \nProcessCenterUser -- PROCCTRUSERALIAS_De – bpmadmin \nTo find the corresponding cell-bpm.xml and security.xml at PC side: \n<authDataEntries xmi:id=\"JAASAuthData_1541638326243\" alias=\"CellAdminAlias\" userId=\"bpmadmin\" password=\"{xor}DDYyMz4zPnxtb25n\" description=\"BPM Cell Administrator Alias\"/  \nWe could see that the user bpmadmin exists at Process Center side, but the encrypted password doesn’t look match with each other.   We could ask client if they modified their password recently or not to validate our findings.  \n\nReference (Optional) \n\nConnections in Business Process Manager \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.imuc.doc/topics/c_overviewconnections.html  \n\nUsing wsadmin commands to customize the Workflow Server settings used to connect to Workflow Center \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.admin.doc/topics/tconnecttopctr.html  \n\nUsing the administrative console to customize the Workflow Server used to connect to Workflow Center \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.admin.doc/topics/tconnecttopctr2.html  \n\nWorking with Unit Testing Environment(UTE) \nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.wid.admin.doc/deploy/topics/tworkuteserv.html  \n\nConfiguring SSL Communication \nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.6.0/com.ibm.wbpm.imuc.bpmesb.doc/topics/tinscnfgsslnd.html  \n\n \n","wordCount":0,"topics":[],"type":"Content"},{"name":"High CPU","description":"jennthom@us.ibm.com","owner":"@Jennifer Thompson","path":"/BusinessProcessManager/Performance/HighCPU","text":"Date:2019-10-16\n\nOverview \nDocumentation to diagnose IBM Business Process Manager (BPM) high CPU, hang, and Performance cases. \n\n Prerequisites (Optional) \nIt is useful to have a basic understanding of Java stack traces. \n\nComponent \nBest practices for high JVM CPU utilization issues:https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.admin.doc/topics/radmmemoryerrorscpu.html \n\n Troubleshooting \nData Collection\nWebSphere (WAS) Mustgather Links (varies by operating system): \n\nLinux: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-websphere-application-server-linux  \n\nWindows: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-windows  \n\nAIX: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-websphere-application-server-aix  \n\nSolaris: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-solaris \n\n Data Analysis \n\nBPM Performance-High CPU Decision Tree  \n\nThis document is a step-by-step guide to diagnose BPM high CPU, hangs, and performance issues. \nhttps://ibm.box.com/s/zbc922g4sl026q9ho9v425yfhw3hp5lq\n\nReference (Optional) \n\n1.WASSDK Reference doc: https://ibm.box.com/s/von422yyw9ugaj9j6vzl7qvempkteev6\n\n2.WASSDK Performance doc reference: https://ibm.box.com/s/iwl5lf0fwfd8dqvyrc34f218te0msv9r  \n\n \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Out of Memory/High Memory","description":"jennthom@us.ibm.com","owner":"@Jennifer Thompson","path":"/BusinessProcessManager/Performance/OutofMemory","text":"Date:2019-10-16\n\nOverview \n\nDocumentation to diagnose IBM Business Process Manager (BPM) out-of-memory (OOM) conditions and Java Virtual Machine (JVM) abends. \n\n Prerequisites (Optional) \n\nIt is useful to have a basic understanding of Java object construction and Java stack traces. \n\nComponent\n\n1.Review “OOM Review and Survival Guide” \nhttps://ibm.box.com/s/podg0ga1vbi9yy02o2q6hjfyjin4htn1   \n\n2.Review “Best practices for JVM memory issues” \nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.admin.doc/topics/radmmemoryerrorsgeneral.htmlB\n\n Troubleshooting \n\nData Collection \n\nMustGather: Out of Memory errors with WebSphere Application Server on AIX, Linux, or Windows \nhttps://www.ibm.com/support/pages/mustgather-out-memory-errors-websphere-application-server-aix-linux-or-windows \n\nMustGather: Out of Memory errors with WebSphere Application Server on Solaris - Heap Leak \nhttps://www.ibm.com/support/pages/mustgather-out-memory-errors-websphere-application-server-solaris-heap-leak \n\n Data Analysis \n\nThe “BPM OOM-JVM Abend Decision Tree” will provide a step by step guide for diagnosing an OOM or abend. \nhttps://ibm.box.com/s/kaprcbw1woxoos12d5ov82sm8bjl87zp  \n\nReference (Optional) \n\nWASSDK Reference doc \nhttps://ibm.box.com/s/von422yyw9ugaj9j6vzl7qvempkteev6  \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Database","description":"michaela.trautwein@de.ibm.com","owner":"@Michaela Trautwein-Ostner","path":"/BusinessProcessManager/Performance/Database","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Housekeeping","description":"qingzou@cn.ibm.com","owner":"@Qing Zou","path":"/BusinessProcessManager/Performance/Housekeeping","text":"Date:2019-12-13\n\nOverview\n\nThere are several areas of IBM Business Process Manager (BPM) and IBM Business Automation Workflow (BAW) system-level cleanup that should be done on a regular basis to help to save disk space on the database server and to improve overall performance of the BPM/BAW environment. Housekeeping Fundamentals Education teaches the basics how to do the housekeeping, best practices of when to do the housekeeping, and a better understanding of overall procedures. This module serves as the basis for in-depth education modules on BPM/BAW housekeeping.\n\n Prerequisites\n\n1.Terminology\nNamed snapshot(s) - these types of snapshots are present in both types of BPM servers - Development (Process Center) and Runtime (Process Server). In Development they are created each time you click on the Snapshot icon in Process Designer (PD) or WebPD and name your snapshot. Runtime named snapshots are the application snapshots you deploy from your Development environment, both online or offline deployments.\n\nUn-named snapshots - these types of snapshots are present only in your Process Center/Development environments. They are NOT present in Process Server/Runtime environments. In Development these snapshots are created each time any developer working in PD/WebPD performs a \"Save\" operation for any item, including Business Process Diagrams (BPD), services, etc.\n\nPC/DEV – Acronym for Process Center / Development BPM environment\n\nPS/Runtime – Acronym for Process Server / Runtime BPM environment\n\nPDW – Acronym for Performance Data Warehouse\n\n2.BPM Database and relation between important tables\nAll BPM objects are stored in the BPM databases. Please note that this information is just shared for educational purposes. The BPM database is considered to be a \"black box\" and you should NOT directly manipulate data in any of the tables. All database updates should be done through APIs and other supported methods. For the purposes in this article, we start by examining the following:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. LSW_PROJECT – This is where all the process application (PA) and toolkit (TK) names are stored.  The columns we are most concerned with are:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) NAME – the name of the PA/TK.  This is shown in the Process Designer and Process Center Console as the logical display name.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)\tPROJECT_ID – the GUID of the PROJECT.  This will be used to lookup the various snapshots in the LSW_SNAPSHOT table.\n&nbsp;&nbsp;&nbsp;&nbsp;b. LSW_BRANCH – This is where all the PAs and TKs tracks are stored\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)\tNAME – the name of the Track (Main - default).  This is shown in the Process Designer and Process Center Console as the track name in the left top corner (drop-down list)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)\tBASE_SNAPSHOT_ID - this column would be populated only when it's a non-default track (not Main), then it would point to a base (Main) snapshot id\n&nbsp;&nbsp;&nbsp;&nbsp;c. LSW_SNAPSHOT – This is where all the named and unnamed snapshots will be listed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) PROJECT_ID – we use this to select the appropriate snapshots for a project we want to examine.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)\tNAME – Name of the snapshot if a name has been specified (by a user creating a new snapshot), or null if the snapshot is unnamed.\n&nbsp;&nbsp;&nbsp;&nbsp;d. LSW_DUR_MSG_RECEIVED – Where durable intermediate message events (IMEs) are stored.\n\nComponents\n\n1.The most important tables that gets cleaned up\n\nPA/TK snapshot cleanup:\nMain tables are involved in this cleanup are - LSWSNAPSHOT, LSWPOVERSIONS, LSWFAVORITES, LSWBRANCH, LSWPROJECT, LSWUSRGRPXREF, LSWUSRGRPGRPXREF, LSWUSRGRP* .\n\nIMPORTANT NOTE: As part of snapshot cleanup instances and tasks are cleaned up automatically as well. So, see the next section to see what tables are involved in instances/tasks cleanup.\n\nInstances/tasks cleanup:\n\nUsers/groups:\nLSWUSRGRPMEMXREF\nLSWUSRGRP_XREF\nLSWUSRGRP_*\n\nTask associated with this instance from:\nLSWTASKADDR\nLSWTASKEXECUTION_CONTEXT\nLSWTASKNARR\nLSWTASKFILE\nLSWTASKIPF_DATA\nLSWTASKEXTACT_DATA\nLSW_TASK\n\nBPD Instance data from:\nLSWBPDINSTANCEDOCPROPS (only if legacy BPM 8.0.x docs are still used)\nLSWBPDINSTANCE_DOCUMENTS (only if legacy BPM 8.0.x docs are still used)\nLSWBPDINSTANCE_VARIABLES\nLSWBPDINSTANCE_DATA\nLSWBPDNOTIFICATION\nLSWRUNTIMEERROR\nLSWBPDINSTANCE\nLSWINSTMSG_INCL\n\nDurable message event cleanup:\nLSWDURMSG_RECEIVED\n\n2.Critical amount of runtime data\nStarting BAW 18.0.0.1 the following useful information is added in the system out log each time during server startup - \n\nThe system maintenance monitor is determining if maintenance is required. The system is in an OK state.\n----------------------------------\n[10/9/18 12:48:59:415 UTC] 00000171 MaintenanceLo I com.ibm.bpm.maintenance.MaintenanceLogger log\n \nCurrent number of snapshots: 77\nMaximum number of snapshots allowed: 500\nNo action is required.\n \n[10/9/18 12:48:59:416 UTC] 00000171 MaintenanceLo I com.ibm.bpm.maintenance.MaintenanceLogger log\n \nCurrent number of unnamed snapshots: 1,093\nMaximum number of unnamed snapshots allowed: 10,000\nNo action is required.\n \n[10/9/18 12:48:59:417 UTC] 00000171 MaintenanceLo I com.ibm.bpm.maintenance.MaintenanceLogger log\n \nCurrent number of task instances: 119\nMaximum number of task instances allowed: 2,400,000\nNo action is required.\n \n[10/9/18 12:48:59:418 UTC] 00000171 MaintenanceLo I com.ibm.bpm.maintenance.MaintenanceLogger log\n \nCurrent number of process instances: 38\nMaximum number of process instances allowed: 600,000\nNo action is required.\n \n[10/9/18 12:48:59:419 UTC] 00000171 MaintenanceLo I com.ibm.bpm.maintenance.MaintenanceLogger log\n \nCurrent number of durable messages: 3\nMaximum number of durable messages allowed: 8,000,000\nNo action is required.\n--------------------------------------------------\nYou may get all of this information using the database queries and/or wsadmin commands in earlier versions of BPM but above information gives you a good idea of what IBM considers good/allowed numbers of snapshots/instances/tasks/durable message events in the system. So, you may do your cleanup/purge job based off of this information.\n\nBesides, we can see such kind of performance data via Process Admin Console.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a.Under Server Admin  Performance  Dashboard, click on Load Data.\n\nRefer to Knowledge Center document:\nDiscovering and managing database performance issues by using the Performance Dashboard\n\n&nbsp;&nbsp;&nbsp;&nbsp;b.Under System Maintenance Status.\n\n3.Types of cleanup\n\nThere are certain things to be aware of before you start performing any type of cleanup and especially snapshot cleanup.\n\nWhat you need to know first -\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. It is better to perform it by schedule at the time when there is little to no activity on the BPM server. It puts quite a high load on the database and on a big number of important BPM tables, so the less overloaded the BPM server the better.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Make sure you have a good backup of the database before you perform any type of cleanup (especially in Production). So a good schedule sequence would be - backup the database first, cleanup procedure next.\n&nbsp;&nbsp;&nbsp;&nbsp;c. Best practice when to do the cleanup\n \nRefer to Managing persisted data for\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Process Instances cleanup\n&nbsp;&nbsp;&nbsp;&nbsp;b. Tasks cleanup\n&nbsp;&nbsp;&nbsp;&nbsp;c. Snapshot cleanup\n&nbsp;&nbsp;&nbsp;&nbsp;d. Durable Message Events cleanup\n&nbsp;&nbsp;&nbsp;&nbsp;e. Shared Business Objects cleanup\n&nbsp;&nbsp;&nbsp;&nbsp;f. BPM temporary directory cleanup\n\nBesides, we can do these cleanups.\n\n&nbsp;&nbsp;&nbsp;&nbsp;g. Old EPV values cleanup\n\nTo reduce the performance impact of having a large number of exposed process variables (EPVs), use BPMEPVHistoryCleanup command to delete EPV values that are no longer required.\n\n&nbsp;&nbsp;&nbsp;&nbsp;h. Event Manager on-hold tasks deletion\n\nEvent Manager tasks are special kind of tasks that are not human tasks. Event Manager tasks include UCA's, timer events, message events, token move tasks. As you may know there are cases when Event Manager might get stuck and as a result you may get Event Manager tasks (UCAs, timer events, BPD token move tasks, Message Events) getting stuck. As a result in the event manager console, these events are scheduled for execution on \"1/2/99\" or \"2099-02-01\" depending on localization. In other words, they will stay there forever unless you replay them using the BPMReplayOnHoldEMTasks command. But if you know for sure that you don't want to replay those tasks and instead, you want to get rid of them because associated process instance is no longer valid for such a replay then use BPMListOnHoldEMTasks and BPMDeleteOnHoldEMTasks commands for that.\n\nYou can also do this using the UI in Process Admin Console (PAC):\n\nPAC - IBM BPM Admin - Health Management - Delete Event Manager Tasks.\n\n&nbsp;&nbsp;&nbsp;&nbsp;i. Purging Portal Search Index (aka Lucene Index)\n\n In order to build up this index, BPM uses database tables as well as file system (for the local storage of Lucene index). The tables in BPM database for the index are - \n \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1) BPMTASKINDEX\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2) BPMINSTANCEINDEX\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3) BPMTASKINDEX_JOB\n\nCurrently, there is no automatic maintenance task running, which will delete unneeded data from table (1) and (2). Only for table (3) cleanup is done on a regular basis (by default every hour).\n\nIf you're running on BPM beyond IBM BPM 8.6 CF2018.03 then the following dwAnswer has all the details and SQL scripts you need to know on how to cleanup (1) and (2) tables after you perform a cleanup of snapshots / instances / tasks.\n\nIf you're running on BPM 8.6 CF2018.03 or BAW versions then the scripts/commands are included as part of the Product (indexTablesCleanup.bat for Windows or indexTablesCleanup .sh for Linux). More details can be found in the following Knowledge Center article.\n\nThe overall advice is to always run this cleanup after you do a cleanup of any of runtime data.\n\n Best Practices\n\nWhen to do the cleanup?\n\nYou can consider cleanup under any of these situations.\n1.Instance or task querying takes a long time.\n&nbsp;&nbsp;&nbsp;&nbsp;a. Check instance and task table counts referring to “A．Check BPM database table counts”.\n&nbsp;&nbsp;&nbsp;&nbsp;b. According to “B．General recommendation based on table counts”, go for instance cleanup.\n\n2.Slowness for most of REST API calls.\n&nbsp;&nbsp;&nbsp;&nbsp;a.Check SystemOut.log of AppTarget servers searching by “elapsed time”.\n\nIf seeing lots of different REST API calls slowness like this, that means you should consider for cleanup continuously.\n----------------------------------\n[10/1/19 17:15:58:030 CST] 00000562 LoggingUtils  I   The elapsed time for the following REST request was 102.38 seconds, which exceeds the warning threshold of 60 seconds:                  https://bpm.abc.com/rest/bpm/wle/v1/coachflow/instancedata       \n[10/1/19 17:15:58:056 CST] 0000063b LoggingUtils  I   The elapsed time for the following REST request was 165.62 seconds, which exceeds the warning threshold of 60 seconds:                    https://bpm.abc.com/rest/bpm/wle/v1/task/actions                              \n[10/1/19 17:18:34:494 CST] 00000638 LoggingUtils  I   The elapsed time for the following REST request was 66.71 seconds, which exceeds the warning threshold of 60 seconds:                    https://bpm.abc.com/rest/bpm/wle/v1/coachflow/service/1.6267619e-cf32-483e-b857-fe1bfba907eb       \n[10/1/19 17:27:13:150 CST] 000006e5 LoggingUtils  I   The elapsed time for the following REST request was 78.57 seconds, which exceeds the warning threshold of 60 seconds:                     https://bpm.abc.com/rest/bpm/wle/v1/task/658483                    \n[10/1/19 17:29:33:497 CST] 0000057d LoggingUtils  I   The elapsed time for the following REST request was 80.42 seconds, which exceeds the warning threshold of 60 seconds:                      https://bpm.abc.com/rest/bpm/wle/v1/process/96919/actions        \n[10/1/19 17:45:53:096 CST] 00000793 LoggingUtils  I   The elapsed time for the following REST request was 117.68 seconds, which exceeds the warning threshold of 60 seconds:                     https://bpm.abc.com/rest/bpm/wle/v1/process/38410\n--------------------------------------------------\n&nbsp;&nbsp;&nbsp;&nbsp;b.\tCheck instance and task table counts, also snapshot table counts referring to “A．Check BPM database table counts”.\n&nbsp;&nbsp;&nbsp;&nbsp;c.\tAccording to “B．General recommendation based on table counts”, go for instance cleanup and snapshot cleanup.\nSlowness on Process Portal occurs and potentially increases to an unusable state.\n&nbsp;&nbsp;&nbsp;&nbsp;a.\tCollect client-side network data:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）\tHAR file captured through Firefox & Google Chrome Developer tools (F12) Network tab.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）\tXML file captured through IE Developer Tools (F12) Network tab.\n&nbsp;&nbsp;&nbsp;&nbsp;b.\tReview client-side network data by Fiddler.\nIf slowness happens on REST call execution in BPM server side, then go to the same steps mentioned in situation 2).\n\n4.BPM database tables are using too much disk space.\nLSW_PROCESS table is Occupying 10 GB data, can I clean this and how do I do that?\n\nThe LSW_PROCESS table contains the models of services (integration services, human services, etc.). It contains a row for all versions for all services.\nTo get rid of data there, it is recommended to cleanup old snapshots, especially unnamed snapshots.\n\n5.Exposed service REST call slowness.\n&nbsp;&nbsp;&nbsp;&nbsp;a.\tCheck SystemOut.log of AppTarget servers searching by “elapsed time”, and see slow REST call of exposed service, like this:\n[10/2/19 10:03:36:786 CST] 00000125 LoggingUtils I The elapsed time for the following REST request was 341.75 seconds, which exceeds the warning threshold of 60 seconds: https://bpm.abc.com/rest/bpm/wle/v1/exposed\n&nbsp;&nbsp;&nbsp;&nbsp;b.\tCheck these two table counts of BPM database, the larger counts the poorer performance of exposed service REST call.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）select count(*) from .lsw_favorite where enabled = 'T';\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）select count(*) from .lswsnapshot where isactive = 'T';\n&nbsp;&nbsp;&nbsp;&nbsp;c.\tTo improve exposed service REST call performance, go to consider for unneeded snapshot cleanup.\n&nbsp;&nbsp;&nbsp;&nbsp;d.\tAdditional,  property value should be equal to or greater than the number of active snapshots in order to get acceptable performance. You can check  value in TeamWorksConfiguration.running.xml , which is located in the following locations:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）Process Center profile: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;install_ root/ profiles/profile _ name/config/cells/cellname/nodes/nodename/servers/server_name/process-center\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）Process Server profile:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;install_ root / profiles/profile _ name/config/cells/cellname/nodes/nodename/servers/server_name/process-server\n\nReference\n\n1.Check BPM database table counts\nUseful SQLs for performance related issues\n\n2.General recommendation based on table counts\nHow do I know the when the BPM databases should be cleaned up? \n\nApplications and Snapshots\n\nGenerally when LSWSNAPSHOT has more than 100,000 rows or LSWPO_VERSIONS has more than 1,000,000 rows the system may need to be pruned to increase performance. First check to see if the environment has many active snapshots from the same application. In a DEV, TEST or QA type environment months of testing may have hundreds of active snapshots for one application. Work with client application developers to start archiving old and unneeded applications. Then work to schedule deleting the snapshots. On the Process Center you can have the unnamed snapshots auto delete enabled.\n\nInstances and Tasks\nThe key is the ratio of closed to total instances along with the age of the closed instances, which can be counted on LSWBPDINSTANCE table. For example we will say the business decided instances closed more than 30 days old may be deleted. If the percentage of closed past 30 days to all instances is more than 30% look into making a regular purge policy for instance cleanup.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Process Portal","description":"smmerris@us.ibm.com","owner":"@Seth Merriss","path":"/BusinessProcessManager/BusinessUserExperience/ProcessPortal","text":"Date:2019-12-20\n\nOverview\n\nThis section discusses the Process Portal component of IBM Business Automation Workflow. Process Portal is the user interface between BAW and the business users.\n\nProcess Portal an out of the box process application which is accessible from Process Designer. By default, all users have access to the Process Portal.\n\nThe main purpose of the user interface (UI) is to be the interactive area where users work on and complete tasks assigned to their team. Process Portal provides a variety of tools to help users complete their tasks such as saved searches which allow users to create customized lists of tasks, dashboards where users a manage their tasks and tasks of those assigned to their teams, and social features so that users can collaborate when they need help.\n\n Prerequisites\n\n1.Process Portal Primer (Box folder with video and PowerPoint)\n2.IBM Redbook “Deliver Modern UI for IBM BPM with the Coach Framework and Other Approaches”, Chapter 5 – Process Portal\n\nComponents\n\n1.Process Portal Layout\n&nbsp;&nbsp;&nbsp;&nbsp;a. Main menu: Left hand side menu displaying:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User profile\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dashboards\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Saved searches\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Startable services\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Launchable processes\n&nbsp;&nbsp;&nbsp;&nbsp;b. Context menu: Right hand side menu displaying:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Social features\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process instance stream\n&nbsp;&nbsp;&nbsp;&nbsp;c. Central (content) area: Main content of Process Portal displaying dashboards and coaches\n\n2.Process Portal Features\n&nbsp;&nbsp;&nbsp;&nbsp;a. Dashboards\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Dashboards in Process Portal \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Process Portal Dashboards: Authorization Overview\n\n&nbsp;&nbsp;&nbsp;&nbsp;b. Saved Searches\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Saved Searches in Process Portal\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Administering Searches\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)Tuning Saved Searches\n\n&nbsp;&nbsp;&nbsp;&nbsp;c. User Preferences\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)User Profile Preferences in Process Portal\n\n&nbsp;&nbsp;&nbsp;&nbsp;d. Notifications\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Notifications that you can expect in Process Portal\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Enabling Email for Process Portal Notifications\n\n&nbsp;&nbsp;&nbsp;&nbsp;e. Social features\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Process Portal Social Features (section 5.1.9 - Social features)\n\n&nbsp;&nbsp;&nbsp;&nbsp;f. Process Portal Search Index: Process Portal Search Index Comprehensive\n\n3.Modifying the Process Portal User Experience\n&nbsp;&nbsp;&nbsp;&nbsp;a. Settings\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Process Portal mashup custom properties\n&nbsp;&nbsp;&nbsp;&nbsp;b. Customization\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Customizing Process Portal\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Customizing Themes\n\n Troubleshooting\n\nData Collection\n\nProcess Portal Mustgathers\nhttps://www-01.ibm.com/support/docview.wss?uid=swg21656267\n\n1.Screen captures\nScreen captures or a web session with the customer will help to quickly identify the component of Process Portal and the symptoms users are experiencing. \n\n2.Network trace HAR file\nThe Fiddler tool can be used to capture a SAZ file browser network trace, but it is easier for customers to utilize their browser’s developer tools to capture a HAR file via the Network tab. IE11, Firefox, and Chrome all generate HAR file types which can be imported into Fiddler for analysis. \n\nThe network trace is extremely useful in analyzing most Process Portal issues (i.e. performance problems, UI display problems, unexpectedly missing dashboards or saved searches or tasks, erroneous notifications, etc.). You can review the overall elapsed time it takes to complete each REST API call that is used to populate the data in Process Portal, Request and Response data, and headers/cookies. \n\nThe following steps can be provided to the customer to capture a HAR file: \n&nbsp;&nbsp;&nbsp;&nbsp;a. Open the browser and press the F12 key to open the browser’s developer tools\n&nbsp;&nbsp;&nbsp;&nbsp;b. Select the Network tab\n&nbsp;&nbsp;&nbsp;&nbsp;c. Reproduce the issue\n&nbsp;&nbsp;&nbsp;&nbsp;d. Right click the content in the Network tab\n&nbsp;&nbsp;&nbsp;&nbsp;e. Select the option to export the content as a HAR file\n&nbsp;&nbsp;&nbsp;&nbsp;f. Upload the HAR file to the case\n\n3.Browser Console logs\nThe browser console logs are useful to collect errors and information when UI content is not displaying as expected. \n\n4.Business Automation Workflow server logs & FFDC files\nThe server logs will provide details about non-UI related errors such as authorization checks failing, long running REST API calls, authentication failures, etc. Search error messages against RTC, Salesforce, and internet search engines to find related IBM content, APARs, or cases to get more information about the errors. \n\n5.TeamworksConfiguration.running.xml file\nThe TWCR file contains the configuration properties that might be important to review in order to see if customers have made any modifications that might impact the issues they have or if there’s opportunity to alleviate an issue by recommending a configuration change to the customer. \n\n Data Analysis\n\nUsing the Network trace data to review REST API calls...\n\n/rest/bpm/wle/v1/searches/actions\nRetrieves the saved search action roles for the current user. The roles indicate whether the user is allowed to create shared saved searches and whether the user is allowed to administer other users' shared saved searches.\nREST interface for BPD-related resources - Saved Search Definition User Actions Resource - GET Method\n\n/rest/bpm/wle/v1/user/current?includeInternalMemberships=false&includeEditableUserPreferences=true&parts=all\nRetrieves information about a user that has been defined to the IBM Business Automation Workflow installation. Response used for authorization to determine what dashboards, services, tasks, etc. the user can view in the UI.\nREST interface for BPD-related resources - User Resource - GET Method\n\n/rest/bpm/wle/v1/searches/tasks/meta/businessDataFields\nRetrieves the list of business data variables that can be used to search for tasks and process instances in Process Portal. \n REST interface for BPD-related resources - Search Definition MetaData By Type Resource - GET Method\n\n/rest/bpm/wle/v1/exposed\nRetrieves the items (dashboards, saved searches, processes, startable services, etc.) that populate the Dashboards list and the Launch List. Performance of this call is heavily impacted by the number of snapshots in the environment. \nREST interface for BPD-related resources - Exposed Items Resource - GET Method\n\n/rest/bpm/wle/v1/tasks?calcStats=true\nExecutes a saved search to retrieve the tasks to populate the task list in Process Portal. Saved searches query the database directly. The out of the box saved search used by the Work dashboard is named “IBM.DEFAULTALLTASKSLIST_75”. \nREST interface for BPD-related resources - Search Execution Resource - GET Method\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Human Services","description":"ellia@ca.ibm.com","owner":"Elli Afshar","path":"/BusinessProcessManager/BusinessUserExperience/HumanServices","text":"Date:2019-12-09\n\nOverview\n\nThis document covers the definition, usage and troubleshooting approaches of Human Services in IBM Business Process Manager (BPM) and IBM Business Automation Workflow (BAW).\n\nWhat is a Human Service?\n\nA process in IBM BPM/BAW consists of some activities performed by a person (human) and the system (computer). \n\nThere are several activity types available when modelling with IBM® Process Designer. See the reference section of this document for more details.\n\nA \"User Task\" is the type of activity that is performed by a user (human). A \"Human Service\" can be selected or created in Process Designer to implement this activity.\n\nThere are two types of Human Services currently available:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a.Heritage Human Service (deprecated)\n&nbsp;&nbsp;&nbsp;&nbsp;b.Client-Side Human Service \n\n Prerequisites (Optional)\n\nBasic working knowledge of BPM/BAW IBM® Process Designer. \nBasic understanding of building components of process applications\nUnderstanding of UI design and implementation concepts\n\nComponents\n\n&nbsp;&nbsp;&nbsp;&nbsp;a.Human Service basics\n&nbsp;&nbsp;&nbsp;&nbsp;b.Comparison between Heritage Human Service (HHS) and Client-Side Human Service (CSHS)\n&nbsp;&nbsp;&nbsp;&nbsp;c.Building / modelling Human Services\n\n1.Human Service basics\n\nA Human Service implements the interaction of the user with the process. It contains at least one “coach”. A coach creates a page in the user interface, which users can see in a web browser.\n\nA Human Service also can include gateways and services that control the interaction with the user. These components are different in CSHS compared to HHS. The most basic components of a Human Service, regardless of their type, is a start node, a coach, and an end node.\n\nFor the details of available tools and components available for authoring Human Services see the reference section.\nNote that there is another document that covers the details of “coaches” in this IBadges series.\n\n2.Comparison between Heritage Human Service (HHS) and Client-Side Human Service (CSHS)\n\nBoth types of the services operate with similar concepts. However, construction and execution differences distinguish the two types of Human Services.\n\nHeritage Hman Service (HHS) (deprecated)\n\nWith HHS, you use existing artifacts, such as coaches, heritage coaches, and stock controls, to create UI in BPM. You create and edit HHS in the Process Designer desktop editor, run them on the server, and use them to supply UI to web-based applications such as IBM Process Portal.\n\nYou can still update and expand Human Services that were created before BPM V8.5.5. To be able to edit an HHS in the Process Designer web editor, consider converting the HHS to a client-side Human Service. For more information, see Heritage Human Service to client-side Human Service conversion.\n\nClient-Side Human Service (CSHS)\n\nCSHS allows the developers to use web technology to improve human-service performance and provide support for case management and process management. You create and edit CSHS in the Process Designer web editor, run them on the client-side in the web browser, and use them to call the server for data when necessary.\n\nNotes:\n\nResponsive Coaches toolkit, introduced in BPM 8.5.7, can only be used in CSHS.\n8.5.7 BPM introduces a new type of BPMN service called Process.  Processes, unlike Cases, are available in all BPM Editions; So, in BPM 8.5.7 we have BPDs and Processes.  Processes similar to Cases can only use CSHSs.\n\n3.Building / modelling Human Services\n\nUsing the Web Process Designer (Web PD), you can create both types of Human Services. After creating a process app, you can use the default ones offered in the product, or simply go to the left-hand side panel, click on the + sign by the User Interface and from the menu select either HHS or CSHS.\n\nThis will open a multi tab editor and “diagram” tab which allows the user to drag and drop available items to the editor from the right-side panel.\n\nIn the “overview” tab the basic information for the HS is available. Note that “Usage” in this tab is a useful option for problem determination where you can change the usage of the service for testing purposes.\n“Variable” tab is for creating and editing the variables used in the service and related coaches / coachviews. \n“coach” tab is the coach editor. This will be covered in the coaches IBadges document.\n \nHHS:\n\nHHS are deprecated, however as of BAW 19002 the users are still able to edit them or create new ones to facilitate the migration of the HHS that were created in the desktop Process Designer in web Process Designer.  For information on how to build HHS see the reference section.\n \nCSHS:\n\nCSHS are created in web Process Designer by using a wizard that launches upon selecting “create” button in the implementation section of a Human Task.  The create wizard takes the user through necessary steps to build the CSHS. A few of the common artifacts to use in building a CSHS are:  \n\nScript: when you want to add JavaScript code to run on the web browser in the for parsing variables, and running programmatic commands.\n\nService:  to call another service from within a CSHS. The called service adds an activity to the diagram, which calls another service that you can specify. \n\nNested service: when you want to reuse a set of common steps in one or more other CSHS. \n\n*Note that CSHS are reusable. This means they can be broken into subflows that can be separately managed and reused in different contexts, you can define the reusable subflows as nested CSHS.\n\nEvent Handler: to add a subflow that is triggered by one of the following types of events. By default, the subflow is triggered by an error event.\n\nPlease review the important concepts in modelling CSHS in the reference section.\n\n Troubleshooting\n\n The first step of troubleshooting a Human Service is to have a clear understanding of the User Interface issue. \nTypically, HS-related issues can be categorized as : \nAuthoring time \nRuntime\n\nThe authoring time issues should be covered in the Process Designer IBadges document.\n\nDebugging the Runtime issues often starts with debugging the page on which the issue is surfaced.  This would usually involves debugging a coach or coach view first. And depending on the findings the issue might be related to the Human Service.\n\nThe common tools and techniques to debug HS issues and coaches are:\n\nProcess Designer debugger: This allows you to trace the flow of the service and the value of the variables; This helps narrowing down the issue on whether the issue is related to the coach or the service.\n\nGathering a network trace to check the state of the client(browser) calls to the server.\n\nGathering browser console logs to check if there are any client code errors and warnings (e.g. any errors in the java scripts).  \n\nGathering the server side logs to check for any exceptions related to coach or coachflow classes. \n\nThere are several useful assets in ARM, under BPM-CoachUI-HumanServices to search for the symptoms and troubleshooting tips.\n\nData Collection\n\nPlease refer to this must gather document:\n https://www.ibm.com/support/pages/collect-troubleshooting-data-coach-problems-ibm-business-process-manager-bpm\n \nNote that this document covers both Human Service and coach debugging data collection.\n\n Data Analysis\n\nThe network trace should be analyzed to check for coachflow/service/snapshotID-modelID call. This is the request to run the service flow on the server. The request & response should be checked to ensure it is getting all the way through the server and back. A call similar to : https:///bpm/cf/script/coachflow/coachflowengine_main.js?build= indicates the call to the coach flow service.  \n\nTo trace the rest calls related coach flow service, use diagnostic trace :WLE.wle_bpmrest. In the logs “ServiceResource” lines should be searched for any obvious errors. An example of a successful rest call is : ServiceResour < com.ibm.bpm.rest.impl.coachflow.ServiceResource parseParams RETURN {\"sampleText\":\"\",\"throwError\":false,}\n \nThe configuration of  coachflow/service endpoint might need to be checked in the cases where environment set up or config might be the possibility of the root cause of HS execution. WEBPDTOCOACHFLOW_RT configures the URLs that are used in the Process Designer web editor targeting the coach flow web archive WAR file (bpm.coachflow.war).\n \nIn the browser console logs, errors related from com.ibm.bpm.coachflow.engine.* should be examined. \n \nFor performance related issues, along with the network trace, a more direct trace of the CSHS request will show some info about where the time is spent: com.ibm.bpm.rest.impl.coachflow.*=all ; \n\nReference\n\n1.Activity types: https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/procimplementingactivities.html\n\n2.Building a HHS : https://www.ibm.com/support/knowledgecenter/SSFTN58.5.6/com.ibm.wbpm.wle.editor.doc/topics/buildinghuman_service.html\n\n3.Building a CSHS : https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/building_webhumsrvce.html\n\n4.Comparison between CSHS and HHS : https://www.ibm.com/support/pages/what-advantage-and-disadvantage-using-client-side-human-service-vs-heritage-human-service\n\n5.Converting HHS to CSHS : https://www.ibm.com/support/knowledgecenter/SSFTN58.5.5/com.ibm.wbpm.wle.editor.doc/topics/ccfmanualconversionhhstohs.html\n\n6.Tools for building CSHS: https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/ccf_palette.html\n\n7.Building HHS: https://www.ibm.com/support/knowledgecenter/SSFTN58.5.5/com.ibm.wbpm.wle.editor.doc/topics/buildinghuman_service.html\n\n8.Modeling a CSHS : https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/tcf_buildhs.html\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Coaches and Toolkits","description":"ellia@ca.ibm.com","owner":"Elli Afshar","path":"/BusinessProcessManager/BusinessUserExperience/ToolkitControls","text":"Date:2019-12-10\n\nOverview\n\nCoaches are user interface (UI) screens for IBM Business Process Manager Human Services. They are web-based forms that provide data to users and collect input from the users. This is provided by the “views” or “controls” that are composed of various elements of the HTML page such as input or output text, buttons, tables, drop-down lists, etc.\n\nThis document introduces BPM coaches and their evolution from IBM Business Process Manager (BPM) (previously Lombardi) to the current IBM Business Automation Workflow (BAW). The references to Knowledge Center and BPM / BAW developer works are useful for the details on the topics discussed in this document.\n\nToolkits are also covered in this document as their usage is tightly coupled with coaches.\n\nEvolution of the coaches in BPM / BAW\n\nCoaches existed in the earlier versions of the product (WebSphere Lombardi Edition 7x). In the later versions of BPM (Version 8) the new generation coaches were introduced and “Lombardi” coaches were renamed to “Heritage Coaches”.  The new coaches were internally referred to as “New Gen” coaches.\n\nThere was only one type of Human Service available at the time; Hence both Coaches (or CoachNGs) and the Heritage Coaches could be used for this Human Service. \n\nIn the later releases of the product, the new model for Human Service was introduced: “Client-Side Human Service” (CSHS) and the existing Human Services were renamed to “Heritage Human Service”.\n\nThe correct use of terminology and the distinction of coach and Human Service type is important in problem determination to define the statement of the problem correctly.\n\nPleases refer to “Difference between Coaches and Heritage Coaches” for more details on this topic.\n\nToolkits\n\nToolkits are reusable libraries of Process Designer artifacts; They include artifacts such as business objects, Integration Services, or business process definitions. A toolkit can be used for sharing between business process definitions. Toolkits are stored and managed within Process Center. In this document, we cover the UI related toolkits.\n\n Prerequisites\n\nUnderstand the basics of Human services\nWorking knowledge of Process Designer and Process Center Repository\nFamiliarity with UI development concepts\nUnderstand Toolkit sharing concepts\n\nComponents\n\nCoaches in Process Designer and in runtime\nCoaches build the web pages for the user interface. They are created and can be tested in Process Designer. The developer creates the layout of the page by authoring the Coach in Process Designer.\nThey are part of the Human Service flow. At run time, when the flow enters a Coach, the user sees the user interface that is defined for that Coach. The user interface consists of HTML code that is displayed in a web browser. The flow leaves the Coach when a boundary event occurs. A Coach can have multiple exit flows with each one associated with a different boundary event.\n\nAuthoring Coaches and the use of toolkits\nThe elements that are used in multiple Coaches, can be assembled into reusable Coachviews. The Coachview and the required variable and business objects as well as all the necessary implementation can be saved in a toolkit. The artifacts in the toolkit, after sharing the toolkit, can be used by other Coaches with the same process app.\nEach BPM version shipped with a set of default (\"out-of-the-box\") toolkits to help the application developers build Coaches fasters.\nFor example, in the earlier version of the product, Coaches (SYSC) toolkit provided Stock controls. Note that the application developers could create their own toolkits or download toolkits from development forums, third-party providers or business partners. For the list of older toolkits please refer to the URL in the reference section.\nIn the latest version of BAW, UI Toolkit is an out-of-the-box toolkit. Please see the reference section for more information and the list of views in this toolkit.\nThe layout of a Coach is composed in the editor. The elements (e.g. button, input text, table ) needs to be configured if associated with any data; Using Process Designer the application developers bind the variable to the Coach. The validation during the authoring might not be in place, so the issues caused by wrong binding might not surface until runtime.\n *Note: Both client-side Human Services and Heritage Human Services (deprecated) can have Coaches. A Heritage Coach has the technology and architecture of a Coach in BPM versions earlier than V8.0. To maintain compatibility with earlier Coaches, BAW supports Heritage Coaches only in Heritage Human Services.\nHeritage Coaches are deprecated artifacts that can be created only in the desktop Process Designer. In Heritage Human Services that you bring in to the Process Designer, wherever possible, replace the deprecated Heritage Coaches with Coaches. No conversion is available in the Process Designer for Heritage Coaches.\nIn the Process Designer, minimal support is available for basic editing of Heritage Coaches in XML view only. You can display Heritage Coaches alongside Coaches in the Coaches view, but you can edit the XML Heritage Coach model only.\nFor the list of restrictions in working with deprecated Heritage Coaches in Process Designer please see the referenced URL in this document.\n\n Troubleshooting\n\nPerformance: Regardless of the root cause, the performance related problems often surface at the UI/Coach layer. These issues are reported frequently to support.\nThe classic approach to analyze performance issues:\n\n1.Understand the scenario in detail and ask the customer for the expected results. ( e.g. performance benchmark info). \n\n2.Check if the issue is intermittent or not. If it is, what are the factors influencing the performance.\n\n3.Check if the performance issue can be replicated using more than one browser. E.g. Chrome has been considered better performer browser compare to IE.\n\n4.If the issue is related to the Coach, has the Coach gone through a warm start? E.g. the Coaches have been generated and cached already\n\n5.Check the network trace to flag the long-running calls from/to server.\n\n6.If the issue is related to the tables rendering , has the customer taken into account all the best practices to design high performing tables?\n\n7.If any long-running call identified, check the server logs for the timeframe of the call.\n\n8.Has the DB been tuned as advised by the Performance Redbook http://www.redbooks.ibm.com/redbooks/pdfs/sg248210.pdf\n\nGeneral runtime errors / issues: These issues are typically reproducible on development or QA env. To debug these issues the best approach is to review the process app to narrow down the area of the root cause. The BPM developers are usually the helpful source of information to point to the area of the code by explaining how the Coach / UI was intended to work using BPM / BAW out-of-the-box artifacts . Collecting  a network trace would be usually helpful to determine what additional information to be collected. \n\nUse of external/third-party toolkits : BPM support and development does not provide support for third-party toolkits. It is important to check the process app ( twx file ) to confirm that the artifacts used in the Coach are from the out-of-the-box toolkits. If the Coaches use non-IBM toolkits, the best approach would be to ask the customer if they can replicate the issue using an out-of-the-box toolkit. \n\nUpgrade issues and toolkit dependencies: PC can be in the lower version of BPM compare to PS. However, this set up might cause issues at times. The preferred set up is for both PC and PS be at the same level. This applies to the toolkits shipped with PC as well. \n\nAuthoring issues: Problems related to the authoring the Coach In the editor (Process Designer ). Note that validation does not exist in places in editor, so paying attention to the visual clues as warning when working with Coach editor is important. Being able to examine the process app and opening the customer’s process app in the Process Designer usually helps flagging these issues. \n\nData Collection\n\n1.MustGather : https://www.ibm.com/support/pages/collect-troubleshooting-data-Coach-problems-ibm-business-process-manager-bpm\n\n2.Enabling JavaScript debugging for Coaches\nhttps://www.ibm.com/support/knowledgecenter/en/SSFPJS8.5.7/com.ibm.wbpm.wle.editor.doc/topics/tenablingdebuggingforCoaches.html\n\n Data Analysis\n\n1.In the Fiddler trace look for the call containing:\n\na./teamworks/process.lsw? check the response of this call ( in the raw or text )\nb./teamworks/fauxRedirect.lsw same as above\nc./teamworks/ajaxCoach for only HHS related information\n2.Search ARM under Coach UI and its sub-categories for the problem determination techniques used on other cases. \n\n3.Go over the \" Advanced performance considerations” in this Red Book http://www.redbooks.ibm.com/redbooks/pdfs/sg248210.pdf\n\n4.Analysis of the corresponding server logs related to Coachng and Coachng Framework methods\n\nReference\n\n1.Difference between Coaches and Heritage Coaches https://www.ibm.com/support/knowledgecenter/SSFTDH8.5.7/com.ibm.wbpm.wle.editor.doc/topics/clegacyvs_view.html\n\n2.Restrictions in working with Heritage Coaches in Process Designer : https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/ccoaches.html\n\n3.IBM BPM UI Performance : https://developer.ibm.com/recipes/tutorials/ibm-bpm-ui-performance/\n\n4.Building Coaches in BAW : https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.wle.editor.doc/topics/tbuildviewcoaches.html\n\n5.Toolkits in earlier BPM versions: https://www.ibm.com/support/knowledgecenter/SSFTDH8.5.7/com.ibm.wbpm.admin.doc/topics/managingtoolkits_A.html\n\n6.UI toolkit in the latest BAW version : https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.ref.doc/topics/spkuitkitanoverview.html\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Business Space","description":"fangyyan@cn.ibm.com","owner":"@Yan Fang","path":"/BusinessProcessManager/BusinessUserExperience/BusinessSpace","text":"Date:2019-12-10\n\nOverview\n\nBusiness Space provides a browser-based graphical user interface that lets users interact with content from products in the IBM® Business Process Manager portfolio. It provides a customizable and collaborative environment for monitoring, reviewing, and administering common business processes, such as human task flows, mediations and modeling.\n\nBusiness Space includes the concept of spaces, templates, pages and widgets. A space is a collection of pages based on a template, and a page is a canvas that contains a number of widgets. Widgets are the pluggable user interface components that you use to define the functionality of your business spaces. IBM Business Process Manager ships with a number of built-in templates and widgets.\n\nBusiness Space provides administrative capabilities to control and manage the applications installed on the system using these capabilities.\n\n Components\n\nSpace\nMost users can open dashboard spaces using a web browser. If you are a programmer-level user, you can also open spaces using IBM® Integration Designer.\n\nTemplate\nThe template combines IBM® Business Process Manager widgets and Business Monitor widgets with standard Business Space widgets to create an ideal interface for participating, monitoring and reporting on specific business situations.\n\nWhen you create a space using the template, you are prompted to enter a name for it. The space that is created contains seven named pages, each page with one or more widgets in place that are ready to be configured. The title of each page created by the template indicates the type of information you find there. \n\nFor example, the Operational page contains the Diagrams, KPIs, and Alerts widgets, which are ideal for displaying business operations information. The Diagrams widget might display a business process flow, the KPIs widget might display real-time performance data, and the Alerts widget might display notifications that warn you when certain performance expectations are off target. Each page is described in the \"Page information\" section. \n\nYou can customize the space by changing the page names, adding widgets to pages, removing existing widgets, and by adding new pages. \n\nTo create a space using the Business Monitoring template, complete the following steps:\n\nProcedure\n\nLog in to the Business space and then click Actions  Create Space. The Create Space window opens.\nIn the Space name field, type a name for the space, such as My Business Monitoring Space, and then add a brief description in the Space description field. \nSelect Create a new space using a template, choose Business Monitoring, and then click Save.\n\nResults\n\nYou are now ready to customize the widgets on each page.\n\nWidget\n\nWidgets are the pluggable user interface components that you use to define the functionality of your spaces. Widgets communicate with other widgets by publishing and handling events.\n\nBy itself, a widget typically has limited or specific capabilities. However, you can combine widgets to interact with each other to perform related tasks. Combined widgets are called a mashup. For example, you can have a widget that displays news items from an RSS feed and another widget that you can use to create tasks that you assign to someone. If you combine the two widgets onto one page, you have created a mashup in which you can see a news event and react to it by assigning someone to investigate whether the event might affect your business.\n\nTroubleshooting\n\n Data Collection\n\n1.Log files + Trace\nFirstly you need to collect troubleshooting data for WebSphere Business Space in the IBM Business Process Manager (BPM) products.\n\n2.Enable Trace on a runtime Server\na. Start the WebSphere Application Server (WAS) administrative console.\nb. Click Troubleshooting  Logs and Trace in the console navigation tree, then click server  Diagnostic Trace. \nc. Select the Runtime tab.\nd. Change the existing trace state by changing the trace specification to the desired state\ne. Configure the trace output if a change from the existing one is desired.\n&nbsp;&nbsp;&nbsp;&nbsp;Click Apply.\nf. You may also need to increase the trace file size and number if the logs are rolling too fast. 20MB is a good starting point for the file size and you shouldn't increase it over 50MB. \n\n3.Reproduce the issue and Collect the trace\n\nThe trace should be enabled on any involved application cluster members. \n\nNote: When providing the logs ensure the full logs directory including all servers and FFDCs on the node are included.\na. Set the needed trace string on the related app cluster members.\nb. Recreate the issue. \nc. Take note of the time you trigger the issue and provide this with the logs. \nd. Turn off each of the enabled trace strings.\ne. Compress the profile_root/logs directory from each node profile. \nf. The directory contains the logs, trace, and ffdc files for each server.\nNote: If you have logs/trace going to custom locations then provide those locations in addition.\n\nData Analysis\n\nThe detailed analysis of data may depend on the case by case. \n\n1.BMWSD0429E with SQLException\n\nThe most common issue is that sometimes users are not getting a login prompt or the page is blank when trying to login to Business Space. When you go to check server's SystemOut.log, you can find error BMWSD0429E with SQLException. \n\nAnswer: Below 2 articles provide the debug tips which can help you accelerate problem investigation, check your configuration, find possible root cause and solve the issue quickly instead of reading many technotes and product documentation pages about the possible configuration checking. They show you several solution cases based on a variety of possible root causes.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Some general tips to help debug business space login issue with BMWSD0429E error - part 1 \n&nbsp;&nbsp;&nbsp;&nbsp;b. Some general tips to help debug business space login issue with BMWSD0429E error - part 2\n\n2.When I log into Business Space powered by WebSphere, I do not see the Home space. Instead, I see a message stating that \"No pages currently exist.\" Also, I am unable to create any spaces or pages because the list of templates in the Create Space window is empty. Why does this happen and how do I resolve this problem?\n\nAnswer: There are two common causes: \n\nThe Business Space database was not created using the UTF-8 codepage. If you manually create the Business Space database, you must set the encoding to the UTF-8 universal character set. See Configuring Business Space database tables.\nThe predefined spaces and templates did not persist into the database during the first server startup. See The Business Space welcome space and predefined space templates are not available if they failed to be persisted into the database during first server startup\n\n3.When I try to log into Business Space powered by WebSphere, I see a \"JSPG0036E: Failed to find resource /resources/bootstrap/bootstrap.jsp\" error. Why does this happen and how do I resolve this problem?\n\nAnswer: There are two common causes: \n\nBusiness Space has not been installed on all nodes. Business Space must be installed on all WebSphere Application Server nodes for the cluster where Business Space is deployed. \nThe Business Space profile upgrade failed. There are several reasons why a profile upgrade might fail:\n    A profile upgrade might fail when Business Space applications are also mapped to a web server. Remove the mapping while you are upgrading the profile, and then add the mapping again afterward.\n    A profile upgrade might fail if all Business Space EAR files are not installed (including BSpaceWebformsEnabler.ear) .\n    A profile upgrade might fail if the upgrade command is run against a node in a clustered server. Run the upgrade command for clusters against the deployment manager profile. See sample instructions in Profile upgrade instructions for IBM Business Monitor Version 8.5.7.\n    A profile upgrade might fail in a non-clustered network deployment environment if the deployment manager profile and the node profile (where Business Space is deployed) are created from separate WebSphere Application Server installations. To resolve, see Profile upgrade fails for Business Space in a non-clustered network deployment environment.\n\n4.When I try to augment the deployment manager profile for the cell with the dmgr.bspace profile template as documented, augmentation fails with a log entry indicating that dmgr.bspace is not a valid profile template. Why does this happen and how do I resolve this problem?\n\nAnswer: See Cannot augment the Deployment Manager profile with the dmgr.bspace profile template.\n\n5.When I try to log in to Business Space in IBM Business Monitor. I receive an error that is similar to the following error:\nBMWMB0039E: Fail to load page. The error message is: Error -\nBMWMF0001E: Node must not be null. Please contact Lotus Mashups administrator\nWhy does this happen and how do I resolve this problem?\n\nAnswer: See Cannot log into Business Space.\n\n6.After installing or upgrading the Business Space, the Business space does not load and I see an error such as \"dojo is not defined\" in the browser. Why does this happen and how do I resolve this problem?\n\nAnswer: See Business Space is unable to load with a \"dojo is not defined\" error.\n\n7.Installing Business Space failed or it installed only partially. How do I remove Business Space and then reinstall it?\n\nAnswer: See Removing Business Space from a profile.\n\n8.When I try to connect to the WebDAV using Microsoft Windows 7 or Windows 2008, I get the following error message:\nThe folder you entered does not appear to be valid. Please choose another. \nWhy does this happen and how do I resolve this problem?\nAnswer: See Cannot connect to Business Space WebDAV and Recommended WebDAV clients for accessing BPM.\n\n9.When I try to open the Business Space log in page, the page is not displayed, and an error message (with exception stack trace) similar to the following error is displayed instead:\nHTTP Error Code:   404\nError Message:JSPG0036E: Failed to find resource /bootstrap/login.jsp\nRoot Cause:java.io.FileNotFoundException: JSPG0036E: Failed to find resource /bootstrap/login.jsp\nat com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.findWrapper (AbstractJSPExtensionProcessor.java:395)\nat com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.handleRequest(AbstractJSPExtensionProcessor.java:349)\nAlso, no BPMProfileUpgrade log is present in the directory /logs (at least one such file should be generated during Fix Pack installation), where  is the root directory of any managed profile. Why does this happen and how do I resolve this problem?\n\nAnswer: See Business Space applications are not updated in single node network deployment environment after applying V7.0 Fix Pack 4.\n\n10.Can we get same customized business space for all users by business monitor ? How?\nAnswer: You need to perform “Add to View for All authenticated Users”.\n\n11.Customer is able to access Business Space directly, but cannot access Business Space using load balancer.\nAnswer: Load balancer configuration needs to be checking.\n\n12.Why do I see \"TypeError:var is undefined\" style errors when quickly switching between tabs in Business Space?\nAnswer: It may be ignored. Some possible explanations can be referred. \n\n13.I am trying to log in to Business Space Monitor widgets page and it seems to be cycling and trying to load the page but the page never loads. We see this error in the logs: BMWFR0035W: The theme null specified for page with ID < was not found, using the default theme. Why does this happen and how do I resolve this problem?\nAnswer: See Why isn't my Business Space page loading?\n\n14.How can I improve browser performance in Business Space?\nAnswer: See Tuning Business Space using the multipart feature.\n\n15.How to debug, when only one of the user is not able to login into business space\nAnswer: See How to debug, when only one of the user is not able to login into business space.\n\n16.I am not able to restrict users to a Business Space. Either no one can create a Business Space, or everyone can create a Business Space. Why does this happen and how do I resolve this problem?\nAnswer: See Setting up Lockeddown mode in Business Space\n\n17.If a federated repository has been configured and the LDAP does not use the standard user ID attribute \"uid\", the user can log in to Business Space but will receive an empty page. Why does this happen and how do I resolve this problem?\nAnswer: See Business Space displays an empty page after login.\n\n18.Can I disable the default behavior of redirecting Business Space from HTTP to HTTPS when administrative and application security are enabled?\nAnswer: See Disabling HTTP to HTTPS redirection for Business Space.\n\n19.User may get the following error when trying to configure the Business Monitoring Instances Widget in Business Space: \"An error has occurred loading the models Unable to load /rest/bpm/monitor/models status:404\"\nAnswer: See Error when trying to configure a Business Monitoring Instances Widget in Business Space.\n\n20.How do I update Business Space to use a different database schema?\nAnswer: See Updating the Business Space database schema.\n\n Reference\n\n1.Collect troubleshooting data for WebSphere Business Space in the IBM Business Process Manager (BPM)\nhttps://www.ibm.com/support/pages/node/197835\n\n2.Configuring Business Space\nThe Business Space component is supported with the following database products:\nDB2® Universal\nDB2 for z/OS® \nMicrosoft SQL Server\nOracle 11g \n\nTo find out which databases are supported with your product, check the supported databases for the product.\n\nIf you install IBM Business Monitor and create a stand-alone server profile, the Business Space component is installed and configured automatically.\n\nIf you have a stand-alone server environment, Representational State Transfer (REST) service endpoints are configured and enabled automatically. \n\nFor other environments, use the REST services administrative console page to configure the REST services. If you want IBM Business Monitor widgets to be available, you must configure the REST service endpoints for those widgets.\n\nIf you are using deployment manager and custom profiles, you can use the administrative console to configure the Business Space component. \n\nAfter your original setup work on the Profile Management Tool or the administrative console, you must also configure the Business Space database. \n\nNo matter what tool you used to configure the Business Space component, you must make sure that the configuration works with the security for your IBM Business Monitor environment.\n\n3.Opening a space from a browser\nTo open a space from a browser, use the URL provided by your administrator. See the following table for the default URLs. Port numbers will vary depending on the components installed\n\nTable 1.URLs\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    Secured environment?*\n    URL before V7.0\n    Resolves to this URL in V7.0 and later\n  \n  \n    No\n    http://host_name:9080/BusinessSpace\n    http://host_name:9080/mum/enabler\n  \n   \n    Yes\n    https://host_name:9443/BusinessSpace\n    https://host_name:9443/mum/enabler\n  \n\nA secured environment means that WebSphere® Application Server security has been enabled.\n\n4.Opening Business Space from Integration Designer\n\nTo open a space using Integration Designer:\n\nGenerally, only programmer-level users open spaces using the test server of the Business Monitoring perspective provided in Integration Designer. The Monitor Model editor, which is a default installation option, creates the Business Monitoring perspective in the Integration Designer environment.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. From the Business Monitoring perspective of Integration Designer, click the Servers tab to open the Servers view.\n&nbsp;&nbsp;&nbsp;&nbsp;b. If IBM Business Monitor server is not started, right-click it and select Start to start it.\n&nbsp;&nbsp;&nbsp;&nbsp;c. When the server is running, right-click it and select Launch  Business Space.\n\n5.View mode and edit mode\n\nWhen working with Business Space dashboards, you will be using view mode or edit mode.\n\nNote: To add a widget to a page, you must first click Edit Page, which opens the widget palette. It is at this point that is considered edit mode. In general, you can customize visual properties as well as configure widgets for specific business process models when using edit mode.\n\n6.IBM BPM Server widgets for Heritage Process Portal spaces\n7.Human Task Management Widgets\n\nThese widgets provide business users and managers with out-of-the-box capabilities to work with processes and tasks. They can easily be combined with other widgets to compose powerful spaces. \n\n8.A number of widgets that are included in IBM® Business Monitor\n9.Widget wiring\n\nWidgets communicate with each other using wires. A wire is a link between a source widget and a target widget.\n\nEach widget has a list of events that it can send and a list of events that it can receive.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Process Federated Server","description":"smmerris@us.ibm.com","owner":"@Seth Merriss","path":"/BusinessProcessManager/BusinessUserExperience/ProcessFederatedServer","text":"Date:2019-12-24\n\nOverview\n\nIBM Process Federation Server (PFS) is a component of IBM Business Automation Workflow (BAW) that converges Process Portal components such as dashboards, tasks, processes, and launchable services from multiple individual BPM and BAW environments into a single Process Portal user interface. This Process Portal is referred to as the “federated Process Portal” and is an already existing Process Portal application from one of the federated BAW environments that is designated as the entry point to the federated content, including tasks, processes, and dashboards.\n\nThis section will help you conceptualize PFS at a high level and help you learn how to install, configure, and troubleshoot PFS.\n\n Prerequisites\n\nPFS Technical Overview\nPFS Configuration Overview\nPFS with Business Automation Workflow on Fyre\nPFS Elasticsearch Introduction & Troubleshooting\n\nComponents\n\nProcess Federation Server components overview\n\n1.WAS Liberty Server\n\nThe Process Federation Server is an instance of a WebSphere Liberty server. The WAS Liberty server is easily configurable via the server.xml file. Any configuration changes to PFS are made via the server.xml file. The configurable PFS-related settings contained in the WAS Liberty server.xml file are documented in the Knowledge Center.\n\nProcess Federation Server server.xml configuration file\n\n2.Federated Process Portal\n\nThe federated Process Portal is the conglomerated UI that allows a user to access tasks, dashboards, services, and more from multiple federated Business Process Manager and/or Business Automation Workflow environments. One must configure a Process Portal to make use of the PFS REST services to display the federated content as well as make configuration changes for endpoint URLs for Process Portal and allowed origins. \n\nThe federated Process Portal has some distinct features and behavior from non-federated Process Portal behavior. Saved searches in federated Process Portal are capable of returning a list of tasks from all federated environments. \n\nConfiguring Process Portal for a federated environment\nFederation considerations for Process Portal\nFederated systems and authorization for saved search\n\n3.Elasticsearch\n\nElasticsearch is a third-party open-source full-text search engine composed of searchable documents. The Elasticsearch provides a distributed index that contains data from the systems in the federated environments. The distributed index ensures that users have fast access to federated data, and relieves back-end systems from expensive queries. There is an indexing service for each federated system in the federated environment, and a common REST-based query service that provides data to users.  In other words, PFS makes use of Elasticsearch to allow users to search for tasks and other data in the federated Process Portal. The PFS server.xml file provides some configurable properties for the Elasticsearch service. \n\nSince Elasticsearch is a third-party resource built into the PFS product it can be difficult to troubleshoot when network configurations and non-PFS related problems occur. The version of Elasticsearch embedded in PFS is Elasticsearch 1.7, but Elasticsearch 6 can be configured to work with PFS remotely. \n\nElasticsearch 1.7 Reference & Documentation\nConfiguring the Elasticsearch service\nProcess Federation Server Elasticsearch indexes\nIBM Open Source and Third Party Software Policy\n\n4.Process Federation Server database\n\nThe Process Federation Server requires setting up a new database. The most important tables in the PFS database are the PFSSAVEDSEARCHES table and the PFSBPDCHANGELOG table. The PFSSAVEDSEARCHES table stored saved search definitions. The PFSBPDCHANGELOG table is used by the indexers to keep the Elasticsearch index up-to-date with current task information. \n\nCreating the Process Federation Server database\nConfiguring the Process Federation Server database\nMaintaining Change Logs on Federated Systems\n\n5.Retrievers\n\nThe retrievers are used in PFS to call federated instances REST APIs on demand and return an aggregated result. Retrievers are used to gather data such as user group information, federated systems metadata, and launchable processes. \n\n6.Indexers\n\nThe indexers retrieve task data from the federated systems’ databases and index them in the Elasticsearch. Each federated system has an indexer. The indexers run as background processes to keep the Elasticsearch up-to-date.\n\nEnabling indexing on a federated system\n\n7.PFS REST Services\n\nProcess Federation Server provides a set of REST services federated features to the users through the federated Process Portal. These REST services include a Saved Search REST API to query the Elasticsearch to retrieve indexed tasks, a Launchable Entities REST API to query for the dashboards, processes, services, and more that should be displayed to the user (by using retrievers), a Systems Metadata REST API to retrieve metadata about the federated systems (by using retrievers), a Task List REST API to populate task lists in the federate Process Portal, and a secured Elasticsearch REST API that provides standard Elasticsearch REST API but is encapsulated with authentication. \n\nThe Process Federation Server REST APIs\nAccessing the Process Federation Server REST APIs with Swagger\n\n Installation\n\nCustomers must download the base installation from the Passport Advantage site but can download the latest cumulative fix from IBM Fix Central. Installation includes downloading the binaries and latest cumulative fix, installing the package, creating the PFS database, and creating the PFS server instance in the WAS Liberty server. \n\nOfficial documentation recommends to always use the latest IBM Process Federation Server version available. The requirement is to use a version of IBM Process Federation Server that is equal to, or more recent than, the most recent version of IBM Business Automation Workflow or IBM Business Process Manager that you plan to federate.\n\nPlanning your federated environment\nInstalling and enabling IBM Process Federation Server\nInstalling IBM Process Federation Server on Business Automation Workflow\nCreating the Process Federation Server database\nCreating a process federation server\n\nConfiguration\n\nFederated environments accommodate various configuration scenarios. Our documentation provides high-level roadmaps for common paths for configuring Process Federation Server and federated environments. Our documentation provides a “Quick Start” path for basic configuration scenarios that are suitable for development and test systems in addition to a “Production” path for configuring and securing federated environment that are based on clustered topologies. \n\nThe majority of the configuration steps deal with updating the PFS server.xml file. In the server.xml file you will configure the PFS database, a common user registry, SSO, the Elasticsearch service, and information about the federated systems. Configuration also requires making changes in the federated systems themselves to enable the indexers and retrievers so that PFS can aggregate data into the federated Process Portal user interface.\n\nConfiguring Process Federation Server and federated environments\nRoadmaps: Configuring PFS and federated environments\nThe Process Federation Server server.xml file\nConfiguring and maintaining federated environments (database, user registry, SSO, Elasticsearch)\nFederating BPM & BAW systems\nConfiguring Process Portal for a federated environment\nValidating the Process Federation Server and federated environment configuration\n\n Troubleshooting\n \nGenerally, most PFS related cases deal with configuration issues, saved search issues, or Elasticsearch problems. The most important data to collect from customers is the PFS server.xml file and the PFS server logs. It is also critical to understand which component of PFS the issue involves. Once you identify the component you can focus your data collection efforts and analysis to decrease time to resolution.\n\nOur Knowledge Center documentation provides detailed information on how to enable trace logging in the PFS server which is done by updating the traceSpecification element in the PFS server.xml file. Various trace strings can be enabled to troubleshoot various components of Process Federation Server. \n\nLogging and Tracing for Process Federation Server\n\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    Trace specification\n    Description\n  \n  \n    com.ibm.bpm.federated.*=all\n    Traces all the Process Federation Server components.\n  \n  \n    com.ibm.bpm.federated.query.rest.*=all\n    Traces requests from the Process Federation Server REST APIs.\n  \n  \n    com.ibm.bpm.federated.indexer.bpd.*=all\n com.ibm.bpm.federated.indexer.bpel.*=all\n    Traces the indexing service on federated systems. You can enable tracing for BPD systems, BPEL systems, or both.\n  \n \n    com.ibm.bpm.federated.retriever.bpd.*=all\n com.ibm.bpm.federated.retriever.bpel.*=all\n    Traces the retrieval service on federated systems. You can enable tracing for BPD systems, BPEL systems, or both.\n  \n  \n    com.ibm.bpm.elasticsearch.receiver.*=all\n    Traces the Elasticsearch indexing methods.\n  \n  \n    com.ibm.wbimonitor.partitioning.*=all\n    Traces the indexer partitioning service. The service coordinates the indexing services across cluster members.\n  \n  \n     com.ibm.bpm.elasticsearch.client.*=all\n     \nTraces the remote Elasticsearch client.\n  \n  \n     \ncom.ibm.bpm.query.rest.SAVEDSEARCHPERFORMANCE_LOGGER=all\n     \nTraces performance of saved searches\n  \n\nData Collection\n\nProcess Federation Server Mustgathers\n\nGeneral Data Collection\nIn most cases you will need to capture the following items of information:\n\n1.Detailed description of the topology of the customer’s federated environment\n\nUnderstand the current topology of the impacted federated environment. How many federated systems are in the federated environment? What versions of BAW or BPM are federated? What is the version of PFS? Do they use IBM HTTP Servers between components? \n\n2.PFS server.xml \n\nBy default, the configuration file is in the pfsinstallroot/usr/servers/ directory of Process Federation Server. You can use this file to confirm if the customer missed any configuration steps or misconfigured any elements within the server.xml file. The server.xml can be used to get a detailed understanding of the topology of the federated environment.\n\nThe Process Federation Server server.xml configuration file\n\n3.PFS server logs\n\nThe PFS logs are located in the pfsinstallroot/usr/servers//logs directory. The logs directory will contain messages.log, console.log, and FFDC files. Trace.log files will be generated with trace logging enabled. \n\nThe console.log files contain the redirected and standard output and standard error streams from the JVM process. The console output is intended for direct human consumption. \n\nThe messages.log file contains all messages that are written or captured by the logging component. All messages that are written to this file contain additional information such as the message time stamp and the ID of the thread that write the message. This file does not contain messages that are written directly by the JVM process. \n\nThe trace.log files contains all messages that are written or captured by the logging component and any additional trace. The file is created only if you enabled additional trace logging. \n\nLogging and tracing for Process Federation Server\nLogging and tracing for the WebSphere Application Server Liberty profile\n\n4.Browser Network Trace HAR file\n\nCapturing and collecting the browser network trace is useful for seeing what REST API calls are made from the client. The trace will show request and response data. You can use the Fiddler tool to review the data. \n\nThe you provide the following set of instructions to the customer to collect the HAR file:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Open the browser and press the F12 key to open the browser’s developer tools\n&nbsp;&nbsp;&nbsp;&nbsp;b. Select the Network tab within the developer tools pane\n&nbsp;&nbsp;&nbsp;&nbsp;c. Reproduce the issue or load the federated Process Portal page\n&nbsp;&nbsp;&nbsp;&nbsp;d. Right click in the Network data and export the content as a HAR file\n&nbsp;&nbsp;&nbsp;&nbsp;e. Upload the HAR file to the case\n\n5.Browser Console Logs \n\nThe browser developer tools might also contain useful error information in the console logs. For example, if there are CORS (cross origin resource sharing) errors due to a misconfiguration they will be detailed in the browser console logs. You can direct the customer to open the browser developer tools, select the Console tab, reproduce the issue, and export the contents of the console logs (or copy and paste into a text file) and upload the file to the case. \n\nCollecting Data for Configuration Issues\n\nFor newly configured federated environments you can have the customer run the PFS validation tool to identify which part of the configuration is failing. PFS server.xml and server logs will also be useful. \nValidation the Process Federation Server and federated environment configuration\n\nCollecting Data for Elasticsearch Issues\n\nFor troubleshooting the Elasticsearch service you can have the customer install the elasticsearch-head utility tool. This is a plug-in that provides a GUI to get a visual representation of the health and status of the indices, shards, and overall cluster that comprises the Elasticsearch service. Alternatively, you can have customers make use of the Elasticsearch APIs such as cluster_stats to get a health status of the Elasticsearch cluster. \n\nThe Elasticsearch is an open source third-party software built into the PFS product and as such can be difficult to troubleshoot. Generally, we can point the customer to documentation that may help them but ultimately will not be able to resolve defects or tuning-related issues specific to the Elasticsearch service.\nElasticsearch-head Utility\nElasticsearch Cluster Health API\nIBM Support Policy on handling Open Source and Third Party Software\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Business Automation Insights","description":"mluczkowiak@us.ibm.com","owner":"@Matt Luczkowiak","path":"/BusinessProcessManager/Monitoring/BusinessAutomationInsights","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Business Monitor","description":"klaus.ulrich@de.ibm.com","owner":"@Klaus Ulrich","path":"/BusinessProcessManager/Monitoring/BusinessMonitor","text":"Date:2019-12-10\n\nOverview\n\nIBM Business Monitor allows you to monitor your business activities in real-time.\nThis document provides an overview of IBM Business Monitor capabilities and limitations.\n\nIBM Knowledge Center:\n\nBusiness monitoring measures business performance, monitors real-time and completed processes, and reports on business operations. It provides information that helps you identify business problems, correct exceptions, and change processes to improve process efficiency and increase business competitiveness. IBM® Business Monitor is a comprehensive business activity monitoring (BAM) software that provides an up-to-date view of your business performance and also provides predictions so that you can take action before problems occur. Personalized business dashboards process business events and data, and calculate key performance indicators (KPIs) and metrics. IBM Business Monitor can collect events and data from a wide variety of sources.\n\n Components\n\nThe current and last Business Monitor release is version 8.5.7 and is supported for all IBM Business Process Manager (BPM) and IBM Business Automation Workflow (BAW) releases. \n\nUse IBM Business Monitor in your business environment to:\nDefine actions to take when specified situations occur.\nCapture business-related data from business applications, based on the monitor model that you define and install.\nExtract the measurement variables from the data.\nTransform the variables into metric and KPI values.\nDisplay the measurement values on your dashboard. For example, you can display instance diagrams in context in any annotated Scalable Vector Graphics (SVG) diagrams. You can define elements to set colors, show and hide, associate metric and KPI values, and more.\nProvide business intelligence insight through dimensional analysis and reporting.\nIdentify and notify you of operation failures for inspection and analysis.\nMonitor models describe how events should be processed and how information should be collected for use with dashboards. The IBM Business Monitor development toolkit provides technical users with an environment for creating and testing monitor models.\n\nThe IBM Business Monitor server receives and processes events from business applications, and it can subscribe to business events from various sources, including IBM Business Process Manager and other applications in the business environment.\n\nYou can use IBM Business Monitor to correlate events from IBM Business Process Manager and a broad range of IBM middleware for end-to-end monitoring, including the following products:\nIBM Operational Decision Manager\nIBM Integration Bus\nWebSphere® Enterprise Service Bus\nWebSphere DataPower® X150\nWebSphere Sensor Events\nWebSphere MQ File Transfer Edition\nSterling Control Center\nCICS®\nIMS™\nIBM FileNet® P8\n\nYou can also monitor third-party environments, such as SAP, by using the IBM Adapters.\nThe events that the server receives reflect your business activity. Information processed from the events is stored in the Business Monitor database.\n\nThe monitor model can also be designed to provide end-to-end monitoring of your business transactions, even if those transactions are made up of discrete processes from different products.\n\nYou can configure the IBM Business Monitor server to detect special business situations and manage the resulting actions.\n\nFurther details can be found in Monitoring events from various sources\n\n1.Installing IBM Business Monitor\n\nIBM® Business Monitor can be installed in multiple topologies. You can install all components on a single server, or you can distribute the components across multiple systems. To achieve a highly available environment with failover support, you can install IBM Business Monitor into a clustered environment that uses the clustering mechanism of WebSphere® Application Server or Process Server.\n\n2.Developing monitor models\n\nThe IBM® Business Monitor development environment provides the tools for creating monitor models that can be transformed into executable code for Business Monitor. The Integration Designer includes the Monitor Model editor and the Business Monitor test environment. You can also have a development environment with Rational® Application Developer by installing Integration Designer on your Rational Application Developer system. For information about installing Integration Designer on your Rational Application Developer system, see the \"Installing to a unique package group\" section of \"Test environment\".\n\n3.Administering your monitoring environment\n\nAfter you install IBM® Business Monitor, you can use the WebSphere® Application Server administrative console to perform administrative tasks, based on your login information (access rights) for WebSphere Application Server.\nTo deploy Business Monitor models, you can use either the WebSphere Application Server administrative console or scripts.\n\nTroubleshooting\nSee the Troubleshooting section in Knowledge Center\n\n Additional References:\n\nIBM Business Monitor and WebSphere Business Monitor detailed system requirements\nCognos process BIBusTKServerMain failed to start\nHow to install a Cognos fix on a Monitor server?\nHow do you use HTTP instead of HTTPS for the IBM Business Monitor event emitter REST interface?\nCan I turn off PDW tracking data and still be able to get monitor based events?\nIs it possible to call a web service, when a KPI alert is triggered?\nHow to configure Monitor to receive event from BPM?\nCWMMV0801E: The size of this context is 53,119 which is larger than the maximum size of 30,720\nHow to delete failed events for a Monitor model?\nHow to generate a monitor model and integrate with a PS server?\nHow can I install and uninstall a monitor model version via wsadmin scripts?\nHow to install Monitor 8.5.6 with Oracle 12c pluggable database?\nMonitor v8.5.6 installation on RHEL 6.6 failed\nWhat ports on BPM needs to be open when using Dynamic Event Framework (DEF) on Business Monitor?\n\nMost of the articles were migrated to the new Support Forum and unfortunately are not very readable. You can use this link for better reading:\nhttps://pages.github.ibm.com/klaus-ulrich/dwanswers/\n\nRun a Business Monitor Test Environment on docker\nThis setup can be used on your local machine, on Fyre or on Castle.\nhttps://github.ibm.com/klaus-ulrich/monitor/wiki\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Performance Data Warehouse","description":"klaus.ulrich@de.ibm.com","owner":"@Klaus Ulrich","path":"/BusinessProcessManager/Monitoring/PerformanceDataWarehouse","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Security Scans","description":"qingzou@cn.ibm.com","owner":"@Qing Zou","path":"/BusinessProcessManager/Security/SecurityScans","text":"Date:2019-10-16\n\nOverview\nSecurity Scan Fundamentals Education teaches the basics of how to understand and work on reported security scan result issues with IBM Business Process Manager (BPM) and IBM Business Automation Workflow (BAW). This module serves as the basis for in-depth education modules on BPM/BAW security scan issues. \n\n Component\nIBM fully discloses all reported and fixed security vulnerabilities in software products, including BPM/BAW. See IBM Security Vulnerability Management (PSIRT) . Typically, a security vulnerability is fixed on the latest fixpack of all supported releases, and a security bulletin will be published. Along with this publication comes a notification email to all subscribed customers and a blog entry in the Product Security Incident Response (PSIRT) Blog . \n\nRunning Security AppScan software on IBM Business Process Manager (BPM) and WebSphere Lombardi Edition\n\nTroubleshooting\n\n General Guidelines\n1.Suggest the following to clients in order to find any listing of known vulnerabilities:\nWe strongly recommend clients to keep up to date with fixes for BPM/BAW itself, but also all supporting systems around BPM/BAW, such as WebSphere (WAS), the database, web servers, operating systems, etc. Blog BPM Security – Keep up to date with security fixes describes how to find and subscribe for IBM BPM security fix notifications.\n\n2.Visit the IBM support portal to see published security bulletins prior to their subscription.\nBPM: https://www.ibm.com/mysupport/s/ibm-community-support-search-results?language=en_US&q=security+bulletins+business+process+manager&page=1&sort=0\nBAW: https://www.ibm.com/mysupport/s/ibm-community-support-search-results?language=en_US&q=security+bulletins+business+automation+workflow&page=1&sort=0 \n\n3.Understand false positive URLs versus actual vulnerabilities.\nInterpreting IBM Security AppScan findings for IBM Business Process Manager\nInterpreting IBM Security AppScan findings for IBM Business Automation Workflow\n\n4.Check IHS Vulnerability reports. \n\n5.Check Security-hardening properties in BPM Knowledge Center for BPM configuration settings to mitigate the following web application threats.\nCross-site request forgery (CSRF)\nNetwork sniffing\nClickjacking\nUploading malicious documents\n\n6.Search by CVEID or vulnerability key word in IBM Product Security Incident Response (PSIRT) Blog . \n\n7.Search for similar issues by vulnerability key word in Watson Search and RTC. \n\n8.If no existing information can be found for the reported security vulnerability, then we can do the following: \nReview security report details.\nDetermine L2 pillar team ownership based on the correlative URL. \nData collection: \n   Client’s understanding about the reported vulnerability. \n   Detailed BPM version info by running the command from /bin: versionInfo -fixpacks -ifixes  versioninfo.txt \n   Client-side network data and server logs with issue recreated. \n      Client-side network data: \n        HAR file captured through Firefox & Google Chrome Developer tools (F12) Network tab. \n        XML file captured through IE Developer Tools (F12) Network tab. \n      Server logs:\n        installroot/profiles/profilename/logs/server_name \n        nstallroot/profiles/profilename/logs/ffdc \n      Required data for issue replication in lab: \n        Sample TWX file without external dependency. \n        Recreation steps. \n        Any tooling used for the issue recreation. \n        Web browser information (Is it happened with specific web browser or all web browsers?) \n        \n 9.L2 to try issue replication in lab if possible. \n \n 10.Engage corresponding L3 team for comments. \n \n #### Known Issue Reference\n 1.Unrestricted File Upload \n We can restrict file types for upload and modify mime types for download, refer to APAR is JR50092. \n \n 2.Host Header Injection \n Host Header Injection can be configured in HTTP server (this exact sample is WAS code, which we cannot influence. It may be a good idea to also involve WAS SEC L3. \n \n 3.Clear Text Password Submission\n The jusername and jpassword are part of the JEE spec. The current WAS behavior is a widely accepted standard. Authentication schemes can be customized, including password-free authentication approaches. Refer to Configuring third-party authentication products. \n \n 4.Autocomplete Enabled \n This is current behavior for login pages. With User Management Service, autocomplete is turned off. Refer to Installing and configuring the User Management Service. \n If we want to change this, it would be \"next release\" only. \n \n 5.Missing Security Headers \n See Security.StrictTransportSecurityHeaderValue in Security-hardening properties.\n \n 6.Options Method Enabled \n Options is enabled by intent as we support CORS for REST. Can be configured with  Security.AllowedHttpMethods mentioned in Security-hardening properties. \n \n 7.Cookie Flag Missing \n Secure flag is enforced for HTTPS URLs in current releases, see APAR JR58492. \n \n8.Input Limit Missing \nInput elements must not be restricted in size when longer values are valid. BPM does not restrict the size of a user search string. \n\n9.Platform Version Disclosed \nSee com.ibm.ws.webcontainer.disablexPoweredBy in Web container custom properties. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"SSL","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/Security/SSL","text":"Date:2019-11-12\n\nOverview\n\nSecure Sockets Layer (SSL) is the most widely used protocol for implementing cryptography on the Web. SSL uses a combination of cryptographic processes to provide secure communication over a network. SSL provides a secure enhancement to the standard TCP/IP sockets protocol used for Internet communications. Secure sockets layer is added between the transport layer and the application layer in the standard TCP/IP protocol stack.\n\nWebSphere Application Server uses Java Secure Sockets Extension (JSSE) as the SSL implementation for secure connections. JSSE is part of the Java 2 Standard Edition (J2SE) specification and is included in the IBM implementation of the Java Runtime Extension (JRE).\n\n Component\n\n1.SSL handshake\nCommunication using SSL begins with an exchange of information between the client and the server. This exchange of information is called the SSL handshake. The three main purposes of the SSL handshake are:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a. Negotiate the cipher suite\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The SSL session begins with a negotiation between the client and the server as to which cipher suite they will use. A cipher suite is a set of cryptographic algorithms and key sizes to encrypt data.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. Authenticate identity\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Authenticating the server allows the client to be sure that the server represents the entity that the client believes the server represents.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c. Establish information security by agreeing on encryption mechanisms\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The client and server exchange information that allows them to agree on the same secret key. For example, with RSA, the client uses the server's public key, obtained from the public key certificate, to encrypt the secret key information.\n\n2.JSSE\nJSSE handles the handshake negotiation and protection capabilities that are provided by SSL to ensure secure connectivity exists across most protocols. JSSE uses on X.509 certificate-based asymmetric key pairs for secure connection protection and some data encryption.\n\n3.X.509 certificates\nThe digitally-signed X.509 certificates are used for SSL. X.509 certificates include the information about distinguished name, expiration, serial number, algorithm ID, Issuer and so on. A certificate must be signed by a CA because the certificate represents the identity of an entity to the general public.\n\n4.Keystore\nA keystore is a database of key material. It consists of an entity's identity and its private key, and can be used for a variety of cryptographic purposes. There are various types of keystores available, including \"PKCS12\" and \"JKS.\"\n\n5.Truststore\nA truststore is a keystore which is used when making decisions about what to trust. If you receive some data from an entity that you already trust, and if you can verify that the entity is the one it claims to be, then you can assume that the data really came from that entity.\n\n6.Cipher suite \nA cipher suite is a combination of cryptographic parameters that define the security algorithms and key sizes used for authentication, key agreement, encryption, and integrity protection.\n\n7.Public key cryptography\nPublic key cryptography uses an encryption algorithm in which two keys are produced. One key is made public while the other is kept private. The public key and the private key are cryptographic inverses; what one key encrypts only the other key can decrypt. Public key cryptography is also called asymmetric cryptography.\n\nTroubleshooting\n\n Data Collection\n\n1.MustGather for JSSE, SSL or JCE problems\nhttp://www-01.ibm.com/support/docview.wss?uid=swg21162961\n\n2.SSL=all trace tells about\nWhich type of SSL configuration is selected (Dynamic, programmatic, managed scope, direct selection)\nWhich truststore/keystore is used\n\n3.javax.net.debug trace tells about\nCertificate chain sent from remote\nDistinguished name, expiration, serial number, Issuer etc.,,,\nCipher Suite used in the session\n\nData Analysis\n\nBelow is an example of JSSE trace on client side.\n\n1.Send “Client hello” to SSL server\n[3/3/10 11:30:11:828 JST] 00000021 SystemOut     O   *** ClientHello, TLSv1\n[3/3/10 11:30:11:828 JST] 00000021 SystemOut     O   Cipher Suites: [SSLRSAWITHRC4128MD5, SSLRSAWITHRC4128SHA, SSLRSAWITHAES128CBCSHA,SSLDHERSAWITHAES128CBCSHA,, SSLDHEDSSWITHRC4128_SHA]\n[3/3/10 11:30:11:828 JST] 00000021 SystemOut     O   [write] MD5 and SHA1\n2.Receive “Server hello” from SSL server\n[3/3/10 11:30:11:937 JST] 00000021 SystemOut     O   *** ServerHello, TLSv1\n[3/3/10 11:30:11:937 JST] 00000021 SystemOut     O   Cipher Suite: SSLRSAWITHRC4128_MD5\n3.Receive “Certificate chain” from SSL server\n[3/3/10 11:30:11:968 JST] 00000021 SystemOut     O   *** Certificate chain\n[3/3/10 11:30:11:984 JST] 00000021 SystemOut     O   chain [0] = [\n[ Version: V3\n  Subject: CN=mods.makuhari.japan.ibm.com, OU=Terms of use at www.verisign.com/cps/testca (c)05, OU=IBM, O=SWTS, L=Makuhari, ST=Toyko, C=JP\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n Validity: [From: Sun Feb 28 09:00:00 JST 2010,\n               To: Mon Mar 15 08:59:59 JST 2010]\n  Issuer: CN=VeriSign Class 3 Secure Server 1024-bit Test CA, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)07, OU=VeriSign Trust Network, OU=FOR TEST PURPOSES ONLY, O=\"VeriSign, Inc.\", C=US\n  SerialNumber: [75567502602804770198902073950259089487]\n[3/3/10 11:30:11:984 JST] 00000021 SystemOut     O   chain [1] = [\n[ Version: V3\n  Subject: CN=VeriSign Class 3 Secure Server 1024-bit Test CA, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)07, OU=VeriSign Trust Network, OU=FOR TEST PURPOSES ONLY, O=\"VeriSign, Inc.\", C=US\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n Validity: [From: Tue Apr 24 09:00:00 JST 2007,\n               To: Mon Apr 24 08:59:59 JST 2017]\n  Issuer: OU=For Test Purposes Only, OU=VeriSign Trust Network, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)02, OU=Class 3 TEST Public Primary Certification Authority - G2, O=\"VeriSign, Inc.\", C=US\n  SerialNumber: [19080311188043284684508743335647212147]\n…\n[3/3/10 11:30:11:984 JST] 00000021 SystemOut     O   chain [2] = [\n[ Version: V1\n  Subject: OU=For Test Purposes Only, OU=VeriSign Trust Network, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)02, OU=Class 3 TEST Public Primary Certification Authority - G2, O=\"VeriSign, Inc.\", C=US\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n4.Check whether server certificate is trusted( Search signer certificate in truststore)\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa   checkServerTrusted Entry\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa 3   Certificate information:\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa 3     Subject DN: CN=mods.makuhari.japan.ibm.com, OU=Terms of use at www.verisign.com/cps/testca (c)05, OU=IBM, O=SWTS, L=Makuhari, ST=Toyko, C=JP\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa 3     Issuer DN: CN=VeriSign Class 3 Secure Server 1024-bit Test CA, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)07, OU=VeriSign Trust Network, OU=FOR TEST PURPOSES ONLY, O=\"VeriSign, Inc.\", C=US\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa 3     Serial number: 75567502602804770198902073950259089487\n…\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa 3   Certificate information:\n[3/3/10 11:30:11:984 JST] 00000021 WSX509TrustMa 3     Subject DN: CN=VeriSign Class 3 Secure Server 1024-bit Test CA, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)07, OU=VeriSign Trust Network, OU=FOR TEST PURPOSES ONLY, O=\"VeriSign, Inc.\", C=US\n[3/3/10 11:30:12:000 JST] 00000021 WSX509TrustMa 3     Issuer DN: OU=For Test Purposes Only, OU=VeriSign Trust Network, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)02, OU=Class 3 TEST Public Primary Certification Authority - G2, O=\"VeriSign, Inc.\", C=US\n[3/3/10 11:30:12:000 JST] 00000021 WSX509TrustMa 3     Serial number: 19080311188043284684508743335647212147\n…\n[3/3/10 11:30:12:000 JST] 00000021 WSX509TrustMa 3   Certificate information:\n[3/3/10 11:30:12:000 JST] 00000021 WSX509TrustMa 3     Subject DN: OU=For Test Purposes Only, OU=VeriSign Trust Network, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)02, OU=Class 3 TEST Public Primary Certification Authority - G2, O=\"VeriSign, Inc.\", C=US\n5.Is the server trusted? (Is the signer certificate for the server certificate found?)\n  \n[3/3/10 11:30:12:000 JST] 00000021 SystemOut     O   Found trusted certificate:\n[3/3/10 11:30:12:015 JST] 00000021 SystemOut     O   [\n[ Version: V3\n  Subject: CN=mods.makuhari.japan.ibm.com, OU=Terms of use at www.verisign.com/cps/testca (c)05, OU=IBM, O=SWTS, L=Makuhari, ST=Toyko, C=JP\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n Validity: [From: Sun Feb 28 09:00:00 JST 2010,\n               To: Mon Mar 15 08:59:59 JST 2010]\n  Issuer: CN=VeriSign Class 3 Secure Server 1024-bit Test CA, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)07, OU=VeriSign Trust Network, OU=FOR TEST PURPOSES ONLY, O=\"VeriSign, Inc.\", C=US\n  SerialNumber: [75567502602804770198902073950259089487\n[3/3/10 11:30:12:062 JST] 00000021 SystemOut     O   Found trusted certificate:\n[3/3/10 11:30:12:062 JST] 00000021 SystemOut     O   [\n[ Version: V1\n  Subject: OU=For Test Purposes Only, OU=VeriSign Trust Network, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)02, OU=Class 3 TEST Public Primary Certification Authority - G2, O=\"VeriSign, Inc.\", C=US\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n Validity: [From: Sat Apr 20 09:00:00 JST 2002,\n               To: Wed Aug 02 08:59:59 JST 2028]\n  Issuer: OU=For Test Purposes Only, OU=VeriSign Trust Network, OU=Terms of use at https://www.verisign.com/cps/testca/ (c)02, OU=Class 3 TEST Public Primary Certification Authority - G2, O=\"VeriSign, Inc.\", C=US\n  SerialNumber: [104676769249816804185635383688073198822]\n6.Server is trusted by the SSL client\n[3/3/10 11:30:12:062 JST] 00000021 WSX509TrustMa 3   Server is trusted by all X509TrustManagers.\n[3/3/10 11:30:12:062 JST] 00000021 WSX509TrustMa <  checkServerTrusted Exit\n7.Receive “Certificate request” from SSL server\n[3/3/10 11:30:12:078 JST] 00000021 SystemOut     O   *** CertificateRequest\n[3/3/10 11:30:12:078 JST] 00000021 SystemOut     O   Cert Authorities:\n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   \n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   \n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   \n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   \n…\n8.Receive “Server hello done” from SSL server\n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   *** ServerHelloDone\n9.Send “Client certificate” to SSL server\n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   matching alias: hnaoclientcertificate02\n[3/3/10 11:30:12:093 JST] 00000021 WSX509KeyMana   normalizeAliasName Entry\n                                 hnaoclientcertificate02\n[3/3/10 11:30:12:093 JST] 00000021 WSX509KeyMana <  chooseClientAlias Exit\n                                 hnaoclientcertificate02\n[3/3/10 11:30:12:093 JST] 00000021 SystemOut     O   chain [0] = [\n[ Version: V3\n  Subject: CN=hnao, OU=user, O=stsc, C=US\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n Validity: [From: Wed Jan 13 00:27:50 JST 2010,\n               To: Thu Jan 13 00:27:50 JST 2011]\n  Issuer: CN=hnao, OU=user, O=stsc, C=US\n  SerialNumber: [5292370009037]\n10.Send “Client key exchange” to SSL server\n[3/3/10 11:30:12:109 JST] 00000021 SystemOut     O   *** ClientKeyExchange, RSA PreMasterSecret, TLSv1\n[3/3/10 11:30:12:109 JST] 00000021 SystemOut     O   Random Secret:  { 3, 1, 228, 152, 55, 141, 9, 21, 110, 20, 191, 108, 121, 121, 19, 136, 117, 141, 244, 29, \n11.Send “Certificate Verify” to SSL server\n[3/3/10 11:30:12:312 JST] 00000021 SystemOut     O   *** CertificateVerify\n12.Send “Change cipher spec” to SSL server\n[3/3/10 11:30:12:328 JST] 00000021 SystemOut     O   WebContainer : 0, WRITE: TLSv1 Change Cipher Spec, length = 1\n13.Send “Finished” to SSL server\n[3/3/10 11:30:12:359 JST] 00000021 SystemOut     O   *** Finished\n14.Send “Change Cipher Spec” to SSL server\n[3/3/10 11:30:12:375 JST] 00000021 SystemOut     O   WebContainer : 0, READ: TLSv1 Change Cipher Spec, length = 1\n15.Receive “Finished” from SSL server\n[3/3/10 11:30:12:375 JST] 00000021 SystemOut     O   *** Finished\n\n Reference\n\nJava Authentication and Authorization Service (JAAS) Reference Guide\nhttp://java.sun.com/j2se/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#SSLOverview\n\nWebSphere Application Server Security Handbook\nhttp://www.redbooks.ibm.com/redbooks/pdfs/sg246316.pdf\n\nSSL PD Education\nhttps://ibm.ent.box.com/file/540907035140\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"SSO","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/Security/SSO","text":"Date:2019-11-11\n\nOverview\n\nSingle Sign On (SSO) is a mechanism that allows users to access multiple applications on different servers without having to re-enter their username and password. In SSO environments, Lightweight Third Party Authentication (LTPA) keys are exchanged between Process Portal, Process Federation Server, and each IBM BPM server in the federated environment. When users log in to one server, they can access all the other servers in the federated environment for which they are authorized without getting prompted again for their credentials.\n\n Component\n\n1.Lightweight Third Party Authentication (LTPA)\nIBM Proprietary mechanism for passing security information from one server to another.\n\n2.LTPA Key\nA string used by WebSphere to create the LTPA Token. This must be the same on each server trying to do SSO.\n\n3.LTPA Token\nA cookie created WebSphere security that contains the user and expiration. It is stored by the client. Once WebSphere AppServer sends it to the client, it no longer exists on the server.\n\nTroubleshooting\n\n Data Collection\n\n1.Core security trace string:\n=info:com.ibm.ws.security.=all:com.ibm.websphere.security.=all:com.ibm.websphere.wim.=all:com.ibm.wsspi.wim.=all:com.ibm.ws.wim.=all\n2.If the problem is related to authentication to an Enterprise JavaBean:\n=info:com.ibm.ws.security.=all:com.ibm.websphere.security.=all:com.ibm.websphere.wim.=all:com.ibm.wsspi.wim.=all:com.ibm.ws.wim.=all:SASRas=all:ORBRas=all\n\n3.If the problem is related to security domains:\n=info:com.ibm.ws.security.=all:com.ibm.websphere.security.=all:com.ibm.websphere.wim.=all:com.ibm.wsspi.wim.=all:com.ibm.ws.wim.=all:SecurityDomain=all\nData Analysis\n\nBelow is a trace example of a normal SSO initial login procedure.\n\n1.Initial login with security enabled.\n[6/15/09 11:03:12:328 CDT] 00000036 EJSWebCollabo   preInvoke Entry\n                                 com.ibm.ws.webcontainer.srt.SRTServletRequest@7c6a7c6a\n                                 com.ibm.ws.webcontainer.srt.SRTServletResponse@195c195c\n                                 /\n                                 default_host\n                                 Snoop Servlet\n                                 true\n[6/15/09 11:03:12:343 CDT] 00000036 EJSWebCollabo 3   Http Header names and values:\nHost=[localhost:9444]\nUser-Agent=[Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.11) Gecko/2009060215 Firefox/3.0.11]\nAccept=[text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8]\nAccept-Language=[en-us,en;q=0.5]\nAccept-Encoding=[gzip,deflate]\nAccept-Charset=[ISO-8859-1,utf-8;q=0.7,*;q=0.7]\nKeep-Alive=[300]\nConnection=[keep-alive]\nCookie=[TJE=; TE3=]\n[6/15/09 11:03:12:343 CDT] 00000036 WebCollaborat 3   Invoked and received Subject are null, setting it anonymous/unauthenticated.\n[6/15/09 11:03:12:343 CDT] 00000036 WSCredentialI    Entry\n                                 \"\"\n                                 UNAUTHENTICATED\n                                 **\n[6/15/09 11:03:12:343 CDT] 00000036 WSCredentialI <   Exit\n[6/15/09 11:03:12:343 CDT] 00000036 ContextManage 3   Setting caller subject: Subject:\n\tPrincipal: /UNAUTHENTICATED\n\tPublic Credential: com.ibm.ws.security.auth.WSCredentialImpl@60e060e0\n[6/15/09 11:03:12:343 CDT] 00000036 PermissionRol 3   No permissions found for /snoop:GET\n[6/15/09 11:03:12:343 CDT] 00000036 WebConstraint   getRequiredRoles :  /snoop GET Entry\n[6/15/09 11:03:12:343 CDT] 00000036 WebResourceCo   matches Entry\n                                 /snoop\n                                 GET\n[6/15/09 11:03:12:343 CDT] 00000036 WebResourceCo 3   Checking URL: /snoop/*\n….\n[6/15/09 11:03:12:343 CDT] 00000036 PermissionRol 3   DefaultApplication.ear, /snoop:GET required roles are org.eclipse.jst.j2ee.common.internal.impl.SecurityRoleImpl(All Role)\n…..\n[6/15/09 11:03:12:343 CDT] 00000036 WebResourceCo   getMatchType Entry\n                                 /snoop/*\n[6/15/09 11:03:12:343 CDT] 00000036 WebResourceCo 3   URI Match type = PATHNAME\n[6/15/09 11:03:12:343 CDT] 00000036 WebResourceCo <  getMatchType Exit\n[6/15/09 11:03:12:343 CDT] 00000036 WebConstraint <  getConstraints not null Exit\n[6/15/09 11:03:12:343 CDT] 00000036 WebCollaborat 3   URI -  /snoop.GET is protected\n\n2.Login after basic auth.\n[6/16/09 9:56:06:484 CDT] 00000037 EJSWebCollabo 3   Http Header names and values:\nHost=[localhost:9444]\nUser-Agent=[Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.11) Gecko/2009060215 Firefox/3.0.11]\nAccept=[text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8]\nAccept-Language=[en-us,en;q=0.5]\nAccept-Encoding=[gzip,deflate]\nAccept-Charset=[ISO-8859-1,utf-8;q=0.7,*;q=0.7]\nKeep-Alive=[300]\nConnection=[keep-alive]\nAuthorization=[Basic d2FzYWRtaW46dzM4c3BoZXJl]\n[6/16/09 9:56:06:484 CDT] 00000037 WebAuthentica   handleSSO Entry\n[6/16/09 9:56:06:484 CDT] 00000037 WebAuthentica <  handleSSO: no cookies present in the request. Exit\n[6/16/09 9:56:06:484 CDT] 00000037 WebAuthentica   handleBasicAuth Entry\n[6/16/09 9:56:06:484 CDT] 00000037 WebAuthentica 3   Authorization: Basic d2FzYWRtaW46dzM4c3BoZXJl\n[6/16/09 9:56:06:484 CDT] 00000037 WebAuthentica 3   BasicAuthEncoding:null\n[6/16/09 9:56:06:484 CDT] 00000037 WebAuthentica   basicAuthenticate Entry\n[6/16/09 9:56:06:484 CDT] 00000037 ContextManage   login(realm, user, password) - login(defaultWIMFileBasedRealm, wasadmin, ***, system.WEB_INBOUND AppContext: {RedirectURL=null, WebAppName=Default Web Application}) Entry\n\n3.Setting SSO domain.\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   Setting SSO cookie with name: LtpaToken2 logout false, value: pGZ7oztr2Lt Ze….JIV8gS2NWnJ\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes   getSSODomain Entry\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   SSO Domain List: .ibm.com\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   SSO Domain will be set to an empty string if a parent domain is not found in the list above.\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   URL: https://pork5-009041030204.austin.ibm.com:9444/snoop\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   Request host: pork5-009041030204.austin.ibm.com\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   Domain match found: '.ibm.com'\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes 3   SSO Domain is: '.ibm.com'\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes <  getSSODomain Exit\n[6/16/09 10:07:15:046 CDT] 00000037 WebAttributes <  createCookiesStatic: returning 2 cookie(s) to add to response. Exit\n\nAdditional login with LTPA Token.\n[6/16/09 9:39:57:765 CDT] 00000037 EJSWebCollabo 3   Http Header names and values:\nHost=[localhost:9444]\nUser-Agent=[Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.11) Gecko/2009060215 Firefox/3.0.11]\nAccept=[text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8]\nAccept-Language=[en-us,en;q=0.5]\nAccept-Encoding=[gzip,deflate]\nAccept-Charset=[ISO-8859-1,utf-8;q=0.7,*;q=0.7]\nKeep-Alive=[300]\nConnection=[keep-alive]\nCookie=[TJE=; TE3=N0:C N1:C N2:C N3:C N4:C N5:C N6:C N7:C N8:C N9:C N10:C N11:C N12:C N13:C N14:C N15:C N16:C N17:C N18:C N19:C N20:C N21:C N22:C N23:C N24:C N25:C; LtpaToken2=lBYo2YVPzkgwFI………..Clm/02yUO7EAnhG8JG83DrdTLiqC4AI1noWZAzHC; LtpaToken=hgWQ1fVerkXY1N…………zR/R78VUmz8Cqgt0r0VRkucfVEzi+eyMi4Q==]\n[6/16/09 9:39:57:765 CDT] 00000037 WebAuthentica   handleSSO Entry\n[6/16/09 9:39:57:765 CDT] 00000037 WebAuthentica 3   Attempting primary cookie validation for: LtpaToken2\n[6/16/09 9:39:57:765 CDT] 00000037 WebAuthentica   getCookieValues Entry\n                                 LtpaToken2\n[6/16/09 9:39:57:765 CDT] 00000037 WebAuthentica 3   lBYo2YVPzkgwFI1UlFkTQmqHxmxl+MLriYZXoGS8VP71V7uUG7s8tMfONH…….AI1noWZAzHC\n[6/16/09 9:39:57:765 CDT] 00000037 WebAuthentica <  getCookieValues Exit\n[6/16/09 9:51:00:218 CDT] 00000037 LTPAServerObj 3   BEGIN VALIDATING TOKEN: some errors may occur, look for SUCCESS:\n…..\n[6/16/09 9:51:00:218 CDT] 00000037 LTPAToken     <  validate LTPAToken from byte[] Exit\n[6/16/09 9:51:00:218 CDT] 00000037 LTPATokenFact <  validateTokenBytes (success) Exit\n[6/16/09 9:51:00:218 CDT] 00000037 LTPAServerObj  SUCCESS: validated using tokenFactoryArray[0]: com.ibm.ws.security.ltpa.LTPATokenFactory Exit\n[6/16/09 9:51:00:218 CDT] 00000037 LTPAServerObj 3   Prediction successful:token:com.ibm.ws.security.ltpa.LTPATokenFactory::256\n[6/16/09 9:51:00:218 CDT] 00000037 LTPAServerObj <  validateToken Exit\n\n Reference\n\nManaging LTPA Keys\nhttps://www.ibm.com/support/knowledgecenter/SSEQTP8.5.5/com.ibm.websphere.base.iseries.doc/ae/tsecsslmanagelptakeys.html\n\nSSO with WebSphere and Domino\nhttp://www-12.lotus.com/ldd/doc/dominonotes/7.0/help7admin.nsf/f4b82fbb75e942a6852566ac0037f284/0bb0e5440ba375098525706f0065d9cb?OpenDocument\n\nWebSphere Security, SSO ,LTPA and Form Login\nhttps://ibm.ent.box.com/file/540939659327\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"User and Group Security","description":"qingzou@cn.ibm.com","owner":"@Qing Zou","path":"/BusinessProcessManager/Security/User&GroupSecurity","text":"Date：2019-12-16\n\nOverview\n\nUser and Group Security Fundamentals Education teaches the basics how to understand and resolve reported user and security issues and typical issues and solutions in IBM Business Process Manager (BPM) and IBM Business Automation Workflow (BAW). This module serves as the basis for in-depth education modules on user and group security related issues.\n\nUnless specifically noted, references to BPM or BAW may refer to both BPM or BAW.\n\n Prerequisites\n\nYou should have a basic knowledge of:\n\nWAS Security\nAuthenticating users\nConfiguring Lightweight Directory Access Protocol (LDAP) user registries\n\nComponent\n\n1.Fine-grained authorization model that uses groups, roles, and teams in BPM.\n\nGroups\n\nGroups are collections of users.\n\nBPM group management manages several types of BPM private groups. In this context, \"private\" means that the groups are not visible outside of the BPM environment, not available in LDAP, and not visible to WAS. Such groups cannot be used for Java Enterprise Edition or WebSphere Application Server (WAS) administrative role assignment.\n \nThe following list describes BPM private group types, we can check GROUPTYPE value in the LSWUSRGRPXREF BPMDB database table to understand the group type:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. 0- Security group: LDAP group or group created in WAS admin console (replicated from the user registry).\n&nbsp;&nbsp;&nbsp;&nbsp;b. 1- Team: Team using standard members or participant group.\n&nbsp;&nbsp;&nbsp;&nbsp;c. 2- Ad hoc group: Also known as a temporary group, for example team filter service or team retrieval service.\n&nbsp;&nbsp;&nbsp;&nbsp;d. 3- Internal group: Group created by using Process Admin Console or an application programming interface. \n&nbsp;&nbsp;&nbsp;&nbsp;e. 4- Dynamic group: Dynamic groups are result of participant groups or task assignments using expressions.\n \nThe following diagram illustrates how BPM group management works with the federated repository to manage the various types of groups.\n\nRoles\n\nRoles are a logical application level construct that divides the user population into multiple classes of users. Different roles can be assigned different levels of security, and the security access of individuals, or groups of individuals, can be controlled by assigning them to specific roles. In IBM Business Process Manager, there are three types of roles.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. WAS administrative roles. See Administrative roles.\n&nbsp;&nbsp;&nbsp;&nbsp;b. BPM application Java EE roles. See IBM Business Process Manager application J2EE roles.\n&nbsp;&nbsp;&nbsp;&nbsp;c. BPM security roles that allow configuring system accounts. See IBM BPM security roles.\n\nTeams\n\nTeams are used to define groups of users who can perform tasks. A team can either be defined as a static list of users and groups, or be defined dynamically by a service.\n\nTeams in BPM V8.5, Part 1: Modeling teams with IBM Process Designer\nTeams in BPM V8.5, Part 2: Developing services for dynamic team resolution\nTeams in BPM V8.5, Part 3: Managing teams\n\nUsers\n\nUsers represent either people who work with IBM Business Process Manager or system users who administer IBM Business Process Manager. Users are authorized by adding them to roles or teams.\n\nWe can restrict inactive users from participating in runtime operations, see Runtime user availability and lifecycle.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. User Activation: A user can be activated in the IBM BPM database only if the user is available in a user registry.\n&nbsp;&nbsp;&nbsp;&nbsp;b. User Deactivation: While users can be removed from the user registry, you cannot delete user entries from the IBM BPM database. Therefore, these inactive users are still available for task assignments and collaboration invitations. However, you can deactivate the inactive users by running the syncExistingUsers command. For more information, see Synchronizing users.\n \nUser Registry\n\nBPM authorization relies on users and groups that are defined in the user registry. A user registry is an architectural layer that manages users and groups in WAS. LDAP servers are the most commonly used source of user and group data storage. Although BPM can utilize a stand-alone LDAP registry, you are recommended to use a federated repository configuration that can comprise multiple LDAP repositories.\n \nBPM does not lock user accounts after a configurable number of failed authentication attempts. End user accounts are managed in a user repository (typically LDAP connected to Federated Repositories). The user repository is the system of record for the user accounts and therefore defines rules such as password lock policy.\n \nThe following diagram illustrates how WAS and applications access user and group data in the user registry.\n\n2.Administering BPM users and groups\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Creating and maintaining users and groups: You can create and manage users and groups in Process Admin Console.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Synchronizing users and groups: BPM implicitly synchronizes external users and groups between WAS user registry and BPM database in response to certain triggers. You can trigger synchronization explicitly by using administrative scripts or Process Admin Console.\n&nbsp;&nbsp;&nbsp;&nbsp;c. Administering dynamic groups: BPM refreshes dynamic groups either explicitly or implicitly.\n\n Troubleshooting\n \nData Collection\n\nYou might be having problems logging into certain parts of the BPM product (Process Portal, Process Admin console, Process Center console, Process Designer), or you are seeing issues with your LDAP configuration, or users are unable to view their tasks, then refer to this Security Problems Must Gather Doc for data collection.\n \nSymptoms & Solutions\n\nSymptom – Task is assigned to a group with no users.\n\nAll tasks must be assigned to a user or group. The group needs to have at least one user. When a task is assigned to a group with no users, the following errors may occur.\n\nFlowObjectExe E   CWLLG0326E: The BPD encountered an error.                                  \ncom.lombardisoftware.core. TeamWorksException: Cannot route task. The group contains no users.\n\nSolution – Ad hoc group calculations\n\nFinding how many groups are present.\n\ngroup_type:\n0 – LDAP group or group created in WAS admin console\n1 – Team or participant group\n2 – Ad hoc (also team filter service or team retrieval service)\n3 – BPM internal groups like tw_authors, and user created ones\n4 – Dynamic group\n\nSELECT GROUPTYPE, COUNT(GROUPID) AS \"COUNT\"\nFROM LSWUSRGRP_XREF\nGROUP BY GROUP_TYPE\nORDER BY GROUP_TYPE;\n \n--LIST AND COUNT MEMBERS IN GROUPS.\nselect count(mem.groupid) as \"Number\", grp.displayname, grp.grouptype from lswusrgrpxref grp\ninner join lswusrgrpmemxref mem on grp.groupid = mem.groupid\ngroup by mem.groupid, grp.displayname, grp.group_type\norder by \"Number\" desc;\n \nJR53280 corrects when an ad hoc group (team filter service) calculation does not complete properly.  By adding the configuration  a second check is done to ensure the group is properly refreshed.  When a team filter service is created, the list of users entered creates a unique hash and unique new ad hoc group (team). This team will always be the same group_id number so long as the same user list is supplied every time. This defect corrects problems the group hash as calculated incorrectly.\n \nSymptom – Login to BPM Process Portal is slow.\n\nWhen a user logs into BPM Process Portal the time is longer than expected. The time from when a user types in their password to login to Portal, until Portal page rendering done is longer than expected.\n\nSolution\n\nThere are multiple solutions for this type of symptom.\n&nbsp;&nbsp;&nbsp;&nbsp;a. Reduce the number of calls BPM to LDAP server. This can be done with the setting of . This setting uses the available user and group relationships from the cached XREF tables.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Turn off dynamic group updates on login. The settings is  and is true by default.\n&nbsp;&nbsp;&nbsp;&nbsp;c. Delete closed tasks. When calling Process Portal Work list or other queries, deleting closed tasks puts less strain on the database to the task and instance tables.\n&nbsp;&nbsp;&nbsp;&nbsp;d. Perform database run statistics and re-indexing on the LSWTASK and LSWBPD_INSTANCE tables in the database. These should already be a part of the general database maintained on a BPM system.\n \nSymptom – Users and groups are visible in WAS admin console but invisible in BPM.\n\nSolution\n\n1) WAS VMM cache (default is 20 minutes)\n2) Wildcard card not supported by LDAP. Turn off wildcard searches with \"wildcardProcessingOptimized\" property.\n \nSymptom – How to update existing and future groups in BPM?\n\nSolution\n\nThere is a set of wsadmin commands which allow for synchronization of users and groups between BPM and WAS.  These are provided to reduce query stress on the BPM database and the federated repositories (often LDAP). See Synchronizing users and groups.\n \nSymptom – There is high CPU usage on BPM Database or LDAP server when BPM fetches groups\n\nSolution\n\nThe following 100Custom.xml settings reduce stress on the BPM and LDAP group lookups.\nDB\nfalse\nfalse\nfalse\n\nSymptom – You are not authorized to perform the 'finish/assign to user' action.\n\nSolution\n\n1)CWTBG0549E: You are not authorized to perform the 'finish' action.\nPossible reason: Implemented Since BPM 8.5.7, BPM now excludes potential task owner, task collaborator, and task team manager authorization roles from completing or finishing a task. This was done to match what is stated in the knowledge center. Introduced by APAR JR55960, this fix has flag to match previous versions behaviors.\nhttp://www-01.ibm.com/support/docview.wss?uid=swg1JR55960\n \n2)CWTBG0549E: You are not authorized to perform the 'assignto user: abc' action.\nPossible reason: Even a user (user A) from the tw_admins group cannot reassign a task to a user (user B) if that user (user B) is not part of the ad hoc group. Proceed only by assigning to members of that group. Follow steps 1 and 2 from \"Manually adding a user to a group.\" If group membership information is needed. Follow step 3 if you need to add that user to the group.\n \n3)CWTBG0590E: You are not authorized to start or access this client-side human service.\nIf you receive this error when attempting to log in to the Process Portal, the issue could be due to not being part of the tw_allusers group. To verify, you can run the following query:\n\n--Show users which are not in \"tw_allusers\" group.\nSELECT * FROM LSWUSRXREF\nWHERE USER_ID NOT IN (\nSELECT USER_ID\nFROM LSWUSRGRPMEMXREF\nWHERE GROUP_ID=16)\nORDER BY USER_NAME;\n \nIf there are any more users that may experience this issue, this query should help in retrieving the users. After you have a list of users to add, go to Process Admin Console  User Management  Group Management  Group, to modify (twallusers) and add the users to the group. JR52746 was created to prevent users from being removed from the twallusers group. More information on why users may be accidently removed here:\n\nWhy are users not member of the tw_allusers group anymore?\nJR52746: INCONSISTENT SEARCH RESULTS FOR TASKS ASSIGNED TO USERS THAT ARE NOT IN THE USER REPOSITORY\n\nSymptom – Unable to add user to group or retrieve LDAP group in Process Admin Console.\n\nAfter Federating to LDAP, customer is unable to “Add Users” to groups using the “Group Management” screen of the BPM Process Admin Console. Customer is also unable to retrieve LDAP groups using the “Select Group to Modify” search box on that same screen.\n\nSolution\n\n1)What is the BPM / WebSphere / LDAP integration golden rule?\n\nFrom WAS Admin Console's \"Manage Users\" and \"Manage Groups\" screens, you could see:\nan LDAP user\nthat LDAP user's Groups in the \"Groups\" tab\na LDAP group\nthat LDAP group's Users in the \"Members\" tab\n\n2)Where can I get the handy-dandy diagnostic JSPs to help troubleshoot my BPM LDAP integration?\n\nWith JSPs placed on the Dmgr server’s filesystem, we observed:\nUR_getGroups.jsp errored with MaxResultsExceededException\nUR_getUsers.jsp errored with MaxResultsExceededException\nUR_getUserForm.jsp failed with used with wildcard pattern that “Add Users” would perform:  SomeUser\n\n3)For “MaxResultsExceededException: CWWIM1018E” in SystemOut.log:\n\nWhere are my LDAP groups in BPM Process Admin Console \"Add Groups\"?\n\nImportant Note: Keep BPM Servers Shutdown until tuning has been verified! Only use Dmgr! \nIteratively raised maxSearchResults value in Dmgr’s wimconfig.xml (restarting Dmgr each time) to 100,000 and still got:\n\nUR_getGroups.jsp errored with MaxResultsExceededException\nUR_getUsers.jsp errored with MaxResultsExceededException\n\nEventually raised maxSearchResults to 1,000,000 to see how many results would be returned by JSPs. Dmgr crashed.\n\nRecommendation\n\n1)With over 100,000 Users and 100,000 Groups, the population would likely swamp BPM.\n\nBest practice is to have triad of consultants determine the proper tuning:\nBPM Architect: to identify which Users and Groups need to participate in the BPM processes\nLDAP Admin: to identify where those Users and Groups reside in the LDAP\nWebSphere Admin: to work help construct suitable Search Bases and Search Filters for the Group and PersonAccount (User) Entity Types in WebSphere to accomplish tuning\n\nRecommended Tuning Primer:\nBusiness Process Management Deployment Guide Using IBM Business Process Manager V8.5\nSee Chapter 7, section 2, ESPECIALLY section 7.2.4 \"Configuring LDAP filters\".\n\n2)Typical User Tuning.\n\nLDAP was Microsoft Active Directory which supplies a “memberOf” attribute on every User’s record (unlike Sun/Oracle LDAP, or IDS/TDS) – allowing Users to be limited by including memberOf terms in the Person Account (User) Entity Type search filter.\n\nExamples:\nDefault:    (&(ObjectCategory=User)\nOne Group specified:  (&(ObjectCategory=User)(memberOf=cn=SomeGroup,ou=someOU,dc=mycompany,dc=com))\nTwo Groups specified:  (&(ObjectCategory=User)(|(memberOf=cn=SomeGroup,ou=someOU,dc=mycompany,dc=com)(memberOf=cn=AnotherGroup,ou=someOtherOU,dc=mycompany,dc=com)))\n\nAs you can see, if users live in many Groups, the filter could get quite long.\n\nNOTE: User Tuning using “Search bases” is also sometimes possible.\n\n3)Typical Group Tuning.\n\nIn WAS, it is common to tune groups by using name patterns in the “Search filter” and/or “Search bases” to specify where to look for the Groups.\n\nExamples:\nDefault:    (&(ObjectCategory=Group)\nOne Group name pattern specified:  (&(ObjectCategory=Group)(cn=HR North America*)))\nTwo Group name patterns specified: (&(ObjectCategory=Group)(|(cn=HR North America)(cn=Finance)))\n\nNOTE: Wildcards and “short-name” are supported in this expression (the “memberOf” is not indexed to allow wildcards for User filters).\n\nIf many Groups are involved with BPM solution, this expression could get long and complicated, perhaps even taking a while to evaluate on the server.\n\n Reference\n\n1.How to troubleshoot a BPM user authorization problem - Part I\n2.How to troubleshoot a BPM user authorization problem - Part II\n3.Recommended APARs\n\nJR58388: THE MEMBERSHIP OF A GROUP MIGHT NOT POPULATE PROPERLY UNDER A STRESS LOAD\nBeing included in BPM 8.6.0.201712.\n\nJR58443: YOU SEE A NULLPOINTEREXCEPTION WHEN MULTIPLE THREADS TRY TO ACCESS THE INTERNAL GROUP MEMBERSHIP CACHE\nBeing included in BPM 8.6.0.201712.\n\nJR58495: YOU CAN'T RETRIEVE IBM BPM INTERNAL GROUPS THAT HAVE LEADING OR TRAILING SPACES\nBeing included in BPM 8.6.0.201712.\n\nJR58657: AN INTERNAL USER CACHE IS REBUILT FOR ALL USERS WHEN YOU CREATE A BRANCH, PROJECT, OR NAMED SNAPSHOT OR DEPLOY A SNAPSHOT\nBeing included in BPM 8.6.0.201712.\n\nJR59038: RETRIEVING USER GROUPS BY USING THE JAVASCRIPT API MIGHT TAKE LONGER THAN EXPECTED\nBeing included in BPM 8.6.0.201803.\n \nJR58908: PROCESS ADMIN CONSOLE GROUP MANAGEMENT USER SEARCH DOESN'T SEARCH BY FULLNAME\nBeing included in BPM 8.6.0.201803.\n\nJR59228: YOU MIGHT EXPERIENCE MANY DB CALLS WHEN USING THE USER.ROLES() IBM BPM JAVASCRIPT API\nBeing included in BAW 18.0.0.1.\n \nJR59274: THE USER.ROLES JAVASCRIPT API CONTAINS DUPLICATES FOR NESTED INTERNAL GROUPS THAT CONTAIN THE SAME USER\nBeing included in BAW 18.0.0.1.\n\nJR59724: YOU NOTICE HANGING THREADS WHEN CONCURRENTLY UPDATING A USER ATTRIBUTE\nBeing included in BAW 18.0.0.2.\n\nJR60037: YOU MIGHT EXPERIENCE A LOCK SITUATION DURING A USER REPLICATION FROM PROCESS ADMIN CONSOLE\nBeing included in BAW 18.0.0.2.\n \nJR60074: THE DASHBOARDS TASK LIST CAUSES HUNG THREADS WHEN LOADING USER GROUPS\nBeing included in BAW 18.0.0.2.\n \nJR60108: USE OF THE MEMORY FOR THE GROUPMEMBERS CACHE IS TOO LARGE\nBeing included in BAW 18.0.0.2.\n \nJR60428: A TASK IS ASSIGNED TO AN EMPTY AD HOC GROUP\nBeing included in BAW 19.0.0.1.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Advanced Integration Service","description":"lifengbj@cn.ibm.com","owner":"@Feng Li","path":"/BusinessProcessManager/AdvancedContent/AIS","text":"Date:2019-12-19\n\nOverview\n\nAdvanced Integration Services (AIS) are built in Integration Designer as services and are called from a Business Process. Advanced Integration Services is used to encapsulate business functionality in small components.\n\n Prerequisites\n\nService Component Architecture (SCA).\nSCA is a set of specifications that describe a programming model for building applications and systems using a Service-Oriented Architecture (SOA). SCA extends and complements previous approaches to implementing services and builds on open standards such as Web services.\nhttp://www.oasis-opencsa.org/sca\n\nComponents\n\nBindings\nAt the core of a service-oriented architecture is the concept of a service, a unit of functionality accomplished by an interaction between computing devices. An export defines the external interface (or access point) of a module, so that Service Component Architecture (SCA) components within the module can provide their services to external clients. An import defines an interface to services outside a module, so the services can be called from within the module. You use protocol-specific bindings with imports and exports to specify the means of transporting the data into or out of the module.\n\nExports\nExternal clients can invoke SCA components in an integration module over a variety of protocols (such as HTTP, JMS, MQ, and RMI/IIOP) with data in a variety of formats (such as XML, CSV, COBOL, and JavaBeans). Exports are components that receive these requests from external sources and then invoke IBM® Business Process Manager components using the SCA programming model.\n\nImports\nAn SCA component might want to invoke a non-SCA external service that expects data in a different format. An import is used by the SCA component to invoke the external service using the SCA programming model. The import then invokes the target service in the way that the service expects.\n\nRelationships\nA relationship is an association between two or more data entities, typically business objects. In IBM Business Process Manager Advanced, relationships can be used to transform data that is equivalent across business objects and other data but that is represented differently, or they can be used to draw associations across different objects found in different applications. They can be shared across applications, across solutions, and even across products.\nThe relationship service in IBM Business Process Manager Advanced provides the infrastructure and operations for managing relationships. Because it enables you to deal with business objects regardless of where they reside, it can provide a unified holistic view across all applications in an enterprise, and serve as a building block for BPM solutions. Because relationships are extensible and manageable, they can be used in complex integration solutions.\n\nBusiness objects\nThe computer software industry developed several programming models and frameworks in which business objects provide a natural representation of the business data for application processing.\n\n Troubleshooting\n\nData Collection\n\nTo trace the problems that are specific to AIS in BPM, below trace string should be enabled on the application server. Base trace:\n=info: com.ibm.bpm.fds.=all:ProcessApplicationLifecycle=all: com.ibm.bpm.fds.repo.util.ContributionHelper=off\nTrace Analysis\n\nAll below information are gathered when bindings work correctly. You can search key words and locate the information in trace files.\n\nUsage 1: Below information is to tell the SCA invocation chains, including invocation style, from and to etc. Please notice if it is an async call, it may across different JVMs or\ndifferent threads so usually time stamp, transaction id, message id etc are also required\nto identify the right thread id.\nKey words: Processing interaction (invokeAsync / invokeAsyncWithCallback / invokeResponse / onInvokeDeferredResponse)\nSample:\n[3/2/16 15:11:42:860 CST] 0000026e Core 1 com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl Processing interaction:[invokeAsyncWithCallback,operation1] = {BPCIVTApplication}ExtPTask.component\n[2/17/16 5:20:11:477 EST] 00000119 Core 1 com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl Processing interaction:[invokeAsync,createMultistep] = {LOLORequestWorkflow}RequestWorkflow.component\n\nUsage 2#: below information is used to see whether sync over async switch has been observed, which is antipattern and needs to be avoided.\nKey words: CWSCA2011W\nSample:\n[10/3/16 10:52:13:736 EST] 00001557 Core W CWSCA2011W: Service Component Architecture (SCA) is switching a synchronous call to an asynchronous call. The request will be sent in a new local transaction. The default timeout is 295000 milliseconds.  \n\nUsage 3#: below information is used to see when the async response message is ready to receive and when it is received. Usually it’s used to observe the async response message out of SCA world\nKey words: receiveResponse() / Client-side - Received SIBusMessage\nSample:\n[10/18/16 10:39:44:129 EST] 0000014c Core  com.ibm.ws.sca.internal.async.sib.SIBAsyncHandler receiveResponse() - Message: Entry \n[10/18/16 10:39:44:144 EST] 0000014c Core < com.ibm.ws.sca.internal.async.sib.SIBAsyncHandler createConnectionWithRetry() - Connection was successful Exit <<\n...\n[10/18/16 10:40:02:325 EST] 0000014c Core 3 com.ibm.ws.sca.internal.async.sib.SIBAsyncHandler Client-side - Received SIBusMessage: { com.ibm.ws.sib.mfp.impl.JsJmsBytesMessageImpl@59325932 }\n[10/18/16 10:40:02:348 EST] 0000014c Core < com.ibm.ws.sca.internal.async.sib.SIBAsyncHandler receiveResponse() Exit <<. \n\nUsage 4#: If the SCA invocation is cross clusters/JVMs, used to match the handling threads. For example thread 0000184 on server1 called to thread 0000020e on server2,and returned.\nKey words: processMessageBytes / processMessage\nSample:\n[10/18/16 10:42:34:557 EST] 00000184 Core  com.ibm.ws.sca.internal.binding.handler.SCAImportBindingHandler processMessageBytes Entry  { java.lang.Object[]@3cd23cd2 } length = 2\n...\n[10/18/16 10:42:34:560 EST] 0000020e Core  com.ibm.wsspi.sca.ejb.module.impl.ServiceSessionBean processMessageBytes Entry  <?xml version=\"1.0\" encoding=\"UTF-8\"?\n...\n[10/18/16 10:42:54:989 EST] 0000020e Core < com.ibm.wsspi.sca.ejb.module.impl.ServiceSessionBean processMessageBytes Exit <<\n...\n[10/18/16 10:42:55:009 EST] 00000184 Core < com.ibm.ws.sca.internal.binding.handler.SCAImportBindingHandler processMessage Exit <<\n.. \n\nUsage 5#: SCA message content during the invocations\nKey words: com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl\nSample:\n[6/19/17 15:47:28:957 CDT] 00000fa9 Core 3\ncom.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl\n\nHeader: {http://www.ibm.com/xmlns/prod/websphere/sca/headers/6.0.0}InteractionHeader {\ncom.ibm.ws.sca.internal.headers.impl.ManagedInteractionHeaderImpl@b9a56233 }\nmessageType = { com.ibm.wsspi.sca.headers.MessageType@97919891 }\nname = exception\nvalue = 2\nliteral = exception\ninteractionType = { com.ibm.wsspi.sca.headers.InteractionType@ba4af101 }\nname = invokeResult\nvalue = 1\nliteral = invokeResult\noperationType = {\ncom.ibm.wsspi.sca.scdl.wsdl.impl.WSDLPortTypeImpl$WSDLOperationTypeImpl@7bdd9283 }\ninitializedWrappedStyle = false\neOperation = { com.ibm.ws.sca.internal.scdl.wsdl.managed.SDOWSDLEOperationImpl@d54b47f8 }\nwrappedStyle = true\ninputType = Type name:invoke_._type\nURI:wsdl:http://GEM/AIS/Initializex0020Processx0020AIS isDataType:false open:false sequenced:\nfalse abstract:false baseTypes: [] properties: [initInput] aliasName:[]\noutputType = Type name:invokeResponse_._type\nURI:wsdl:http://GEM/AIS/Initializex0020Processx0020AIS isDataType:false open:false sequenced:\nfalse abstract:false baseTypes: [] properties: [gemTasks] aliasName:[]\nexceptionTypes = [Type name:AISGenericFault URI:http://GIS isDataType:false open:false\nsequenced: false abstract:false baseTypes: [] properties: [FaultCode, FaultString] aliasName:[]]\nop = Operation: name=invoke\nstyle=REQUEST_RESPONSE,1\nInput: name=null\nMessage: name={http://GEM/AIS/Initializex0020Processx0020AIS}invokeMsg\nPart: name=parameters\nelementName={http://GEM/AIS/Initializex0020Processx0020AIS}invoke\nOutput: name=null\nMessage: name={http://GEM/AIS/Initializex0020Processx0020AIS}invokeResponseMsg\nPart: name=parameters\nelementName={http://GEM/AIS/Initializex0020Processx0020AIS}invokeResponse\nFault: name=aisError\nMessage: name={http://GEM/AIS/Initializex0020Processx0020AIS}invokeFault1Msg\nPart: name=parameters\nelementName={http://GEM/AIS/Initializex0020Processx0020AIS}invokeFault1\nBody: com.ibm.websphere.sca.ServiceBusinessException[aisError]: BusinessObject@eca5db0b | Name=\n[{http://GIS}AISGenericFault] | XSTypeDefinition= [{http://GIS}AISGenericFault]] | Internal\nInformation =[ element {http://GIS}AISGenericFault (:\nstate:STATE{STATENODESREORDERED|ALLOWFAST_ACCESS} [bitset=4194368] :) (: user\ndata:com.ibm.xml.sdo.model.mediator.FastAccessDataFactory$CopiedFastAccessData{Has original node!\nCOW Chain JVM Info={6484f805} | com.ibm.xml.sdo.model.mediator.CopiedFastAccessMediator@c17932d3}\n:) | builtFirstNamespace=null | builtFirstAttribute=null | builtFirstChild=null | preceding=null |\nfollowing=null | parent=com.ibm.xml.xci.dp.cache.dom.DOMCachedDocument@87a62fcf |\nCacheManager=com.ibm.xml.sdo.model.SDOCacheManager@51f3523b | JVM Object\ninfo=com.ibm.ws.box.bomodel.impl.BusinessObjectImpl@eca5db0b\n]\n. \n\nReferences\n\nSynchronous-over-asynchronous invocation https://www.ibm.com/support/knowledgecenter/SSFPJS8.5.6/com.ibm.wbpm.wid.bpel.doc/topics/cscasynchoverasynch.html\n\nAsynchronous processing in WebSphere Process Server https://www.ibm.com/developerworks/websphere/library/techarticles/0904fong/0904fong.html\n\nWebSphere Process Server invocation styles\nhttps://www.ibm.com/developerworks/websphere/library/techarticles/0811chacko/0811chacko.html\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Business Process Choreographer","description":"ILGUEN@de.ibm.com;siro@it.ibm.com","owner":"@Serhad Ilgün,@Dino Sironi","path":"/BusinessProcessManager/AdvancedContent/BPC","text":"Date:2019-12-24\n\nOverview\n\nThis module teaches the basics of Business Process Choreographer (BPC) which consists of two components. The Business Flow Manager is responsible for running business processes, while human tasks run within the Human Task Manager. At the end of this module, you should be able to understand the architecture of BPC, the interaction of the different components and of course the troubleshooting of BPC related issues.\n\n Components\n\n1.Business process choreographer overview\nhttps://mediacenter.ibm.com/media/Business+process+choreographer+overview/0_xvgok8l9 This video gives a great overview about the architecture of BPC and the different components, so this is a good starting point for BPC education.\n\n2.BPC and Human Task intro by Hari\nhttps://ibm.ent.box.com/file/289981835809\nThis video is more a practical version of the first version. To be a bit more precise, the different components (Microflow, Macroflows, Integration Designer, BPCExplorer, etc.) are introduced based on example demonstrations by the presenter.\n\n3.Business Process Choreographer Samples & Tutorials\nhttps://publib.boulder.ibm.com/bpcsamp/v6r0/index.html These samples demonstrate and explain the features of Business Process Choreographer. They help you to develop your own business processes and human tasks. Documentation, the source code, and an enterprise application is provided for each sample. After you have configured your system, you can run the samples on your system.\n\n4.TechShare March 13 BPC2 Serhad\nhttp://ausgsa.ibm.com/projects/b/bpm_support/EducationSessions/BPM%20Runtime/TechShare/March%2013%20-%20BPC2%20-%20Serhad.wmv As already mentioned, the BPC contains Business Flow Manager and Human Task Manager. The core of these managers are the corresponding process and human task engines. For instance, the process engine ensures the execution and navigation of process instances. Consequently, if there is an execution or navigation error of process instances, the logs of the process engine must be analyzed. This video is a detailed presentation of the internals of the engine, e.g. how it executes process instances internally, and how it ensures the navigation. In addition, it also provides a best practice how to analyze engine related logs in case of an error, so this video also is included in the troubleshooting section.\n\n5.BPC Security/ Staff assignment https://ibm.ent.box.com/file/195759870602\nProcess instances must have a security check to control access, for reading, for updating, and for accessing stored instance data. This document describes in detail how the security is configured in BPEL processes.\n\n6.BPEL Fault Handling & Compensation https://ibm.ent.box.com/file/195759604403\nGood error management is crucial for any application. This document describes error handling in different scenarios.\n\nTroubleshooting\n\n1.BPC Database Internal https://ibm.ent.box.com/file/195759874952\nThis presentation shows the relevant internal structure of the BPC database and the most common problem source area and pitfalls.\n\n2.BPEL Engine Internal https://ibm.ent.box.com/file/195760153795\nThis presentation goes into the internal details about the BPEL Engine and explains how to interpret traces to identify the navigation steps of a process instance and to identify the corresponding executed steps in the BPEL Source code (PI File from the IBM  Integration Design)\n\n3.Business Process Fundamentals https://ibm.ent.box.com/file/195760155723\nThis document describes the general structure of the BPEL and indicates the most common pitfalls in development.\n\n4.https://www.ibm.com/developerworks/websphere/library/techarticles/1005fastovets/1005fastovets.html Usually the root cause of performance issues is database related. This technical article is a troubleshooting guide for WebSphere Process Server deadlocks and timeouts. Nevertheless, you can also consider this article also as a part of BPC basic education section, because this article not only describes the troubleshooting approach but also describes in combination with BPC engine how deadlocks and timeouts occur. To say it in other words, after this article you will also understand the interaction between BPC and the navigation database much better.\n\n Data Collection\n\n1.Mustgather documentation https://www.ibm.com/support/pages/collect-troubleshooting-data-business-process-choreographer-problems-ibm-business-process-manager-bpm-or-websphere-process-server-wps \n\n2.Since BPC lives on the database, it is important to know what it is stored in it, at least as a summary view of the most important components. In the BPC Database Internal https://ibm.ent.box.com/file/195759874952 document, mentioned in the previous section, there are some very useful SQL statements to help collect such summaries. In case of problems with the BPC DB, always start by collecting the output of those statements.\n\n3.Collecting WPS Trace https://ibm.ent.box.com/file/195760281037 \nThis document describe how to set the traces and the meaning of the different parameters\n\nData Analysis\n\n1.https://ibm.ent.box.com/folder/23577123210 This video and the corresponding presentation deals with issues for weekend support. To be a bit more precise, it deals with upcoming issues which are must be considered as a System Down or at least a high number of end user are affected. The presenter gives an introduction to these possible issues and also advice how to fix them.\n\n2.https://ibm.ent.box.com/folder/24098959730 The most difficult and urgent issues are performance related issue. This video and material deals with BPC performance analysis in general. It shows the possible bottlenecks of the BPC, e.g. database, runtime etc. After this video you should partly be able to narrow down the performance issue hopefully to one possible bottleneck.\n\n3.http://ausgsa.ibm.com/projects/b/bpm_support/EducationSessions/BPM%20Runtime/TechShare/March%2013%20-%20BPC2%20-%20Serhad.wmv As already mentioned, the BPC contains Business Flow Manager and Human Task Manager. The core of these managers are the corresponding process and human task engines. For instance, the process engine ensures the execution and navigation of process instances. Consequently, if there is an execution or navigation error of process instances, the logs of the process engine must be analyzed. This video is a detailed presentation of the internals of the engine, e.g. how it executes process instances internally and how it ensures the navigation. In addition, it also provides a best practice how to analyze engine related logs in case of an error.\n\n4.Reading of WPS Traces https://ibm.ent.box.com/file/195760193727\nThis document describes how to read collected traces.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Bindings","description":"lifengbj@cn.ibm.com","owner":"@Feng Li","path":"/BusinessProcessManager/AdvancedContent/Bindings","text":"Date:2019-12-19\n\nOverview\n\nAt the core of a service-oriented architecture is the concept of a service, a unit of functionality accomplished by an interaction between computing devices. An export defines the external interface (or access point) of a module, so that Service Component Architecture (SCA) components within the module can provide their services to external clients. An import defines an interface to services outside a module, so the services can be called from within the module. You use protocol-specific bindings with imports and exports to specify the means of transporting the data into or out of the module.\n\n Prerequisites\n\nWeb Service Basics\nThis is an elementary tutorial that introduces the concepts of web services.\nhttp://www.tutorialspoint.com/webservices/\n\nJMS (Java Message Service) is an API that provides the facility to create, send and read messages. It provides loosely coupled, reliable and asynchronous communication.\nhttps://docs.oracle.com/javaee/6/tutorial/doc/bncdr.html\n\nHypertext Transfer Protocol (HTTP) is an application-level protocol for distributed, collaborative, hypermedia information systems. It is a generic, stateless, protocol which can be used for many tasks beyond its use for hypertext, such as name servers and distributed object management systems, through extension of its request methods, error codes and headers. A feature of HTTP is the typing and negotiation of data representation, allowing systems to be built independently of the data being transferred. \nhttps://www.w3.org/Protocols/rfc2616/rfc2616.html\n\nIBM MQ (Message Queue) can transport any type of data as messages, enabling businesses to build flexible, reusable architectures such as service-oriented architecture (SOA) environments. It works with a broad range of computing platforms, applications, web services and communications protocols for security-rich message delivery.\nhttps://www.ibm.com/support/knowledgecenter/en/SSFKSJ/com.ibm.mq.helphome.doc/productwelcomewmq.htm\n\nEnterprise Java Beans (EJB) is a development architecture for building highly scalable and robust enterprise level applications to be deployed on J2EE compliant application servers such as JBOSS, Web Logic, etc.\nhttps://www.tutorialspoint.com/ejb/index.htm\n\nComponents\n\nExports\nExternal clients can invoke SCA components in an integration module over a variety of protocols (such as HTTP, JMS, MQ, and RMI/IIOP) with data in a variety of formats (such as XML, CSV, COBOL, and JavaBeans). Exports are components that receive these requests from external sources and then invoke IBM® Business Process Manager components using the SCA programming model.\n\nImports\nAn SCA component might want to invoke a non-SCA external service that expects data in a different format. An import is used by the SCA component to invoke the external service using the SCA programming model. The import then invokes the target service in the way that the service expects.\n\nList of bindings\nWeb service binding\nA web service binding lets you access an external service using interoperable SOAP messages and qualities of service. You can also use web service binding to include attachments as part of the SOAP message.\nThe web service binding can use a transport protocol of either SOAP/HTTP (SOAP over HTTP) or SOAP/JMS (SOAP over JMS). Regardless of the transport (HTTP or JMS) used to convey the SOAP messages, web service binding always handles request/response interactions synchronously.\n\nHTTP binding\nThe HTTP binding lets you access an external service using the HTTP protocol, where non-SOAP messages are used, or where direct HTTP access is required. This binding is used when you are working with web services that are based on the HTTP model (that is, services that use well-known HTTP interface operations such as GET, PUT, DELETE, and so on). \n\nEnterprise JavaBeans (EJB) binding\nThe EJB binding lets SCA components interact with services provided by Java™ EE business logic running on a Java EE server.\n\nEIS binding\nThe EIS (enterprise information system) binding, when used with a JCA resource adapter, lets you access services on an enterprise information system or make your services available to the EIS.\n\nJMS binding \nJava Message Service (JMS), generic JMS, and WebSphere® MQ JMS (MQ JMS) bindings are used for interactions with messaging systems, where asynchronous communication through message queues is critical for reliability.\nAn export with one of the JMS bindings watches a queue for the arrival of a message and asynchronously sends the response, if any, to the reply queue. An import with one of the JMS bindings builds and sends a message to a JMS queue and watches a queue for the arrival of the response, if any.\n  JMS \nThe JMS binding lets you access the WebSphere-embedded JMS provider.\n  Generic JMS\nThe generic JMS binding lets you access a non-IBM vendor messaging system.\n  MQ JMS\nThe MQ JMS binding lets you access the JMS subset of a WebSphere MQ messaging system. You would use this binding when the JMS subset of functions is sufficient for your application.\n\nMQ binding\nThe WebSphere MQ binding lets you communicate with MQ native applications, bringing them into the service oriented architecture framework and providing access to MQ-specific header information. You would use this binding when you need to use MQ native functions.\n\n Troubleshooting\n\nData Collection\n\n1.To trace the problems that are specific to Web service binding in BPM, below trace string should be enabled on application server. Base trace:\n\n=info:SCA.=all:com.ibm.ws.webservices.=all:org.apache.=all:com.ibm.ws.websvcs.=all:com.ibm.ws.metadata.=all\n\n2.To trace the problems that are specific to HTTP binding in BPM, below trace string should be enabled on application server. Base trace:\n\n  SCA.Binding.HTTPBinding=all:SCA.Binding.HTTP=all\n\n3.To trace the problems that are specific to MQ/JMS binding  in BPM, below trace string should be enabled on application server. Base trace:\n\n  =info:SCA.=all:com.ibm.mq.=all:com.ibm.ejs.jms.=all\n\nTrace Analysis\n\nAll information below is gathered when bindings work correctly. You can search key words and locate the information in trace files.\n\nUsage 1#: MQ/JMS Import sends request\nKey words: emitExitEvent\nComment :  Please pay attention to the attribute “destination” and make sure the request was sent to correct destination\nSample:\n[12/3/18 15:57:56:714 IST] 00000668 MQ 3 com.ibm.ws.sca.internal.mq.handler.EventHelper firing emitExitEvent { java.lang.Object[]@cf31c08f } length = 2\n= EventData [bindingProtocol=JMS, bType=Import, export=null, importb=com.ibm.ws.sca.internal.scdl.impl.ManagedImportImpl@cf744925 (description: null) (displayName: gtRefund) (name: gtRefund), opName=getRefundData, jType=MQNative,\ndestination=queue:///ONLRFN.RQSTQ?mdReadEnabled=true&putAsyncAllowed=1&messageBody=1&readAheadAllowed=1&targetClient=1&destDescription=PremiumRefund%2FgtRefundMQSEND_D&mdWriteEnabled=true,\nreplyDestination=queue:///ONLRFN.RSPNQ?mdReadEnabled=true&putAsyncAllowed=1&messageBody=1&readAheadAllowed=1&targetClient=1&destDescription=PremiumRefund%2FgtRefundMQRECEIVE_D&mdWriteEnabled=true,\ncallbackDestination=queue://PremiumRefund.gtRefundMQCALLBACK_D?busName=BPM.DEV.Bus, direction=REQUEST, databinding=org.reliance.connector.GetRefundBinding, msgID=ID:414d512053415656494f4e2e4c4120203897ef5b201b3e30,\ncorrelationID=ID:414d512053415656494f4e2e4c4120203897ef5b201b3e30, expiry=null, e=null]\nUsage 2#: MQ/JMS Import receives response message\nKey words: getCallbackMessage\nComment : Please pay attention to the attribute “destination” and make sure the response was received from correct destination. Please compare and make sure the request and response messages have same destination.\nSample:\n[12/3/18 15:57:57:404 IST] 000001b2 MQ  com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl getCallbackMessage Entry  { java.lang.Object[]@29746da9 } length = 2\n= callbackID='CALLBACKMESSAGE_ID:414d512053415656494f4e2e4c4120203897ef5b201b3e30'\n= ID:414d512053415656494f4e2e4c4120203897ef5b201b3e30\n[12/3/18 15:57:57:404 IST] 000001b2 MQ 3 com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl Variable WBIMQIMPORT_WAIT not set, using default\n[12/3/18 15:57:57:404 IST] 000001b2 MQ 3 com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl Creating message consumer on callback destination queue://PremiumRefund.gtRefundMQCALLBACK_D?busName=BPM.DEV.Buswith message\nselector: callbackID='CALLBACKMESSAGE_ID:414d512053415656494f4e2e4c4120203897ef5b201b3e30'\n[12/3/18 15:57:57:420 IST] 000001b2 MQ < com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl getCallbackMessage Exit << { com.ibm.ws.sib.api.jms.impl.JmsObjectMessageImpl@9280c042 } \nUsage 3#: MQ Import received the response message, matched the call-back message with correct callback message ID, and put the message on SIB.\nKey words: onMessage / getCallbackMessage / sendResponse\nSample:\n[18/10/16 10:29:40:454 EST] 000000ab MQ com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl onMessage Entry \n[18/10/16 10:29:40:454 EST] 000000ab MQ com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl getCallbackMessage Entry  {\njava.lang.Object[]@69986998 } length = 2\n[0] = callbackID='CALLBACKMESSAGE_ID:414d51204d514954535030332020202083d304588c9f0120'\n[1] = ID:414d51204d514954535030332020202083d304588c9f0120\n[18/10/16 10:29:40:731 EST] 000000ab MQ <com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl getCallbackMessage Exit <<\n[18/10/16 10:29:45:485 EST] 000000ab Core com.ibm.ws.sca.internal.async.sib.SIBAsyncHandler sendResponse() - CorrelationID: Entry \n_kzEAwJTBEeatRoKOCCcpEA\n[18/10/16 10:29:45:519 EST] 000000ab Core <com.ibm.ws.sca.internal.async.sib.SIBAsyncHandler sendResponse() Exit <<\n[18/10/16 10:29:45:529 EST] 000000ab MQ <com.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl\ncom.ibm.wsspi.sca.mq.inbound.MQResponseListenerImpl.onMessage Exit <<. \nUsage 4#: HTTP import sends request\nKey words: CWSCA6024I/CWSCA6012I/CWSCA6023I/CWSCA6013I\nSample:\n[3/02/14 13:33:00:416 EST] 00000035 HTTPBinding I CWSCA6024I: The HTTP import binding has started processing the com.ibm.ws.sca.internal.message.impl.ManagedMessageImpl@7422f370(anyAttribute: null) Service Component Architecture (SCA) message.\n[3/02/14 13:33:00:521 EST] 00000035 HTTPBinding I CWSCA6012I: The HTTP import binding is sending the request message with the following settings:\n[3/02/14 13:33:00:576 EST] 00000035 HTTPBinding I CWSCA6013I: The HTTP import binding has sent the request message and is preparing to parse the response.\n[3/02/14 13:33:00:688 EST] 00000035 HTTPBinding I CWSCA6023I: The HTTP import binding has completed the processing of the com.ibm.ws.sca.internal.message.impl.ManagedMessageImpl@7422f370(anyAttribute: null) Service Component Architecture (SCA) message.. \nUsage 5#: HTTP export receives response\nKey words: CWSCA6047I/CWSCA6046I\nSample:\n[9/18/15 10:30:24:630 IST] 00001a7e HTTPBinding I CWSCA6047I: The HTTP export binding has started processing the com.ibm.ws.webcontainer.srt.SRTServletRequest@3100998 request message.\n[9/18/15 10:30:31:832 IST] 00001a7e HTTPBinding I CWSCA6046I: The HTTP export binding has completed the processing of the com.ibm.ws.webcontainer.srt.SRTServletRequest@3100998 request message. \nUsage 6#: Display the SSL setting information for secure web service call\nKey words: SetupSSLConfi\nSample:\n[5/27/16 15:22:38:006 CDT] 000001a7 SetupSSLConfi 3 Effective SSL configuration:\ncom.ibm.ssl.clientAuthenticationSupported = false\ncom.ibm.ssl.changed = 1\ncom.ibm.ssl.contextProvider = IBMJSSE2\ncom.ibm.ssl.trustStoreProvider = IBMJCE\ncom.ibm.ssl.protocol = SSL_TLS\ncom.ibm.ssl.keyStoreReadOnly = false\ncom.ibm.ssl.alias = NodeDefaultSSLSettings\ncom.ibm.ssl.keyStoreCreateCMSStash = false\ncom.ibm.ssl.securityLevel = HIGH\ncom.ibm.ssl.trustStoreName = CellDefaultTrustStore\ncom.ibm.ssl.configURLLoadedFrom = security.xml hostname = localhost\ncom.ibm.ssl.trustStorePassword = **\ncom.ibm.ssl.keyStoreUseForAcceleration = false\ncom.ibm.ssl.trustManager = IbmPKIX|IBMJSSE2 soReuseAddr = 1\ncom.ibm.ssl.validationEnabled = false\ncom.ibm.ssl.trustStoreInitializeAtStartup = false\ncom.ibm.ssl.keyManager = IbmX509|IBMJSSE2\ncom.ibm.ssl.keyStoreFileBased = true endPointName = IPCCONNECTORADDRESS\ncom.ibm.ssl.keyStoreType = PKCS12\ncom.ibm.ssl.trustStoreFileBased = true\ncom.ibm.ssl.trustStoreCreateCMSStash = false\ncom.ibm.ssl.trustStoreScope = (cell):WPSDevCell01\ncom.ibm.ssl.trustStore = /usr/celeriti/WPS/profiles/DL90269WPSNode01/config/cells/WPSDevCell01/trust.p12\ncom.ibm.ssl.keyStoreProvider = IBMJCE\ncom.ibm.ssl.daysBeforeExpireWarning = 60\ncom.ibm.ssl.clientAuthentication = false\ncom.ibm.ssl.keyStore = /usr/celeriti/WPS/profiles/DL90269WPSNode01/config/cells/WPSDevCell01/nodes/DL90269WPSNode01/key.p12 port = 9634\ncom.ibm.ssl.trustStoreUseForAcceleration = false\ncom.ibm.ssl.trustStoreReadOnly = false\ncom.ibm.ssl.keyStoreScope = (cell):WPSDevCell01:(node):DL90269WPSNode01\ncom.ibm.ssl.tokenEnabled = false\nnewConnectionBufferSize = 8192\ncom.ibm.ssl.keyStoreName = NodeDefaultKeyStore\ncom.ibm.ssl.keyStorePassword = **\ncom.ibm.ssl.keyStoreInitializeAtStartup = false\ninactivityTimeout = 300\ncom.ibm.ssl.trustStoreType = PKCS12 \n\nReferences\n\nConfiguring SCA HTTP binding to enable real-life scenarios \nhttps://www.ibm.com/developerworks/websphere/library/techarticles/0803kharlamov/0803kharlamov.html\n\nOverview of MQ binding (Chinese)\nhttps://www.ibm.com/developerworks/cn/websphere/library/techarticles/1101gaoztmqbinding/1101gaoztmqbinding.html\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Service Integration Bus","description":"shangjin@cn.ibm.com;","owner":"@Jin Shang","path":"/BusinessProcessManager/AdvancedContent/SIB","text":"Date:2019-12-20\n\nOverview\n\nA service integration bus is a group of one or more application servers or server clusters in a WebSphere® Application Server cell that cooperate to provide asynchronous messaging services. The application servers or server clusters in a bus are known as bus members. In the simplest case, a service integration bus consists of a single bus member, which is one application server.\n\nUsually, a cell requires only one bus, but a cell can contain any number of buses. The server component that enables a bus to send and receive messages is a messaging engine.\n\nA service integration bus provides the following capabilities:\n1.Any application can exchange messages with any other application by using a destination to which one application sends, and from which the other application receives.\n2.A message-producing application, that is, a producer, can produce messages for a destination regardless of which messaging engine the producer uses to connect to the bus.\n3.A message-consuming application, that is, a consumer, can consume messages from a destination (whenever that destination is available) regardless of which messaging engine the consumer uses to connect to the bus.\n\n Components\n\n1.Messaging Engine (ME)\nMessaging Engines are the main messaging component in WebSphere Application Server. They perform exactly the same function as MQ queue managers but they are generally regarded as ‘light weight’. They host queues, topics and channels, just like MQ queue managers. Likewise, applications connect to messaging engines to send messages to queues or consume messages from queues.\n\n2.Message Store\nEvery Messaging Engine has a Message Store, which is a place to store Persistent messages and other data about transactions, queues, etc. An instance of an ME will open its message store with an exclusive lock to prevent other instances of the same ME from trying to use it. Each messaging engine has one and only one message store, which can be either File store or Data store.\n\n3.Bus Destination\nA bus destination is a logical address to which applications can attach as message producers, message consumers, or both, in order to exchange messages. The types of bus destination include Queue destination, Topic space destination, Alias destination, Foreign destination.\n\n4.Message Point\nA message point is the physical representation, in an ME, of a destination defined on the bus. It is created when a bus destination is created. Two main types of message point are Queue point and Publication point.\n\nTroubleshooting\n Data Collection\n\nTo trace the SIB related problems, below trace string should be enabled on application server:\n=info:SIBMessageTrace=all:SIBCommunications=all\n\nData Analysis\n\n1.The SibMessage thread operates SIB messages. Below trace indicates the connection to bus destination is established.\n[10/30/19 14:31:12:667 IST] 00000304 SibMessage    I   [:] CWSIV0777I: A connection to messaging engine Node1.server1-BPM.ProcessServer.Bus for destination TestBinding.JMSExport1RECEIVED_SIB on bus BPM.ProcessServer.Bus has been successfully created.\n2.You should also focus on the UserTrace thread. The following trace snippet shows the producer sends message procedure.\n[10/30/19 14:11:20:415 IST] 000002dc UserTrace     3   (com.ibm.ws.sib.processor.utils.UserTrace) [:] CWSJU0001I: A producer E4338E1F88541FB33AE1209F sent a message with ID ID:7108a7c35f2aa434846a582a110a134f0000000000000001 and correlation ID null to destination TestBinding.JMSImport1SENDD_SIB using transaction !AAABMwAAAAQAAAEzAAAABAAAATM=.\n[10/30/19 14:11:20:415 IST] 000002dc UserTrace     3   (com.ibm.ws.sib.processor.utils.UserTrace) [:] CWSJU0004I: A message with ID ID:7108a7c35f2aa434846a582a110a134f0000000000000001, system message ID null and correlation ID null is put to queue TestBinding.JMSImport1SENDD_SIB\n References\n\n1.MustGather document of SIB related problems\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-service-component-architecture-sca-service-integration-bus-sib-or-failed-event-manager-related-problems-ibm-business-process-manager-bpm-advanced\n\n2.CWSIT0088E: There are currently no messaging engines\nhttps://www.ibm.com/mysupport/s/question/0D50z000062kUPYCA2/cwsit0088e-there-are-currently-no-messaging-engines-in-bus-procsvrtestcellbus-running?language=en_US\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Failed Event","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/AdvancedContent/FailedEvent","text":"Date:2019-12-20\n\nOverview\n\nThe Recovery component in BPM provides a useful service that stores the information about the failed flows in the system and helps administrators to reinitiate them once the problems are resolved. Whenever there is a ServiceRuntimeException in the request process flow, the Recovery component comes into play. At that time, the transaction is rolled back until the last asynchronous point. The request data is wrapped inside a failed event and saved inside the common database. Along with the request data, the failed event also contains more information about when and where the failed event was created. If the failed flow needs to be re-initiated, this information helps to start processing again from the point where it failed earlier.\n\nYou can use the failed event manager to view, modify request data, and resubmit the failed events. This application runs on the application cluster and is accessed through the admin console. The failed event manager handles the following types of events:\n1.Service Component Architecture (SCA) failed events.\n2.Java Message Service (JMS) failed events.\n3.WebSphere MQ failed events.\n4.Business Process Choreographer (BPC) stopped, terminated, and failed events.\n5.Business Flow Manager hold queue events.\n\n Components\n\n1.SCA failed events\n\nIn the context of SCA, an event is a request or response that is received by an Advanced Integration service application. It can come from an external source (such as an inbound application adapter) or an external invocation to a web service. The event consists of a reference to the business logic it wants to operate and its data, stored in a Service Data Object (a business object). When an event is received, it is processed by the appropriate application business logic.\n\n2.JMS failed events\n\nIn the context of JMS, a failed event is generated when a JMS data binding or function selector operation fails, or when an exception occurs in a downstream component and is thrown back to the JMS export or import. The Recovery service handles failed events from JMS data bindings and MQ JMS data bindings.\n\n3.MQ failed events\n\nIn the context of WebSphere MQ, a failed event is generated when there is a problem (such as a data-handling exception) in the WebSphere MQ or WebSphere MQ JMS binding export or import used by an SCA module.\n\n4.BPC failed events\n\nIn the context of Business Process Choreographer, exceptions can occur that, if not handled by the process logic, cause an activity to stop or the process instance to fail. A failed event is generated when a long-running Business Process Execution Language (BPEL) process fails and one of the following happens:\n&nbsp;&nbsp;&nbsp;&nbsp;a. The process instance enters the Failed or Terminated state\n&nbsp;&nbsp;&nbsp;&nbsp;b. An activity enters the Stopped state\n\n5.Business Flow Manager hold queue events\n\nYou can use the failed event manager to manage navigation messages that are stored in the Business Flow Manager hold queue. A navigation message might be stored in the hold queue if:\n&nbsp;&nbsp;&nbsp;&nbsp;a. An infrastructure, such as a database, is unavailable.\n&nbsp;&nbsp;&nbsp;&nbsp;b. The message is damaged.\n\nTroubleshooting\n\n Data Collection\n\nTo trace the failed event related problems, below trace string should be enabled on the application server:\n\n*=info:Recovery=all\n\nData Analysis\n\nIn the collected traces, you should focus on the Recovery thread. The keyword processMessage presents the entry of the failed event recovery procedure.\n[2/9/16 15:35:45:044 AEDT] 000001b6 Recovery \ncom.ibm.wbiserver.manualrecovery.ejb.RecoveryMDBHandler processMessage ENTRY\ncom.ibm.ws.sib.mfp.impl.JsJmsBytesMessageImpl@b85880a8{SysMsgId=64C046590A6FB531_103002204}\n[com.ibm.ws.sib.ra.inbound.impl.SibRaAbstractConsumerSession@110b0a2d\n<delegate=com.ibm.ws.sib.comms.client.ConsumerSessionProxy@d406ded7\n<connectionClone=com.ibm.ws.sib.comms.client.MSSIXAResourceProvidingConnectionProxy@713a13e3\n] com.ibm.ws.sib.comms.client.SuspendableXAResource@49758a8d\n[2/9/16 15:35:45:044 AEDT] 000001b6 Recovery 3\ncom.ibm.wbiserver.manualrecovery.ejb.RecoveryMDBHandler processMessage A message was received on\nqueue sca/TransformISOProcessv10_0\n[2/9/16 15:35:45:045 AEDT] 000001b6 Recovery 3\ncom.ibm.wbiserver.manualrecovery.ejb.RecoveryMDBHandler processMessage Hand message over to SCA\nMDB\n\n References\n\n1.MustGather document of failed event manager related problems\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-service-component-architecture-sca-service-integration-bus-sib-or-failed-event-manager-related-problems-ibm-business-process-manager-bpm-advanced\n\n2.Failed event manager\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.ref.doc/helpfailedeventmanager/index.html\n\n3.Managing failed flows using the Failed Event Manager API in WebSphere Process Server\nhttps://www.ibm.com/developerworks/websphere/tutorials/1103_madgula/\n\n4.How can I delete a large number of failed events\nhttps://www.ibm.com/mysupport/s/question/0D50z000062kD0HCAU/how-can-i-delete-a-large-number-of-failed-events-at-once-in-websphere-process-server-wps-or-ibm-business-process-manager-bpm?language=en_US\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Adapters","description":"lifengbj@cn.ibm.com","owner":"@Feng Li","path":"/BusinessProcessManager/AdvancedContent/Adapters","text":"Date:2019-10-21\n\nOverview\n\nIBM Business Automation workflow (BAW) supplies a set of adapters that can be integrated with the Service Component Architecture (SCA) framework. These adapters are based on the Java Connector Architecture (JCA).  Adapters enable business applications to act as services by connecting them to diverse enterprise information systems (EISs), such as databases, enterprise resource planning systems, file systems, and email systems. \n\n Prerequisites\n\nThe Connector Architecture enables Java EE components to interact with enterprise information systems (EISs) and EISs to interact with Java EE components. EIS software includes various types of systems: enterprise resource planning (ERP), mainframe transaction processing, and nonrelational databases, among others. Connector architecture simplifies the integration of diverse EISs. Each EIS requires only one implementation of the Connector architecture. Because an implementation adheres to the Connector specification, it is portable across all compliant Java EE servers. \n\nThis tutorial will be useful for learning the basics of JCA. This is an elementary tutorial that introduces the concepts of WebSphere Adapter. \n\nJ2EE Connector Architecture: \nhttps://www.oracle.com/technetwork/java/javaee/index-138715.html\n\nComponent\n\n EIS – Enterprise Information System\nThis term is used to describe the applications that form an enterprise's existing system for handling company-wide information. An enterprise information system offers a well-defined set of services that are exposed as local or remote interfaces or both. Enterprise Resource Planning (ERP) and Database are typical enterprise information systems. \n\nEMD – Enterprise Metadata Discovery\nA specification that you can use to examine an EIS and get details of business object data structures and APIs. An EMD stores definitions as XML schemas by default,  and builds components that can access the EIS. \n\n BO - Business Object\nIn a development or production environment, a set of XML schema attributes that represents a business entity (such as an invoice) and the definition of actions that can be performed on those attributes (such as the create and update operations). \n\nInbound\nAn event is generated on the EIS and the adapter responds to the event by sending a message to BAW. The WebSphere Adapters export support inbound communication. When the EIS sends an event to the adapter, a message is propagated from the WebSphere Adapters export.\n\n Outbound\nBAW uses the adapter to send a request to the EIS. The WebSphere Adapters import support outbound communication. When a message is propagated to the WebSphere Adapters import node, the adapter sends a request to the EIS. \n\nWebSphere Technology Adapters, which integrate using file exchange and database records, include:  \nWebSphere Adapter for Email - enables the exchange of business objects with a variety of applications \nWebSphere Adapter for Enterprise Content Management - create integrated processes that include the exchange of information with a CMIS server\nWebSphere Adapter for Flat Files - enables the communication with an application through the exchange of text files \nWebSphere Adapter for FTP - extends ESB with business document exchange via FTP server \nWebSphere Adapter for IBM i - enables bi-directional connectivity and exchange of information with IBM i applications\nWebSphere Adapter for JDBC - allows exchange of objects with applications built on any database supported by JDBC Driver  \nWebSphere Adapter for Lotus® Domino® - create modules that can exchange information with the Lotus Domino server\n\n WebSphere Application Adapters, which integrate to Enterprise Application Suites, include:  \nWebSphere Adapter for JD Edwards EnterpriseOne - provides bidirectional, real-time integration between JD Edwards Enterprise One and OneWorld Xe\nWebSphere Adapter for Oracle E-Business Suite - supports real-time, bi-directional integration to all Oracle applications modules and other systems \nWebSphere Adapter for PeopleSoft Enterprise - provides bi-directional, real-time integration between PeopleSoft and other applications \nWebSphere Adapter for SAP Software - provides bi-directional, multi-threaded, real-time integration between SAP and other applications, using SAP's all interfaces capabilities \nWebSphere Adapter for Siebel Business Applications - provides comprehensive bi-directional, real-time integration between Siebel and order management, ERP, e-business, and legacy systems\n\n WebSphere Adapter Toolkit enables you to develop custom JCA adapter to meet unique business requirements. \n\nTroubleshooting\n\n Questions to ask\nIs this an inbound module or outbound module? \nDid you make any change at EIS end? \nIs your network stable? \nHow many adapters are deployed in this system? \nDid you try the latest Ifix of the adapter?\nIf you make some change at EIS end, did you rerun the EMD to regenerate the artifact? \nHow is your adapter deployed? embedded or stand alone ? \n\nData Collection\n\n1.To trace the problems that are specific to WebSphere Adapter n BPM, add and enable this trace string on the application server. Base trace: \n\n=info:com.ibm.j2ca.=all\n2.Dump event recovery table( EP_TableName ) as well. This table is used for event persistence for the inbound module. \n\n Trace Analysis\n\nAll of the following information and examples were gathered from working adapters. You can search key words and locate information in the trace files. If your trace files do not match the correct examples, then this can assist in troubleshooting. \n\nUsage 1#: Activation Specification of adapters Start \nKey words: J2CA0523I\nComment :  During BAW server starts up, the Activation Specification of adapters is activated. You should see the sample information during server starting up. \nSample: \n[11/29/18 22:02:48:668 CST] 0000003c ActivationSpe I   J2CA0523I: The Message Endpoint for ActivationSpec myFlatFile/mytest/erp/invoiceFF/inbound/myadapterInboundExportAS (com.ibm.j2ca.flatfile.FlatFileActivationSpecWithXid) and MDB Application myFlatFileApp#myFlatFile/mytest/erp/invoiceFF/inbound/myadapter_InboundExport#myFlatFile is activated. \n\nUsage 2#: Activation Specification of adapters Stop\nKey words: J2CA0524I \nComment : During BAW shutdown, the Activation Specification of adapters is deactivated. You should see the sample information during server shut down. \nSample: \n[11/29/18 23:23:32:558 CST] 0000003c ActivationSpe I   J2CA0524I: The Message Endpoint for ActivationSpec myFlatFile/mytest/erp/invoiceFF/inbound/myadapterInboundExportAS (com.ibm.j2ca.flatfile.FlatFileActivationSpecWithXid) and MDB Application myFlatFileApp#myFlatFilemytest/erp/invoiceFF/inbound/myadapter_InboundExport#myFlatFile is deactivated.  \n\nUsage 3#: Adapter configuration information in trace file \nKey words: traceActicationSpec\nSample: \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      2 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) Entering method. \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) Endpoint activation called.  Tracing ActivationSpec contents \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) BiDiContextEIS =  \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) boNamespace = http://www.ibm.com/xmlns/prod/websphere/j2ca/sap \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) deliveryType = ORDERED \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) pollPeriod = 2000 \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) pollQuantity = 10 \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) retryConnectionOnStartup = false \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) retryInterval = 60000 \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) retryLimit = 0 \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) stopPollingOnError = false \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) filterFutureEvents = false \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) assuredOnceDelivery = true \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      1 com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) failedEventRetryLimit = 5 \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      < com.ibm.j2ca.base.WBIResourceAdapter traceActicationSpec(ActivationSpec) Exiting method. \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties BEGIN trace SAPActivationSpec properties.\n\nUsage 4#: SAP adapters Connection information \nKey words: SAPActivationSpec\nSample: \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties BEGIN trace SAPActivationSpec properties \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties Trace SAP logon configuration values*** \n[3/22/11 13:44:57:390 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties UserName=SOWMYAS \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties Password=** \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties Language=EN (English) \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties Client=100 \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties ApplicationServerHost=saperp05.svl.ibm.com \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties SystemNumber=00 \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties GatewayHost=saperp05.svl.ibm.com \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties GatewayService=sapgw00 \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties LogonGroup=PMR \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties SAPSystemID=DYL \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties MessageServerHost=saperp05.svl.ibm.com \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties RFCTraceOn=false \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties RFCProgramID=SARMASERVER \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties IgnoreIDocPacketErrors=false \n[3/22/11 13:44:57:406 IST] 00000011 SAPRA001      C com.ibm.j2ca.sap.util.SAPUtil traceLoginProperties END trace SAPActivationSpec properties.\n\nUsage 5#: SAP Adapter ALE Listener starting information \nKey words: startAleEventListener\nSample: \n[3/22/11 13:45:01:031 IST] 00000011 SAPRA001      I com.ibm.j2ca.sap.inbound.SAPEventListenerManager startAleEventListener Starting ALE Event Listener - 0 - Connection Parameters - gwhost - 9.30.204.151 | gwserv - sapgw01 | progid - SAASERVER | unicode - 1 |.  \n\nUsage 6#: Adapter deployment \nKey words: hasEmbeddedRAR\nComment : this information would be reported during deployment, and it indicates whether the adapter is embedded or standalone. \nSample: \n[16/11/16 9:50:43:763 JST] 000018a4 J2CBinding 3 com.ibm.ws.sca.binding.j2c.deploy.J2CGenerateDataBindingTask !hasEmbeddedRAR - standalone\n\nUsage 7#: Adapter inbound module polling \nKey words: pollForEvents(int)\nSample:\n[6/22/17 15:35:55:607 EDT] 00000052 FFRA001       2 com.ibm.j2ca.extension.eventmanagement.internal.EventManager pollForEvents(int) Entering method.  \n[6/22/17 15:35:55:641 EDT] 00000052 FFRA001       < com.ibm.j2ca.extension.eventmanagement.internal.EventManager pollForEvents(int) Exiting method\n\nUsage 8#: Adapter outbound module sends request \nKey words: com.ibm.j2ca.base.WBIConnectionFactory getConnection()\n. \nSample:\n[11/29/11 23:21:54:667 CST] 000000c4 SAPRAResource 2 com.ibm.j2ca.base.WBIConnectionFactory getConnection() Entering method. \n[11/29/11 23:21:54:667 CST] 000000c4 SAPRAResource 2 com.ibm.j2ca.base.WBIManagedConnectionFactory matchManagedConnections Entering method. \n[11/29/11 23:21:54:667 CST] 000000c4 SAPRAResource 3 com.ibm.j2ca.base.WBIManagedConnectionFactory getPasswordCredential Using the default PasswordCredential \n[11/29/11 23:21:54:705 CST] 000000c4 SAPRAResource 3 com.ibm.j2ca.base.WBIManagedConnectionFactory matchManagedConnections The matched ManagedConnection is valid \n[11/29/11 23:21:54:705 CST] 000000c4 SAPRAResource < com.ibm.j2ca.base.WBIManagedConnectionFactory matchManagedConnections Exiting method.. \n\nReference\n\nCollect troubleshooting data for WebSphere Adapter problems in IBM Business Process Manager \nhttp://www-01.ibm.com/support/docview.wss?uid=swg21240322 \n\nDeploying and configuring WebSphere Adapters in a clustered environment \nhttps://www.ibm.com/developerworks/websphere/library/techarticles/0909jain/0909jain.html \n\nPerformance tuning the WebSphere JDBC Adapter inbound service \nhttps://www.ibm.com/developerworks/websphere/library/techarticles/1106lu/1106lu.html\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Mediation","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/AdvancedContent/Mediation","text":"\nOverview\nThe mediation module is a new type of SCA component that can process or mediate service interactions. Inside a mediation module there can be one mediation flow component. Mediation flows contain the high-level mediation logic. Mediation flows consist of a sequence of processing steps for\n   Routing communications between services\n   Converting between different transport protocols\n   Transforming message formats between service requestor and provider\n   Handling business events from disparate sources\n\nMediation modules are deployed to Process Server as EAR format.\n\n Prerequisites\nYou should have a basic understanding of below technology.\n\n1.Service Oriented Architecture\nService Oriented Architecture (SOA) is an approach to defining integration architectures based on the concept of a service. Applications collaborate by invoking each other services and services can be composed into larger sequences to implement business processes.\n\n2.Service Component Architecture\nService Component Architecture (SCA) was developed to simplify the integration between business applications and the development of new services. SOA is an abstract way to interpret the services and his correlations, SCA is defined as the implementation of the SOA architecture. Its standards allow the creation of services and the integration between them.\n\n3.Service Module\nService Module is the SCA unit of packaging and deployment.  Service Modules contain one or more Service Components which contain an implementation, and interfaces.\n\n4.Bindings\nBindings identify a specific type of invocation for a service consumer or provider. Bindings can be applied to mediation module imports or exports. Exports let a mediation module offer a service to consumers. Imports let a mediation module access external services (services that are outside the SCA module) in a transparent manner. For more details about Bindings, refer to below topic on BAW knowledge center.\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.ref.doc/help_sca/index.html\n\nComponent\n Technical Concepts\n1.Mediation Primitives\nMediation Primitives are the smallest building blocks in mediation flow. They are wired and configured inside mediation flows. They let you change the format, content, or target of service requests; log messages; do database lookups; and so forth.\n\n2.Service Message Objects\nMessages can come from a variety of sources, so the payload has to be able to carry a number of different types of messages. Mediation primitives need to be able to operate on these messages, and service message objects (SMOs) represents the common representation that is needed.\n\nTechnical Articles\n1.Getting Started with WebSphere Enterprise Service Bus\nhttp://www.redbooks.ibm.com/abstracts/sg247212.html\n\n2.Strategies for designing error handling in web service mediations\nhttps://www.ibm.com/developerworks/websphere/library/techarticles/1108toth/1108toth.html\n\n3.List of mediation primitives\nhttps://www.ibm.com/developerworks/websphere/library/techarticles/1108toth/1108toth.html\n\n Troubleshooting\nData Collection\n\n1.To trace the problems that are specific to the Mediation Flow Component and its primitives, below trace string should be enabled on application server:\n\n=info:com.ibm.ws.sibx.=all:com.ibm.wsspi.sibx.=all:com.ibm.websphere.sibx.=all:com.ibm.ws.sib.processor.utils.UserTrace=all:com.ibm.wbiserver.transform.=all:com.ibm.sr.client.=all\n\n2.Enable Runtime trace dynamically:\nLogon admin console. Under Troubleshooting  Log and Trace, pick the server where you want to change the settings.\nClick Change Log Detail Levels.\nSelect the Runtime tab to dynamically set the tracing and enter the new trace string.\nClick OK to save the changes.\nReproduce the issue and note the time the symptoms occurred.\nInsure the trace covers the time period noted in step four above.\nZip up the profile's logs directory.\nSend us the zip of the logs directory noting any errors, exceptions, or symptoms.\n\n3.Customer should also export their Project Interchange (PI) file. The associated PI file can be exported from IBM Integration Designer (IID) and is very useful to the support team. The file not only describes the application configuration, but it also permits the opportunity for the support team to recreate the problem. PI files have an extension of .zip, but do not need to be unarchived to import into IID.\n\nTo create a PI file, from within IID, complete the following steps:\nSelect File  Export.\nSelect Project Interchange and select the modules which are relevant to your project.\nChoose a file name for the Project Interchange file, and fill it in, in the field at the bottom.\n\nAfter receiving the PI file, support engineer should import it into local workspace within IID:\nSelect File  Import.\nSelect Project Interchange and select the PI file.\n\n Recreating Problem\nAfter importing PI file in IID, using IID testing tools (Test Component):\n1.First insure the test BPM server is started, and the module to test is deployed.\n2.Bring up the test facility :\n\nRight click on the component to test within the Assembly Diagram\nSelect “Test Component”\n\n3.Enter test value(s) provided by the client into the corresponding field(s).\n4.Click the continue button  to start the test execution.\n\nTrace Analyzing\n1.All mediation codes are contained within \".sibx.\"\nExample Exception 1:\ncom.ibm.ws.sca.uow.UOWRolledBackException: caused by: \ncom.ibm.wsspi.sibx.mediation.flow.MediationRuntimeException: com.ibm.ws.sibx.scax.mediation.component.FlowBuildException: CWSXM1006E: Error whilst setting properties of mediation primitive MessageFilter1. In mediation component SampleModule in module SampleModule\n...\nCaused by: com.ibm.wsspi.sibx.mediation.flow.MediationRuntimeException: com.ibm.ws.sibx.scax.mediation.component.FlowBuildException: CWSXM1006E: Error whilst setting properties of mediation primitive MessageFilter1. In mediation component SampleModule in module SampleModule\n\n2.Find the entry into the mediation flow. Example:\n[8/28/19 20:52:39:840 IST] 000001a6 SIBXTraceUtil 1 \ncom.ibm.ws.sibx.scax.mediation.engine.utils.trace.SIBXTraceUtil startExecuteFlow \nStartExecuteFlow\nFlow metadata   :\n    Module      : SampleModule\n    Port type   : http://SampleModule/SimpleInterface}SimpleInterface\n    Operation   : operation1\n    Interaction : Request\n    Component   : com.ibm.ws.sca.internal.scdl.impl.ManagedComponentImpl@5d3bee83 (description: null) (displayName: SampleModule) (name: SampleModule)\nNode name        : SimpleInterfaceoperation1Input\nNode display name: operation1 : SimpleInterface\nNode type (class): null\nNode properties  : null\nTerminal name    : out [Display name : out]\nTerminal type    : Output\nMessage          : ServiceMessageObject: ServiceMessageObject@e62af8cb (context=ContextType@3ba4ffb7, headers=HeadersType@2e17b83a, body=operation1RequestMsg@85bed9e3, ) \n\n3.Check the data value in SMO body. Example:\n\n  \n  \n    \n      D8D23CEF-016C-4000-E000-10F40973C730\n      \n        7\n        0\n        0\n      \n      Request\n    \n  \n  \n    \n      this is a test\n    \n  \n\n4.Trace provides detailed information for each step in mediation flow. The ‘Terminal type’ of the node tells the step in mediation flow. For example, below trace tells us the SMO data in request flow before input node Mapping which is an XSLT primitive.\nProcessMessage\nFlow metadata   :\n    Module      : SampleModule\n    Port type   : http://SampleModule/SimpleInterface}SimpleInterface\n    Operation   : operation1\n    Interaction : Request\n    Component   : com.ibm.ws.sca.internal.scdl.impl.ManagedComponentImpl@5d3bee83 (description: null) (displayName: SampleModule) (name: SampleModule)\nNode name        : Mapping\nNode display name: Mapping\nNode type (class): com.ibm.ws.sibx.mediation.primitives.xslt.XSLTMediation\nNode properties  : {sibxMayChangeMessage=true, sibxOnlyFireAtEnd=true, validateInput=false, sibxNoChangeOnFailure=true, SMOVersion=SMO61, associatedXSL=, implementationClass=com.ibm.ws.sibx.mediation.primitives.xslt.XSLTMediation, XMXMap=xslt/Mappingreq1.map, root=/body, XSLTransform=xslt/Mappingreq1.xsl}\nTerminal name    : in [Display name : in]\nTerminal type    : Input\nMessage          : ServiceMessageObject: ServiceMessageObject@e62af8cb (context=ContextType@3ba4ffb7, headers=HeadersType@2e17b83a, body=operation1RequestMsg@85bed9e3, ) \n\nAnd below trace shows the SMO data after the node named with Mapping.\nProcessMessage\nFlow metadata   :\n    Module      : SampleModule\n    Port type   : http://SampleModule/SimpleInterface}SimpleInterface\n    Operation   : operation1\n    Interaction : Request\n    Component   : com.ibm.ws.sca.internal.scdl.impl.ManagedComponentImpl@5d3bee83 (description: null) (displayName: SampleModule) (name: SampleModule)\nNode name        : Mapping\nNode display name: Mapping\nNode type (class): com.ibm.ws.sibx.mediation.primitives.xslt.XSLTMediation\nNode properties  : {sibxMayChangeMessage=true, sibxOnlyFireAtEnd=true, validateInput=false, sibxNoChangeOnFailure=true, SMOVersion=SMO61, associatedXSL=, implementationClass=com.ibm.ws.sibx.mediation.primitives.xslt.XSLTMediation, XMXMap=xslt/Mappingreq1.map, root=/body, XSLTransform=xslt/Mappingreq1.xsl}\nTerminal name    : out [Display name : out]\nTerminal type  : Output\nMessage         : ServiceMessageObject: ServiceMessageObject@e62af8cb (context=ContextType@3ba4ffb7, headers=HeadersType@2e17b83a, body=operation1RequestMsg@15c9de5, ) \n\nSome of the key elements given for each step in the flow include:\nModule:  Name of mediation module.\nOperation:  Name of operation being performed\nInteraction:  Either Request or Response\nNode Name:  Name of primitive (i.e. Custom Mediation1)\nNode Display Name:  Label given to node by client (i.e. RemoveTags)\nTerminal Name:   Name of terminal given by client \nTerminal Type:   Type of terminal (Input, Output, etc)\nMessage:  Displays current output of SMO.\n\nStep through trace.log, starting at the ‘StartExecuteFlow’, following each primitive In and Out until the exception or the end of mediation flow.\nStopExecuteFlow\nFlow metadata   :\n    Module      : SampleModule\n    Port type   : http://SampleModule/SimpleInterface}SimpleInterface\n    Operation   : operation1\n    Interaction : Request\n    Component   : com.ibm.ws.sca.internal.scdl.impl.ManagedComponentImpl@5d3bee83 (description: null) (displayName: SampleModule) (name: SampleModule)\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"BPD & Service Engine","description":"nldillard@us.ibm.com","owner":"@Nathan Dillard","path":"/BusinessProcessManager/StandardRuntime/BPD","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Event Manager","description":"nldillard@us.ibm.com","owner":"@Nathan Dillard","path":"/BusinessProcessManager/StandardRuntime/EventManager","text":"Date:2019-12-20\n\nOverview\n\nThe Event Manager is the BAW component that is responsible for the movement of tokens through a Process, scheduling and execution of system lane tasks, UCAs and timers. Each BAW node will have its own Event Manager and will pick up its next available tasks to execute. The Event Manager has two types of queues in which it holds tasks: Async and sync queues. UCAs, timers and BPD notifications run from the async queue and you can configure up to 3 sync queues if you want sequential firing of certain tasks. The Event Manager has many configurable options to increase the speed or throttle the retrieval and executions of these tasks. \n\nEvent Manager Page:\nEvent Manager tasks will show up in the Event Manager - Monitor page in the Process Admin Console. A user can also pause/resume Event Managers via the console or REST APIs. The Monitor page also shows a connection expiration data which is updated via a heartbeat every 30 seconds. This also lets other Event Managers in other nodes coordinated.\n\n Components\n\n1.https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.admin.doc/topics/maintainingeventmanager.html\n2.https://www.ibm.com/developerworks/community/blogs/aimsupport/entry/ibmbpmeventmanagercommon_problems?lang=en\n3.https://support.bp-3.com/hc/en-us/articles/202911143-Event-Manager-in-IBM-BPM-Standard-the-missing-manual\n\nTroubleshooting\n\n Data Collection\n\n1.In order to get an understanding of the data being generated by the Event Manager, you can configure Event Manager to log all of the task history of the event manager:\n\ncom.lombardisoftware.server.scheduler.DbTaskExecutionListener\nhttps://support.bp-3.com/hc/en-us/articles/205022337-IBM-BPM-Event-Manager-history-data-table-LSW-EM-TASK-HISTORY\nNote: This data is not automatically purged so it is up to the customer to manually remove these entries. Enabling this functionality should not cause any performance issues.\n\n2.If you would like a lightweight trace, just to understand what is happening in the event manager, you can use the lightweight trace string option:\n\n*=info:WLE.wlescheduler=ALL:WLE.wlesched_basic:ALL\n\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.admin.doc/topics/troubleshooting_bpdsandflows.html\nThe information gathered with this may not be adequate as you may need to find out what the BPD Engine and the Service Engine is running during this time.\n\n3.To get a full picture of the Event Manager and engines (Process and Service), it may be best to gather the full analysis of the WLE package trace as well as database tracing. You might be able to avoid database tracing if the customer has may concerns on performance:\n\n=info:WLE.=all:org.springframework.jdbc.*=all:WAS.clientinfopluslogging=all\n\nData Analysis\n\nExample Description:\nThe following is a quick test of what a Support Engineer might see while the Event Manager schedules and executes its tasks. In this scenario, I created a simple Process (Process A) Which contains a UCA attached to an intermediate event. The UCA is scheduled, executes, and starts another process (Process B).\n\nDisclaimer: This example solely highlights the Event Manager component and how it works. The classes and methods in Bold show what you most likely see in a trace. This example does not cover all available configurations for the Event Manager. The Event Manager is a highly efficient scheduler, and in most cases, poor application design or tuning is the root cause. It is best to review the reference “Common Problems with the Event Manager” as most defects with this part of the product have been resolved.\n\n1.This is the thread that kicks off the UCA. In this thread, we can see the Intermediate Event being executed, and the UCA is scheduled. You should see the two entries in the LSWEMTASK table and the LSWEMTASK_KEYWORDS table:\n[12/12/19 10:42:02:818 PST] 00000306 EventWorker    com.lombardisoftware.bpd.component.flowcomponent.event.worker.EventWorker doWork ENTRY flowObject = Intermediate Event\n[12/12/19 10:42:02:843 PST] 00000306 UCASchedulerH  com.lombardisoftware.server.eventmgr.UCASchedulerHelper scheduleMessageUCA ENTRY message = <reason type=\"UCAIDMessage\" filteredProjectShortName=\"FS\" …\n\n[12/12/19 10:42:02:925 PST] 00000306 wleschedbas  com.lombardisoftware.server.scheduler.TaskManager scheduleTasks ENTRY emTasks=[com.lombardisoftware.server.scheduler.ScheduledTask@76e84231\n...\n[12/12/19 10:42:02:930 PST] 00000306 clientinfoplu   prepareStatement Entry\n                                 com.ibm.ws.rsadapter.jdbc.WSJccSQLJPDQConnection@4ff7e71\n                                 insert into lswemtaskkeywords (taskid, keyword) values (?, ?)\n[12/12/19 10:42:02:936 PST] 00000306 clientinfoplu   prepareStatement Entry\n                                 com.ibm.ws.rsadapter.jdbc.WSJccSQLJPDQConnection@4ff7e71\n                                 insert into lswemtask (\n                                       taskid, description, queueid, scheduled_time,\n                                       taskstatus, blackoutcalendarid, blackoutbehavior,\n                                       taskexecutionclass, taskargumentsstr, taskarguments, inclosing_transaction,\n                                       repeatstring, reexecutecount, taskowner\n                                   ) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\nThe end result is task 99:\n[12/12/19 10:42:02:945 PST] 00000306 TaskManager   1 com.lombardisoftware.server.scheduler.TaskManager scheduleTaskChunk  Scheduling task \nTask_Id = 99 \ncom.lombardisoftware.server.scheduler.ScheduledTask@76e84231\nscheduledTime: 1576176122927 = Thu Dec 12 10:42:02 PST 2019\nrepeatString: null\nexecClassName: com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask\narguments: 4.02308530-3c0f-4cd5-befb-11420787eb10;5;myUCA\n  FS\n  \n    &lt;variable type=\"String\"&gt;&lt;![CDATA[default BPD EVENT Correlation Key]]&gt;&lt;/variable&gt;\n  \n  \n    &lt;variable type=\"String\"&gt;&lt;![CDATA[default BPD EVENT Value]]&gt;&lt;/variable&gt;\n  \n\ndescription: Run the 'myUCA' UCA, triggered by message event or Invoke UCA step\nqueueId: -100\nblackoutCalendarId: 1\nblackoutBehavior: BlackoutBehavior(3, EXECUTEMANYAFTER_BLACKOUT)\ninClosingTransaction: false\nidInDB: 99\nreuseStrategy: 0\nkeywords: List start\n   uca4.02308530-3c0f-4cd5-befb-11420787eb10\n   invokeUCA\n    List end\n2.This is the Event Manager task loader thread that is continuously running, picking up any new available tasks to schedule out. Remember, this is a UCA tasks and these are acquired from the async queue, unless a customer manually created a sync queue. In this scenario, this thread found task 99 above and updates the taskstatus in the LSWEM_TASK to “2”, which means “Scheduled” and then to “3” (“Executing”) once it is ready to execute the task. As of now, these are the tasks statuses and what they mean in the database:\n \nSCHEDULED(\"Scheduled\"):\nThe task has been scheduled, but has not yet been acquired by an Event Manager (or, it was acquired and released by its owner, or its owner's heartbeat stopped.). The task status code in the database is 1.\n     \nACQUIRED(\"Acquired\"):\nThe task has been acquired by a living Event Manager. The task status code in the database is 2.\n     \nEXECUTING(\"Executing\"):\nThe task has been acquired by a living Event Manager, and has begun execution. The task status code in the database is 3.\n     \nBLACKED_OUT(\"Blacked out\"):\nThe task would have been executed, except it was in a blackout period. Depending on its configured blackout behavior, this task may be revisited at the end of the blackout period. The task status code in the database is 4.\n[12/12/19 10:42:03:158 PST] 0000017f TaskLoader     com.lombardisoftware.server.scheduler.TaskLoader loadTasks ENTRY Queue: Queue -100: Async Queue (capacity 10) maxTasks: 10\n[12/12/19 10:42:03:161 PST] 0000017f TaskLoader    < com.lombardisoftware.server.scheduler.TaskLoader executeLoaderFindTasksInExistingTx RETURN Found tasks with the following IDs: [99]\n\n…\n\n[12/12/19 10:42:03:162 PST] 0000017f TaskLoader     com.lombardisoftware.server.scheduler.TaskLoader acquireTasksAfterLoadForDb2Luw ENTRY\n[12/12/19 10:42:03:163 PST] 0000017f clientinfoplu   prepareStatement Entry\n                                 com.ibm.ws.rsadapter.jdbc.WSJccSQLJPDQConnection@9874bbc7\n                                 UPDATE LSWEMTASK\n            SET TASKSTATUS = 2, TASKOWNER = ?\n            WHERE TASKOWNER IS NULL AND TASKID = ?\n\n....\n\n[12/12/19 10:42:03:171 PST] 0000017f TaskLoader    3 com.lombardisoftware.server.scheduler.TaskLoader acquireTasksAfterLoadForDb2Luw task 99 acquired\n\n…\n\n[12/12/19 10:42:03:173 PST] 0000017d Engine         com.lombardisoftware.server.scheduler.Engine executeTasks ENTRY [com.lombardisoftware.server.scheduler.SimpleTask@e6372348\ntaskId: 99\nscheduledTime: 1576176122928 = Thu Dec 12 10:42:02 PST 2019\nexecuteTime: 1576176123161 = Thu Dec 12 10:42:03 PST 2019\ndiscriminator: 1047\nexecuting: true]\n[12/12/19 10:42:03:173 PST] 0000017d Engine        3 com.lombardisoftware.server.scheduler.Engine loadTasksIfOwnerInternal  executing for instance=2 and taskId in [ 99 ]\nUPDATE LSWEMTASK SET TASKSTATUS = 3 WHERE TASKID = ? AND TASKOWNER = ? AND TASKSTATUS != 3\n  \n3.Finally, this thread shows how the event manager executes task ID 99, finds the UCA and the associated process (ProcessB) and starts the instance (InstanceID 132):\n[12/12/19 10:42:03:208 PST] 00000223 wleschedbas  com.lombardisoftware.server.scheduler.Engine execute ENTRY emTaskId=99, scheduledTime=Thu Dec 12 10:42:02 PST 2019, execClassName=com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask\n[12/12/19 10:42:03:208 PST] 00000223 wleschedbas 3 com.lombardisoftware.server.scheduler.Engine execute keywords=[invokeUCA, uca4.02308530-3c0f-4cd5-befb-11420787eb10]\n[12/12/19 10:42:03:210 PST] 00000223 EventMgrCore   com.lombardisoftware.server.ejb.eventmgr.EventMgrCore executeUCA ENTRY id = UCA.02308530-3c0f-4cd5-befb-11420787eb10, xmlReason = \n ...\n[12/12/19 10:42:03:264 PST] 00000223 UnderCoverAge 1 com.lombardisoftware.server.eventmgr.UnderCoverAgentExecutor doGet Found Under Cover Agent: myUCA, resolvedUcaRef: [Snapshot.4ce0a14f-239d-46ee-bc36-9a191008fafb,UCA.02308530-3c0f-4cd5-befb-11420787eb10], VersioningContext in resolvedUcaRef: 2064.4ce0a14f-239d-46ee-bc36-9a191008fafb (snapshotName: Snap2, branchName: Main, projectName: My Sandbox), VersioningContext in UCA PO: 2064.4ce0a14f-239d-46ee-bc36-9a191008fafb (snapshotName: Snap2, branchName: Main, projectName: My Sandbox)\n....\n[12/12/19 10:42:03:511 PST] 00000223 BPDExecutionC  com.lombardisoftware.bpd.runtime.engine.BPDExecutionContext BPDExecutionContext ENTRY instanceId = BpmnInstanceId(132), diagramId = Ref[/BPD.5a6f57bf-ae89-432f-a4f8-ed432794449d], startObjectId=BPDObjectIdImpl(0ae997bf-6f54-49f2-80f3-42d1475a0264), startLaneOwnerId = 9, caseId = null, activityId = null, replyHandler = null\nRelated database tables with regards to the Event Manager to know:\n&nbsp;&nbsp;&nbsp;&nbsp;LSWEMINSTANCE\n&nbsp;&nbsp;&nbsp;&nbsp;LSWEMTASK\n&nbsp;&nbsp;&nbsp;&nbsp;LSWEMTASK_KEYWORDS\n&nbsp;&nbsp;&nbsp;&nbsp;LSWEMBLACKOUT\n&nbsp;&nbsp;&nbsp;&nbsp;LSWEMHISTORY\n&nbsp;&nbsp;&nbsp;&nbsp;LSWEMSYNC_QUEUE\nAdditional data can be found here:\nhttps://pages.github.ibm.com/dba-support/BAW-Database-Documentation/\n\nTuning to Solve Problems:\nWhen customers run into performance problems, usually the Event Manager backs up with tasks and is not able to quickly execute tasks as fast as a customer would like. This may involve tuning the Event Manager to speed up its executions. Increase the queue capacity too much and the customer may run into memory problems. It is best to gauge the capacity based off the number of CPUs (cores) as described in our performance Redbook:\n\nRecommendation: To optimize throughput and scaling, start with a bpd-queue-capacity of 10 per physical processor core (for example, 40 for a 4-processor core configuration), with a maximum value of 80. This is not an absolute limit, but consider the potential impact on Process Server memory utilization if the value is increased beyond 80.\n\nIBM Business Process Manager V8.5 Performance Tuning and Best Practices\nhttp://www.redbooks.ibm.com/redbooks/pdfs/sg248216.pdf\n\nWhen tuning is not enough:\nThere may be times, when tuning is not sufficient for a customer. Infinite loop or poor design may increase the tasks in the LSWEMTASK to the millions. This may need additional assistance. First, if an infinite loop is the root cause, pause the event manager. If the Process Admin Console is not reachable due to large amount of tasks, stop the server, and pause the event manager via a server configuration change and start BAW back up. Steps are noted here:\n\nA looping or run away business process definition (BPD) or service might occur in IBM Business Process Manager (BPM)\nhttps://www-01.ibm.com/support/docview.wss?uid=swg21622584\n\nSecond, check whether the buildup of tasks are BPD notification tasks, timers, or system lane activities. These are associated with an instance and deleting the instance should delete these tasks from the Event Manager. This is the safest and easiest option. \n\nUnfortunately, UCAs are not associated with instances so removing instances will not remove these types of tasks from the queue. If they fail upon their execution, you will see a scheduled date of 2099/02/01 (YYYY/MM/DD) and you can safely remove these via the wsadmin command, REST API, or Process Admin Console. As of now, there is no way of removing scheduled tasks from the Event Manager. In this case, you may need the assistance of Development to determine the best route to remove these tasks. Usually, Development may provide certain steps and queries, such as the following:\n\n1.Back up the lswemtask and lswemtask_keywords tables.\n2.Run following queries to cleanup for their situation:\n&nbsp;&nbsp;&nbsp;&nbsp;2.1)\n&nbsp;&nbsp;&nbsp;&nbsp;delete from LSWEMTASKKEYWORDS where taskid in (select taskid from lswem_task where description like '%Execute , triggered by invokeUCA%');\n&nbsp;&nbsp;&nbsp;&nbsp;2.2)\n&nbsp;&nbsp;&nbsp;&nbsp;delete from LSWEMTASKKEYWORDS where taskid in (select taskid from lswem_task where description like '%Execute , triggered by invokeUCA%');\n&nbsp;&nbsp;&nbsp;&nbsp;2.3)\n&nbsp;&nbsp;&nbsp;&nbsp;delete from lswemtask where description like '%Execute , triggered by invokeUCA%';\n&nbsp;&nbsp;&nbsp;&nbsp;2.4)\n&nbsp;&nbsp;&nbsp;&nbsp;delete from lswemtask where description like '%Execute , triggered by invokeUCA%';\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"JavaScript","description":"nldillard@us.ibm.com","owner":"@Nathan Dillard","path":"/BusinessProcessManager/StandardRuntime/JSAPI","text":"Date:2019-12-20\n\nOverview\n\nJavaScript APIs\n\n Prerequisites\n\nJavaScript Tutorial: (Focus on syntax instead of HTML, e.g. Variables, Data Types, Operators, Functions, etc.)\nhttps://www.w3schools.com/js/default.asp\n\nJVM log syntax\n(Note: “” and “<” are additional events for entry and exit/return respectively.)\n\nComponents\n\nJavaScript API programming guide:\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.main.doc/topics/tdevjsapijavascriptapi_programming.html\n\nJavaScript API namespace limitation: (BPD namespace is used by Processes and BPDs, Service namespace is used by Service Flows and Services, Scripts in client-side human services are limited to a subset.)\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.ref.doc/topics/crefjavascriptapinamespaces.html\n\nJavaScript API reference:\nhttps://www.ibm.com/support/knowledgecenter/SS8JB4/com.ibm.wbpm.ref.doc/ae/doc/JSAPI.html\n\nJavaScript API reference examples:\nhttps://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.main.doc/topics/rdevjsapisamples.html\n\nBPM/BAW implements the Mozilla Rhino JavaScript engine. The following script will give you the version on your test system:\nvar Context = org.mozilla.javascript.Context;\n  currentContext = Context.getCurrentContext(),\n   rhinoVersion = currentContext.getImplementationVersion();\nlog.info(rhinoVersion);\n\n Troubleshooting\n\nData Collection\n\nCollect the data as mentioned in the JavaScript Mustgather:\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-javascript-problems-ibm-business-process-manager-bpm-and-ibm-business-automation-workflow-baw\n\nIsolate the thread with the problem thread using the PullThread tool in Archive Explorer (AE).\n\n1.Identify the exception message or the log message you would like to investigate.\n2.Use the PullThread tool in AE to filter out the thread from step 1.\n\n Data Analysis\n\nJavaScript block in a BPD/Process:\n\nIf the script is running in the context of a BPD/Process, you will see an entry point with the script name and instance ID by the “doWork” keyword. This is helpful in isolating the right instance ID:\n[11/25/19 16:37:38:322 PST] 00009d1b BPDActivityWo  com.lombardisoftware.bpd.component.flowcomponent.activity.worker.BPDActivityWorker doWork ENTRY BPD InstanceId = BpmnInstanceId(54), flowObject Name = MyScript, flowObjectId = BPDObjectIdImpl(0e47135c-a8d5-4821-9f0a-7b7ea9c6eb46), model = com.lombardisoftware.bpd.component.flowcomponent.activity.model.BPDActivityImpl@96437b95,state = 0\nYou will see the following tags “executeJSScript” for certain JavaScript blocks. In this case, the name of the script is called “myScript”:\n[11/25/19 16:37:38:322 PST] 00009d1b BPDActivityWo  com.lombardisoftware.bpd.component.flowcomponent.activity.worker.BPDActivityWorker executeImplementation ENTRY activity name = myScript\n[11/25/19 16:37:38:322 PST] 00009d1b BPDExecutionT  com.lombardisoftware.bpd.runtime.engine.BPDExecutionTreeNode executeJSScript ENTRY script = \nvar myVal = 5;\ntw.local.myPrivateVariable = myVal;\ntw.local.myPrivateComplexVariable = new tw.object.Complex_Object;\ntw.local.myPrivateComplexVariable.someInteger = tw.local.myPrivateVariable;\nlog.info(\"tw.local.myPrivateComplexVariable.someInteger = \" + tw.local.myPrivateComplexVariable.someInteger);, errorMessageLocation = TWScript\nFinally, the “doWork” code should complete:\n[11/25/19 16:37:38:384 PST] 00009d1b BPDActivityWo < com.lombardisoftware.bpd.component.flowcomponent.activity.worker.BPDActivityWorker doWork RETURN BPD InstanceId = BpmnInstanceId(54), flowObject Name = myScript, flowObjectId = BPDObjectIdImpl(0e47135c-a8d5-4821-9f0a-7b7ea9c6eb46), result: com.lombardisoftware.bpd.runtime.engine.workresult.FlowObjectCompletedWorkResult@3938b1b4\nJavaScript block in a Service:\n\nWhen JavaScript is running in the context of the service engine, you can look for the execution of a script, such as the following line here, when running in a service. You will see “wlesvcflowb” and the “doJob” keywords as shown:\n[11/22/19 15:51:50:685 PST] 000005ac wlesvcflowb  com.lombardisoftware.component.twscript.worker.ScriptWorker doJob ENTRY Step (Script Task) , componentName=Script\nThis line is pretty helpful as it not only tells you the JavaScript code running in the script, but the GUID for the script that you should be able to match up with their application (twx file):\n[11/22/19 15:51:50:685 PST] 000005ac JavaScriptRun 1 com.lombardisoftware.core.script.js.JavaScriptRunner execute Executing script Script Evaluation: Component.Script.b4492c3b-77de-43ed-938f-8d5b9c396554 [\nvar myVal = 5;\ntw.local.myPrivateVariable = myVal;\ntw.local.myPrivateComplexVariable = new tw.object.Complex_Object;\ntw.local.myPrivateComplexVariable.someInteger = tw.local.myPrivateVariable;\nlog.info(\"tw.local.myPrivateComplexVariable.someInteger = \" + tw.local.myPrivateComplexVariable.someInteger);\nFinally, the exit point of the script should finish:\n[11/22/19 15:51:50:701 PST] 000005ac wlesvcflowb < com.lombardisoftware.component.twscript.worker.ScriptWorker doJob RETURN EndState(id = Out, displayName = Out)\n\nReferences\n\nBAW Exception Codes\n\nWarnings:\nCWLLG0399W\nCWLLG0408W\nCWLLG0410W\n\nErrors:\nCWLLG0402E\nCWLLG0406E\nCWLLG0411E\nCWLLG0434E\nCWLLG2039E\nCWLLG2040E\nCWLLG2041E\nCWLLG2185E\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"REST API","description":"nldillard@us.ibm.com","owner":"@Nathan Dillard","path":"/BusinessProcessManager/StandardRuntime/RESTAPI","text":"Date:2019-12-20\n\nOverview\n\nBPM REST APIs\n\n Prerequisites\n\nhttps://www.youtube.com/watch?v=rtWH70_MMHM\n\nComponents\n\nRest APIs:\n1.https://www.ibm.com/support/knowledgecenter/en/SSV2LR/com.ibm.wbpm.bpc.doc/topics/tdev_testingrestapis.html\n2.https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.main.doc/topics/cdev_restprogramming.html\n3.https://www.ibm.com/support/knowledgecenter/en/SS8JB4/com.ibm.wbpm.ref.doc/topics/processrestreference.html\n\n Troubleshooting\n\nData Collection\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-bpm-rest-api-problems-ibm-business-process-manager-bpm\n\nIsolate the thread with the problem thread using the PullThread tool in Archive Explorer (AE).\n\n1.Identify the exception message or the log message you would like to investigate.\n2.Use the PullThread tool in AE to filter out the thread from step 1.\n\n Data Analysis\n\nA working scenario for a REST call would look like something similar to the following. In the first log message, you will want to search for the “doFilter ENTRY” tag which will be the entry to the REST call:\n[11/25/19 15:48:21:439 PST] 000005ac BPMCORSFilter  com.ibm.bpm.rest.filter.BPMCORSFilter doFilter ENTRY\n[11/25/19 15:48:21:439 PST] 000005ac BPMCORSFilter 3   Processing requests with non-null Origin header. Header value=null\n[11/25/19 15:48:21:439 PST] 000005ac BPMRestServle  com.ibm.bpm.rest.filter.BPMRestServletFilter doFilter ENTRY\nIn the next segment, you will see the URL that the REST call is making. In this example, we are running the Task Details REST API for task ID 55:\n[11/25/19 15:48:21:439 PST] 000005ac BPMRestServle 3   Processing HTTP request: https://localhost:12319/rest/bpm/wle/v1/task/55\n[11/25/19 15:48:21:440 PST] 000005ac BPMRestServle 3   Detail: REQUEST URL  = https://localhost:12319/rest/bpm/wle/v1/task/55\nUpon first logging into the system or if the user does not have a valid http session, the REST API call makes a “initializeNewLogin” call to lock the user so that any updates to this users group membership can occur. In this example, the user is “deadmin”:\n[11/25/19 15:48:21:445 PST] 000005ac SecurityCore   com.lombardisoftware.server.ejb.security.SecurityCore initializeNewLogin ENTRY null false\n[11/25/19 15:48:21:445 PST] 000005ac WebsphereDele < com.lombardisoftware.client.delegate.common.WebsphereDelegateHelper getCurrentUsername RETURN deadmin\n[11/25/19 15:48:21:445 PST] 000005ac DBLockHelper  1 com.lombardisoftware.server.core.DBLockHelper createLock createLock deadmin user login lock\n[11/25/19 15:48:21:447 PST] 000005ac clientinfoplu   prepareStatement Entry\n                                 com.ibm.ws.rsadapter.jdbc.WSJccSQLJPDQConnection@874151a9\n                                 INSERT INTO LSWLOCK (LOCKID, DESCRIPTION) VALUES (?,?)\n[11/25/19 15:48:21:450 PST] 000005ac StatementCrea 3 org.springframework.jdbc.core.StatementCreatorUtils setParameterValueInternal Setting SQL statement parameter value: column index 1, parameter value [deadmin], value class [java.lang.String], SQL type unknown\n[11/25/19 15:48:21:450 PST] 000005ac StatementCrea 3 org.springframework.jdbc.core.StatementCreatorUtils setParameterValueInternal Setting SQL statement parameter value: column index 2, parameter value [user login lock], value class [java.lang.String], SQL type unknown\n[11/25/19 15:48:21:502 PST] 000005ac SecurityCore  < com.lombardisoftware.server.ejb.security.SecurityCore initializeNewLogin RETURN\nOnce the “InitializeNewLogin” method returns, group membership is complete. We can now check if the user is authorized to make the call. In certain cases, you may see authorization methods which will check if a user is authorized to make the REST API call. In this scenario, the user is authorized. You may see different methods for different APIs but you should see the AuthorizationAPICore class invoked:\n[11/25/19 15:48:21:528 PST] 000005ac Authorization  com.lombardisoftware.server.ejb.api.AuthorizationAPICore canExecuteActionAndThrowsNotAuthorized ENTRY 110 55 false\n[11/25/19 15:48:21:535 PST] 000005ac Authorization < com.lombardisoftware.server.ejb.api.AuthorizationAPICore canExecuteActionAndThrowsNotAuthorized RETURN canExecute: true\nFinally, the REST API completes and logs a very helpful message which shows how long the call took on the server side. You may want to check for the “elapsed” keyword:\n[11/25/19 15:48:23:881 PST] 000005ac LoggingUtils  1   The elapsed time for the following REST request was 2.37 seconds: https://localhost:12319/rest/bpm/wle/v1/task/55\n\nThe doFilter method returns\n[11/25/19 15:48:23:881 PST] 000005ac BPMRestServle < com.ibm.bpm.rest.filter.BPMRestServletFilter doFilter RETURN\n\nAt the end of each REST API call, there is a summary of all database queries made:\n[11/25/19 15:48:23:881 PST] 000005ac sql           3   ------------------------------------ Query summary for request GET --- /rest/bpm/wle/v1/task/55?parts=all\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Web Service","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/StandardRuntime/WebService","text":"Date:2019-10-15\n\nOverview\n\nIntegration services enable outbound integration with web services so that processes can retrieve and update data that is stored on an external system. Web service component provides a way for an external system or application to call into BPM. You can use a web service binding in a SCA module to invoke existing web services and expose functionality within the module as a web service. This topic will talk about these web service related components in BPM.\n\n Prerequisites\n\nBelow tutorial will be useful for learning the basics of web services. This is an elementary tutorial that introduces the concepts of web services.\n\nWeb Services Tutorial\nhttp://www.tutorialspoint.com/webservices/\n\nComponent\n\n Outbound Processing\n\nIntegration services enable outbound integration with web services so that processes can retrieve and update data that is stored on an external system. You can use an External Service or a SOAP Connector or a Web Service Integration step to enable the access to the web service.\n\n1.External Service\nYou can create an external service by discovering a web service that is hosted on an external system, and use this external service in a service flow to invoke the web service. Refer to below topic on knowledge center for detailed introduction.\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.wle.editor.doc/topics/twebinvoke.html\n\n2.SOAP Connector\nSOAP connector is an embedded integration service, Call WebService via SOAP, is provided in the System Data Toolkit. This connector abstracts the complexity of the web service implementation and requires only minimal configuration. Refer to below topic on knowledge center for detailed introduction.\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/tsoapconncall.html\n\nBelow article including many screenshots to introduce how to the SOAP connector to call a web service.\nhttps://www.ibm.com/support/pages/using-soap-connector-call-web-service-websphere-lombardi-edition\n\n3.Web Service Integration\nUse a Web Service Integration component to invoke a web service that is hosted externally. You can configure the WSDL properties, SOAP header information, authentication, signature and encryption properties for the web service integration. Refer to below topic on knowledge center for detailed introduction.\n  https://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/configuringwebserviceintegration_step.html\n\nInbound Processing\n\nWeb Service component provides a way for an external system or application to call into BPM. You can create a web service component in BPM that you expose to exterior systems so that they can access functionality in an IBM BPM application. The web service component invokes an operation that calls a particular BPM service or service flow. Refer to below topic on knowledge center for detailed introduction.\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/creatingexposed_services.html\n\n SCA Component\n\nYou can use a Web Service Binding in a SCA module to invoke existing web services and expose functionality within the module as a web service. A web service binding provides a specification for transmitting messages to and from a web service. You can use a web service import binding to call an external web service to an import. You can use a web service export binding to provide a service to external clients as a web service. Refer to below topic on knowledge center for detailed introduction.\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.wid.integ.doc/access/topics/cwebbind.html\n\nTroubleshooting\n\n Questions to ask\n\nIs the web service call in question an inbound (a client sending a request to BPM) or an outbound (BPM acting as a client consuming an external web service) call?\nIs there any Web Services security involved (SSL, WS-Security, etc)?\nWas this working in any prior versions of the product (or legacy products)? If so, which version/product was in working in?\nWas it ever working on this version itself?  If so, what has changed (could be backed web service, Business Object structure, authentication requirement, etc)?\n\nVerifying Webservice\n\nAdd ?WSDL to the end of web service URL. Paste the URL into a browser window and you should see something like the following screen shot.\n\n Data Collection\n\n1.To trace the problems that are specific to External Service/Web Service/SOAP Connector/Web Service Integration in BPM, below trace string should be enabled on application server:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.Base trace:\n\n=info:WLE.=all:com.ibm.ws.webservices.=all:org.apache.=all:com.ibm.ws.websvcs.=all:com.ibm.ws.metadata.=all\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. If you see IOException related to Webservice requests:\n\n=info:WLE.=all:com.ibm.ws.webservices.=all:org.apache.=all:com.ibm.ws.websvcs.=all:com.ibm.ws.metadata.=all:HTTPChannel=all:GenericBNF=all:TCPChannel=all\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c. If it’s performance related issue or it’s in a production environment, you can use this slighter trace setting:\n\n=info:WLE.wle_outbnd_ws=all:com.ibm.bpm.ws.jaxws.=all\n\n2.To trace the problems that are specific to Web Service Binding in BPM, below trace string should be enabled on application server:\n\n=info:SCA.=all:com.ibm.ws.webservices.=all:org.apache.=all:com.ibm.ws.websvcs.=all:com.ibm.ws.metadata.=all\n3.For Outbound web service issue, the following materials are required.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a. The WSDL of the actual Web Service (including any included/imported .xsd files)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. A sample response from the Web Service\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c. The project (see below point 5 for details)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d. Sample request SOAP message from BPM\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e. TeamWorksConfiguration.running.xml file from profile configuration directory\n\n4.For Inbound web service issue, the following materials are required.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a. The SOAP request from the web service client\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. The project (see below point 5 for details)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c. A sample response SOAP message from BPM (if relevant to problem description)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d. TeamWorksConfiguration.running.xml file from profile configuration directory\n\n5.Project file\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a. For issue of External Service/Web Service/SOAP Connector/Web Service Integration, request the .twx file for the process application as well as the service name in question.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. For issue of Web Service Binding, request the Project Interchange file as well as which import or export component in the project is in question.\n\nRecreating Problem\n\n1.Download SoapUI from https://www.soapui.org/. Install the tool using the default configuration.\n\n2.For outbound calls:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a. Create new SOAP project and specify WSDL URL in SoapUI.\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. Generate SOAP mock service. This emulates the customer’s web service so we don’t need direct access to it.\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c. In web service component in process application, modify the host and port information in WSDL URL to match the mock service. Test scenario to invoke the web service. This is a way to see what BPM actually sends in its request (SoapUI will print out requests received, including HTTP Headers if desired).\n\n3.For inbound calls:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a. Create new SOAP project and specify WSDL URL in SoapUI.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. Create request message to simulate the customer’s use case.\n\n4.For WSDL discover:\nObtain WSDL and all imported XSD files from customer. Specify to the local WSDL file in WSDL discover wizard.\n\n Trace Analyzing\n\n1.Key words:\nwle_outbnd_ws\nrequest =\nresponse = \n\nUsage:\nPrint out the request and response SOAP messages invoked by the outbound web service components.\n\nSample: \n[9/5/19 09:30:42:558 GMT] 00008cb0 wleoutbndws 1   request = <?xml version=\"1.0\" encoding=\"utf-8\"?&lt;cwtNotificationRequest xmlns='http://sample.uk/hbeu/e2e/sil/data/cwt'&gt;&#xD; \n&lt;dealId&gt;[Field3]&lt;/dealId&gt;&#xD; \n&lt;correlationId&gt;[Field2]&lt;/correlationId&gt;&#xD; \n&lt;router&gt;DATA_UPDATE&lt;/router&gt;&#xD; \n&lt;additionalFields&gt;&#xD; \n…\n\n[9/5/19 09:30:42:875 GMT] 00008cb0 wleoutbndws 1   response = <?xml version=\"1.0\" encoding=\"utf-8\"?SUCCESS \n\n2.Key words:\nsetInputParameters\ngetOutputParameters\n\nUsage:\nMethods to set and get SOAP messages before and after the web service invocation.\n\nSample: \n[9/5/19 14:02:53:645 GMT] 00000793 wleoutbndws 1 com.ibm.bpm.ws.jaxws.connector.SOAPConnector setInputParameters setInputParameters(), parameterValues = [{http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}retrieveNewApp=false, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}countryCode=HAS, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}snapshotVersion=HASE.Cards.V.0.0.0.72, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}wsdlVersion=wsdl002, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}entityId=HAS, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}entityCode=HAS, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}processStepInfo=null, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}requesterInfo=TWObject[(Active: Y), (Type: 1), (TWClassID: TWClass.848854a5-b044-4fb7-86a2-ac10bad5a84b), (Property names: ID, name), (MetaData: dirty=true, shared=false, key=null, version=null, rootVersionContextID=2064.cebe74fe-ef69-4e12-8c8d-6147a5fb95ea, className=WebUserInfo)], {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}applicationId=201607846081, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}type=0]\n\n[9/5/19 14:02:54:292 GMT] 00000793 wleoutbndws 1 com.ibm.bpm.ws.jaxws.connector.SOAPConnector getOutputParameters getOutputParameters(), outputParameterValues = {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}returnCode=SUCCESS, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}workItemId=2563, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}instanceId=41498, {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}requesterInfo=TWObject[(Active: Y), (Type: 1), (TWClassID: TWClass.848854a5-b044-4fb7-86a2-ac10bad5a84b), (Property names: ID, name, groups), (MetaData: dirty=true, shared=false, key=null, version=null, rootVersionContextID=2064.cebe74fe-ef69-4e12-8c8d-6147a5fb95ea, className=WebUserInfo)], {http://www.sample.com/gltc/bpm/rcs/integration/web/services/optimization/web/version/v100}applicationData=TWObject[(Active: Y), (Type: 1), (TWClassID: TWClass.ac644f76-4913-40df-adf8-4a535e7ddded), (Property names: applicationId, workItemId, currentStatus, smg3CallForSCL, requestedLoanAmount, recommendedLoanAmount, captureDateStr, annualInterestRate, aapsUpdated, mortgageUpdated, maxLTVProject, maxLTVCampaign, avaliableExposureProject, avaliableExposureCampaign, specialIndicator, documents, requiredDocuments, customers, scoringResults, verficationTasks, groupTotalApprovedWIP, totalUnapprovedWIPAppl, textAttrs, accountInfos, cardInfos, appCIFException, appHITException, appFraudException, appExceptionSummary, customerMiscellaneousReference, remarks, uuid, entityId), (MetaData: dirty=true, shared=false, key=null, version=null, rootVersionContextID=2064.cebe74fe-ef69-4e12-8c8d-6147a5fb95ea, className=WebApplicationData)]}\n\n3.Key word:\nfound cached WSAddress\n\nUsage:\nIndicates whether WS address can be found in cache or need to read from WSDL file again, usually this is related to cache setting and performance. The WSDL is downloaded and cached in BPM on the first invocation, so it will be slower the first time. The cache can be adjusted in the configuration files to hold more or less cached WSDL files, but the more in the cache, the more memory will be consumed by the cache.\n\nSample:  \n[9/5/19 09:30:42:584 GMT] 00008cb0 WSAddress       WSAddress.getAddress() with targetURL https://test-bpmcl:443/silws1/ws1/iqAdapter.wsdl Entry \n[9/5/19 09:30:42:584 GMT] 00008cb0 WSAddress     3   cacheKey = https://test-bpmcl:443/silws1/ws1/iqAdapter.wsdl \n[9/5/19 09:30:42:584 GMT] 00008cb0 WSAddress     3   Using key https://test-bpmcl:443/silws1/ws1/iqAdapter.wsdl, found cached WSAddress https://test-bpmcl:443/silws1/ws1/iqAdapter.wsdl, -644025203 \n[9/5/19 09:30:42:584 GMT] 00008cb0 WSAddress     <  WSAddress.getAddress() wsAddr : https://test-bpmcl:443/silws1/ws1/iqAdapter.wsdl Exit \n\n4.Key word:\nSocketChannel\n\nUsage:\nIndicates the status of socket channel connection.\n\nSample:  \n[9/5/19 09:30:18:754 GMT] 0000000d WorkQueueMana 1   SocketChannel connect failed, local: /128.161.56.13:60994 remote: null\n[9/5/19 09:30:18:754 GMT] 0000000d WorkQueueMana 3   SocketChannel.finishConnect Exception Caught: java.net.ConnectException: Connection refused\n[9/5/19 09:30:40:336 GMT] 00008c37 NBAcceptChann 1   SocketChannel accepted, local: /128.161.56.13:9081 remote: /128.161.56.13:59229\n[9/5/19 09:30:42:590 GMT] 00008cb0 WorkQueueMana 1   SocketChannel connected, local: /128.161.56.13:59456 remote: test-bpmcl/128.162.104.57:443\n\n5.Key words:\nTCPBaseReques\nWrote\nRead\n\nUsage:\nIndicates TCP communication read and wrote bytes.\n\nSample:  \n[9/5/19 09:30:42:591 GMT] 00008cb0 TCPBaseReques 1   Wrote 90(90) bytes, 90 requested on local: Sample/128.161.56.13:59456 remote: test-bpmcl/128.162.104.57:443 \n[9/5/19 09:30:42:591 GMT] 00008cb0 TCPBaseReques 3   write complete, at least minimum amount of data written \n[9/5/19 09:30:42:593 GMT] 00008cb0 TCPBaseReques 1   Read 86(86) bytes, 1 requested on local: Sample/128.161.56.13:59456 remote: test-bpmcl/128.162.104.57:443 \n[9/5/19 09:30:42:593 GMT] 00008cb0 TCPBaseReques 3   read complete, at least minimum amount of data read\n\nReference\n\nCollect troubleshooting data for web service problems in IBM Business Process Manager\nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-web-services-problems-ibm-business-process-manager\n\nTroubleshooting web services and outbound web service integrations\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/webservicesecurityI.html\n\nTroubleshooting XML schema messages for web service integrations\nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/troubleshootingxml4webservice.html\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Undercover Agent (UCA)","description":"lifengbj@cn.ibm.com","owner":"@Feng Li","path":"/BusinessProcessManager/StandardRuntime/UCA","text":"Date:2019-10-22\n\nOverview\n\nAn Undercover Agent (UCA) listens for triggers from external systems, invokes UCA service components or scheduled, time-based events. UCAs also handle Message Start Events and Message Intermediate Events in a Business Process Definition (BPD) or process. \n\n Component\n\nOn Event – Triggered as a result of an explicit Invoke UCA in a service \n\nWhen a UCA is activated, it basically represents an event. That event can carry payload data with it. When an event arrives and triggers a UCA, the UCA in turn will execute an IBPM service. This is specified by the Attached Service attribute and is commonly an IBPM General Service. The way that the UCA causes the service to be called is not by invoking that service explicitly, instead, the UCA queues the request to start the service on a logical queue. It must be stressed that this is indeed a logical queue and has no relationship to JMS or SI Bus. The queuing mechanism here is used to serialize the execution of UCA originated events. When the UCA places a request on a queue, any further requests placed on that queue are not processed until the previous events have completed which means that the associated services have completed. One exception to this is the special queue called the Async Queue. If the UCA start service request is placed on this queue, further requests to start services will not wait for previous services to complete. The number and names of these queues can be changed in the IBPM Process Admin Console. \n\n Time Elapsed – Triggered on schedule from the run-time\n\nThe Time Schedule defines recurring periods of when the UCA should fire. The Time Schedule is quite flexible in its configuration. Each time the schedule is reached, the UCA fires. Within Process Center there is a Process Server used for testing. It does not make sense for a UCA to fire for each of the schedules held in the repository in the Process Center Server. As such, they simply do not. For testing, the Run now button can be used to explicitly trigger an instance of the UCA. \nWhen a UCA is scheduled, we can see it in the Process Admin Console (PAC) under Event Manager  Monitor\n\nIntermediate Message Event (IME)\n\nThe Message Intermediate Event is an Event listener that is used to listen for incoming events within a process instance that is already running.   \nBecause a Message Intermediate Event listener lives within an existing process instance, when an event occurs that event must be matched against the correct instance of the process for which the event is destined. The ability to match the event against this correct process instance is called \"correlation\". \nThe Message Intermediate Event is actually watching for the arrival of a UCA. When that UCA arrives, the event is said to have happened. This is the mapping between the logical concept of an event and the actual implementation of an event within the IBPM product. \nA Message Intermediate Event is always associated with a UCA and a UCA can carry data with it. In the IBPM PD, we can specify a variable whose value must match that of an incoming event's UCA payload in order to be considered a match. \nMessage Intermediate Event can also be used to invoke a UCA which is the logical equivalent of generating a new message. \n\n Start Message Event (SME)\n\nThe Message Start Event is a starting node that can be used to initiate an instance of a process due to the arrival of an event. When the Message Start Event element is added, the properties of that element allow users to define which UCA should be used. When the UCA fires the data from the UCA is passed as the starting data to the new instance of the Business Process that is to start. \n\nInvoke UCA\n\nWithin a Service, you may wish to invoke a UCA. Invoking a UCA can cause the creation of a new instance of a process. Remember that UCAs are usually associated with an external service or timer causing them to be invoked. Giving us the ability to initiate a UCA explicitly adds a lot more flexibility to solutions we may build. A primitive is supplied that allows us to explicitly invoke a named UCA. \nThe UCA caller primitive's implementation names the UCA that is to be called. The Data Mapping section allows us to map the variables in scope in the process to the parameters expected by the UCA. \n\n Mechanism\nFrom UCA to Message Event\n\nInvocation of the UCA defined in one snapshot and passing data to it. This creates an Event Manager task\nThe execution of the UCA task (and its optional attached service) \nThe delivery of the UCA output to a  number of eligible (correlation) message events, that subscribed to that UCA \n\n How non-durable Subscription work (IME only)\n\nDuring deployment of the process app the linkage between the UCA and the IME will be created in table LSWBPDEVENT \n   Link to UCA → LSWBPDEVENT.UCA_ID\n   non durable subscription → LSWBPDEVENT.DURABALE_SUBSCRIPTION = ‚F‘\nTo subscribe to an UCA message, the token of a process instance needs to be on a message event. Process flow is suspended until the UCA is executed and the IME is ready to consume its output message. \nThere could be multiple IMEs waiting for an UCA message at the same time:  \n→ All of those with correct correlation (explained in detail later)  would receive the message \n\nUCA Correlation:\n\n Prerequisites for UCA execution\n\nThe following conditions need to be met for an UCA to execute: \n\n1.EM active\n&nbsp;&nbsp;&nbsp;&nbsp;→ LSWEMINSTANCE.STATUS = 1 \n2.No Blackout Period active\n&nbsp;&nbsp;&nbsp;&nbsp;→ LSWBLACKOUTCALENDAR\n3.Snapshot containing UCA must be active and default*\n&nbsp;&nbsp;&nbsp;&nbsp;→ LSWSNAPSHOT.ISACTIVE = T\n&nbsp;&nbsp;&nbsp;&nbsp;→ LSWSNAPSHOT.ISDEFAULT = T\n4.UCA enabled in Process Designer \n&nbsp;&nbsp;&nbsp;&nbsp;→ LSWUCA.ISENABLED = T\n5.UCA enabled in PAC (not relevant for event based UCA)\n&nbsp;&nbsp;&nbsp;&nbsp;→ LSW_FAVORITE.ENABLED = T \n\nTroubleshooting\n\n Questions to ask\n\nDid the UCA ever work normally?\nDid you deploy any snapshot before the issue happened? \nIs your BPM in same time zone with your BPM DB?\nIs your Event Manager still working normally?\nCan the tokens in your BPD/Process instances move forward? \nDid you recently apply any fix and strictly follow the migration instruction? \n\nVerifying the UCA \n\nLogin to the Process Admin Console (PAC)  Deployed Apps and check whether the UCA is enabled or not: (make sure the checkbox is selected) \n\nCheck Event Manager Monitor in PAC and make sure the Time Based UCA is NOT scheduled at 2099: \n\n Data Collection \n\n1.To trace the problems that are specific to Undercover Agent or Message Intermediate Event in BPM, the below trace string should be enabled on application server. Please Note: Enabling the trace might slow down your system. Disable this trace after collecting the requested information. \n\n=info:WLE.=all\nBelow is a lightweight trace string that has minor impact on BPM system performance, but please make clients aware that the trace string may not catch all information needed. \nWLE.wle_ucaexception=finest\n\n2.Please dump below tables from the BPM database.  All instances of Time Base UCA should be here. You also can find the next scheduled execution time. \nLSWEMTASK , LSWEMTASKKEYWORDS, LSWUCA\nBelow are the LSW_UCA columns: \n\n3.Event manager logging.\nThis function logs every operation that passes through the core BPMN (Lombardi) engine to the LSWEMTASK_HISTORY table. Complete the following steps. \n\nUse a custom XML configuration file to enable this logging. The following code is the contents of the XML file. The file must be XML compliant and have no extra spaces or line breaks. Due to web page formatting, the  value might not be on one line when it is copied over. \n   \n   \n      \n        \n         com.lombardisoftware.server.scheduler.DbTaskExecutionListener \n        \n      \n     \nPlace this file in the same directory as the 100custom.xml file and restart the IBM Business Process Manager Process Server (AppTarget JVM). For more information on the 100custom.xml file, see Configuration file overview and explanation for Lombardi Teamworks, WebSphere Lombardi Edition (WLE), and the IBM Business Process Manager (BPM) products. \n  \nRestart the server.\n   \nCheck the TeamworksConfiguration.running.xml the  is in the file. If not, repeat steps 1-3 \n\nRun one instance or task. Check the LSW_EM_TASK_HISTORY table for new entries. \n    \nTwo (2) additional tables will be required as well. LSW_EM_TASK and LSW_EM_TASK_KEYWORDS. \n\nExport the tables into an easy to consume text format with CSV (comma separated values) or XSL (Excel spread sheet) or ODS (open document spread sheet) \n    \nAfter problem determination with IBM, remove the custom XML file, restart system to turn off logging, and truncate LSW_EM_TASK_HISTORY. This table can grow very quickly and use database disk space. \n\nAfter completing the previous steps, send the following information to IBM Technical Support using the information in the Exchanging information with IBM Technical Support for problem determination document: \nProvide an exported version of the LSW_EM_TASK_HISTORY table in a .csv or .xsl format. \n\nNote: The removal of data from the LSW_EM_TASK_HISTORY table is a manual process. To stop Event Manager history logging, remove the custom XML file and restart the IBM Business Process Manager Process Server (AppTarget). \n\nProvide the name of the failing or non-functioning UCA. \n\nProvide an exported version of the LSW_EM_TASK table in the .csv format. \n    \nProvide an exported version of the application as a .twx file with details of how to find the UCA that is causing the error. If you cannot export the application, supply screen shots of the UCA settings and also provide a diagram that shows where the UCA is located. \n\nProvide a copy of the Event Manager settings from the 80EventManager.xml file and a copy of the TeamworksConfiguration.running.xml file. Both of these files are located two directories up from the following file path:\n\ninstalldir\\profiles\\profilename\\config\\cells\\cellname\\nodes\\nodename\\servers\\servername\\servertype\\config\\system\\ \n\n4.Request the .twx file for the process application as well as the service name in question.\n\nTrace Analyzing \n\nAll below information are gathered when UCA works correctly. You can search key words and locate the information in trace files. \nUsage 1: Event Manager Start \nKey words: Heartbeat/Acquire \nSample:\n[4/6/17 18:31:20:601 CST] 00001579 Heartbeat     I   CWLLG0570I: Heartbeat paused. \n[4/6/17 18:31:51:466 CST] 000015ee Heartbeat     I   CWLLG0615I: Heartbeat resumed. \n[4/6/17 18:32:06:611 CST] 00000169 TaskLoader    I   CWLLG0597I: Trying to acquire synchronous queue SYNCQUEUE1. \n[4/6/17 18:32:06:639 CST] 00000169 TaskLoader    I   CWLLG0581I: Acquired synchronous queue SYNCQUEUE1. \n[4/6/17 18:32:22:045 CST] 00000169 TaskLoader    I   CWLLG0597I: Trying to acquire synchronous queue SYNCQUEUE2. \n[4/6/17 18:32:22:048 CST] 00000169 TaskLoader    I   CWLLG0581I: Acquired synchronous queue SYNCQUEUE2. \n[4/6/17 18:32:38:259 CST] 00000169 TaskLoader    I   CWLLG0597I: Trying to acquire synchronous queue SYNCQUEUE3. \n[4/6/17 18:32:38:260 CST] 00000169 TaskLoader    I   CWLLG0581I: Acquired synchronous queue SYNCQUEUE3. \n\nUsage 2#: InvokeUCA schedules task \nKey words: TaskManager/scheduleTasks \nComment : Trace file when InvokeUCA triggers a UCA. \nSample:\n[4/19/17 14:03:24:928 CST] 000013b9 TaskManager    com.lombardisoftware.server.scheduler.TaskManager scheduleTasks ENTRY [com.lombardisoftware.server.scheduler.ScheduledTask@629a7f38 \n scheduledTime: 1492581804927 = Wed Apr 19 14:03:24 CST 2017 \n repeatString: null \n execClassName: com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask \n arguments: 4.0ddf859f-d703-4984-a9bc-89bd2ae2b886;7;TonyUCA \n  FCI_C \n   \n    &lt;variable type=\"String\"&gt;&lt;![CDATA[000]]&gt;&lt;/variable&gt; \n   \n \n description: Execute UCA TonyUCA, triggered by invokeUCA \n queueId: -100 \n blackoutCalendarId: 1 \n blackoutBehavior: BlackoutBehavior(3, EXECUTEMANYAFTER_BLACKOUT) \n inClosingTransaction: false \n idInDB: null \n reuseStrategy: 0 \n keywords: List start \n   uca4.0ddf859f-d703-4984-a9bc-89bd2ae2b886 \n   invokeUCA \nList end] true \n/if there is a big gap between BPM Time and BPD DB Time,  the UCA may be executed in wrong time/ \n[4/19/17 14:03:24:928 CST] 000013b9 TaskManager   1 com.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 currentTime   : 1492581804928 <<<<<<<<<<<<<<<<<<<<<<<< BPM Time \n[4/19/17 14:03:24:928 CST] 000013b9 TaskManager   1 com.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 currentDbTime : 1492581804928 <<<<<<<<<<<<<<<<<<<<<<<< BPM  DB Time \n[4/19/17 14:03:24:929 CST] 000013b9 TaskManager   1 com.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 scheduledTime before adjustment: 1492581804927 = Wed Apr 19 14:03:24 CST 2017 \n[4/19/17 14:03:24:929 CST] 000013b9 TaskManager   1 com.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 scheduledTime after adjustment: 1492581804927 = Wed Apr 19 14:03:24 CST 2017 \n\nUsage 3#: JMS message is triggered \nKey words: BaseJMSEventPublisher.send / UCA \nSample:\n[10/7/16 13:21:40:060 MST] 000001ab wle_event 1 Entering BaseJMSEventPublisher.send, event \nis BranchSummaryChange( clientUUID=feb969dc-c8c4-4434-9ceb-d03fa9a29b3c, branchId=Branch.51857a4de755- \n478d-ad36-86ce6ce3217f, updatedClient=ClientActivitySummary{ seq=335604, \nbranchId=Branch.51857a4d-e755-478d-ad36-86ce6ce3217f, tip=true, user=User.1, editing=[], \nviewingOnly=[ProjectDefaults.3ca830f0-cd7b-4898-aa29-e1444300d644, UCA.0d6a7a19-dec8-4420-8c4e- \n60c71f3a4e3c, BPD.558bf025-049f-48dc-ac58-4373d869d7d7] } ) and message properties is null \n\nUsage 4#: JMS message is received by Event Manager \nKey words: Received Event Manager message \nSample:\n[10/7/16 13:21:40:060 MST] 00000151 EventMgrMessa 1 \ncom.lombardisoftware.server.ejb.eventmgr.EventMgrMessageListenerCore onMessage Received Event \nManager message: \nJMSMessage class: jms_text \nJMSType: null \nJMSDeliveryMode: 2 \nJMSExpiration: 0 \nJMSPriority: 4 \nJMSMessageID: ID:7d556c1e25e710d25a44d203110a134f0000000000000001 \nJMSTimestamp: 1475871699769 \nJMSCorrelationID: null \nJMSDestination: queue://eventqueueDestination.SOA-AppCluster?busName=BPM.IPS-SOA.Bus \nJMSReplyTo: null \nJMSRedelivered: false \nJMSXDeliveryCount: 1 \nJMSIBMSystemMessageID: 2BD73D1D768F047264503589 \nJMSXUserID: uid=deadmin,o=defaultWIMFileBasedRealm \nJMSXAppID: Service Integration Bus \n<?xml version=\"1.0\" encoding=\"UTF-8\"? \n<in:eventmsg xmlns:in=\"http://BPMSOA_StartupInterface/J ... \n\nUsage 5#: UCA is scheduled(Make sure DB Time same to BPM Time) \nKey words: Scheduling task / scheduleTasks \nComment : Trace file when Time Based UCA schedules the execution time. \nSample: \n[10/7/16 13:21:40:078 MST] 00000151 TaskManager  \ncom.lombardisoftware.server.scheduler.TaskManager scheduleTasks ENTRY \n[com.lombardisoftware.server.scheduler.ScheduledTask@5dabbc6f \nscheduledTime: 1475871700066 = Fri Oct 07 13:21:40 MST 2016 \nrepeatString: null \nexecClassName: com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask \narguments: 4.7420f1e5-80f0-46bf-9fb0-26fbbc010498;15;CTA Start UCA \nCTA \n \n&lt;value&gt; \n... \n[10/7/16 13:21:40:090 MST] 00000151 TaskManager 1 \ncom.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 currentTime : \n1475871700079 \n[10/7/16 13:21:40:090 MST] 00000151 TaskManager 1 \ncom.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 currentDbTime : \n1475896900000 \n[10/7/16 13:21:40:090 MST] 00000151 TaskManager 1 \ncom.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 scheduledTime before \nadjustment: 1475871700066 = Fri Oct 07 13:21:40 MST 2016 \n[10/7/16 13:21:40:090 MST] 00000151 TaskManager 1 \ncom.lombardisoftware.server.scheduler.TaskManager adjustTaskTimes *** JR43099 scheduledTime after \nadjustment: 1475896899987 = Fri Oct 07 20:21:39 MST 2016 \n... \n[10/7/16 13:21:40:093 MST] 00000151 TaskManager 1 \ncom.lombardisoftware.server.scheduler.TaskManager scheduleTaskChunk Scheduling task \nTask_Id = 109704 \ncom.lombardisoftware.server.scheduler.ScheduledTask@5dabbc6f \nscheduledTime: 1475896899987 = Fri Oct 07 20:21:39 MST 2016 \nrepeatString: null \nexecClassName: com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask \narguments: 4.7420f1e5-80f0-46bf-9fb0-26fbbc010498;15;CTA Start UCA \nCTA \n \n&lt;value&gt; \n... \n[10/7/16 13:21:40:131 MST] 00000151 TaskManager < \ncom.lombardisoftware.server.scheduler.TaskManager scheduleTasks RETURN 1 \n\nUsage 6#: UCA is executing \nKey words: CWLLG0194I / Executing TASK_ID\nSample: \n[4/19/17 14:03:25:021 CST] 000015a2 Engine        1 com.lombardisoftware.server.scheduler.Engine execute CWLLG0194I: Execution of task Execute UCA TonyUCA, triggered by invokeUCA is beginning. \n[4/19/17 14:03:25:021 CST] 000015a2 Engine        1 com.lombardisoftware.server.scheduler.Engine execute  Executing TASK_ID = 638 \n[4/19/17 14:03:25:021 CST] 000015a2 UcaExecutorTa 1 com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask execute Invoking UCA UCA.0ddf859f-d703-4984-a9bc-89bd2ae2b886 with reason  \n  FCI_C \n   \n    &lt;variable type=\"String\"&gt;&lt;![CDATA[000]]&gt;&lt;/variable&gt; \n   \n \n[4/19/17 14:03:25:021 CST] 000015a2 clientinfoplu 3   preInvoke(executeUCA) \n[4/19/17 14:03:25:022 CST] 000015a2 EventMgrCore   com.lombardisoftware.server.ejb.eventmgr.EventMgrCore executeUCA ENTRY id = UCA.0ddf859f-d703-4984-a9bc-89bd2ae2b886, xmlReason =  \n  FCI_C \n   \n    &lt;variable type=\"String\"&gt;&lt;![CDATA[000]]&gt;&lt;/variable&gt; \n   \n \n\nUsage 7#: UCA is executed successfully or fails \nKey words: CWLLG0202I / CWLLG0204I / CWLLG0203E / Successfully executed task\nUndercover Agent job succeeded / Undercover Agent job failed \nSample:\n[10/7/16 13:23:41:043 MST] 000558b2 wle_scheduler 1 com.lombardisoftware.server.scheduler.Engine \nnotifyListeners CWLLG0202I: When notifying listeners of task 1,124, the following task execution \nlog string was generated: Successfully executed task 'Execute UCA UCA - sinstring - Event, \ntriggered directly (1124, com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask): start \ndelay = 2.0 sec, execution time = 0.54 sec. \n\n[10/7/16 13:23:42:077 MST] 00558b2 wle_scheduler 1 com.lombardisoftware.server.scheduler.Engine \nnotifyListeners CWLLG0204I: Undercover Agent job succeeded. Task 1,124 job details are: \nclass=com.lombardisoftware.server.scheduler.tasks.UcaExecutorTask parameters=[4.0d6a7a19-dec8- \n4420-8c4e-60c71f3a4e3c;27;UCA - sinstring - Event] \n\n[10/7/16 13:23:42:077 MST] 0000004c CWLLG0203E: Undercover Agent job failed. Task 18542 job \ndetails are: class=com.lombardisoftware.bpd.runtime.engine.quartz.DbNotificationBpdTask \nparameters=[1234;654321] \n\nUsage 8#: SME is linked to start new BPD instance in same thread \nKey words: doStartBPD / BPDExecutionContext / createToken \nComment : Trace file when SME receives event from UCA and starts. \nSample:\n//Linking the UCA to the start event of the BPD in the same thread \n[6/30/17 18:47:00:151 AEST] 000558b2 wle_engine 1 \ncom.lombardisoftware.server.ejb.bpd.BPDEngineServicesCore doStartBPD BEGIN: doStartBPD(), bpdId = \nBPD.558bf025-049f-48dc-ac58-4373d869d7d7, name = IBM L2 - test SME with UCA - sinstring, \nstartEventId = BPDObjectIdImpl(bpdid:0574f2181bf4aeec:-484d2df6:13b3e1187dd:-7fc3) \n//Executing the instance created from the start message event (SME) \n[6/30/17 18:47:00:154 AEST] 000558b2 wle 1 \ncom.lombardisoftware.bpd.runtime.engine.BPDExecutionContext BPDExecutionContext BEGIN: \nconstuctor(), instanceId = BpmnInstanceId(958), diagramId = Ref[/BPD.558bf025-049f-48dc-ac58- \n4373d869d7d7], startObjectId=BPDObjectIdImpl(bpdid:0574f2181bf4aeec:-484d2df6:13b3e1187dd:-7fc3), \nstartLaneOwnerId = 9 \n//Creating the BPMN token for the instance \n[6/30/17 18:47:00:155 AEST] 000558b2 wle 1 \ncom.lombardisoftware.bpd.runtime.engine.BPDNetState createToken END: createToken(), result = \nBPDToken(bpdInstanceId=BpmnInstanceId(958), tokenId=0, locationId = \nBPDObjectIdImpl(bpdid:0574f2181bf4aeec:-484d2df6:13b3e1187dd:-7fc3)) \n//Execution context saving for this instance. \n[6/30/17 18:47:00:155 AEST] 000558b2 wle 1 \ncom.lombardisoftware.bpd.runtime.engine.js.BPDTWSystemBPDScriptable setBpdExecutionContext BEGIN: \nsetBpdExecutionContext(), bpdExecutionContext =  \n \n \nBPD.558bf025-049f-48dc-ac58-4373d869d7d7 \nIBM L2 - test SME with UCA - sinstring \n \n \n-1 \n \n \n \nBpmnInstanceId(958) \n0 \nBPDObjectIdImpl(bpdid:0574f2181bf4aeec:-484d2df6:13b3e1187dd:- \n7fc3) \n \n \n \n \n \nbpdid:0574f2181bf4aeec:-484d2df6:13b3e1187dd:-7fe9 \n9 \n \n \n \n \n \n\nUsage 9#: Message is stored if Durable Subscription is checked in IME definition \nKey words: DurableMessageCheckTask \nComment: Trace file when Message stored for Durable Subscription. \nSample:\n[6/30/17 18:46:59:992 AEST] 00000194 Engine كcom.lombardisoftware.server.scheduler.Engine \nloadTasksIfOwnerInternal loaded task: com.lombardisoftware.server.scheduler.FullTask@c912518f \ntaskId: 507 \nscheduledTime: 1498812419914 = Fri Jun 30 18:46:59 AEST 2017 \ndbScheduledTime: 1498812419992 = Fri Jun 30 18:46:59 AEST 2017 \nexecuteTime: 1498812419992 = Fri Jun 30 18:46:59 AEST 2017 \ndbExecuteTime: 1498812419992 = Fri Jun 30 18:46:59 AEST 2017 \ndiscriminator: 295 \nrepeatString: null \ndescription: Check For Durable Message Waiters for message 442381631502 \nblackedOut: false \nblackoutCalendarId: 1 \nblackoutBehavior: BlackoutBehavior(2, EXECUTEONEAFTER_BLACKOUT) \nqueueId: -101 \nexecClassName: com.lombardisoftware.bpd.runtime.engine.message.DurableMessageCheckTask \narguments:  \n \n \n<![CDATA[0481112330]] \n<![CDATA[I am who I am!]] \n \n \n&lt;cv cpi=\"2055.e27b3233-e57b-42ac-ad5c-ec000c2122c8\" \ntype=\"String\"&gt;&lt;![CDATA[938912399]]&gt;&lt;/cv&gt; \n \n \ninClosingTransaction: false \nreExecuteCount: 0 \nkeywords: List start \nmsg.id.442381631502 \nList end \n\nUsage 10#: Event is received by IME, including IME name & parameter \nKey words: BPD Event ID: / Event Type: 3 / Finished parsing event \nComment: Trace file when IME receives Message. \nSample:\n[6/30/17 18:47:00:117 AEST] 00002bd8 \nBPDEngine فcom.lombardisoftware.bpd.runtime.engine.BPDEngine \nprocessNotificationRegardlessStatus processNotification(), treeNode = Step (IME) \n[6/30/17 18:47:00:117 AEST] 00002bd8 FlowObjectExe 1 \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode doWork \ncanExecutePreAssignments = true \n[6/30/17 18:47:00:117 AEST] 00002bd8 FlowObjectExe 1 \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode doWork \ncanExecuteAttachedEvents = true \n[6/30/17 18:47:00:117 AEST] 00002bd8 MessageEventW 1 \ncom.lombardisoftware.bpd.component.flowcomponent.event.worker.MessageEventWorkerHelper \nprocessIntermediateAction processIntermediateMessageAction(...) state is 1 \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca ف Event actionType:1, actionSubType:0 \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca ف BpmnId: \nBPDObjectIdImpl(bpdid:6bad0ab0745abd48:3dff7ae:15caa7a2583:-7fa8) \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 BPD Event ID: BpdEvent.0273b4d2-8b39- \n44b5-94cf-96864773361c \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 Name: IME \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 Event Type: 3 \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 Action Type: 1 \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 Action SubType: 0 \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 Event ucaRef: Ref[/UCA.b951d712-595a- \n4700-9845-d29cc60dff5e] \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 SCA Service Identigier: null \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 SCA Service MessageObject: null \n[6/30/17 18:47:00:117 AEST] 00002bd8 wle_sca 1 \n<<<<<<<<<<<<<<<<<<<<< Finished parsing event <<<<<<<<<<<<<<<<<<< \n[6/30/17 18:47:00:117 AEST] 00002bd8 MessageEventW 1 \ncom.lombardisoftware.bpd.component.flowcomponent.event.worker.MessageEventWorkerHelper \nassignOutputValues Assigning value of output parameter name = message, value = I am who I am! to \ntw.local.message \n[6/30/17 18:47:00:117 AEST] 00002bd8 MessageEventW 1 \ncom.lombardisoftware.bpd.component.flowcomponent.event.worker.MessageEventWorkerHelper \nassignOutputValues Assigning value of output parameter name = key, value = 0481112330 to \ntw.local.key \n\nUsage  11#: IME execution is done (must be POST instead of PRE) \nKey words: fireEvent / Flow Object: Event IME (POST) / INTERMEDIATION_TYPE\nComment: Trace file when IME completes successfully. \nSample:\n[6/30/17 18:47:00:133 AEST] 00002bd8 FlowObjectExe  \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode fireEvent ENTRY \n[6/30/17 18:47:00:133 AEST] 00002bd8 FlowObjectExe 1 \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode fireEvent Flow Object: Event \nIME (POST) \n[6/30/17 18:47:00:133 AEST] 00002bd8 FlowObjectExe 1 \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode fireEvent Event type: \nINTERMEDIATE_TYPE \n[6/30/17 18:47:00:133 AEST] 00002bd8 FlowObjectExe 1 \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode fireEvent FlowObject IME has 1 \nevent action(s). \n[6/30/17 18:47:00:148 AEST] 00002bd8 FlowObjectExe < \ncom.lombardisoftware.bpd.runtime.engine.FlowObjectExecutionTreeNode fireEvent RETURN \n\nReference\n\nCollect troubleshooting data for UCA problems in IBM Business Process Manager \nhttp://www-01.ibm.com/support/docview.wss?uid=swg21660915 \n\nWhat are the expected log entries in BPM when using a UCA to start a process https://developer.ibm.com/answers/questions/168562/what-are-the-expected-logentries-in-bpm-when-usin.html \n\nWhen the exception \"CWLLG0203E:Undercover Agent job failed\" occurs, what do the parameters mean in the exception stack \nhttps://developer.ibm.com/answers/questions/165834/an-exception-cwllg0203eoccured-while-running-an-u.html \n\nCommon steps to resolving issues with undercover agents in IBM Business Process Manager \nhttp://www-01.ibm.com/support/docview.wss?uid=swg27041883 \n\n Common Scenario: \n\nHere is how InvokeUCA triggers an IME.  \n1.Make sure EM is running &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 1#) \n2.InvokeUCA starts correctly &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 2#) \n3.JMS Message is triggered &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 3#) \n4.JMS Message is received by EM &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 4#) \n5.UCA is scheduled &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 5#) \n6.UCA is executing &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 6#) \n7.UCA is executed successfully &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 7#) \n8.Event is received by IME &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 10#) \n9.IME execution is done &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Usage 11#) \n\nSQL to check BPM status in DB \n\n1.Get BPM configuration file TeamWorksConfiguration.running.xml: \n\"profiles/$bpmnode/config/cells/$cellname/nodes/$nodename/servers/$servername/process-center(server)\" \n \n2.Run the following queries: \n2.1) \nselect EXECUTIONSTATUS, count(*) cnt from lswbpdinstance group by EXECUTIONSTATUS \n2.2) \nselect count(*) from lsw_task \n2.3) \nselect count(*) from lswepvvar_value \n2.4) \nselect * from lswemtask \n2.4) do not run this query if 2.3 return big number, run it after cleanup the EPV var value history for this case. \nselect * from ( \nselect distinct epvVarVal.EPVVARID, epvVarVal.EPVVARVALUE_ID, \ncase \nwhen epvVarVal.reason is null and epvVarVal.value is null then 0 \nwhen epvVarVal.reason is null and epvVarVal.value is not null then length(epvVarVal.value) \nwhen epvVarVal.reason is not null and epvVarVal.value is null then length(epvVarVal.reason) \nelse length(epvVarVal.value) + length(epvVarVal.reason) end as lob_len, \nepvVarVal.EFFECTIVE_ON \nfrom lswepvvar_value epvVarVal \norder by lob_len desc \n) where rownum < 50\n2.5) \nselect taskstatus, count(*) cnt from lswemtask group by taskstatus \n2.6) \nselect TASKSTATUS, count(*) as cnt from lswemtask group by TASKSTATUS order by cnt desc \n2.7) \nselect TASKEXECUTIONCLASS, count(*) as cnt from lswemtask group by TASKEXECUTIONCLASS order by cnt desc \n2.8) \nselect TASKEXECUTIONCLASS, TASKSTATUS, count(*) as cnt from lswemtask group by TASKEXECUTIONCLASS, TASKSTATUS order by cnt desc \n2.9) \nselect count(*) from LSWEMTASK where taskid in (select taskid from lswemtask_keywords where keyword = 'retryLimitExceeded') \n2.10) \nselect count(*) from lsw_favorite\n2.11) \nselect count(*) from lswusrxref \n2.12) \nselect count(*) from lswusrgrp_xref\n2.13) \nselect count(*) from lswusrgrpmemxref \n2.14) \nselect count(*) from lswgrpgrpmemexploded_xref \n2.15) \nselect ISACTIVE, count(*) from lswsnapshot group by IS_ACTIVE \n\n \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Process Admin Console","description":"shangjin@cn.ibm.com;shyuan@cn.ibm.com","owner":"@Jin Shang,@Yuan Shang","path":"/BusinessProcessManager/StandardRuntime/ProcessAdminConsole","text":"Date:2019-11-1\n\nOverview\nThe Process Admin Console provides configuration and management approaches for the process server in BPM environment. \n\nThe Process Admin Console provides functionality to manage BPM users, as well as the queues and caches for particular server. The console also provides tools to configure the installed applications.  \n\nTo work with the Process Admin Console: \n\nUse the Server Admin page to perform server administration tasks and view status information for process instances and applications. \nUse the Process Inspector page to view and manage process instances for process applications. \nUse the Installed Apps page to view and manage snapshots of installed process applications. \n\n Prerequisites\n\nComponent \n\n1.Server Admin\n\nWhen the Process Admin Console starts, it displays the Server Admin capabilities. You can perform server administration tasks, user and group management, process and event monitoring in this area. Use the WebSphere command-line administration tool (wsadmin) AdminConfig commands to change the access restriction or grant access to additional users to the listed menu. \n\n2.Process Inspector\n\nUse Process Inspector to view and manage process instances for process applications that are running on a specific process server. You can use Process Inspector to investigate and resolve runtime problems with process instances.  \n\nThe Process Inspector provides information about events and processes across your entire system-including information about such things as general metadata, current activities, timers, message events, orphaned tokens, and the status of tasks. In addition to viewing the detailed activity information about process instances, you can also interactively perform certain troubleshooting and maintenance tasks. For example, from the Process Inspector display, you can delete a process instance, or restart a group of failed process instances. \n\nHere are some typical activities administrator and task owners can perform on Process Inspector.  \n\nDelete Process Instances\nDeletes a completed, failed, or suspended process instance on a non-production server. The delete action is not available on production servers. After a process instance is deleted, the row is gone and can be recovered only by using a backup. There is no way to revive a deleted process instance.\n\nDelete Orphaned Tokens\nDeletes orphaned tokens from the process instance to allow processing to continue. \nOrphan tokens occur when an instance migrates from one snapshot to another and there is an activity in the old snapshot that contains a token but the activity does not exist in the new snapshot. Deleting orphaned tokens does not recover the orphaned tokens, but allows the process to resume so that the remaining process tokens can proceed. \n\nManage Process Instances\nEdit Data section, change Due Date, Resume, Retry failed steps, Suspend the active instances, and Terminate failed or suspended instances.  \n\n** All of the actions above regarding to process instances can be done by bulk processing. \n\nManage Runtime Activity Actions\nActions include ‘Disable’, ‘Start’, and ‘Enable’ to change the state. \n\nManage Tasks\nAssign tasks to a user, remove the assignment, Edit Data section, Priority, and Due Date,\n\n** Only the task owner or a member of the task owner's team can view and modify task data. By default, members of the BPM security group can act on the associated process instance.  \n\nAdministering Process with Process Inspector  \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/tadmprocinspector.html\n\n3.Installed Apps\n\nThe Installed Apps area provides capabilities to administer and configure runtime settings for application snapshots that are installed on a Process Server. \n\n Troubleshooting \n\nData Collection\n\n1.To trace the problems that are specific to user and group management issues, below trace string should be enabled on application server: \n\n=info:WLE.=all \n\n2.To trace the problems that are specific to process inspector, below trace string should be enabled on application server: \n\n=info:com.ibm.bpm.wle.query.=all:com.ibm.bpm.wle.util.=all:com.ibm.bpm.rest.=all \n\nIf the results shown on Inspector is not expected or different from what is captured from DB directly, the following database trace is also appropriate.  \n=info: WLE.=all: WAS.clientinfopluslogging=all \n\nSometimes we also need to enable Fiddler trace and Instrumentation logs to assist the troubleshooting.\n\n3.If the issue is related to user not able to see expected menus in Server Admin console, collect the following data. \n\n1)SystemOut.log file \n2)Outcome of below command: \nwsadmin -conntype NONE -lang jython -f \\util\\Security\\BPMSecurityConfig_sample.py -E  -g  \nThe console value can be found in the 'Properties' column of Table 2 in link https://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/csecconfigproperties.htmlcsecconfigproperties_pac \nFor example: \nwsadmin -conntype NONE -lang jython -f C:\\IBM\\BPM\\v8.6\\util\\Security\\BPMSecurityConfig_sample.py -E ProcessCenter -g console.manage.caches \n3)For the user who cannot access certain control panels, execute below command in IE and collect the output. \nhttp://[server]:[port]/rest/bpm/wle/v1/user/[userName]?parts=all \nFor example: \nhttp://localhost:9080/rest/bpm/wle/v1/user/deadmin?parts=all \n\nData Analysis \n\n1.For troubleshooting the issue related to user not able to see expected menus in Process Admin Console, compare the outputs of commands mentioned in 3 in Data Collection section. The output of wsadmin likes below. \nC:\\IBM\\BPM\\v8.6\\binwsadmin -conntype NONE -lang jython -f C:\\IBM\\BPM\\v8.6\\util\\Security\\BPMSecurityConfig_sample.py -E ProcessCenter -g console.manage.caches \nWASX7357I: By request, this scripting client is not connected to any server process. Certain configuration and application operations will be available in local mode. \nWASX7303I: The following options are passed to the scripting environment and are available as arguments that are stored in the argv variable: \"[-E, ProcessCenter, -g, console.manage.caches]\" \n\nCurrent value for property console.manage.caches in DE ProcessCenter is: \nconstraint 0 : tw_admins \n\nAbove outcome indicates the Manage Caches menu is only visible for group tw_admins. \n\nThen check the membership definitions in the REST result. The result should contain below definition if the user wants to see the menu. \ntw_admins \n\nOtherwise, customer should change the access restriction and grant proper access to the user by using wsadmin AdminConfig command as described in below article. \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.admin.doc/topics/csecconfig_properties.html \n\n2.Two typical issues occurred on Process Inspector are \n\n&nbsp;&nbsp;&nbsp;&nbsp;a.We see unexpected results at the search panel.  \n&nbsp;&nbsp;&nbsp;&nbsp;b.Overall search behavior is very slow (performance)  \n\nWe see unexpected results at the search panel.  \n\nFor example, client searched and clicked the task data of a specific user task at Inspector.  However, nothing can be displayed, and a pop-up window showed the following exception: \nCWTBG0019E: Unexpected exception during execution. Exception \ninformation: 'For input string: \"null \n\nFirstly, we could check the server logs and ffdc to see what happened.  \n\nKeywords: createProcessInstanceCompleteDetails, updateTaskTypes, and getResponseData \nThese errors also occurred in the logs \n[7/6/14 15:45:34:769 SGT] 00000144 BaseProcessIn E    \ncom.ibm.processinspector.rest.ProcessAdminRestException \n at \ncom.ibm.processinspector.rest.BaseProcessInspectorRestAPI.getRes \nponseData(BaseProcessInspectorRestAPI.java:762) \n at \ncom.ibm.processinspector.rest.BaseProcessInspectorRestAPI.update \nTaskTypes(BaseProcessInspectorRestAPI.java:589) \n at \ncom.ibm.processinspector.rest.BaseProcessInspectorRestAPI.create \nProcessInstanceCompleteDetails(BaseProcessInspectorRestAPI.java: \n393) \n at \ncom.ibm.processinspector.rest.ProcessInstanceSearchAPIImpl.getPr \nocessInstanceCompleteDetails(ProcessInstanceSearchAPIImpl.java:1 \n388) \n at \ncom.ibm.processinspector.server.handlers.ProcessInstanceDetailsH \nandler.handleRequest(ProcessInstanceDetailsHandler.java:63) \n at \ncom.ibm.processinspector.server.BPMInspectorRestFacade.doGet(BPM \nInspectorRestFacade.java:124) \n \n\nAnd the following stack \n[7/6/14 15:46:00:205 SGT] 00000144 RestHelper    W   Invalid \nUUID string  'null' \njava.lang.IllegalArgumentException:  Invalid UUID string 'null' \n at com.lombardisoftware.core.TWUUID.invalid(TWUUID.java:131) \n at com.lombardisoftware.core.TWUUID.fromString(TWUUID.java:47) \n at \ncom.lombardisoftware.client.persistence.common.ID$UUID.(ID \n.java:198) \n at \ncom.lombardisoftware.client.persistence.common.ID.get(ID.java:24 \n1) \n at \ncom.ibm.bpm.rest.internal.impl.WLE75InternalAPIImpl.findVersioni \nngContextAndServiceById(WLE75InternalAPIImpl.java:805) \n at \ncom.ibm.bpm.rest.internal.impl.WLE75InternalAPIImpl.findServiceB \nyId(WLE75InternalAPIImpl.java:789) \n at \ncom.ibm.bpm.rest.impl.service.ServiceModelResource.getServiceMod \nel(ServiceModelResource.java:107) \n\nBased on the stack above, we need to understand why a UUID type value was given an invalid string null value, while our code is trying to get this data for display.     \n\nWe could try to check the BPD in problem and verify whether it’s expected to see this ‘invalid string value’.  \n\nBut we checked with client and understood that this was not an internal call and it’s an external activity, and they cannot provide us the information on BPD details.  Therefore, we suggested client to enable the fiddler trace as well as the REST API trace, and the following HTTP URL request could be seen in the browser's web console or fiddle logs: \nhttps://:/rest/bpm/wle/v1/process/null \n\nThis request illustrated that this issue can be either caused by the external client which sent this request OR our product code which is used to parse the incoming request.  \n\nOverall search behavior is very slow (performance)  \n\nThe performance issue of Inspector always contributes to a quite large number of cases we handled.  Many of them might be caused by the large number of existing instance/tasks data, some of them are led by the imperfect database queries designed by our product, and a few of them are related to how a specific database vendor like DB2 or Oracle handle the complicated or nested SQL clauses.  \n\nFor a complicated Inspector performance issue, we will need to check the send and response time layer by layer including the database activities, web browser, and server.  \n\nBrowser → Server → Database → Server → Browser  \n\nFor example, if a client made a customized search on Process Inspector and it took more than 30s or longer to display the results Or it might get stuck at the loading page.  \n\nDB:  \nWe could firstly suggest client to enable the database trace, and see how it took at DB side to get the response back.  \nIf the time elapsed at DB side has already occupied most of the time, then we will need to focus on the question what took DB such a long time to give the response.      \nIt’s recommended for client to query their total number records of some key tables in BPMDB, especially for LSWBPDINSTANCE, and LSW_TASK.     \nAlso, try to locate the most expensive SQL query from DB trace or client’s DBA can also provide the Oracle AWR and SYSIBMADMIN.TOPDYNSQL view as reference.  \n\nSERVER: \nThe issues happened at server side may vary, we will need to check the server log exception to determine what kind of server issue it could be.  \n\nBROWSER: \nIf the response time at DB and server sides look good for us, we will need to enable Fiddler trace or sometimes network trace to diagnose the performance issue only occurred at browser side.  \n\nBest Practice for Ultimate Process Inspector Performance  \n&nbsp;&nbsp;&nbsp;&nbsp;-  Delete completed Process Instances \n&nbsp;&nbsp;&nbsp;&nbsp;-  Delete Closed Tasks  \n(Detailed information on instance & tasks cleanup can be found at our Chapter ‘Housekeeping’) \n\nReference \n\nCollect troubleshooting data for problems with the Process Admin Console in IBM Business Process Manager (BPM) \nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-problems-process-admin-console-ibm-business-process-manager-bpm \n\nReading and decoding instrumentation files for WebSphere Lombardi Edition (WLE), and IBM Business Process Manager (BPM) products \nhttps://www.ibm.com/support/pages/reading-and-decoding-instrumentation-files-websphere-lombardi-edition-wle-and-ibm-business-process-manager-bpm-products \n\n \n \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Document Store & ECM Integration","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/BusinessProcessManager/StandardRuntime/DocumentStore&ECMIntegration","text":"Date:2019-11-12\n\nOverview \n\nIn IBM Business Process Manager (BPM), you can work with documents on an Enterprise Content Management (ECM) server in a business process. The ECM server where the documents are stored can be any of the following: \nBPM document store \nAn external ECM server \n\nThe BPM document store is a Content Management Interoperability Services (CMIS) embedded document repository that uses FileNet to store documents in BPM version 8.5.5.0 and later. BPM also provides capability to directly interact with an external ECM server such as IBM FileNet P8 to store the documents. You can create, edit, and work with documents on the ECM server using documents coach views or content integration in a service. \n\nThe document store functionality is provided by the below enterprise applications: \n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    IBM BPM CMIS SingleCluster\n  \n  \n    IBM BPM DocStoreAdmin SingleCluster\n  \n  \n    IBM BPM DoccumentStore SingleCluster\n  \n\nPrerequisites \n\nThe IBM FileNet P8 platform offers enterprise-level capability to access and manage all forms of content. Below topic introduces the architecture overview of FileNet P8 platform. \nhttps://www.ibm.com/support/knowledgecenter/SSNW2F_5.5.0/com.ibm.p8.sysoverview.doc/p8sov083.htm \n\nYou should add the Content Management (SYSCM) toolkit to your dependencies, if it has not been added as you will need access to the ECM types. To add this toolkit dependency, select + beside TOOLKITS. In the Add dependency menu, select the Content Management toolkit version you require. \n\n Terms and Key Points  \n\nTerms  \n\nIBM Filenet P8 - An IBM propduct and group of products for enterprise content management  \nhttps://www.ibm.com/support/knowledgecenter/SSNW2F5.5.0/com.ibm.p8toc.doc/welcomep8.htm\n\nFileNet P8 architecture  \nhttps://www.ibm.com/support/knowledgecenter/SSNW2F_5.5.0/com.ibm.p8.sysoverview.doc/p8sov083.htm\n\nECM (Enterprise Content Management)  \nA component of Filenet P8. Also a general term or concept to describe an enterprise content and document management system.  \n\nFileNet P8 baseline architecture  \nhttps://www.ibm.com/support/knowledgecenter/SSNW2F_5.5.0/com.ibm.p8.sysoverview.doc/p8sov154.htm  \n  \nCPE (Content Platform Engine) - A component of Filenet P8, a Java EE applicaiton server that provides content services and process services  \nhttps://www.ibm.com/support/knowledgecenter/SSNW2F_5.5.0/com.ibm.p8.sysoverview.doc/p8sov108.htm  \n  \nICN (IBM Content Navigator) - A web client for viewing IBM content repositories.  \nhttps://www.ibm.com/support/knowledgecenter/SSNW2F_5.5.0/com.ibm.p8.sysoverview.doc/p8sov143.htm  \n\nIBM Case Manager - An IBM product for creating a case management system. IBM Case Manager requires Filenet P8 content and process services.  \nCase Manager includes Case Manager Client and Case Manager Builder  \n  \nIBM Case Manager architecture overview  \nhttps://www.ibm.com/support/knowledgecenter/SSCTJ4_5.2.0/com.ibm.casemgmt.installing.doc/acmpi003.htm  \n\n Key Points  \n  \nIBM FileNet P8, IBM Content Manager Enterprise Edition, and IBM Content Manager OnDemand are 3 examples of IBM repositories.  \nAn example of a third-party reposiotry is Documentum Content Server.  \nECM is a general concept and also the name for a component of Filenet P8.  \nCPE has \"business processes\" or \"workflows,\" so BAW and Filenet P8 have some overlapping functionality and terminology.  \nBAW has internal and external options for CPE and ICN.  \nCP4A has more integration, with Case Manager supporting BAW process applications.  \n\nComponent \n\n1.Documents Coach Views \nTo store a document, use one of the document coach views. The type of documents that you want to work with determines which of the following coach views you can use: \nBPM Documents: BPM Document List view \nExternal ECM documents: Document Explorer view or ECM Document List view \n\nFrom these views, you can retrieve a set of documents from an ECM server, display a selected document, and store documents. The way that you configure the document coach view determines how the view behaves in the process.  \n\nHow to create, update and view documents from BPM document store \nhttps://www.youtube.com/watch?v=VQhh__rwwDk \n\n2.Content Integration \nThe heritage human service and integration service supply Content Integration node to integrate with BPM document store or an external ECM server. If you are working with an external ECM system rather than BPM document store, you should add the Enterprise Content Management Server in Process App Settings before configuring content integration node in service. Refer to below topic on knowledge center for details of content integration configuration. \n\nIBM Business Process Manager 8.6.0 - Integrating with an ECM system or an IBM BPM store \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/tecmbldintegrationsrv.html \n\n3.ACCE Console \nUse the ACCE Console (IBM Administration Console for Content Platform Engine) to administer objects, such as folders and documents, in the embedded document store that is available in BPM. \nhttps://myserver.example.com:9443/acce\n\n4.EmbeddedECMTechnicalUser \nThe EmbeddedECMTechnicalUser role defaults to the deployment environment administrator, which is used by BPM to access ECM with administrator privileges. Check the authentication alias assigned to the EmbeddedECMTechnicalUser role in Servers  Deployment Environments  myDEname  Authentication aliases. Note the alias name that is used for the EmbeddedECMTechnicalUser role. \n\n5.Content Engine Startup Context (Ping Page) \nYou can verify that the embedded Content Platform Engine deployment by accessing the Content Platform Engine Startup Context (Ping Page) - http://server:port/FileNet/Engine. For example: http://localhost:9080/FileNet/Engine. \n\nTo access the page, you should map the deployment environment administrator to the IBMBPMDocumentStore application in Integrated Solutions Console. \n\n Troubleshooting \n\nData Collection\n\n1.To trace the problems that are specific to ECM/document store issues, below trace string should be enabled on application server: \n\n=info:WLE.=all:com.ibm.bpm.embeddedecm.=all:com.ibm.bpm.integration.=all:com.ibm.bpm.auth.=all:WAS.clientinfopluslogging=all:com.lombardisoftware.component.ecmconnector.=all \n2.Collect below data after reproducing the issue. \n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)The entire server logs directory from the BPM node profile(s): \n\"/$installroot/profiles/$bpmnode/logs/\" \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)For document store issue, collect the p8servererror.log and p8servertrace.log files in the FileNet directory from the BPM node profiles(s): \n\"/$installroot/profiles/$bpmnode/FileNet/$bpm_server\" \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)BPM configuration file TeamWorksConfiguration.running.xml: \n\"profiles/$bpmnode/config/cells/$cellname/nodes/$nodename/servers/$servername/process-center(server)\" \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)The .twx file for the process application as well as the service name in question. \n\n3.Collect the outcome of the getDocumentStoreStatus command to obtain the status of the BPM document store and the IBMBPMDocumentStore application. Example: AdminTask.getDocumentStoreStatus('[-deName myDeName]’) \nReference link: \n\nIBM Business Process Manager 8.6.0 - getDocumentStoreStatus command \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.ref.doc/topics/rrefgetdocstorestatus.html \n\n Data Analysis \n\nThe following trace snippets present the normal behavior of document store operations. Use the key word to review traces so that you can understand in which procedure the case error happens. \n\n1.Key words:  \nECMConnection \ngetEmbeddedECMConnection\n\nUsage: \nEstablish connection with ECM server. \n\nSample:  \n[9/15/19 20:20:33:233 IST] 0001fe21 ECMConnection  com.ibm.bpm.integration.runtime.ECMConnection getEmbeddedECMConnection ENTRY \n[9/15/19 20:20:33:233 IST] 0001fe21 ECMConnection < com.ibm.bpm.integration.runtime.ECMConnection getEmbeddedECMConnection RETURN com.ibm.bpm.integration.runtime.ECMConnection@d8164bed  \n\n2.Key words:\nDocumentStore \nmapECMPropertiesToLocalDocument\n\nUsage: \nRead ECM properties of document. \n\nSample:  \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore  com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument ENTRY com.lombardisoftware.data.Document@dc3bc820 [PropertyImpl [objectTypeId=IBMBPMDocumentProcessInstanceId, values=[-1]], PropertyImpl [objectTypeId=IBMBPMDocumentFileNameURL, values=[TextFile1.log]], PropertyImpl [objectTypeId=IBMBPMDocumentFileType, values=[FILE]], PropertyImpl [objectTypeId=IBMBPMDocumentUserId, values=[9]], PropertyImpl [objectTypeId=IBMBPMDocumentHideInPortal, values=[false]]] \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore 3 com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument Setting bpdInstanceId to -1 \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore 3 com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument Setting fileName to TextFile_1.log \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore 3 com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument Setting fileType to FILE \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore 3 com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument Setting author to [UserInfo id=User.9 fullname=null username=null userState=null data=null lastLoginTime=null] \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore 3 com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument Setting hideInPortal to false \n[9/15/19 20:20:33:248 IST] 0001fe21 DocumentStore < com.ibm.bpm.integration.runtime.DocumentStoreUtils mapECMPropertiesToLocalDocument RETURN \n\n3.Key word: \nBPMDocumentUt\n\nUsage: \nIndicates the document operation and the corresponding document ID in ECM server. \n\nSample:   \n[9/15/19 20:20:33:264 IST] 0001fe21 BPMDocumentUt  com.ibm.bpm.embeddedecm.documents.BPMDocumentUtils createDocument ENTRY 5 5 TestFile1.log 9 -1 false null TextFile1.log FILE {} true java.io.ByteArrayInputStream@76a5fd3e null TextFile_1.log false \n[9/15/19 20:20:33:530 IST] 0001fe21 BPMDocumentUt < com.ibm.bpm.embeddedecm.documents.BPMDocumentUtils createDocument RETURN CreateDocumentResult(id=idd6067356D-0000-CE18-A9DB-CACB613E4437, versionSeriesId=idv6067356D-0000-C313-9C12-3B9696B4A451, version=1) \n\n4.Key word: \nECMIntegratio \ngetDocument\n\nUsage: \nIndicate the Get Document operation implementation procedure in Content Integration node. \n\nSample:   \n[9/15/19 21:16:36:020 IST] 00025136 ECMIntegratio  com.ibm.bpm.integration.runtime.ECMIntegrationServices getDocument ENTRY ExecutionStack(ExecutionJob(worker(com.lombardisoftware.component.ecmconnector.worker.ECMConnectorWorker@3d3138bc), processItemId = ProcessItem.b678352b-a338-4fc8-a460-95a0add79984, processTiming = N, saveExecutionContextBehaviour = EXECUTIONCONTEXTDONOTSAVE)), SymbolTable(SymbolTable(...)), sharedData = null EMBEDDEDECMSERVER {6067356D-0000-CE18-A9DB-CACB613E4437} \n[9/15/19 21:16:36:098 IST] 00025136 ECMIntegratio < com.ibm.bpm.integration.runtime.ECMIntegrationServices getDocument RETURN DocumentImpl [objectId=idd6067356D-0000-CE18-A9DB-CACB613E4437, objectTypeId=IBMBPMDocument, name=TestFile1.log, checkinComment=null, contentFileName=TextFile_1.log, contentLength=5577, contentMimeType=application/octet-stream, createdBy=deadmin,… \n\nReference\n\n1.Collect troubleshooting data for BPM document store or ECM problems in IBM Business Process Manager (BPM) and IBM Business Automation Workflow (BAW) \nhttps://www.ibm.com/support/pages/collect-troubleshooting-data-bpm-document-store-or-ecm-problems-ibm-business-process-manager-bpm-and-ibm-business-automation-workflow-baw \n\n2.Troubleshooting interactions with Enterprise Content Management systems \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS8.6.0/com.ibm.wbpm.wle.editor.doc/topics/recmtrouble.html \n\n3.Limitations in working with IBM BPM documents \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.wle.editor.doc/topics/tbpmdoclimits.html \n\n4.Limitations in administering the IBM BPM document store \nhttps://www.ibm.com/support/knowledgecenter/SSFPJS_8.6.0/com.ibm.wbpm.admin.doc/topics/tbpmconfiglimits.html \n\n5.Why am I unable to connect to the IBM BPM Document Store and my Event Manager is not starting correctly? \nhttps://developer.ibm.com/answers/questions/202074/why-is-am-i-unable-to-connect-to-the-ibm-bpm-docum/ \n\n6.How to recover if my BPM Event Manager won't start because Embedded ECM initialization fails? \nhttps://developer.ibm.com/answers/questions/260551/how-to-recover-if-my-bpm-event-manager-wont-start.html?sort=votes \n\n \n \n\n \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Acronyms list","description":"ELEBRAS@jp.ibm.com","owner":"@Erwan Le Bras","path":"/OperationalDecisionManager/GeneralODM/Acronymslist","text":"Date:2019-12-04\n\nOverview \n\nThis is a list of common acronyms used with IBM Operational Decision Manager (ODM). \nThis list is relevant to all the other topics for ODM. \nSome acronyms are very specific to the product itself, while others are more generic ones. \n\n Acronyms specific to this product: \n\nODM: Operational Decision Manager\nThe name of the product \n\nDC: Decision Center\nDecision Center is a set of tools to allow business users to author, model, and manage decisions that are directly based on organizational knowledge and best practices, with limited or no dependence on the IT department. Decision Center includes the Business console, the Enterprise console, and a rule repository. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.overview/topics/odmdcenter_overview.html#QRPsg7Mp \n\nDS: Decision Server\nDecision Server provides development and runtime components for any ODM applications. It comprises the Rule Designer and the Rule Execution Server \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.overview/topics/odmdserverrulesoverview.html \n\nRD: Rule Designer \nRule Designer is an Eclipse-based development environment in which you design, author, test, and deploy decision services.  \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutdesignertopics/tutruledesignertutorials.html \n\nRES: Rule Execution Server \nRule Execution Server provides the runtime environment for running and monitoring decision services. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutrestopics/tutres_tutorials.html \n\nXU: Execution Unit \nThe execution unit (XU) is a resource adapter for Java™ EE Connector Architecture (JCA) 1.5 that handles the low-level aspects of ruleset execution and collaborates with the server to manage resources. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/conresexecxu.html \n\nBOM: Business Object Model\nThe BOM is used to make business rule editing user-friendly by providing tools to set up a natural language vocabulary.  https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.designer.author/configauthtopics/tpcrd_bom.html \n\nXOM: Execution Object Model \nThe execution object model (XOM) is the model against which you run rules. It references the application objects and data, and is the base implementation of the business object model (BOM). Rule projects reference the XOM.  \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.designer.author/designingbomtopics/conbom_overview.html \n\nIRL: ILOG Rule Language  \nContains a set of keywords and syntax to structure each part of a rule \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.ref.designer/langirlreftopics/tpcirlintro.html \n\nBAL: Business Action Language \nYou can use Business Action Language (BAL) to define your own business rule language. Rule Designer provides these components in a plug-in.  \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.ref.designer/langarlreftopics/tpcarlintro.html \n\nARL: Advanced Rule Language \nFor each Business Action Language (BAL) expression that you create for BOM-to-XOM mapping in the decision engine, you can review its equivalent Advanced Rule Language (ARL) expression. ARL is a read-only rule language that is similar in syntax to Java 7.  \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.ref.designer/langarlreftopics/tpcarlintro.html \n\nDT: Decision table \nA decisions artifact that allows you to display your rules as a table, with conditions and actions columns. Each row of the table becomes a rule. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/dtables/conbcdtablesoverview.html \n\nAR: Action Rule\nA business rule that can be edited in the rule editor \n\nBRLDF: Business Rule Language Definition Framework \nA framework for defining custom business rule languages, using XML schemas and property files. \n\nBRMS: Business Rule Management System\nA system designed to modify and manage business logic independently from the applications within an organization. \n\nDS: Decision Service\nA decision service contains one or more rule projects. Each rule project contains action rules and decision tables that you update directly. You can easily move among the projects to make changes, and deploy the decision service to a test or production environment. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/mngchanges/conbcds_decisionservices.html \n\nDGF: Decision Governance Framework \nThe decision governance framework is a methodology that provides you with tools to implement changes to your business rules in a structured, secure, and controlled way. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/mngchanges/conbcgovernance.html \n\nDVS: Decision Validation Service \nA feature to test and simulate rulesets in Rule Designer and Decision Center. It was deprecated in V8.8 \n\nXSLT: Extensible Stylesheet Language Transformation\nAn XML processing language that is used to convert an XML document into another document in XML, PDF, HTML, or other format. \n\n&nbsp;\n\nHTDS: Hosted Transparent Decision Service\n&nbsp;\n\nMore widely used acronyms (industry related) \nWAS: WebSphere Application Server \nAn Application Server that is frequently used to host ODM applications \n\nJDK: Java Development Kit \nThe JDK is a development environment for building applications, applets, and components using the Java programming language. \n\nKPI: Key Performance Indicator \nA quantifiable measure that is designed to track one of the critical success factors of a business process. \n\nJVM: Java Virtual Machine \nA Java virtual machine (JVM) is a virtual machine that enables a computer to run Java programs as well as programs written in other languages that are also compiled to Java bytecode. \n\nJCA: Java™ Connector Architecture \nJava EE Connector Architecture (JCA) is a Java-based tool for connecting application servers and enterprise information systems (EIS) as part of enterprise application integration (EAI) solutions \n\nDSRs: Detailed System Requirements. \nA list of operating systems, prerequisites, server virtualization environments, translations, end-of-service information, and system requirements for using a product. \nFor ODM, please consult https://www.ibm.com/support/pages/ibm-operational-decision-manager-detailed-system-requirements \n\nWSDL: Web Service Description Language \n\nWADL: Web Application Description Language \n\nREST: Representational State Transfer  \n\nURIs: Uniform Resource Identifiers \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Learning Roadmap","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/GeneralODM/Learningroadmap","text":"Date:2019-12-16\n\nProduct Overview \n\nIBM Operational Decision Manager (ODM) provides a comprehensive decision management environment. The following figure shows the components that ODM provides for decision service development, rule management and authoring, and the execution environment.\n\nIntelligent decision automation for business agility\nODM extract decisions from application code, which helps manage decisions separately from business applications, and with more flexibility and responsiveness to the changing needs of the business\n\nAutomated decision-making\nDecision Server (DS) provides the runtime and development components to automate the response of highly variable decisions that are based on the specific context of a process, transaction, or interaction. \nRule Designer (RD) is an Eclipse-based development environment in which you can develop and integrate decision services. \nRule Execution Server (RES) provides the runtime environment for running and monitoring decision services.\n\nDecision management and governance \nDecision Center (DC) is a scalable decision management application and repository with collaborative web environments for authoring, managing, validating, and deploying business rules. With Decision Center, business users can manage decisions that are directly based on organizational knowledge and best practices with limited dependence on the IT department.\n\nInsight that supports business decisions\nDecision Server Insights (DSI) identifies risk and opportunity on a continuous basis and helps applications to decide and act at the precise moment the business needs it.\nNote: DSI is going to be discontinued. No more new DSI customers. \n\nAcronym List\nODM&nbsp;&nbsp;&nbsp;&nbsp;\tIBM Operational Decision Manager\nDC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tDecision Center\nDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tDecision Server\nDSI&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;;&nbsp;Decision Server Insights\nRD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tRule Designer\nRES&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;;&nbsp;Rule Execution Server\nWAS&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;WebSphere Application Server\nXU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tExecution Unit\n\nHands-on tutorials\n\nIn the knowledge center, you can find various tutorials introducing key features of ODM. You are recommended to walk through the getting started tutorials first. \n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"40%\" style=\"text-align:center;\"Task\n    Resource\n  \n  \n    Where to download the software?\n    Extreme Leverage:https://w3-03.ibm.com/software/xl/download/ticket.wss\n  \n  \n    Installing ODM using Installation Manager \n    https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tskinstsingleworkstation.html\n  \n  \n    Complete getting started tutorial\n    https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutgstopics/odmdserverrulesgs.html\n  \n  \n   \n    Complete getting started tutorial for Decision Center\n    https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.tutorials/tutorialstopics/odmdcenterbututint.html\n  \n    \n    Complete getting started tutorial with Decision Modeling\n  https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.tutorials/tutorialstopics/odmdcmod_int.html\n  \n    \n    Complete Rule Designer tutorials in depth\n    https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutdesignertopics/tutruledesignertutorials.html\n  \n    \n    Complete RES tutorials \n    https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutrestopics/tutres_tutorials.html\n  \n    \n    Complete Decision Center tutorials\n    https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter/topics/odmdcenter.html\n  \n    \n    Create Decision Center manually on WAS \n    https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.config.was/configdcwebsphere/condc_was.html\n  \n    \n    Create RES manually on WAS\n    https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.config.was/configdsreswas/conreswas.html\n  \n\nRecommended Badges\n\nIBM Operational Decision Manager V8.10 Developer\nIBM Operational Decision Manager Standard V8.9 Business Analyst\nIBM Operational Decision Manager Standard V8.9.2 Developer\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Skills Transfer","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/GeneralODM/SkillsTransfer","text":"Date:2019-12-27\n\nGetting to know Digital Business Automation (DBA) Series\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"40%\" style=\"text-align:center;\";Topic\n    Links\n    <th width=\"20%\" style=\"text-align:center\"Date\n  \n  \n    Getting to know Digital Business Automation (DBA) - ODM, BAI, and Datacap\n    https://ec.yourlearning.ibm.com/w3/playback/10039706\n    2019-07\n  \n\n&nbsp;\n\nODM Skill Transfer Education Sessions for New Releases\nhttps://ibm.ent.box.com/folder/70085006198\n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"40%\" style=\"text-align:center;\";Topic\n    Links\n    <th width=\"20%\" style=\"text-align:center\"Date\n  \n  \n    ODM 8.10.3 (Kuma) skill transfer for L2, L3 and service\n    PresentationRecording\n    2019-12\n  \n   \n    ODM 8.10.2 (Jordan) skill transfer for L2, L3 and service\n    PresentationRecording\n    2019-06\n  \n   \n    ODM 8.10.1 (Iota) skill transfer for L2, L3 and service\n    PresentationRecording\n    2019-03\n  \n   \n    ODM 8.10 (Helios) skill transfer for technical sales\n    Presentation and Recording\n    2018-12\n  \n\n&nbsp;\n\nBusiness Automation Insights (BAI) skill transfer\nBAI Training Materials by Xiaoming Zhang\n\n Decision Server Insights (DSI) L2 training\nDSI presentations for L2 by Xiaoming Zhang\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Knowledge Buckets","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/GeneralODM/Knowledgebuckets","text":"Date:2019-12-26\n\nUseful Support Tools\n\n1.Using Castle for ODM:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Using customer data on Castle with ODM: https://w3-connections.ibm.com/wikis/home?lang=en-us!/wiki/Wf0025e79110845e387df_9a521822f4db/page/Using%20customer%20data%20on%20Castle%20with%20ODM\n&nbsp;&nbsp;&nbsp;&nbsp;b. Using Stencils\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)ODM Stencil: Now there are ODM 8.8.1.3 to ODM 8.10.2 stencils in Castle.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Database Stencil: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf0025e79110845e387df_9a521822f4db/page/Using%20Stencils\n\n2.Documents to do Blue Diamond cases: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf0025e79110845e387df_9a521822f4db/page/Process%20for%20raising%20internal%20SF%20cases%20against%20other%20IBM%20products%20for%20ODM\n\n3.Tools to check source code: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf0025e79110845e387df_9a521822f4db/page/Researching%20a%20file%20in%20the%20product\n\n4.Repository for ODM related files: http://jules2.francelab.fr.ibm.com:8081/nexus/#welcome\n\nUseful Documents\n\n1.How to create APAR: https://w3-connections.ibm.com/wikis/home?lang=en-us!/wiki/Wf0025e79110845e387df_9a521822f4db/page/APAR\n2.eCustomer care contact information: https://www-112.ibm.com/software/howtobuy/passportadvantage/paocustomer/docs/enUS/ecareap.html\n3.LDAP configuration: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.tutorials/tutorialstopics/odmbcldaptutint.html\n4.How Software life cycle: https://www.ibm.com/support/home/pages/lifecycle/?from=websphere\n5.ODM on Docker: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W5196b8aad00b4444abff_23526484d404/page/ODM%20on%20Docker\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Installation","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/Install,Upgrade,Migration/Installation","text":"Date：2019-11-11\n\nOverview\n\nThis document introduces how to install Operational Decision Manager (ODM) and how to troubleshoot the problems that may happen during the installation.\n\nTo use ODM, you must install Decision Center, Decision Server and Rule Designer, and if you want to install Decision Insights, you must have an Advanced License.\n\n Prerequisites (Optional)\n\n1.Installation Manager: The Installation Manager should be installed first.\n2.System requirements: Please check IBM Operational Decision Manager detailed system requirements\nhttps://www.ibm.com/support/pages/ibm-operational-decision-manager-detailed-system-requirements\n3.License: You need to have an ODM license to install ODM. The license table is below\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/coninst_licensing.html\n\nNote: For other ODM versions, please check Knowledge Center (KC).\n\nComponent\n\n1.Install ODM locally\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tskinstsingleworkstation.html\n2.Install ODM in multiple workstation\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/coninst_silent.html\n3.Install Designer with an existing Eclipse environment\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tskinsteclipseibmprod_intro.html\n4.Install Liberty Developer Tools\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tskinstinsightswdt.html\n5.Set up Ant\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tsksettingupant.html\n\nNote: For other ODM versions, please check Knowledge Center (KC).\n\n Troubleshooting\n\nData Collection\n\n1.Version of Installation Manager installed\n2.Components installed and version numbers\n3.License type\n4.Operating system\n5.Installation Manager logs\nhttps://www.ibm.com/support/pages/mustgather-ibm-installation-manager-troubleshooting-logs\n\n Typical Problems\n\n1.Compatibility problems\nProblem description example: Can I use Java 7/8 when upgrade to ODM 8.x.x? Upgrade path from current version to JBoss. \nHow to troubleshoot: Check the System Requirements carefully\n  Application Server Compatibility: For JBoss, only EAP version is supported.\n  Java Compatibility: IBM JDK is always recommended.\n  \nRefer to https://www.ibm.com/support/pages/ibm-operational-decision-manager-detailed-system-requirements\n\n2.Fix list and fix pack download & installation:\nProblem description example: What the steps to install fix pack? Where can I get fixpack of ODM 8.X.X?\nSolution: Go to Fix Central and download the fixpack. Then install them by Readme.txt file of each fixpack. Customer may have problem about their IBM ID. Fix List link:\nhttps://www.ibm.com/support/pages/fix-list-ibm-operational-decision-manager\n\n3.Disk space problem\nProblem description: Available disk space at /opt is insufficient. Total required space is 1.92 GB. Total available space is 120.00 MB.\nSolution: Ensure there is enough space on disk.\n\n4.Sample Server related\nProblem Description: How to find the installation part of Sample Server when install ODM? How to run Sample Server with WAS or Liberty? How to restore Sample Server?\nSolution:\n  Install Sample Server: When you install ODM, choose install Sample Server, a testing environment to use samples and tutorials will be installed. Along with all the sample projects.\n  Restore Sample Server: You can restore the sample server to its initial state, the link is:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.samples/smpconsoletopics/trbsmpserver_restoring.html\n\n5.License Question:\nProblem description: How to check license of installed ODM? How to change ODM license without re-installation?\nSolution:\n  How to check the License of installed ODM Environment: Using ILMT Tools\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/coninstilmttagging.html\n  How to update the license type of installed ODM Env:\nhttps://www.ibm.com/mysupport/s/question/0D50z00005pewI0CAI/ibm-license-metric-tool-reports-odm-decision-server-as-being-nonproduction?language=zh_CN\n\n6.Problem with compressed product installation files:\nProblem Description: Cannot complete the install because one or more required items could not be found in software being installed。\nSolution: Ask customer to check that all compressed installation packages were uncompressed successfully. The best practice is asking customer to using 7-zip to unzip the installation files.\n\n7.Privilege problem\nProblem description: Cannot install ODM as non-root/non-Administrator user\nSolution:\n  Make sure IM is installed as a non-Admin user: https://www.ibm.com/support/knowledgecenter/SSSH279.0.0/com.ibm.rational.clearcase.ccmsinstall.doc/topics/radmin_nonadmin.htm;\n  Make sure the user has read/write permission to ODM installation directory and system temp folder;\n  Install ODM using IM as non-Admin user: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tskinst_silent.html\n  \n8.Response File error during silent installation\nProblem description: Example:  ERROR [main]                                                   org.eclipse.equinox.log.internal.ExtendedLogReaderServiceFactory safeLogged \nSolution: Ensure set correct parameters when installing ODM in silent mode: https://developer.ibm.com/answers/questions/424515/how-to-install-odm-890-in-silent-mode-in-command-l.html\n\nReference (Optional)\n\n1.Known limitations:\n2.https://www.ibm.com/support/pages/operational-decision-manager-known-limitations\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Upgrade","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/Install,Upgrade,Migration/Upgrade","text":"ODM Upgrade and Migration\nDate:2019-11-12\n\n Overview\n\nIBM Operational Decision Manager (ODM) version numbers uses standard IBM format V.R.M.F which stands for Version.Release.Modification.Fixpack. \nModification and fix packs include only bug fixes. Applying a modification or a fix pack does not require to migrate application code or data. Always encourage client to upgrade to the latest modification or fix pack to avoid the risk of encountering defects already fixed. \nRecommend client to migrate to the latest available version or release to benefit from the latest added features and improvements. \n\nPrerequisites \n\nODM download document: \nhttps://www.ibm.com/support/pages/operational-decision-manager-download-documents\n\nODM detailed system requirements:\nhttps://www.ibm.com/support/pages/ibm-operational-decision-manager-detailed-system-requirements\n\nODM product lifecycle:\nhttps://www-01.ibm.com/software/support/lifecycleapp/PLCDetail.wss?from=spf&synkey=W468400M91086O68\n\n Upgrade\n\nTechnote: When and how to apply a modification or fix pack\nhttps://www.ibm.com/support/pages/when-and-how-apply-modification-or-fix-pack\n\nApplying a modification or fix pack does not require any data migration, so the rule projects and database remain the same. It only requires to:\n\n1.Install the modification or fix pack using Installation Manager\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tskinst_updates.html\n\nThe fix pack installation updates the following files and folders:\n  JAR libraries in the installation directories, including \\\\lib.\n  EAR and WAR applications in the \\\\applicationservers\\ folders.\n  \n2.Reapply product customizations to the up-to-date EAR and WAR applications (If there’s any)\n\n3.Redeploy the up-to-date version of EAR and WAR applications\nUpdate RES:\n  jrules-res-xu-.rar\n  jrules-res-management-.ear\n  jrules-ssp-.ear\n  jrules-res-htds-.ear\n  \nUpdate Decision Center:\n  jrules-teamserver-.ear\n  \n4.Repackage client applications with the up-to-date jar libraries \n\nRolling upgrade:\nTo upgrade Decision Server Rules and Decision Center from Vn to Vn+1 while keeping the existing system running, you can upgrade the system gradually, component by component.\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/sharedrollingupgtopics/tskupgodm.html\n\nOnce upgrade is complete, recommend client to verify that all the modules are at the same exact version/fix pack level, see https://www.ibm.com/support/pages/find-version-jruleswodm-components \n\nMigration\n\nBefore migration, check out\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.\tVerify that the old configuration is still supported. Migrating to a more recent version of ODM may require moving to a different version of platform, application server, database or JDK\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/pages/ibm-operational-decision-manager-detailed-system-requirements\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.\tLatest added features. Check in KC for the “What’s new” section for the specific versions\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.overview/sharedwhatsnewtopics/conwhats_new.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.\tDeprecated and removed features\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.overview/shareddeprecation/condeprecatedfeatures.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.\tDecide the migration scenario\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/topics/conmigration_overview.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.\tMigration guide for the specific version\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/topics/odmdistrib_migrating.html\n\nTypical steps for ODM migration\n\n1.Customizations \nMigrate rule model extensions, authoring & rule management extensions:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/topics/tskmigrate_customizations.html\n2.Eclipse projects\nImport and clean build the existing projects in the new version of Rule Designer:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/odmtopics/tskmigrateeclipse_projects.html\n3.Database data\nDC database migration is mandatory when migrating from version prior to v8.6. For version 8.6 and later, the database schema is fully compatible with the latest versions. But schema migration is still required if user wants to use the latest features, like user management (v8.8.1) and Decision Model Service (v8.10)\nMigrate Decision Center database:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/dcbctopics/tskodmdistribmigratedb.html\n4.Client applications\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.\tre-build client application with the new ODM client libraries\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.\tfix any deprecated warnings (possibly errors, if migrating across several versions) to use the new APIs\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.\trepackage the applications with your up-to-date classes and the new ODM libraries\n\nOnce the migration is performed, recommend client to verify\n  all the modules are at the same exact version/fix pack level, see https://www.ibm.com/support/pages/find-version-jruleswodm-components \n  they can see the data in the consoles without issue\n  they can run the Rule Execution Server/Decision Center console diagnostics without errors.\n\n Troubleshooting\n\nData Collection\n\nWhen there is a problem after upgrade/migration, firstly we need to confirm the exact version of each ODM module/component. ODM does not provide a command for version check. User has to verify the version of each module/component. \n1.Check installed software versions (incl. fix packs /iFixes) in Installation Manager\nFrom IM GUI: \nFile  Installed Packages \nCommand line: \n imcl listInstalledPackages\nNote, upgrade installed with IM does not guarantee the ODM applications have been deployed/updated in the application server.\n\n2.Check version of running ODM modules\nRule Designer: \nHelp  About Eclipse SDK, click the “IBM” button\nDecision Center: \nIn the console, click “About” on the top-right of any page\nRule Execution Server: \n  For the console version, click “About” on the top-right of any page\n  For the XU versions, go to tab “Server Info”\nHTDS:  \nopen page http://hostname:port/DecisionService\nDVS/Decision Runner:  \nopen page http://hostname:port/testing (login as RES admin)\n  \n3.Check interim fix level\nInterim fixes typically replace jar files. IFxxx is part of the file name. You can find interim fixes in running ODM applications by \"grep\" ping WAS-Profile-Dir/installedApps for files with \"-IF0\"\n\n4.Check installed EAR/JAR versions\n\nSometimes client may want to find out the exact version of an ODM EAR file or JAR file before upgrade. Check out the content of  \\Meta-INF\\MANIFEST.MF file in the archive. For example, Decision Center 8.9.2 shows:\nSpecification-Title: Decision Server\nSpecification-Vendor: IBM\nSpecification-Version: 8.9.2 \n\nTypical problems after upgrade or migration.\n\nIssue1 \nWrong class loading sequence \n\nIf you redeploy the RES/DC EAR file, the module properties are lost. WebSphere Application Server reverts to the default parent first setting\n\nSymptom:\nUnable to open RES console due to below error:\nError 500: com.ibm.ws.jsp.JspCoreException: Unable to convert string 'ilog.rules.res.console.jsf.OnlineHelp' to class javax.el.ValueExpression for attribute basename: java.lang.IllegalArgumentException: Property Editor not registered with the PropertyEditorManager\nOr\nUnable to open Decision Center Enterprise console due to below error:\nError message: ServletWrappe E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0014E: Uncaught service() exception root cause /login.jsp: com.ibm.websphere.servlet.error.ServletErrorReport: com.ibm.ws.jsp.JspCoreException: Unable to convert string '#{ManagerBean.localeStr}' to class javax.el.ValueExpression for attribute locale: java.lang.IllegalArgumentException: Property Editor not registered with the PropertyEditorManager\nResolving the Problem\nUsually the problem can be resolved by setting the class loading policy of the web modules to “parent last”\nSometimes it will require to clear the WAS cache and restart server: \ndelete \n\\profiles\\\\temp\\\\\\.\nIssue#2\nUpgrade is not effective\n\nClient may complain that a problem still persists after they have installed a fix pack/iFix which is supposed to fix the issue. \n\nSymptom\n Client has successfully installed a fix pack using Installation Manager, but the problem persists in Decision Center or Rule Execution Server.\n\nResolving the Problem\nUser has to make sure the up-to-date DC and RES EAR/WAR files are re-deployed to the application server.  Confirm the exact version from the about page in the Consoles:\nhttps://www.ibm.com/support/pages/find-version-jruleswodm-components\n\nSometimes the re-deployment is not effective until the application server cache is cleaned. For example, for WAS user needs to delete the temp cache and restart:\n\\profiles\\\\temp\\\\\\.\nIssue#3\nClass incompatibility issue\n\nSymptom\nFail to run ant task after upgrade, due to a “local class incompatible” error. Something like:\njava.io.InvalidClassException: ilog.rules.teamserver.model.IlrSessionContext; local class incompatible: stream classdesc serialVersionUID = 8625926335332160807, local class serialVersionUID = 8906827035412667122\nor\njava.io.InvalidClassException: ilog.rules.teamserver.model.impl.IlrElementHandleImpl; local class incompatible: stream classdesc ser\nialVersionUID = 8906827035412667122, local class serialVersionUID = 8532662047765799322\nResolving the Problem\nThis is due to an incompatibility between the local Decision Center libraries and the Decision Center EAR deployed on the server. User has to make sure they have upgraded both to the same version. \nSimilar error can happen to Rule Execution Server too. \n\nIssue#4\nExecution Unit (XU) Client version mismatch\n\nSymptom\nA warning is received in XU log: \"The XU client does not have the same version as the XU: 8.9.1.0 / 8.9.2.0\"\n\nResolving the Problem\nThis warning message indicates a version mismatch between the Client and the XU. User can confirm the XU version by checking the Server Info tab of RES console. \nThe Client can be any of the RES libraries packaged in client application, depending on which invocation method is used. User has to make sure to repackage client applications with the up-to-date jar libraries \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"ODM Profile Template","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/Install,Upgrade,Migration/ODM Profile Template","text":"Date：2019-12-27\n\nOverview\n\nODM provides WAS profile templates to facilitate the configuration of Decision Server and Decision Center. \n\n Prerequisites\n\nManaging WAS profiles using command or GUI:\nhttps://www.ibm.com/support/knowledgecenter/en/SSEQTP9.0.5/com.ibm.websphere.base.doc/ae/tproprofiles.html\n\nComponent\n\n1.Install Profile Template\n\nIf  directory is specified during the initial installation in IBM Installation Manager, the profile templates are installed to both  and \n\nFor ODM v8.9.x and ODM v8.10.x, the profile templates folders are\n`/shared/profiles/profileTemplates/odm\n/profileTemplates/odm`\n\nFor older ODM versions prior to v8.9, the profile templates folders are \n`/shared/profiles/profileTemplates/rules\n/profileTemplates/rules`\n\nIf  directory is not specified during the initial installation, you must copy the folders from  to .\n\n2.Configuring servers by using profile templates and scripts\n\nThe detailed commands and instructions can be a little different for different ODM versions. Carefully read the documentation for the specified ODM version before the installation. \n\nCreate the databases for Rule Execution Server and Decision Center\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.config.was/topics/conwas_db.html\nConfiguring on a stand-alone profile\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.was/topics/conwas_profile.html\nConfiguring on a clustered environment\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.was/topics/conwas_clusters.html\n\n3.Install fixpack\n\nUpgrade the profile template using Installation Manager.\nCurrently there is no script available for fixpack or ifix installation. When you need to upgrade, follow the Equivalent manual steps to redeploy the updated EARs. Therefore, it is still important to understand the manual steps although profile template is the recommend approach to configure ODM on WAS.\nThe R&D has already started working on a serviceability item to provide scripts for upgrading profiles in future release:RTC serviceability  item 124427 \n\n Troubleshooting\n\nData Collection\n\nIn case of profile creation or augmentation failure, request for manageprofile logs which is located at:\n`/logs/manageprofiles//\n_create.log or _augment.log`\n\nSearch for “WASX” in the log files to locate the detailed error message (refer to issue 1 for details).\n\nTypical Issues\n\n1.Profile creation failed due to “wsadmin task failed with return code: 105”\n\nAnswer:\nThis “return code: 105” is rather a general error message. There are usually more detailed WAS error messages in the format of “WASXxxxxE” (for example: WASX7017E)\n\nTo better determine the exact cause, request for \n_create.log or _augment.log under /logs/manageprofiles/\nThe entire folder of /logs/manageprofiles//\n \nSearch for “WASX” in the log files to locate the detailed error message. There could be various causes. Examine the detailed error message to determine the root cause. \n\nFor example, you may find below error message in \\\\rules.configure_all.ant.wsadmin.log: \nWASX7017E: Exception received while running file \"C:\\IBM\\WebSphere\\AppServer\\profileTemplates\\rules\\actions\\scripts\\was\\configure_all.py\";      \nexception information: com.ibm.ws.scripting.ScriptingException:         \nWASX7108E: Invalid data specified for install task: \"MapWebModToVH.\" \nErrors are: \"ADMA0010E: Validation error in task Selecting virtual hosts for Web modules. A virtual host is not specified for web module decisioncenter-api with URI decisioncenter-api.war,WEB-INF/web.xml\nIt is because the decisioncenter-api is a new module introduced in ODM v8.9.1. This error could happen when the user is using the profile template of an older version prior to v8.9.1. Make sure to upgrade the profile template and ODM product to the same version using Installation Manager. If the  directory is not specified during the initial installation, you must copy the folders from /shared/profiles/profileTemplates/odm to /profileTemplates/odm\n\nAnother common error is\nWASX7017E: Exception received while running file                        \n\"C:\\Apps\\IBM\\WebSphere\\AppServer\\profileTemplates\\rules\\actions\\scripts\\was\\configure_all.py\"; exception information:                           \ncom.ibm.websphere.management.exception.ConfigServiceException           \ncom.ibm.websphere.management.exception.AdminException                   \njava.lang.UnsupportedClassVersionError:                                 \njava.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version;  class=com/ibm/rules/res/xu/spi/internal/XUResourceAdapter, offset=6  \nThis error indicates JDK version 6 used is incompatible. Note, the output of “java -version” command does not imply the manageprofiles command uses the same JDK version. You can run managesdk commands to confirm the default JDK versions used by manageprofiles command:\nmanagesdk -getNewProfileDefault\nmanagesdk -getCommandDefault\n\nIf the JDK version is supported, you can run below command to confirm if the supported JDK version is available:\nmanagesdk -listAvailable\n\nThen you can use the managesdk command to specify a supported JDK version, for example:\nmanagesdk -setCommandDefault -sdkname 1.8_64\nmanagesdk. sh -setNewProfileDefault -sdkName 1.8_64\n\nNote, different ODM versions requires different minimum Java SDK version. For example, ODM v8.10.x requires JDK 1.864 while ODM v8.9.x requires JDK 1.764. \n\nSometimes the error is related to a .py script specific to a particular configuration step. For example, the following exception occurs when creating the Decision Center datasource:\nTraceback (most recent call last):\nFile \"/home/rulesadm/vtt-work-dir/ODMUbuntu64AsUser/distrib/tests/installerTests/target/ivtprereqs/profileTemplates/rules/actions/scripts/was/configuredc_datasource.py\", line 45, in doit\nAdminTask.createAuthDataEntry('[-alias ODMDBAuth -user '+dbUserId+' -password '+dbPassword+' -description \"ODM database authentication data\" ]')\ncom.ibm.ws.scripting.ScriptingException: com.ibm.ws.scripting.ScriptingException: com.ibm.websphere.management.cmdframework.CommandValidationException\ncom.ibm.websphere.management.cmdframework.CommandValidationException: SECJ7813E: A duplicate alias name exists. You must use a unique alias name.\n\n!!!!!!!!!!! ERROR !!!!!!!!!!!!!!\nWASX7017E: Exception received while running file \"/home/rulesadm/vtt-work-dir/ODMUbuntu64AsUser/distrib/tests/installerTests/target/ivtprereqs/profileTemplates/rules/actions/scripts/was/configureall.py\"; exception information: com.ibm.websphere.management.cmdframework.CommandValidationException\ncom.ibm.websphere.management.cmdframework.CommandValidationException: SECJ7813E: A duplicate alias name exists. You must use a unique alias name.\nThe above error is caused by APAR RS03373. For this kind of error, check the specific .py code, search for the error message in RTC/WASTON, and engage L3 if needed. Usually this kind of error does not stop profile creation. You will find the profile is created/augmented except that the datasource is not properly configured. In this case, you can guide the client to manually complete the installation. Refer to Equivalent manual steps.\n\n2.How to roll-back in case of failure?\n\nAnswer:\nYou can unaugment or delete the profile.\nUnaugment Decision Center or Decision Server from existing profile:\nOn Windows: \nmanageprofiles.bat -unaugment -templatePath   -profileName \nOn Linux:\nmanageprofiles&nbsp;.sh -unaugment -templatePath   -profileName \nDelete profile after creation failure:\nOn Windows:\nmanageprofiles.bat -delete -profileName \nOn Linux:\nmanageprofiles&nbsp;.sh -delete -profileName \n\n3.Can I change profile name after I have setup the profile?\n\nAnswer: \nBy design, once when the profile name is setup, you cannot change its profile name. There are many resource dependencies with its profile name during the configuration.\n\n4.Failed to create Decision Center profile due to OutOfMemory error\n\nAnswer:\nBefore augmenting the profile with Decision Center, you will need to increase the allocated heap size for the wsadmin Java process.\nOn Windows, replace with -Xms2048M -Xmx4096M in your %JAVA_EXE% command in \\AppServer\\bin\\wsadmin.bat.\nOn Linux, set the JVMEXTRACMD_ARGS environment variable to \"-Xms2048M -Xmx4096M\"\n\n5.In WAS 9.0, I cannot find ODM profile template in the Profile Management Tool GUI. \n\nAnswer:\nODM no longer provided the PMT plugin(com.ibm.ws.pmt.rules) for WAS 9.0 and therefore users cannot use the PMT GUI tool to create/augment ODM profiles for WAS 9.0.  You can follow the documentation to create/augment ODM profiles using the manageprofiles command.\n\n Reference\n\nAPAR RS03208: WASX7017E WHEN USING PROFILE TEMPLATE SCRIPTS\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Configuring","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/Install,Upgrade,Migration/Configuring","text":"Date:2019-12-27\n\nOverview\n\nAfter having installed ODM, you must configure Rule Execution Server and Decision Center on a supported application server.\n\n Prerequisites \n\nFamiliar with the application server and the database\n\nODM Detailed System Requirement \nhttps://www.ibm.com/support/pages/ibm-operational-decision-manager-detailed-system-requirements\n\nComponent\n\nThe detailed steps could be a little different in different versions. Make sure you refer to the documentation of the correct version. \nConfiguring on Liberty profile\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.wlp/topics/odmdistribconfigwlp.html\n\nConfiguring on Websphere Application Server\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.was/topics/odmdistribconfigwas.html\n\nConfiguring on Tomcat\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.tom/topics/odmdistribconfigtom.html\n\nConfiguring on JBoss\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.jboss/topics/odmdistribconfigjboss.html\n\nConfiguring on Weblogic (deprecated in v8.10)\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.weblo/topics/odmdistribconfigweblo.html\n\nConfiguring on Java SE\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.javase/topics/odmdistribconfigjavase.html\n\n Troubleshooting\n \nThe ODM documentation provides general tips of troubleshooting different application servers.\n\nTroubleshooting on the Liberty profile server: https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/consupporttroubleshootres_wlp.html\n\nTroubleshooting on Websphere Application Server:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/consupporttroubleshootres_was.html\n\nTroubleshooting on Tomcat:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/consupporttroubleshootres_tomcat.html\n\nTroubleshooting on JBoss:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/consupporttroubleshootres_jboss.html\n\nTroubleshooting on Weblogic:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/consupporttroubleshootres_weblo.html\n\nData Collection\n\n1.Exact version of the ODM components used\n2.The Application Server name and version\n3.The JDK used\n4.The database and database driver used \n5.The cluster topology \n6.All Application Server log files \n\n Common issues\n\n1.I have setup a Rule Execution Server cluster, but the XUs on other nodes are not updated after I have deployed a new version of ruleapp. It seems the RES console fails to notify the other XUs.\n\nAnswer:\nBy default, the RES console relies on the JMX MBean to notify the XUs when there’s a ruleapp deployment.  This kind of problem is usually caused by the fact that the resAdmin user does not have sufficient privilege to access the MBeans.  Collect the server logs of the RES console server, usually you can find an error message similar to below:\nADMN0022E - access is denied for the get ruleset path operation on IlrDecisionService MBean because of insufficient or empty credentials.\nTo resolve the problem, you need to map the resAdmin user to the Administrators group of the Application Server, following the configuration documentation. Once done, confirm if you can see all the XUs from the Server Info tab in the RES console. \n\nSometimes the RES console fails to notify the XUs due to version incompatibility. Make sure the RES console and XUs are of the same version. \n\n2.I have several RES instances using the same database, but they are not synchronized as they are not in a cluster. How can I force ruleapp update on all these instances?\n\nAnswer:\nYou can enable the TCP/IP management mode. \nBy default, the RES console cannot manage XUs that handle the execution of Java SE or Java EE rule sessions if these XUs are not running in the same cluster or the same JVM as the RES console. You can change this behavior by configuring the XU to connect to a TCP/IP management server that is started by the RES management EAR file. \nRefer to:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/conresconfigrescons_behavior.html\n\nNote, when you set the protocol to tcpip, both the JMX protocol and the TCP/IP protocol are used. You cannot disable the default JMX management mode.\n\n3.When Decision Center is deployed on Websphere Application Server behind a load balancer or a proxy server, I fail to open the Decision Center console because a wrong port number is directed. \n\nAnswer:\nDecision Center uses request.getServerPort() method to retrieve the port value and set to teamserver.server.port. However in WebSphere Application Server, the getServerPort() method returns the port number from the request URL first instead.\nTo resolve this issue, you must set the trusthostheaderport and the com.ibm.ws.webcontainer.extractHostHeaderPort custom property to true to return the port number from the request host header first. Refer to:\nhttps://developer.ibm.com/answers/questions/167105/issue-with-decision-center-behind-proxy-server-or/\n\n4.\"Transaction timed out after 601 seconds\" error while performing long running operations in Decision Center\n\nAnswer:\nThe transaction time for DC is set to 600 seconds by default, and application servers also have container level transaction timeouts that are configuration. If a transactional operation takes longer than these timeouts to complete, the transaction is rolled back. \nYou can increase the timeout value in the web.xml file of the DC EAR file by changing the value of the property ilog.rules.teamserver.transaction.timeout. Make sure you change the below value in both \njrules-teamserver-.ear\\teamserver.war\\WEB-INF\\web.xml and \njrules-teamserver-.ear\\decisioncenter.war\\WEB-INF\\web.xml\n\n     Modify the timeout value that is associated with transactions (in seconds)\n     ilog.rules.teamserver.transaction.timeout\n     600\nhttps://developer.ibm.com/answers/questions/178160/rule-team-serverdecision-center-is-timing-out-whil-1/\n\n5.Decision Center is deployed behind an IHS reverse proxy. A long running operation (e.g., branch merge, ruleapp deployment) may fail due to error similar to “The server returned the HTTP error 500 with error text \"Internal Server Error\", although the operation seems to succeed on the server side. No error found in the server log. \n\nAnswer:\nThis is mostly likely due to a timeout in the proxy server. There is a ServerIOTimeout parameter which is set by default to 900 seconds in WAS 8 and 9. \nThis parameter can be changed via:\n&nbsp;&nbsp;&nbsp;&nbsp;a. WAS console  Servers  Application Servers    Web server plug-in properties  Read/Write timeout\n&nbsp;&nbsp;&nbsp;&nbsp;b. WAS console  Servers  Web servers  select your-webserver-name  click button \"generate plugin\" and \"propagate plugin\"\n\nIn order to perform time consuming operations for complex rule projects, you may have already increased the transaction timeout. In that case, make sure you have increase the proxy timeout value to a number greater than the transaction timeout value. \n\nIf the problem persists after increasing the ServerIOTimeout value, we may need to collect below mustgather data and engage WASIHS:\n&nbsp;&nbsp;&nbsp;&nbsp;a. set LogLevel debug in httpd.conf, by default LogLevel warn\n&nbsp;&nbsp;&nbsp;&nbsp;b. append below lines in your virtualhost in httpd.conf\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogFormat \"%h %l %u %t \\\"%r\\\" %s %b handler=%{RH}e JVM=%{WAS}e time=%T\" latency\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CustomLog logs/latency_log latency\n&nbsp;&nbsp;&nbsp;&nbsp;c. set LogLevel=\"Trace\" in plugin-cfg.xml, by default LogLevel=\"Error\"\n&nbsp;&nbsp;&nbsp;&nbsp;d. restart IHS webserver\n\nsend us:\nFrom IHS webserver:\n&nbsp;&nbsp;&nbsp;&nbsp;a. httpd.conf, errorlog, accesslog, latency_log\n&nbsp;&nbsp;&nbsp;&nbsp;b. plugin-cfg.xml, http_plugin.log\n\nFrom WAS appserver:\n&nbsp;&nbsp;&nbsp;&nbsp;a. everything from WASprofilename/logs/appserver_name\n&nbsp;&nbsp;&nbsp;&nbsp;b. everything WASprofilename/logs/ffdc\n\n6.Does ODM support Single Sign-On (SSO) authentication? How to configure DC/RES to support SSO?\n\nAnswer:\nBoth Decision Center and Rule Execution Server rely on the underlying Application Server to handle authentication and authorization. An SSO authentication is supported by ODM as long as it is supported by the Application Server. \nRefer to the documentation of the Application Server for detailed instructions of how to configure SSO authentication. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Migration From CRE To DE","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/Install,Upgrade,Migration/Migration From CRE To DE","text":"Date:2019-12-20\n\nOverview\n\nThe IBM Operational Decision Manager (ODM) Classic Rule Engine (CRE) is deprecated in ODM v8.9. Since then the new rule projects in a decision service automatically use the Decision Engine (DE). We recommend that clients migrate their existing projects to use Decision Engine.\n\n Prerequisites\n\nIBM Operational Decision Manager - Executing rulesets\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.designer.run/executingtopics/conexecutingbrules.html\n\nAcronyms\n\n&nbsp;&nbsp;&nbsp;&nbsp;ARL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tAdvanced Rule Language\n&nbsp;&nbsp;&nbsp;&nbsp;CRE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tClassic Rule Engine\n&nbsp;&nbsp;&nbsp;&nbsp;DE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tDecision Engine\n&nbsp;&nbsp;&nbsp;&nbsp;DT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tDecision Tables\n&nbsp;&nbsp;&nbsp;&nbsp;IRL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\tILOG Rule Language\n&nbsp;&nbsp;&nbsp;&nbsp;ODM&nbsp;&nbsp;&nbsp;&nbsp;\tIBM Operational Decision Manager\n\n Components\n\n1.The Decision Engine is designed to optimize the ruleset execution performance. The Decision Engine works in a similar way to the Classic Rule Engine, but there are differences in the compilation and loading of the rules.\n\nRule Designer and Decision Center compiles the rule by default to executable byte code, which almost eliminates the parsing time since ruleset parsing is replaced by directly loading the Java classes (see the 3rd column in the figure below).\n\nHowever, for Decision Center, bytecode generation is activated when XOM management is enabled. If XOM is not available in Decision Center, rules are compiled to intermediate code which requires a final translation into executable byte code at runtime (see the 2nd column in the figure below).\n\nRefer to Decision Engine\n\n2.Understand the limitation of Decision Engine before migration\nDecision Engine does not support some of the features that are supported by the classic rule engine. Refer to Limitations of decision engine\n\n3.Migrating from classic rule engine to decision engine\nIn Rule Designer, switch to use DE by changing the Rule Engine property of the rule project to Decision engine instead of Classic rule engine.\nHowever, moving from CRE to DE is not just a simple switch. CRE relies on ILOG Rule Language (IRL), while DE relies on Advanced Rule Language (ARL).\nWhen switching to DE in Rule Designer, a .b2xa file is created and to BOM to XOM mapping code is migrated to ARL. User defined IRL code is not automatically converted. Any code written in IRL will have to be re-written in ARL. Note, the mapping between API of CRE and of DE is not one-to-one. Refer to Mapping between classic rule engine and decision engine API\nFor details, refer to documentation Migrating from CRE to DE \n\nTroubleshooting\n\n Data Collection\n\nWhen Rule Designer fails to compile a DE project, detailed error message can be found in the Problem view. If compilation failed due to an exception, in most cases the complete stack trace is available in the Error log view. You can activate this view by Window  Show View  Other… General  Error log\n\nWhen a client asks how to migrate certain IRL API to use ARL, request for the complete IRL code to better understand the requirement.\n\nTypical questions and issues\n\n1.Question: \nThe same project compiles perfectly in CRE but fails in DE\nAnswer:\nThis can be expected, because DE compiles the rules to a further state than CRE does. As a result, compiling in DE is more restrictive than compiling in CRE. It is possible that certain errors that will happen in runtime is reported as warning or error during build time in DE.\nFirstly, collect for the exact error message/stack trace to search in Watson support search and RTC. If no similar issue is found, ask client to provide a reproducible sample project.\nSometimes the client may not be skilled enough to build a reproducible sample project and may not want to send the real rule project. In that case you can try to create a small sample rule project based on the client’s code/description. If you cannot reproduce using the small sample, send the project and ask the client to modify your sample to recreate the problem.\n\n2.Question:\nI have migrated my project to use decision engine. But the ruleset loading/parsing time is not obviously improved.\nAnswer: \nIt is possible that the bytecode generation is not enabled, and the rules are only compiled to intermediate code. You can quickly confirm by checking the content of the .dsar file. If the ruleset is compiled to executable byte code, a ruleset.jar file can be found at .dsar\\RULES_ENGINE\\default\\jar\\\nIf you deploy from Rule Designer, make sure the option “Optimize ruleset loading (Java bytecode generation)” is checked.\nIf you deploy from Decision Center, make sure the XOM management is enabled. If XOM is not available in Decision Center and you have to deploy ruleset of intermediate code, you can use the compiled archives cache to limit the bytecode generation to the first execution of a ruleset only. Refer to \nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tskresconfigxu_cacacheprop.html\nNote that the XOM management feature in Decision Center was introduced in v8.7.1.\n\n3.Question:\nWe used to view the compiled IRL content of the ruleset archive from the RES console. But the IRL content is no longer available after having migrated to use decision engine.\nAnswer:\nIt is expected that DE does not generate IRL. But you can choose to generate ARL code by including debug information to the ruleset when required. \nIn Rule Designer, select option Include debugging information for IBM customer support when exporting the ruleset. \nWhen you deploy from the Business console, you review your configuration and specify some settings in a configuration dialog. In this dialog, you can select a check box to include information for debugging purposes, which includes an ARL file in your deployed archive. This check box is available only if you applied the configuration parameter Include debug information for Decision Engine archives from the Enterprise console, and you set its value to true.\nThe generated ARL file can be found at .dsar\\RULES_ENGINE\\default\\debug\\ruleset.arl\n\n4.Question:\nThe result of ruleset execution is different in DE.\nAnswer:\nThis could typically happen when the ruleset contains decision tables (DT) with overlapped conditions, while the execution order of DT rows could be different in CRE and in DE.\nIn DE, a decision table is considered one rule and execution order is always top to bottom. \nOn the other hand, in CRE, a decision table is generated one rule per row and execution order can be different depending on the execution mode. \nIdeally, the correctness of the rule execution should not depend on the execution order of the rules. User may need to refine the design by removing the overlaps.\n\n5.Question:\nDo I have to migrate to Decision Engine when Classic Rule Engine is deprecated? \nAnswer: \nClassic Rule Engine is deprecated in 8.9. This is a signal that it is time to consider switching to Decision Engine.\nSince v8.9, the new rule projects in a decision service automatically use the Decision Engine, but classic rule engine is still supported, and it is still possible to use it in Decision Services. \nMigration to DE is not a simple task especially when the rule projects were originally developed with legacy JRules/ODM versions where a lot of custom IRL and CRE APIs are used. When migrating to a later version of ODM (8.9/8.10), you can first migrate the current code to use the later version, and then gradually migrate the projects to use Decision Service and/or Decision Engine.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Migration From CRP To DS","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/Install,Upgrade,Migration/Migration From CRP To DS","text":"Date:2019-12-27\n\nOverview\n\nIf your classic rule projects meet the prerequisites and use the migration wizard to migrate them to decision services in Rule Designer. You can also use Ant tasks to migrate your projects.\n\n Prerequisites\n\nKnowledge about Rule Designer\n\nComponent\n\n1.Classic rule projects: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.econsole/basics/condc_projects.html\n\n2.Decision Service: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/mngchanges/conbcds_decisionservices.html\n\n3.Classic Rule Projects vs. Decision Service:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Project items:\n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    Classic Rule Projects\n    Decision Service\n  \n  \n    Source folder(rules)\n    Source folder(rules)\n  \n \n    BOM folder(bom)\n    BOM folder(bom)\n  \n  \n    Query folder(queries)\n    Deployment folder(deployment)\n  \n  \n    Resource folder(resources)\n    Query folder(queries)\n  \n  \n    Template folder(templates)\n    Resource folder(resources)\n  \n  \n    \n    Template folder(templates)\n  \n  \n    \n    Reports folder(reports)\n  \n\n&nbsp;&nbsp;&nbsp;&nbsp;b. Deployment method:\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)For Classic Rule Projects: In Rule Designer, use RuleApp Project to deploy; In Enterprise Console, you can create RuleApp and then deploy the ruleApp. Details please refer to Deploying a RuleApp from a RuleApp project and Configure Deployment.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)For Decision Service: In Rule Designer and Business Console, we use operations and deployment configuration to deploy Decision Service to RES, details you can refer to Deploying decision services and Deploying decision services from Decision Center.\n\n&nbsp;&nbsp;&nbsp;&nbsp;c. Setting up a project hierarchy: You can create a hierarchy by establishing dependencies between projects. Use rule project hierarchies to separate and share the rules and the BOM among different projects, especially when your application becomes more complex. Using different rule projects allows for easier maintainability, lets you test different parts of the logic independently, and organize for various decision points. You can then set up the projects to refer to one another.\n\nFor Classic Rule Projects and Decision Service, the project hierarchy is a bit different. With Decision Service, when you create a decision service, you create a main rule project that serves as the top-level project of the rule project hierarchy. With Classic Rule Project, you can create different types of projects in the Classic Rule Project section. Then, you create dependencies between projects. For details please refer to Setting up a project hierarchy.\n\n&nbsp;&nbsp;&nbsp;&nbsp;d. Using Decision Center API: For Classic Rule Project, users can only use Java API to manage rule projects on Decision Center, but for Decision Service, users can use both Java API and REST API to manage it. And due to the deployment difference between Classic Rule Project and Decision Service, the Java API for Classic Rule Project and Decision Service is different, for details please refer to Decision Center API.\n\n4.Ant tools: We need to set up ant first to use ant task migrating projects.  https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/topics/tsksettingupant.html\n\n5.Migrating classic rule projects to decision services: A decision service is the recommended unit of rule management, since it allows for complex decisions that involve several rule projects to be grouped as one entity. \n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Classic rule project needs to meet following requirements:\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)In each rule project, the variables of the ruleset parameters have a verbalization value.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)There is no cyclic project reference between rule projects. For example, if project A refers to project B and project B refers to project C, check that project C does not refer to project A.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)If your rule projects refer to other rule projects, the referenced projects are open.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)When you migrate a decision service, everything in the referenced main classic rule project is migrated.\n\n&nbsp;&nbsp;&nbsp;&nbsp;b. Limitations: \n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Any rule project that you migrate can no longer be used in a classic rule project structure.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)You cannot migrate a rule project contained in a decision service back to a classic rule project.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)You cannot use RuleApp projects to deploy a decision service. You must create and use deployment configurations.\n\n&nbsp;&nbsp;&nbsp;&nbsp;c. Detailed steps please refer to this link.\n\n6.Migrating classic rule projects to decision services with Ant tasks: You can use an Ant task to migrate classic rule projects to decision services directly on Business Console. You can choose to migrate to a simple decision service, or a governed decision service. For details please see following link: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.admin/topics/conadminmigrateprojtods_ant.html\n\nTroubleshooting\n Data Collection\n1.The logs of Rule Designer: You can collect it in /. metadata, it is better to get whole folder.\n2.The logs of Decision Center if you use Ant tasks to migrate: The location depends on Application Servers you are using, take Liberty for example, the location is: /usr/servers//logs. It is better to get whole folder.\n3.ODM version and java version\n4.Detailed problem description, the screenshot. And if needed, having a WebEx with customer to see the issue\n5.If possible, ask for the rule project to reproduce the issue.\n\nTypical steps to diagnose the migration \n1.Ask for all helpful information mentioned in Data Collection part.\n2.Check if there are any errors in the logs. Using Waston support searching tools to check if there are similar issues or known issues.\n3.Engage developers if needed. \n\n Typical issues\n1.Question:\nShould I migrate to Decision Engine first or migrate to Decision Service first?\nAnswer:\nClassic Rule Project is deprecated in 8.8, so it is better for users to migrate to Decision Service. But the answer to these questions depends customer’s environment.\nClassic Rule Project is also supported in latest version, so for customers who still have large number Classic Rule Project in their environment, we suggest them to migrate to Decision Engine first, which can help them improve the execution performance. And then move Classic Rule Projects to Decision Services step by step. \nBut for new projects or for the customer who has few Classic Rule Projects, we recommend them to use Decision Service instead, as in this way they can use the new features like Test and Simulation. And it is more convenient for them to manage the rule projects on Business Console.\n\n2.Question:\nWhat kind of JDK should I use for Decision Service?\nAnswer: \nWe always recommend users to use IBM JDK in their environment to avoid unpredictable problems. So, when you see some strange errors, check the if the JDK is IBM JDK first.\n\n3.Question: \nHow can I see Classic Rule Project on Business Console?\nAnswer:\nCustomer can set the property decisioncenter.web.core.EnableClassicRuleProjectSupport to true in preference.properties file, please see this link for reference.\nBut please note, users can view the Classic Rule Projects on Business Console, but they cannot deploy or manage it on Business Console.\n\nReference\n1.Known APARs:\n&nbsp;&nbsp;&nbsp;&nbsp;a. RS02430: CANNOT EXPORT PROJECT ONCE IT'S BEEN MIGRATED TO A DECISION SERVICE\n&nbsp;&nbsp;&nbsp;&nbsp;b. RS02811\n&nbsp;&nbsp;&nbsp;&nbsp;c. RS03440: MIGRATE CLASSIC TO DECISION SERVICE MISSES IMPORT STATEMENTS.\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Hung thread & high CPU","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/Performance/Hungthread&highCPU","text":"Date:2019-12-17\n\nOverview\n\nThis section describes how to diagnose IBM Operational Decision Manager (ODM) high CPU and hung thread issues.\n\n Prerequisites\n\nKnowledge about Java Virtual Machines (JVM)\nKnowledge about operating system commands\n\nComponents\n\n1.Rule Execution Server (RES): Rule Execution Server provides a reliable and scalable execution environment for your business rule application.\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/conresoverviewintro.html\n\n2.Execution Unit (XU): The Execution Unit is a resource adapter for Java™ EE Connector Architecture (JCA) 1.5. The XU handles the low-level aspects of ruleset execution and collaborates with the server to manage resources.\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/conresexecxu.html\n\n3.Decision Center (DC): With Decision Center, business users can author, model, and manage decisions that are directly based on organizational knowledge and best practices, with limited or no dependence on the IT department.\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.overview/topics/odmdcenter_overview.html\n\n Troubleshooting\n\nData Collection\n\n1.CPU Utilization, disk I/O, network and memory and paging: Using operating-system-specific tools such as perfmon for Windows, or iostator vmstat for Linux and UNIX\n2.For WebSphere Application Server (WAS):\n&nbsp;&nbsp;&nbsp;&nbsp;a. Linux: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-websphere-application-server-linux\n&nbsp;&nbsp;&nbsp;&nbsp;b. Windows: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-windows\n&nbsp;&nbsp;&nbsp;&nbsp;c. AIX: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-websphere-application-server-aix\n&nbsp;&nbsp;&nbsp;&nbsp;d. Solaris: https://www.ibm.com/support/pages/mustgather-performance-hang-or-high-cpu-issues-solaris\n3.For other application servers\n&nbsp;&nbsp;&nbsp;&nbsp;a. Collect application server logs \n&nbsp;&nbsp;&nbsp;&nbsp;b. Collect verboseGC log\n&nbsp;&nbsp;&nbsp;&nbsp;c. Collect java core files\n&nbsp;&nbsp;&nbsp;&nbsp;d. Collect heap dump if needed.\n4.Collect traces: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/trbtuningreslogginglevel.html\n5.Collect XU dumps: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.console/topics/tskresconsresxudebugtrace.html\n\n Data Analysis\n\n1.How to troubleshoot a typical CPU high and hung thread issue: https://ibm.ent.box.com/file/540528960107\n2.If the issue happens in RES, we must do more work. \n&nbsp;&nbsp;&nbsp;&nbsp;a. We need to check XU dump: It is better if we can have XU dump before the issue happens, during the issue happens and after the issue happens.\n&nbsp;&nbsp;&nbsp;&nbsp;b. We need to check XU connection pool size to see if the pool size needs to be adjusted.\n\n&nbsp;&nbsp;&nbsp;&nbsp;c. Sometimes we need to know the method customer used to call rulesets. Then we can find more clues about how XU clients works.\n\nTypical Issues\n\n1.High CPU issue caused by infinite loop\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)We can see in the log the hung thread stack is repeating in thread dump reports. For example:\nat \ncom/ibm/rules/generated/ruleflow/ruleflows/subflows/ratings/USDC$003ePos\ntProcessing$0020Part$00202/BodyExecEnv.executePopulateNoticeURLForCGLBod\ny70(Bytecode PC:25(Compiled Code)) \nat \ncom/ibm/rules/generated/ruleflow/ruleflows/subflows/ratings/USDC$003ePos\ntProcessing$0020Part$00202/BodyExecEnv.$sMethod$4(Bytecode \nPC:127(Compiled Code)) \nat \ncom/ibm/rules/generated/ruleflow/ruleflows/subflows/ratings/USDC$003ePos\ntProcessing$0020Part$00202/BodyExecEnv.executeBodyMethodHook(Bytecode \nPC:127(Compiled Code)) \nat \ncom/ibm/rules/engine/rete/runtime/state/AbstractBodyExecEnv.executeBody(\nAbstractBodyExecEnv.java:82(Compiled Code)) \nat \ncom/ibm/rules/engine/rete/runtime/state/AbstractNetworkState.executeRule\n(AbstractNetworkState.java:204(Compiled Code)) \nat \ncom/ibm/rules/engine/rete/runtime/AbstractReteEngine.executeOneRule(Abst\nractReteEngine.java:468(Compiled Code)) \nat \ncom/ibm/rules/engine/rete/runtime/AbstractReteEngine.execute(AbstractRet\neEngine.java:443(Compiled Code)) \nat \ncom/ibm/rules/engine/rete/runtime/AbstractReteEngine.execute(AbstractRet\neEngine.java:420(Compiled Code)) \nat \ncom/ibm/rules/generated/ruleflow/ruleflows/subflows/ratings/USDC$003ePos\ntProcessing$0020Part$00202/Task.run(Bytecode PC:156)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Diagnose steps:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i.Collect logs, traces and javacores;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii.Collect heap dumps;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iii.Compare several reports of javacores, you will see some thread is always running, and it will use a lot of CPU in the report of CPU usage. Then you can find the stack trace similar to the stack trace above or the stack trace is about ODM classes.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iv.If the infinite loop is caused by the client's ruleflow, suggest this document:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/pages/rete-rules-executing-infinite-loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And then we can suggest to set the property firinglimit to avoid infinite loops.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.designer.dev/orchestratingtopics/tpcorchruletaskexecprop.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.If the infinite loop is caused by ODM code, we need to engage developers to investigate further.\n  \n2.High CPU issue caused by JIT compilation threads:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: Following records can be seen\n3XMTHREADINFO      \"JIT Compilation Thread-3\" J9VMThread:0x0000000000A32D00, omrthread_t:0x00007F3470115C68, java/lang/Thread:0x00000005806B9920, state:R, prio=10\n3XMJAVALTHREAD            (java/lang/Thread getId:0xE, isDaemon:true)\n3XMTHREADINFO1            (native thread ID:0x69, native priority:0xB, native policy:UNKNOWN, vmstate:CW, vm thread flags:0x00000081)\n3XMTHREADINFO2            (native stack address range from:0x00007F344E22E000, to:0x00007F344E32F000, size:0x101000)\n3XMCPUTIME              CPU usage total: 750.137131485 secs, current category=\"JIT\"\n3XMHEAPALLOC             Heap bytes allocated since last GC cycle=0 (0x0)\n3XMTHREADINFO3           No Java callstack associated with this thread\n3XMTHREADINFO3           Native callstack\nb. Diagnose steps:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Check the logs and CPU profiling reports;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Check java cores and heap dumps and find out the most CPU consuming part\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)Check the number of threads associated to JIT compiling, by default it is 4 which could take almost 100 % CPU on a small box of 2 cores.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)Tuning JIT configuration:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;–The JVM supplied with WAS 8.0.0.5 and further versions generates more JIT code than previous versions, which can lead to longer warm-up times and lower throughput.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;–The JIT can take time to compile a large ruleset, but this behavior can be modified by increasing the cache or by limiting the in lining on ODM classes.\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•-Xjit:codeTotal=261072 -XcompilationThreads=1                              Cache size and number compilation threads\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•-Xjit:{ilog/rules/engine/Sequential/generated/*}                              Limit the in lining for one of the ODM package\n\nReference\n\n1.Fix List for IBM Operational Decision Manager\n2.Known APAR: RS03132: POSSIBLE THREAD CONTENTION IN HTDS RESULTING IN HIGH CPU USAGE\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Out of Memory","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/Performance/OOM","text":"Date:2019-12-17\n\nOverview\n\nThis section on IBM Operational Decision Manager (ODM) explains:\nHow to set the Java Virtual Machine (JVM) properties to tune the general performance.\nHow to diagnose memory problems.\n\n Prerequisites\n\n1.Knowledge about Java Garbage Collection (GC) policies\n2.Knowledge about Java memory settings\n\nComponent\n\nOut of memory in Java heap\n  The JVM throws Java out of memory (Java OOM) error if it is not able get more memory in Java heap to allocate more Java objects. The JVM cannot allocate more Java objects if the Java heap is full of live objects and it is not able to expand the Java heap anymore.\nIn this situation, the JVM lets the application decide on what to do after throwing the java.lang.OutOfMemoryError. For example, the application may handle this error and decide to shut itself down in a safe way or decide to run, ignoring this error. If the application does not handle this error, then the thread that throws this error will exit, and you will not see this thread if you take a Java thread dump.\nOut of memory in native heap \n  The JVM throws native out of memory (native OOM) if it is not able to get any more native memory. This usually happens when the process reaches the process size limitation on that OS or the machine runs out of RAM and swap space.\nWhen this happens, the JVM handles the native OOM condition, logs a message saying that it ran out of native memory or unable to acquire memory and exits. If the JVM or any other loaded module (like libc or a third party module) does not handle this native OOM situation, then the OS will send a sigabort signal to the JVM which will make the JVM exit. Usually, the JVMs will generate a core file when it gets a sigabort signal.\nIBM GC policy\n  Garbage collection policies:\n    Part 1: https://www.ibm.com/developerworks/java/library/j-ibmjava2/\n    Part 2: https://www.ibm.com/developerworks/java/library/j-ibmjava3/\n  WAS GC policies:\n    Part 1: https://www.ibm.com/developerworks/websphere/techjournal/1106bailey/1106bailey.html\n    Part 2: https://www.ibm.com/developerworks/websphere/techjournal/1108sciampacone/1108sciampacone.html\nODM JVM setting recommendation(Latest):\n\n<table border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\" width=\"400\"\n  \n    \n    32-bit JVM\n    64-bit JVM\n  \n  \n    Initial Heap Size\n    1.2GB\n    4GB to 8GB\n  \n  \n    Maximum heap size \n    NA\n    NA\n  \n  \n    Generated JVM arguments\n    -gencon GC\n    -gencon GC\n  \n\nTroubleshooting\n\n Data Collection\n\n1.MustGather: Out of Memory errors with WebSphere Application Server ND & Liberty\n&nbsp;&nbsp;&nbsp;&nbsp;a. On AIX, Linux, or Windows: https://www.ibm.com/support/pages/mustgather-out-memory-errors-websphere-application-server-aix-linux-or-windows\n&nbsp;&nbsp;&nbsp;&nbsp;b. On Solaris: https://www.ibm.com/support/pages/mustgather-out-memory-errors-websphere-application-server-solaris-heap-leak\n\n2.MustGather: Out of Memory errors with Oracle WebLogic:\n&nbsp;&nbsp;&nbsp;&nbsp;a. The default location of WebLogic logs: [WebLogicHome]/userprojects/domains/[your domain]/servers/AdminServer/logs\n&nbsp;&nbsp;&nbsp;&nbsp;b. Enable verbose GC: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)For Java OOM:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;General: -verbose:gc, -XX:+PrintGCDetails, and -XX:+PrintGCTimeStamps. Xloggc:could also be specified to redirect the GC detailed stats to an output file. It is important to understand that the overhead for basic GC is null except for some disk space consumed by the log file (See Java HotSpot VM Options for more details).\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For JRockit: -Xverbose:gc,gcpause,memdbg(See JRockit Command-Line Options for more details).\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)For native OOM: Change the -Xverbose:gc to -verbose for JRockit.\n&nbsp;&nbsp;&nbsp;&nbsp;c. Collect heap dump and thread dump(For open JDK and Oracle JDK):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Identify the process id of your application server\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Using jstack -l pid to get the thread dump. E.g. jstack -l pid  dump.log\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)Using jmap command to get heap dump. E.g. jmap -dump:format=b,file=/path/to/the/dump.hprof pid\n\n3.MustGather: Out of Memory errors with JBoss\n&nbsp;&nbsp;&nbsp;&nbsp;a. The default location of JBoss logs: https://access.redhat.com/documentation/en-us/redhatjbossdatavirtualization/6.2/html/administrationandconfigurationguide/defaultlogfilelocations\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b. Enable verbose GC: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Enable basic GC info: -verbose:gc –Xloggc:logFileName\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)More detailed info is required:  –XX:+PrintGCDetails -XX:+PrintGCDateStamps -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=3M -XX:-TraceClassUnloading\n&nbsp;&nbsp;&nbsp;&nbsp;c. Collect heap dump and thread dump(For open JDK and Oracle JDK): Same as WebLogic collection method\n\n4.MustGather: Out of Memory errors with Tomcat\n&nbsp;&nbsp;&nbsp;&nbsp;a. The default location of Tomcat: /opt/bitnami/apache-tomcat/log\n&nbsp;&nbsp;&nbsp;&nbsp;b. Enable verbose GC:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-XX:+PrintGCDetails \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-XX:+PrintGCApplicationStoppedTime \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-XX:+PrintGCApplicationConcurrentTime \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-XX:+PrintHeapAtGC \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-Xloggc:logs/gc.log\"\n&nbsp;&nbsp;&nbsp;&nbsp;c. Collect heap dump and thread dump (For open JDK and Oracle JDK): Same as WebLogic collection method.\n\n5.Related RES configuration, including following part: https://www.ibm.com/support/pages/collecting-data-reporting-problem-ibm-rule-execution-server\n6.Related Decision Center configuration, specific to issues.\n\nData Analysis\n\n1.Tools to analyze OOM\n&nbsp;&nbsp;&nbsp;&nbsp;a. Run “Memory Analyzer [Report]” on the heap (.phd) dumps and system core dumps (.dmp).\n&nbsp;&nbsp;&nbsp;&nbsp;b. Run “PaLern Modeling and Analysis Tool (PMAT) [Report]” and/or Garbage Collection and Memory Visualizer (GCMV) [Report’\\]” on the verboseGCdata on ECuRep.\n&nbsp;&nbsp;&nbsp;&nbsp;c. Run “Thread and Monitor Dump Analyzer (TMDA) [Report]” on javacore file(.txt). Although for OOM issues, thread dump is just for reference as it is almost a result of OOM.\n\n2.How to troubleshoot OOM for Rule Execution Server (RES): \n&nbsp;&nbsp;&nbsp;&nbsp;a. Collect system log and all trace: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/trbtuningreslogginglevel.html\n&nbsp;&nbsp;&nbsp;&nbsp;b. Collect XU dump: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.console/topics/tskresconsresxudebugtrace.htm\n&nbsp;&nbsp;&nbsp;&nbsp;c. Collect heap dump, GC logs and run tools to analyze, try to find possible memory leak or possible known issues.\n\n3.How to troubleshoot OOM for Decision Center (DC):\n&nbsp;&nbsp;&nbsp;&nbsp;a. Check system logs, heap dumps and GC logs\n&nbsp;&nbsp;&nbsp;&nbsp;b. Find timestamp when OOM happens (in System logs) and Run tools to analyze the heap dump, GC logs to see if there is suspect memory leak or know issues (Find in Support Search & RTC)\n&nbsp;&nbsp;&nbsp;&nbsp;c. Tuning JVM:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tSet proper heap size: Recommend 4G – 16G for each DC server\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tUser -gencon GC policy\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tIf CPU cores  6, limit the number of GC threads to 6\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tDisable Java2Security \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tLimit consumption of memory: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)disable the “Archive parsing flag” option (Project  Edit project options  Check the ruleset archive)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Use Automatic build to avoid a ruleset generation cost at “first ruleset generation”.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)Set in the installation manager the configuration parameter teamserver.build.archive.storage to ‘file’, which is default.\n\nTypical Issues\n1.OOM issue when running simulation on RES:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: OOM error in the logs when running simulation with too many scenarios.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: Tuning Decision Runner (https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/tskdrunner_tuning.html)\n\n2.OOM issue on ruleset parsing:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: In RES logs and XU dump, there are many rulesets are parsing and re-parsing again after some time.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Increase XU connection pool: https://www.ibm.com/support/pages/rule-execution-server-engine-pool-sizing\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Manage XU cache timeout policy: https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tskresconfigxu_timeout.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)Using Decision Engine Instead: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.designer.run/executingdecisiontopics/tskexec_decisionengine.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)Increase heap size\n\n3.OOM issue when using HTDS:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: There is memory leak in decision service (HTDS) REST API with JSON parameters\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: Managing memory consumption when you use the hosted transparent decision service (https://www.ibm.com/support/pages/managing-memory-consumption-when-you-use-hosted-transparent-decision-service)\nNote: For above OOM issues on RES, please refer to the RES Performance document. \n\n4.OOM issue on DC:  https://pages.github.ibm.com/dba-support/DBA-Education//OperationalDecisionManager/Performance/Decision%20Center%20Performance\n\nReference\n\n1.Oracle Weblogic : Troubleshooting Out of Memory and Memory Leak Problems\n2.How to Deal With Out Of Memory Errors on Tomcat\n3.Diagnosing Peformance issue on JBoss\n4.Jstack utility\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Decision Center Performance","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/Performance/Decision Center Performance","text":"Date:2019-12-18\n\nOverview\n\nThe IBM Operational Decision Manager Decision Center (DC) is designed for business users. They can author, model, and manage decisions that are directly based on organizational knowledge and best practices, with limited or no dependence on the IT department. Decision Center includes Business Console, Enterprise Console and a rule repository. Decision Center makes heavy use of CPU, memory, and database resources, so to ensure scalability, the hardware architecture should be set up to support usage requirements. This section explains what performance issues may happen in this component and how to troubleshoot problems.\n\n Prerequisites\n\nBasic features of Decision Center:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.9.1/com.ibm.odm.dcenter.overview/topics/odmdcenter_overview.html\n\nEnterprise Console & Business Console:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.9.1/com.ibm.odm.dcenter.admin/sharedconfigtopics/tpcrts_opening.html\n\nAdministering Decision Center:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.9.1/com.ibm.odm.dcenter.admin/topics/odmdcenter_admin.html\n\nComponent\n\n1.Enterprise Console: Enterprise Console is also called TeamServer, the classic Decision Center. You use the Decision Center Enterprise console to author, edit, organize, and search for business rules. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.econsole/topics/tpcdc_intro.html\n\n2.Business Console: Business Console is a new Decision Center Console. Business Console offers a collaborative and secure environment for business users and rule developers to author, manage, test, and deploy rules. We suggest using Business Console for decision services. \nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/intro/conbc_intro.html\n\n3.Administering the Decision Center database: Administering the Decision Center database includes tasks required to complete the configuration of Decision Center, archiving the database, and deleting projects.\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.admin/topics/condcadmindb.html\n\n Troubleshooting\n\nData Collection\n\n1.Collecting Data: reporting a problem with IBM Decision Center: https://www.ibm.com/support/pages/collecting-data-reporting-problem-ibm-decision-center\n2.Collecting information about Decision Center(especially for Business Console): https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/condcmustgather_info.html\n3.CPU Utilization, disk I/O, network and memory and paging: Using operating system tools, such as perfmon for Windows or iostat or vmstat for Linux and UNIX.\n4.For WebSphere Application Server: https://www.ibm.com/support/pages/mustgather-out-memory-errors-websphere-application-server-aix-linux-or-windows\n5.For other application servers: Enable verbose GC, collect Java core files, heap dumps and system logs. \n6.For testing and simulation issues: Ask for a sample project which can reproduce the issue and the steps to reproduce the issue. Ask for the scenario input Microsoft Excel file to help reproduce the problem.\n7.Related Decision Center configuration, specific to issues.\n\nTypical Issues – Symptoms and Diagnostic Steps\n\nHigh memory or OOM:\n  Symptoms: OOM errors shows up in logs, GC frequently happens, and server crashes.\n  Diagnostic steps:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Check system logs, heap dumps and GC logs\n&nbsp;&nbsp;&nbsp;&nbsp;b. Find timestamp when OOM happens (in System logs) and Run tools to analyze the heap dump, GC logs to see if there is suspect memory leak or known issues (Find in Support Search & RTC)\n&nbsp;&nbsp;&nbsp;&nbsp;c. Tuning JVM:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tSet proper heap size: Recommend 4G – 16G for each DC server\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tUser -gencon GC policy\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tIf CPU cores  6, limit the number of GC threads to 6\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tDisable Java2Security \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-\tLimit memory consumption: \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)Disable the “Archive parsing flag” option (Project  Edit project options  Check the ruleset archive)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)Use automatic build to avoid a ruleset generation cost at “first ruleset generation”.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)In the installation manager, set the configuration parameter teamserver.build.archive.storage to ‘file’, which is the default.\n\nHigh CPU usage or hung thread:\n  Symptoms: High CPU utilization, slow DC response, server crashes.\n  Diagnostic steps:\na. Check system logs, java cores and GC logs\nb. Run tools to check if there are blocked thread or known issues\nc. Check if there is a shared vocabulary bottleneck: If there are many users accessing same projects and they are doing long running operations (ruleset generation, reporting and so on), then suggest changing to a Cluster topology.\n\nBuild performance: \n  Symptoms: When you try to extract or deploy a ruleApp, it will take long time to finish and you will see some hung thread errors or timeout errors in system logs\n  Diagnostic steps:\na. Check system logs and check the error stacks. See if there are thread hung with building or compiling. There also could be some deadlock error or timeout errors.\nb. Disable “Archive parsing flag”\nc. Disable “Rule analysis checks”.\nd. At the project level: In EC, under the Project tab, select \"Build automatically\": https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.bu.econsole/topics/tpcdcprojectoptions.html\n\nSynchronization performance:\n  Symptoms: Synchronization for large rule projects takes a long time, especially on Business Console.\n  Diagnostic steps: From DC, if we want to improve the performance, we need to configure Business Console Stream and reduce the artifacts we need to follow during the synchronization.\n\nBrowsing and search performance:\n  Symptoms: The search feature is enabled by default on Business Console, whether you use it or not, it will do re-indexing over and over again, and it will use some resources and make Decision Center Console respond slowly.\n  Diagnostic steps:\na. If the client does not want to use the search feature, they can disable it: Go to Administration  Settings on Business Console and set the search indexing period to 0.\nb. Check the value of SolrEmbeddedDataDir and the number of indexations\nc. Repackage of DecisionCenter.war (in the ear) \nd. Update the file preferences.properties in WEB-INF/classes \ne. Add the following properties:\n&nbsp;&nbsp;&nbsp;&nbsp;decisioncenter.web.search.SearchProvider = SolrEmbedded\n&nbsp;&nbsp;&nbsp;&nbsp;decisioncenter.web.search.SolrEmbeddedDataDir = /yourpath\n\nAuthoring performance: \n  Symptoms: When customer has large number of rules and many users to author different rules at same time, and the copy of rules or authoring of decision tables will be extremely slow.\n  Diagnostic steps:\na. Check if the client has a large number of rules, especially large number of decision tables, and check the rows of decision tables. (In EC, the row of each decision tables should be lower than 800, in BC the row of each decision tables should be lower than 5000. Please note this is just a suggested value.)\nb. Check if the client enabled “automatic Build” on Project level\nc. If the client needs the global setting for ‘automatic build’, change the internal Boolean flag build.elementOnCommit: \nUnder the \\teamserver\\applicationservers\\WebSphere85\\jrules-teamserver-WAS85.ear\\teamserver.war\\WEB-INF\\lib\\teamserver-model-8.X.X.X.jar\\ilog\\rules\\teamserver\\preferences.properties\nbuild.elementOnCommit = false\nbuild.path =\nbuild.archive.storage = file\n\nData source performance:\n  Symptoms: In the logs there are records that some SQLs cannot get a result or lots of timeout errors like following:\n  \nCaused by: com.ibm.websphere.ce.cm.ConnectionWaitTimeoutException: Connection not available, Timed out waiting for 180001     at com.ibm.ws.rsadapter.AdapterUtil.toSQLException(AdapterUtil.java:1684)     at com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:686)     at com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:636)     at com.ibm.wps.services.datastore.DomainDataStoreImpl.getConnectionInternal(DomainDataStoreImpl.java:185)     at com.ibm.wps.services.datastore.DomainDataStoreImpl.getConnection(DomainDataStoreImpl.java:128)\n\nDiagnostic steps:\na. Check custom properties:\n-&nbsp;\t Additional properties → WebSphere Application Server - data source properties\n-&nbsp; Prepared statement cache size: 100 (Increase the size the prepared statement cache to 100 ).\n-&nbsp;\t webSphereDefaultIsolationLevel property should be set to 2\n-&nbsp;\t Use this data source in container managed persistence (CMP) must be unset\nb. Tuning connection pool size: Depends on the number of concurrent users. A user is using 5 concurrent connections to the database\n-&nbsp;\t 1)Nb users < 5 you should have a pool size of 10\n-&nbsp;\t 2)5 < nb users < 10 you should have a pool size of 20\n-&nbsp;\t 3)10 < nb users < 20 you should have a pool size of 30\n-&nbsp;\t 4)Nb users  20 the pool size should not be over 50.\n\nTest and simulation performance:\n  Symptoms: When customer runs Test & Simulation with too many scenarios, it will fail and there may be OOM error in RES log.\n  Diagnostic steps: \na. Check if the heap size is large enough\nb. From RES console, change ruleset property ruleset.bom.enabled to false for the specific ruleset.\n\n References\n1.ODM Performance Tuning Guide\n2.ODM 8.9 Tuning Guide\n3.Improving the performance of Decision Center \n","wordCount":0,"topics":[],"type":"Content"},{"name":"RES Performance","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/Performance/RES Performance","text":"Date:2019-12-18\n\nOverview\n\nThe IBM Operational Decision Manager Rule Execution Server (RES) is the runtime environment for running and monitoring decision services.  This document introduces the general performance tuning recommendations of the rule execution, and discusses about troubleshooting typical performance problems.\n\n RES Performance Tuning Recommendations\n\nFor support engineers, investigation of performance issues is limited to product defects and improper usage. Fine performance tuning is beyond the scope of standard support. We can always recommend professional services if the client wishes to pursue fine performance tuning. However, it is important that we can provide general guidance of rule execution performance tuning.\nBy tuning the Rule Execution Server you can decrease the amount of time and resources that are required for rule execution.\n\n1.Size the engine pool optimally in RES\nThe XU maintains a pool of JCA connections. Each connection references a parsed ruleset instance, ready to be executed if invoked. You can configure the connection pool size through the application server when using Java EE, or in the ra.xml file when using Java SE. Set it to a value large enough so that the following conditions are met:\nConnections are available to support concurrent executions on all rulesets without causing eviction of a less requested ruleset.\nRuleset parsing is not invoked for less frequently used rulesets.\n\nThe optimal pool size depends on the number of possible concurrent connections and the number of rulesets to execute. Take a measurement with the default size, and then increase it until you reach the memory limit. It’s never easy to calculate the correct size, because it depends on many things. The easiest way is to simulate the load and to try different values. For more information on sizing a pool, see https://www.ibm.com/support/pages/rule-execution-server-engine-pool-sizing\n\n2.Minimize the cost of ruleset parsing \nRuleset parsing occurs during the first invocation of a ruleset. When you deploy a new version of a ruleset, a parse is launched. Parsing can block the execution. The default behavior ensures that a ruleset can be executed based on its previous version, if a version exists in the cache.\nYou can change this default behavior by turning off the asynchronousRulesetParsing property. Turning this property off alters the behavior to execute the newly deployed ruleset version.\nNote: asynchronousRulesetParsing is a global property of the execution unit, which affects all rulesets.\nIf a ruleset is used infrequently, it is removed from the connection pool. If a ruleset is called when it is no longer in the pool, it is parsed again.\n You can prevent the removal of a ruleset by setting the minimum time it stays in memory.\nSet the value of the ruleset.maxIdleTime property to 0, or to a number of seconds greater than 0. \n\n3.Reduce the amount of trace messages written to the server logs\nOn WebSphere Application Server and JBoss, the execution units are logged by the Java logger. On other application servers, the execution unit uses the logging service of the Java Connector Architecture (JCA).\nThe resource adaptor (ra.xml) traceLevel and traceAutoFlush properties control the XU logging with JCA. For the Java logger, you can change the log level through the Java logging options in the administration console.\nThe default trace level is Info. Set the trace level to Severe or Warning to reduce the amount of trace written to the server logs. This can significantly improve performance, especially in load testing and production environments.\n\n4.JVM Tuning \nGarbage Collector\n&nbsp;&nbsp;-&nbsp;\tset the garbage collector policy to gencon\n&nbsp;&nbsp;-&nbsp;\tlimit the number of threads for the garbage collector if you have more than 6 cores:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-Xgcpolicy:gencon -Xgcthreads6\n\nMemory\nAdditional memory can improve performance but the recommended starting heap size is:\n1.2 GB per server for 32 bit systems, 4GB to 8GB per server for 64 bit systems (Classic Rule Engine)\n1 GB per server (Decision Engine)\n\nThe Decision Engine use less memory than Classic Rule Engine. For existing Rule projects that want to use the new Decision Engine, we recommend making a new memory tuning, so it will reduce allocated memory on the server\n\nJIT configuration\nThe JVM supplied with WAS 8.0.0.5+, generates more JIT code than previous versions, which can lead to longer warm-up times and lower throughput. The JIT can take time to compile a large ruleset using Classic Rule Engine. To resolve this performance issue, increase the cache or limit the inlining of ODM classes.\n-Xjit:codeTotal=261072 -XcompilationThreads=1  ( Cache size and number of compilation threads)\n-Xjit:{ilog/rules/engine/Sequential/generated/*}(disableInlining)  (Limit the inlining for one of the ODM packages)\n\nNote: No particular JIT configuration is needed for Decision Engine. \n\nAssertion configuration\nDecision Engine uses assertions. If you do not need assertions, disable assertions in the VM arguments could improve performance:\n-da or -da:com.ibm.rules.*\n\n5.Optimize execution trace\nWriting traces during rules execution results in longer execution time.  You can reduce the trace size by applying filters or completely turn off execution traces.\nIf Decision Warehouse is used, you can optimize the execution trace by removing the BOM serialization and specifying monitoring.filters property. Refer to Optimizing Decision Warehouse\nWhen invoking rulesets using rule sessions, execution traces can be sent to the response object even if DW is not used. You can disable execution trace by calling API sessionRequest.setTraceEnabled(false) or you can reduce the trace by applying filters, refer to Setting up ruleset execution traces\n\n6.Optimize ruleset design \nOptimizing execution \nUse Decision Engine\nClassic rule engine is deprecated in v8.9. The decision engine is designed for concurrent execution and scalability and is much faster. Decision engine allows generating the Java Bytecode at ruleset build time, which almost eliminates the parsing time since ruleset parsing is replaced by directly loading the Java classes.\nOptimizing the decision engine\nOptimizing the classic rule engine\n\nChoose the optimal engine execution mode\nFastpath is optimal for applications with a large number of rules and a large number of objects. It is efficient in multi-threaded environments and is the optimal mode for decision tables. It might have a longer compilation, but it is faster at runtime.  \nRetePlus is applicable for rule chaining applications. It can be useful in the case of many objects and a small number of rules. Performance is impacted as the number of rules increases. For better performance, limit the use of the “object state update” option.\nSequential is applicable for applications with a large number of rules and a small number of objects. It is efficient in multi-threaded environments. \nStarting from ODM v8.7, Fastpath is the default execution mode. For rule tasks migrated from older releases, Reteplus was the default mode. Consider switching the tasks to use Fastpath if inference is not needed. \nChoosing an execution mode\n\nSimply the ruleflows\nKeep ruleflows simple. Complex ruleflows reduce performance, especially with the classic rule engine. Avoid multiple layers of nested ruleflows, since deeper nesting of rules increases rule execution time. \nReduce the use of dynamic selection in rule tasks. Use static lists of rules as much as possible.\n\nReduce ruleset size\nTo reduce the size of the ruleset, decrease the number and size of artifacts contained within the ruleset:\nDecrease the number of rules that are actually added to the ruleset from the rule project by using extractors.\nLimit the size of decision tables. \nReduce the Business Object Model (BOM) artifacts to the minimum needed, by removing any artifacts that are not used in rule construction. \nDivide your business logic into multiple rule projects with dependencies. Split your BOM into the relevant rule projects. Find a sample project hierarchy in the below figure:\n\nRefer to Setting up a project hierarchy\n\nTroubleshooting\n Data Collection\n\nWhen a performance issue occurs in a RES server, it might be difficult to determine whether it is caused by the RES execution stack, the environment (application servers, networks, and client APIs such as REST), or the customer code calling the ruleset execution.\n\nCollect as much as information to better understand the problem. Refer to\nMustgather data of performance issue on Decision Server Execution Stack\n\nIt is important to confirm the exact product version (of all related components) as there might be known performance issues which are already fixed in later releases. There are chances that the client is wrong, or may be using mixed versions, better confirm the product version from server logs and XU dumps. \n\nWhen rule session API is used, it is important to get the java code calling the rule session API. The piece of code will tell key information including\nWhich rule session API is used (J2SE? POJO? EJB?) \nHow the session factory is created \nIf execution trace is enabled and filtered\n\nHigh memory consumption is a common performance problem. If performance is not improved after increasing heap and restart, ask for JVM heap settings, XU dump, heap dump and etc. For details, refer to analysis of Out Of Memory\n\nIn case of high CPU usage or hung threads, ask for thread dump/javacores. Refer to analysis of  Hung thread & high CPU\n\nTypical performance problems\n\n1.Slow response of ruleset request\nSymptom:\nPoor performance at ruleset execution is observed. The client may complain that the response time is several seconds or even longer than 1 minute, while the ruleset execution usually takes around 100ms. \nResolving the problem:\nNote: Ruleset execution time = Ruleset parsing time + Actual ruleset execution time\nFirst confirm if the slow response time is only observed at the first execution after server restart, or if the execution slows down intermittently. In those cases, ruleset parsing time is most likely the culprit of long execution. You can confirm this by looking for the ruleset parsing messages in the “logs” page of the XU dump, such as:\nRuleset /testdeployment/1.0/loanvalidation_production/1.0 was parsed in 12 s\n\nYou can reduce the ruleset parsing time by:\nCall IlrManagementSession.loadUptodateRuleset() to trigger ruleset parsing before first execution\nset ruleset.maxIdleTime property to keep the ruleset in the cache even when it is not invoked\n\nOn the other hand, if the slow response is always reproducible for a particular ruleset, you need to determine the actual ruleset execution time to rule out other factors affecting the performance, such as database lookups and network latency. You can find the actual ruleset execution time in the Statistics page of the XU dump, as shown in below figure:\n\nThe same statistics is also available in the Ruleset Statistics View of the RES console.\n\nIf the actual execution time is indeed very long, ask the client to send the Decision Service/rule projects as well as the depending XOM projects/jars in order to reproduce the problem. \n\nThere are also cases that the execution of all the rulesets dramatically slow down during high production load. Intensive CPU usage is often observed in this situation. Refer to analysis of  Hung thread & high CPU\n\nAnother common scenario is that the actual execution time is short, but the client application takes much longer time to receive the response. One possible factor is the time spent on generating and saving the execution trace. By default, Decision Warehouse captures all execution trace data, including some data that are less useful, such as the list of all the rules that the engine did not execute. The complete execution trace data can be huge for big and complex ruleset. \n\nYou can ask the client to quickly disable the execution trace from the RES console by setting monitoring.filters=false. If the response time is significantly reduced after disabling the execution trace, suggest the client to completely disable the execution trace, or to reduce the traces written to the database. Refer to Optimizing Decision Warehouse\n\nIf the client complains about slow response and very frequent database access during rule executions, it is a good indication that Decision Warehouse is used. If an XU dump is already received, you can confirm the monitoring properties (as well as any other ruleset properties) form the “Caches” page in the XU dump, by clicking on “details” button of the particular ruleset. \n\nIf the client invokes ruleset using rule session API, execution traces can be sent to the response object even when Decision Warehouse is not used. The full execution trace can be huge for a big and complex project, which may result in noticeable network latency. You can ask the client to disable the execution trace by calling API sessionRequest.setTraceEnabled(false) or to reduce the trace by applying filters, refer to Setting up ruleset execution traces\n\n2.Ruleset is parsed at each execution in J2SE \nSymptom:\nWhen invoking a ruleset through J2SE session, the ruleset seems to be parsed at each execution and every subsequent execution is as slow as the first one. \nResolving the problem:\nThis is expected if you create new instance of IlrJ2SESessionFactory for each client execution.\nIn the J2SE environment, a local J2SE provider (IlrJ2SERuleSessionProvider) is employed when Rule Execution Server is used inside the same JVM. Each provider has its own Execution Unit (XU).\nWe recommend that the provider be shared and reused across clients. Make sure you create an instance of IlrJ2SESessionFactory such that it is shared across clients and rule executions. For example, keep a static reference to the session factory or implement a singleton design pattern to hold a shared reference to the session factory.  Recreating the session factory at each execution increases the CPU and memory consumption because the session factory creates and destroys a XU pool each time and does not allow sharing engine and ruleset resources across clients.\nYou can find sample code in J2SE session sample\n\n3.Memory leak when using HTDS JSON\nSymptom:  \nWhen invoking HTDS with JSON payload, the system memory usage keeps growing after days of execution. Eventually the server may crash due to OutOfMemory error. \nResolving the problem:\nIt is caused by APAR RS03125, that the XOM Classloaders are not released from memory and creates a memory leak. The problem only occurs when JSON payload is used. \nThe library used to transform the json text into java objects creates a cache to convert classes. This cache hold reference to the XOM classloader and can lead to a memory leak if the cache is not flushed.  This APAR is already fixed in ODM v8.8.1.4, v8.8.9.2, v8.10.2. The fix is included to flush the cache so that the reference to XOM classloader can be removed. It does not impact current execution, if the classloader is used it will not be released.\nThe number of XOM that is created is related to the number of rulesets executed, the idle timeout for each ruleset, the size of the classloader and the size of the heap.\nThe com.ibm.rules.htds.resetJsonMapperXomClassloaderInstancesThreshold property define the number of XOM classloaders to be cached after the cache is flushed. The value \"10\" is recommended in most case.  There is no generic optimal number, it has to be large enough to benefit from the cache and small enough to trigger the action before the memory is full.     \nRefer to Managing memory consumption when using HTDS\n\nReference \n1.Improve performance of ODM, Part 1, Reduce Rule Execution Time \n2.Improve performance of ODM, Part 2, Reduce rule execution resource consumption\n3.Improve performance of ODM, Part 3, Reduce response times for HTDS\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Database","description":"ELEBRAS@jp.ibm.com","owner":"@Erwan Le Bras","path":"/OperationalDecisionManager/DecisionCenter/Database","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Managing Decision Service","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/DecisionCenter/Managing Decision Service","text":"Date:2019-12-27\n\nOverview\n\nThe Business console comes with features for managing changes to decision services. Although decision services can be managed on Enterprise Console, we still recommend using Business Console for Decision Service management.\n\n Prerequisites\n\nKnowledge about Business Console\nKnowledge about Enterprise Console\n\nComponent\n\n1.There are two kinds of ways that you can use to manage Decision Service on Business Console:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Decision governance framework: In the Business console, business users can work with a ready-to-use approach to change management and governance, which is based on releases and change activities. This approach is called decision governance. \nThe approach is specific for Decision Service, you can manage decision service and author rule artifacts on Business Console. You can get started from this tutorial.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Management based on branches: on Business console, you can manage Decision Service with branches. This method is more like the operations on Enterprise Console\n\nNote: These two kinds of management method are not related, which means the changes you did in the branches will not be seen in the releases and activities of governance framework. And the opposite is same.\n\n2.You can also manage Decision Service on Enterprise Console, but some features cannot be used. So, we do not recommend it.\n\n3.Using governance with Decision Service: The decision governance framework is a methodology that provides you with tools to implement changes to your business rules in a structured, secure, and controlled way.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Governance principles: The governance aspects of Decision Center are based on the states of releases and activities, and on the governance roles of participants who work on these releases and activities. \n&nbsp;&nbsp;&nbsp;&nbsp;b. Managing changes with the decision governance framework: Releases and activities behave as branches and subbranches of your decision services, but with some special considerations.\n\n4.Using branches to manage Decision Service: Decision Center enables branching so that you can manage the evolution of projects over time.\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Branches: When a branch is created, it contains an exact replica of every project element that is contained in its parent branch. You can then work on the subbranch without affecting the contents of the parent.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Snapshots: Snapshots capture the state of a branch at a specific moment in time.\n&nbsp;&nbsp;&nbsp;&nbsp;c. Merging branches: In the Decision Center Business console, you can merge the content of branches, releases, and activities in a decision service.\n&nbsp;&nbsp;&nbsp;&nbsp;d. Deleting and recovering elements in branches: When you delete project elements from the current state of a branch, they are put in the recycle bin of that branch. You can restore those elements to your branch.\n&nbsp;&nbsp;&nbsp;&nbsp;e. Generating a project reports (new in 8.10.2): You can generate reports in HTML format based on decision services, projects, or queries. These reports show the content and properties of deployed project elements.\n\n5.Linked projects: When a decision service is published to Decision Center, it can contain linked (or dependent) projects. And they can be check on BC in the release properties of a Decision Service.\n\n6.How to manage Decision Artifacts: In the Decision Artifacts tab, you create and edit rule artifacts, such as action rules, decision tables, or ruleflows, which you can organize in folders. You can define decision operations, ruleset variables, and handle resources for your projects. For details please refer to Decision artifacts.\n\n7.Deploying Decision Service from Business Console: In a decision service, you can deploy a set of rules to a production environment or to a non-production environment for testing or quality assessment. For details please check this link. \n\n8.Exporting or importing the current project: Users with administrator or configuration manager roles can export the working branch of the current project as a .zip file, and import the project previously exported back into Decision Center. For details please refer to link.\n\n9.Setting up project dependency (New in 8.10.2): Administrators and configuration managers can set up project dependencies in the Business console to make a project available in different decision services or branches. Details refer to this link. \n\n10.Manage Security for Decision Service, please take reference to Security & user management.\n\n Troubleshooting\n\nData Collection\n\n1.Detail description of the problem.\n2.Ask for screenshot or have WebEx with customer to see the issue.\n3.If the issue can be reproduced, detailed steps to reproduce the issue.\n4.All data mentioned in Collecting Data: reporting a problem with IBM Decision Center\n5.Database dump if needed.\n\n Typical steps to troubleshooting a Decision Service management problem\n1.Collect all the information and logs. \n2.Check the logs and see if there are known issues.\n3.Ask for the Decision Service.\n4.Ask for the steps to reproduce the problem and try to reproduce the issue.\n5.Engage SME or developers if needed.\n\nTypical Issues or Questions\n1.Question:\nI made some changes in main branch, but there is no change in my Release. Why?\nAnswer:\nAs explained in previous part of this document, managing Decision Service with branches or governance framework is different options. And the changes will not affect each other. That means when you change something in one branch, it will not show in release; and in the opposite, when you change something in one activity, but it will not show the changes in any branches.\n\n2.Question: \nWho can create Releases and activities?\nAnswer:\nAnyone can create Releases and activities, for security concern, we need to investigate more on this.\n\n3.Question: \nHow to make sure the changes in one activity will not be overridden by others?\nAnswer:\nIf you create a change activity before an existing one is completed and merged, the same rule might be subject to change in both activities. To avoid such conflicts, a rule that is being edited in a change activity is locked until the activity is completed and merged.\nThe following image shows how different change activities merge back into the release when they are completed:\n\n4.Question: \nAny tools or command that can be used to build and deploy Decision Service automatically? Are there any examples?\nAnswer: \nYou can deploy a Decision Service on Business Console by many ways. For details please refer to the Component part in this document. \n&nbsp;&nbsp;&nbsp;&nbsp;a. Using Ant task\n&nbsp;&nbsp;&nbsp;&nbsp;b. Using Decision Center REST API\n&nbsp;&nbsp;&nbsp;&nbsp;c. Using Decision Center Java API\nHere is a sample that you can take as reference to build and deploy Decision Service using API.\n\n5.Question: \nHow to deploy decision services using ant command? a detailed description on how can I successfully execute the ant command to deploy the decision service?\nAnswer:\nSome parameters are needed for the ant command, please take this link for reference: https://developer.ibm.com/answers/questions/377495/how-to-deploy-decision-services-using-ant-command.html\n\n6.Question:\nWhat is the difference between snapshot and deployment snapshot?\nAnswer: \nDeployment snapshot is one kind of snapshot. The deployment configuration contains a setting to establish if a deployment snapshot is required when deploying. Deployment snapshots can be found in the list of snapshots. You can then redeploy from the deployment snapshot or from the report of the deployment. \n\n Reference\n1.Fix list: https://www.ibm.com/support/pages/fix-list-ibm-operational-decision-manager\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Security & user management","description":"wyouli@cn.ibm.com","owner":"@May Wang","path":"/OperationalDecisionManager/DecisionCenter/Security&usermanagement","text":"Date:2019-12-24\n\nOverview\n\nThe IBM Operational Decision Manager (ODM) Decision Center provides a security feature to control access to branches of decision services and enable permissions on the different rule artifacts.\n\nYou use the Decision Center Business Console, Enterprise Console or Ant tasks to manage users and groups. From ODM 8.7 to the latest ODM version, the user management on Business Console changed a lot. Many features were added to the Business Console.\n\n Prerequisites\n\nKnowledge about how to configure users and groups on different application servers.\nKnowledge about Ant usage.\n\nComponents\n\n1.Decision Center groups of users\n\nThis feature is based on Decision Center groups. Any user who signs in to the Business or Enterprise console must be a member of a group that is mapped to one of the predefined Decision Center roles. The predefined roles determine which features users can access in the consoles:\n\nThe rtsInstaller role is only used for the initial installation of Decision Center, so for Decision Center end users, there are three roles:\n\nIn the above diagram:\nThe bottom of the diagram shows the groups and users present in your user registry.\nThe middle of the diagram shows that all users must be members of one or more Decision Center groups. You create these Decision Center groups manually or by importing them from an LDAP.\nThe top part of the diagram shows how you map each Decision Center group to one of the predefined roles.\n\n2.Configure user access to Decision Center\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. For WebSphere Liberty: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.wlp/configdcliberty/tpcwlpconfigdc_security.html\n&nbsp;&nbsp;&nbsp;&nbsp;b. For WebSphere Application Server: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.was/configdcwebsphere/tpcwasconfigconsole_security.html\n&nbsp;&nbsp;&nbsp;&nbsp;c. For WebLogic (Deprecated): &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.weblo/configdcweblogic/tpcwlogicconfigdc_security.html\n&nbsp;&nbsp;&nbsp;&nbsp;d. For JBoss: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.jboss/configdcjboss/tpcjbossconfigsecurity.html\n&nbsp;&nbsp;&nbsp;&nbsp;e. For Tomcat: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.config.tom/configdctomcat/tpctcatconfigdc_security.html \n\n3.Managing users and groups from the Business console: \n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Declare users in Decision Center database: The users and groups can be added in configuration files of application server, but you need to declare the users and groups under Administrator tab, then the users and groups can be used to set branch security or rule artifact permission. Otherwise all users and groups cannot be seen on Business Console.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Here is a sample about how to set up groups on Business Console manually: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.samples/shareddcsampletopics/tpcstartingrtssample_server.html\n&nbsp;&nbsp;&nbsp;&nbsp;c. When you are working with LDAP directories, you first establish the same LDAP connection used by the application server to authenticate access to Decision Center (see Establishing an LDAP connection in the Business console).\n&nbsp;&nbsp;&nbsp;&nbsp;d. After the connection to LDAP is established, depending on your configuration, you access the Business console in one of three modes (Manual import, automatic import, semi-automatic import). Each mode provides specific options to import users and groups from LDAP directories. For details you can check Importing users and groups from LDAP directories\n\n4.Managing users and groups from the Enterprise Console: \n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Set up groups: On Enterprise Console, click Configure - Installation Setting Wizard, choose Setup Groups and declare groups here.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Set branch security for classic rule project: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.econsole/topics/tskconfigsecuritysetting.html\n&nbsp;&nbsp;&nbsp;&nbsp;c. Set group permissions: You can set user permissions to control who can create, update, view, and delete project elements. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.econsole/topics/tpcdcconfigsecu_perms.html\n&nbsp;&nbsp;&nbsp;&nbsp;d. Creating one or several new roles (Means adding roles in ODM 8.7.1): &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.securing/topics/tsksecuritydsroles.html\n\n5.Managing users and groups using Ant tasks: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.admin/topics/conadminmanageusers_bc.html\n\n6.Enforce projects Security for decision service on BC: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/adminbc/tskbcsecurity.html\n\n7.Set rule artifact access on Decision Center:\nhttps://ibm.ent.box.com/file/573582242301\n\n8.Security in Governance Framework:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Roles: Release owner, Activity owner, approver, author (for change activity), tester (for validate activity)\n&nbsp;&nbsp;&nbsp;&nbsp;b. Role permissions: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/mngchanges/concmggovernance.html\n\n Troubleshooting\n\nData Collection\n\n1.Collecting information about Decision Center: https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/topics/condcmustgather_info.html\n2.Open the traces and collect the trace.log\n3.User, group settings\n4.Screenshots about the error message \n\nSteps to diagnose security problems in Decision Center\n\n1.Collect application server logs and security settings on client side.\n2.Ask if client did some configuration change before the issue happened.\n3.Ask client to try with rtsAdmin user who has the highest permission.\n4.Check the settings and do WebEx with client to check security configuration if needed.\n5.Try to reproduce client’s issue on our side.\n6.Engage developers or WAS support if needed.\n\nTypical Issues\n\n1.User belongs to rtsAdministrator cannot open Installation Setting Wizard.\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: No Installation Setting Wizard under Administration part\n\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: Add rtsAdmin to rtsInstaller role\n2.Cache issues happens sometimes when multiple users login Business Console\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: When user goes to view or edit the rule in the business console it has the appearance that the branch does not have access to the BOM\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: Clear browser cache \n\n3.Group permissions not taken into account in Business Console with some application servers\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: Sometimes group permission is not enforced although properly defined in the business console. As been seen with Liberty Profile and WebSphere Application Server.\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: Defect 109354\n\n4.How to properly set up Decision Center to allow creation of New Projects from Rule Designer？\n&nbsp;&nbsp;&nbsp;&nbsp;a. Symptom: GBRDR0067E: You must have at least one of these groups: rtsAdministrator, rtsInstaller\n&nbsp;&nbsp;&nbsp;&nbsp;b. Solution: https://developer.ibm.com/answers/questions/372332/how-to-properly-set-up-decision-center-to-allow-cr.html\n\nReferences\n1.Securing Operational Decision Manager\n2.Typical APARS related to user & groups issues: \n&nbsp;&nbsp;&nbsp;&nbsp;a. RS03115: INTERMITTENT SECURITY ERRORS IN DECISION CENTER BUSINESS CONSOLE\n&nbsp;&nbsp;&nbsp;&nbsp;b. RS02746: PROJECT SECURITY DIALOG CAN SHOW INCORRECT INHERITED STATUS FOR NON-MAIN PROJECTS\n&nbsp;&nbsp;&nbsp;&nbsp;c. RS02496: PROBLEM DEPLOYING DECISION SERVICE WITH BRANCH SECURITY ENABLED\n&nbsp;&nbsp;&nbsp;&nbsp;d. RS02416\n&nbsp;&nbsp;&nbsp;&nbsp;e. RS02011: NPE WHEN NAVIGATING BACK VIA BREAD CRUMB WHEN SECURITY IS ENFORCED\n&nbsp;&nbsp;&nbsp;&nbsp;f. RS02088: Cannot publish changes for non admin users when security is enforced regardless of the permissions\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Test and simulation","description":"ELEBRAS@jp.ibm.com","owner":"@Erwan Le Bras","path":"/OperationalDecisionManager/DecisionCenter/Testandsimulation","text":"Date:2019-12-24\n\nOverview\n\nThe IBM Operational Decision Manager (ODM) Test And Simulation features provide business users the capability to run tests and simulations from Decision Center or from Rule Designer.\n\nTest scenarios are written in Microsoft Excel scenario files.\n\nTesting and simulating rulesets\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.designer.test/topics/odmdserverrulesdesigner_test.html\n\n Prerequisites\n\nTutorial: “Configuring the BOM for Excel testing” https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutdesignertopics/tutconfigexcel.html\nThis tutorial shows how to generate the Microsoft Excel simulation file and use it for the Test Feature\n\nTutorial: “Creating a simulation”\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.tutorials/tutorialstopics/odmbcsimtutint.html\nThis tutorial shows you how to create a simulation for a decision service in the Decision Center Business console.\n\nComponents\n\nTest feature:\nYou write the scenario in a Microsoft Excel file, and run the test, or the simulation, against this Excel file from either rule Designer, or from the Decision Center Business Console.\nIn the above screen we can see the test in the Business Console.\n\nThe above “Main Scoring Test Suite” refers to a Microsoft Excel file with the data to be tested, and the results of the execution are display in the “Reports”\n\nSimulation Feature:\n\nThe simulation feature is more complex than the test feature. It allows you to check how changes to rules or data affect the results of your business rule application before deployment.\n\nThe simulation brings together data, rules, and key performance indicators (KPIs). You select the data and rules for the simulation, and you define the KPIs by using metrics that take values from the rules.\n\nThe KPIs represent the results of the simulation. You define a simulation report by adding KPIs in a report template, and then defining their appearance. You can display KPIs as text, or in graphs to make their results easier to understand.\n\nA screen showing the simulations pane in the Business Console.\nThe simulation will bring together the Metrics, the KPIs and the Data, and will display the report according to the pre-defined Report Formats.\n\nNote:\nIn prior versions, the testing was done using the Decision Validation Service (DVS), however, DVS was deprecated in version 8.8.\nClients still using DVS should migrate to the new testing and simulation features in the Decision Center Business console that are described in this document.\nFor details on the deprecated features:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.overview/shareddeprecation/condeprecatedfeatures.html\n\n Troubleshooting\n\n1.Having the correct scenario:\nWhatever the error, it is important to confirm that the scenario file is up-to-date.\nMost errors showing up in this module occurs because the scenario file, and the current version of the rule project are not in phase.\n\n2.Client is unable to run several test suites simultaneously.\nWhen he run one test suite, it works fine.\nHowever, when he has several clients calling at the same time the test suite, it sometimes fails. \nIn the logs:\n[5/23/19 18:32:00:767 CEST] 000000fd SystemOut     O 2019-05-23 18:32:00.767  WARN decisionmodel      --- [ Archive Thread] i.r.t.e.s.v.ReportMonitorThreadService   : Cannot find baseline from working baseline '%currentkey' (brm.Branch:958:958) or its dependencies, for element 'lv1Report - 2019-05-2306-31-54-595' (validation.TestReport:127:127)\n\nilog.rules.teamserver.model.IlrProjectEltBaselineNotFoundException: Cannot find baseline from working baseline '%currentkey' (brm.Branch:958:958) or its dependencies, for element 'lv1Report - 2019-05-2306-31-54-595' (validation.TestReport:127:127)\n    at ilog.rules.teamserver.model.IlrSessionHelperEx.getBaselineFromProjectEltDetails(IlrSessionHelperEx.java:2748)\n    at ilog.rules.teamserver.model.IlrSessionHelperEx.getBaselineFromProjectEltHandle(IlrSessionHelperEx.java:2759)\n    at ilog.rules.teamserver.ejb.service.IlrSessionFacadeUtil.findInElementBranch(IlrSessionFacadeUtil.java:201)\n    at ilog.rules.teamserver.ejb.service.IlrSessionFacadeImpl.getElementsFromAggregation(IlrSessionFacadeImpl.java:4489)\n    at ilog.rules.teamserver.ejb.service.IlrSessionFacadeImpl.getElementsFromAggregation(IlrSessionFacadeImpl.java:4467)\n    at ilog.rules.teamserver.ejb.service.IlrSessionFacadeImpl.getElementsFromAssociation(IlrSessionFacadeImpl.java:2474)\n    at sun.reflect.GeneratedMethodAccessor80.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n    at java.lang.reflect.Method.invoke(Method.java:508)\n    at ilog.rules.teamserver.transaction.IlrTransactionalInvocationHandler.invoke(IlrTransactionalInvocationHandler.java:108)\n    at com.sun.proxy.$Proxy146.getElementsFromAssociation(Unknown Source)\n\nSolution:\nIf the client needs the parallel execution of test suite, he needs to understand that this can affect the performance and the memory usage. \nNow, with recent versions such as with IF038 on 8.9.1 it is possible to allow for simultaneous execution of the test suite. \nHowever, this is costly so the maximum number of thread to use for this is controlled by a parameter, default being set to 1.:\nUsage example: -Ddecisioncenter.testsuites.threadpool.size=8 \nThis is a global setting: can be set in the Enterprise Console Installation Settings wizard as decisioncenter.testsuites.threadpool.size \n\n3.Test Suite execution hangs, and logs shows IlrBaselineNotFoundException\n[11/21/19 18:02:05:182 JST] 0000019a activity      I   elementCommitted\nexception.ilog.rules.teamserver.model.IlrBaselineNotFoundException: GBRDR0027E:\nThe baseline with name 'brmBranch2424validationTestSuite4444INTERNAL_1482301243453' was not found in project 'RulesProject'\n at ilog.rules.teamserver.ejb.service.IlrTransactionContext.setBaseline(IlrTransactionContext.java:162)\n at ilog.rules.teamserver.ejb.service.IlrTransactionContext.initWorkingBaseline(IlrTransactionContext.java:85)\n at ilog.rules.teamserver.ejb.service.IlrTransactionContext.(IlrTransactionContext.java:80)\n at ...\nSolution: \nCheck that the latest project has been deployed to Decision Center.\nRedeploy the project and test again.\n\n4.Performance issue:\nRunning Test Suite can sometime be long.\nOne of the common reason for this is having in the Scenario File some unordered test on huge list items.\n\nSolution:\nCheck the scenario file in the “Expected Details” to see if there is no unordered list of objects.\nIf the client is having a huge list of objects, when generating the scenario file, he should select equals (ordered) if the list is known to be ordered\n\n5.Test suite execution fails with XU related errors.\nIn the log\nError during test execution\n   \nilog.rules.res.session.IlrSessionCreationException: An error occurred while the rule session was created:\ncom.ibm.rules.res.xu.internal.XUException: XU Client error\ncom.ibm.rules.res.xu.internal.LocalizedResourceException: GBRXU0001E: The interaction ruleEngine.loadUptodateRuleset has failed\njavax.resource.ResourceException: com.ibm.rules.res.xu.internal.XUException: GBRXU0435E: Failed to create engine manager.\ncom.ibm.rules.res.xu.internal.XUException: GBRXU0435E: Failed to create engine manager.\ncom.ibm.rules.res.xu.internal.XUException: GBRXU0436E: Ruleset parsing work failed.\njava.lang.IncompatibleClassChangeError: org.objectweb.asm.ClassVisitor\nCaused by: com.ibm.rules.res.xu.internal.XUException: XU Client error\nCaused by: com.ibm.rules.res.xu.internal.LocalizedResourceException: GBRXU0001E: The interaction ruleEngine.loadUptodateRuleset has failed\nCaused by: javax.resource.ResourceException: com.ibm.rules.res.xu.internal.XUException: GBRXU0435E: Failed to create engine manager.\nCaused by: com.ibm.rules.res.xu.internal.XUException: GBRXU0435E: Failed to create engine manager.\nCaused by: com.ibm.rules.res.xu.internal.XUException: GBRXU0436E: Ruleset parsing work failed.\nCaused by: java.lang.IncompatibleClassChangeError: org.objectweb.asm.ClassVisitor\n\nilog.rules.res.session.IlrSessionCreationException: An error occurred while the rule session was created:\ncom.ibm.rules.res.xu.internal.XUException: XU Client error\ncom.ibm.rules.res.xu.internal.LocalizedResourceException: GBRXU0001E: The interaction ruleEngine.loadUptodateRuleset has failed\njavax.resource.ResourceException: com.ibm.rules.res.xu.internal.XUException: GBRXU0435E: Failed to create engine manager.\ncom.ibm.rules.res.xu.internal.XUException: GBRXU0435E: Failed to create engine manager.\ncom.ibm.rules.res.xu.internal.XUException: GBRXU0436E: Ruleset parsing work failed.\njava.lang.IncompatibleClassChangeError: org.objectweb.asm.ClassVisitor\n\n    at ilog.rules.res.session.IlrPOJOSessionFactory.createStatefulSession(IlrPOJOSessionFactory.java:97)\n    at ilog.rules.res.session.impl.IlrSessionFactoryBase.createStatefulSession(IlrSessionFactoryBase.java:158)\n    at ilog.rules.res.console.jsf.bean.IlrRulesetTestBean.execute(IlrRulesetTestBean.java:142)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\n[…]\nCaused by: com.ibm.rules.res.xu.internal.XUException: XU Client error\n    at com.ibm.rules.res.xu.client.internal.XUSession.executeOperation(XUSession.java:170)\n    at com.ibm.rules.res.xu.client.internal.XURuleEngineSession.executeRuleEngineOperation(XURuleEngineSession.java:60)\n    at com.ibm.rules.res.xu.client.internal.XURuleEngineSession.loadUptodateRuleset(XURuleEngineSession.java:65)\n    at ilog.rules.res.session.impl.IlrStatefulSessionBase.(IlrStatefulSessionBase.java:95)\n    at ilog.rules.res.session.impl.pojo.IlrStatefulSessionPOJO.(IlrStatefulSessionPOJO.java:35)\n    at ilog.rules.res.session.IlrPOJOSessionFactory.createStatefulSession(IlrPOJOSessionFactory.java:88)\n    ... 44 more\nCaused by: com.ibm.rules.res.xu.internal.LocalizedResourceException: GBRXU0001E: The interaction ruleEngine.loadUptodateRuleset has failed\n    at ilog.rules.res.xu.cci.IlrXUInteraction.execute(IlrXUInteraction.java:268)\n    at com.ibm.rules.res.xu.client.internal.XUSession.executeOperation(XUSession.java:156)\n    ... 49 more\n\nSolution:\nMake sure you have checked the “Isolate the Resource Provider” for your XU RES as described in:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.zos.config/topics/tskdsdeployxu.html\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Decision Model Service","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/DecisionCenter/DecisionModelService","text":"Date:2019-12-26\n\nOverview\n\nDecision Model Services is a new feature introduced in IBM Operational Decision Manager (ODM) version 8.10. Traditionally, IT creates the decision model on which rules are authored by business users. Using Decision Model Services, business users can create both the decision model and the business logic directly in the Decision Center Business console.\n\n Prerequisites\n\nTutorial: Getting started with decision modeling https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.tutorials/tutorialstopics/odmdcmod_int.html\n\nComponents\n\n1.Modeling Decisions in the Business Console\n\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/modeling/conbc_modeling.html\n\nIn the Business Console, a business expert can:\nCreate brand new decision services from scratch, or import an existing project that was created in Decision Composer\nModel data, decision diagrams and logic iteratively\nValidate the decision model during development\nTest, simulate, manage, govern the decision model service just like regular decision services\nDeploy a decision model service to an execution environment using a deployment configuration\n\nDecision modeling allows business expert to model decisions interactively:\nStart from top decision and build dependencies\nCreate and change data model at any time\nSpecify logic through tables and rules\nTry and validate decisions on the fly\nKeep restructuring and refining without any constraints\n\n2.Decision Modeling Samples and Tutorials\n\nThe sample server contains decision model services for different use cases. The same sample projects are also available in compressed files in \\teamserver\\tutorials\\decisionModel. You can import the projects into your own Decision Center repository\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.bu.bconsole/modeling/condcmodsamples.html\n\n3.Decision Composer\n\nhttps://ibm.biz/DecisionComposer\nDecision Composer is a free web tool that can be used to learn and try decision modeling on the cloud. Thanks to Decision Composer, users can author or run integrated decisions without any installation.  Decision Composer supports limited features of decision modeling (refer to below table), it is not for production. \n\n<table width=\"200px\" border=\"1px solid ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    \n    Decision Composer\n    ODM 8.10\n  \n  \n    Decision models\n    ✔\n    ✔\n  \n  \n    Rule flows\n    ✖️\n     ✔\n  \n  \n    Business rule & decision table editing\n    ✔\n    ✔\n  \n  \n    Business language\n    Basic\n    Advanced / Custom\n  \n  \n    Collaboration\n    Basic\n    Advanced\n  \n  \n    Governance\n    ✖️\n    ✔\n  \n  \n    Testing & Simulation\n    ✖️\n    ✔\n  \n  \n    Role & permission management\n    ✖️\n    ✔\n  \n  \n    Enterprise Integration & DevOps\n    ✖️\n    ✔\n  \n  \n    Execution at scale\n    ✖️\n    ✔\n  \n\nFAQs\n\n1.Do we fully support Decision Modeling Notation (DMN)? \n\nAnswer: \n&nbsp;&nbsp;&nbsp;&nbsp;We support a subset of DMN (Decision dependency diagram, DTs, Rules, Hit policies), but we add the power of ODM to offer a consistent environment meant for strong production.\n\n2.Does decision modeling work with other languages than English?\n\nAnswer: \n&nbsp;&nbsp;&nbsp;&nbsp;The web user interface is fully localized, but the action rule language currently supports English only. In other words, the decision model service is available only when the Decision Center database persistence is set to English locale.\n\n3.Are there limitations to the size & complexity of decision models?\n\nAnswer: \n&nbsp;&nbsp;&nbsp;&nbsp;Yes. We recommend no more than 50 nodes in the diagram.\n\n4.When to start with a decision model service vs. a regular decision service?\n\nAnswer:  \n&nbsp;&nbsp;&nbsp;&nbsp;a. If you need a rather simple business object model\n&nbsp;&nbsp;&nbsp;&nbsp;b. If you want to think about your decision\n&nbsp;&nbsp;&nbsp;&nbsp;c. If you need a reasonably simple and isolated decision\n\n5.Can I transform a decision model service into a regular decision service?\n\nAnswer: \n&nbsp;&nbsp;&nbsp;&nbsp;No. But you can deploy and consume it like any regular decision service.\n\n6.I have already migrated to ODM 8.10.x. But I still cannot find the icon to create or import decision model service in the Business Console. Why?\n\nAnswer: \n&nbsp;&nbsp;&nbsp;&nbsp;This is because you did not migrate the Decision Center database schema. Since v8.6, the Decision Center database schema is fully compatible with version 8.10.x. But you have to migrate the database schema using the provided Ant task in order to use the new decision modeling feature. Refer to documentation of Migrating the Decision Center database.\n\nReference\n\nODM 8.10 skill transfer session, which introduces decision modeling\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Decision Center API","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/DecisionCenter/Decision Center API","text":"Date:2019-12-27\n\nOverview\n\nODM provides Java APIs to manage rule projects in Decision Center, which allows users to implement back-end customizations or Java client application for Decision Center. \n\nSince v8.9.1, ODM also provides REST API to manage decision services in Decision Center, which allows users to easily implement a continuous deployment process.\n\n Prerequisites\n\nKnowledge of Java and REST API\n\nComponent\n\n1.Decision Center Java API\nYou can use Java API to implement Decision Center back-end customizations. \ncan be used to manage both classic rule projects and decision services\ncan be used to create packages and rules, search the repository, and to lock, unlock, and commit project elements\nJava API is not available in ODM on cloud\n\nGeneral guidance of using Decision Center Java API:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.custom/topics/tpccustdc_usingapi.html\n\nReference of Javadocs:\nhttps://www.ibm.com/support/knowledgecenter/SSQP76_8.10.x/com.ibm.odm.dcenter.ref.dc/html/api/html/overview-summary.html\n\n2.Decision Center REST API\nStarting from ODM v8.9.1, you can use the Decision Center REST API to build, test and deploy decision services. \ncan be used to manage decision services only\ncan be used to easily set up and enforce a continuous deployment process by using the programming language of your choice\n\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dcenter.ref.dc/topics/condcrestapi.html\n\nYou can access a swagger user interface at http:// localhost:/decisioncenter-api. This interface exposes a view of the available endpoints, their documentation, and a Try it out button to test each endpoint. You can use it as a Decision Center REST API test tool.\n\nTutorial Using the REST API tool provides step-by-step instructions of how to build, test and deploy a decision service by using this REST API test tool. \n\n Troubleshooting\n\nData Collection\nIf a client reports a problem or an unexpected behavior when using Decision Center API, request for\n\n1.The exact version of ODM in use \n2.application log/server log, containing the complete stack trace\n3.a reproducible sample or code snippet \n\nIf the problem is related to Java API, try reproducing the issue by modifying a similar product sample. If the problem is related to REST API, try reproducing the issue by using the REST API tool. Refer to Using the REST API tool\n\nMost API related questions are how-to questions. You can usually find a product sample that demonstrate how to achieve a similar requirement. \n\nSample: Decision table management by using APIs\n  Located in /teamserver/samples/servercopydecisiontable\n  This sample is a Java application that uses Decision Center API to create, copy or delete decision tables. \n  It is a very good reference when a user wants to implement a Java application to manage decision tables in Decision Center. \n  This sample also demonstrates how to use IlrDefaultSearchCriteria API to locate a rule artifact. \n\nSample: Web authoring application\n  Located in /teamserver/samples/servercomponents\n  This sample demonstrates how to build a web application using Decision Center web components. It is a good reference for users who wants to create their own custom web console to manage rules in the Decision Center repository\n  This sample also demonstrates how to use Java API to set or unset permissions on a project (utils/PermissionHelper.java), and to lock or unlock rule elements (utils/RTSHelper.java). \n\nSample: Permission management \n  Located in /teamserver/samples/permissiontuning\n  This sample demonstrates how to tune permission management by using a session controller. It is a good reference for users who wants to implement a custom session controller.\n\nSample: Remote connection for querying\n  Located in /teamserver/samples/serverqueryexecute\n  This sample demonstrates how to run Decision Center client API. It is very helpful when a user wants to implement a client Java application to run queries against a remote Decision Center repository. \n\nSample: Automated decision service test and deployment\n  Located in /teamserver/samples/dsdeploy\n  This sample demonstrates how to test and deploy a decision service from Decision Center to Rule Execution Server or to a file by using the Decision Center API. It is a good reference for users who wants to implement Java application to automate deployment of decisions service.\n\nTutorial: Using the REST API tool\n  This tutorial provides step-by-step instructions of using the REST API tool. It also demonstrates the how to use REST API to build, test, and deploy a decision service\n  When a user wants to find out which REST API can be used to achieve certain requirement. Check out the swagger user interface and test the REST API. Note, the Decision Center API has been improved in the latest releases. For example, the REST API for managing branches, releases of decision services is added in ODM v8.10.0. Make sure you check out the latest release and confirm if the specific feature is available in the product version used by the client. \n\nSample: REST API in Java\n  Located in /teamserver/samples/dcrestapi\n  This sample demonstrates how to use an HTTPClient in Java to call Decision Center REST API to build, test, and deploy a decision service. It is a good reference for clients who want to automate continuous deployment of decision service using REST API. \n\nNote, since classic rule project is deprecated in ODM v8.8.0, most Decision Center samples have been re-written to work with decision services and the Business Console. For sample code of managing classic rule projects, you need to refer to the samples in the older versions, for example, v8.7.1. \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Rule Designer","description":"ELEBRAS@jp.ibm.com","owner":"@Erwan Le Bras","path":"/OperationalDecisionManager/DecisionServerRules/RuleDesigner","text":"Date：2019-11-12\n\nAcronyms:\nODM: Operational Decision Manager\nDC: Decision Center\nDS: Decision Server\nRES: Rule Execution Server\nRD: Rule Designer\nXU: Execution Unit\nWAS: WebSphere Application Server\nBOM: Business Object Model\nXOM: Execution Object Model\nIRL: ILOG Rule Language\nJDK: Java Development Kit\nJVM: Java Virtual Machine\n\n Overview\n\nRule Designer (RD) is an important tool for IBM Operational Decision Manager (ODM). It is where the customer will start their development, and where they will write their Excecution Object Model (XOM) before deploying to Decision Center (DC) or to Decision Server (DS).\n\nPrerequisites\nThe following tutorial is very helpful in understanding the major features of Rule Designer:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutdesignertopics/tutruledesignertutorials.html\n\n Component\nRule Designer is part of the ODM Decision Server.\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutdesignertopics/tutruledesignertutorials.html\nSome customers believe that this is part of the Decision Center, but this is not the case.\nAccordingly, to install it you need to install Decision Server. And if you need to apply a Fix Pack, it is the DS Fix Pack that will be needed. \n\nInstalling Rule Designer in an existing Eclipse environment\nWhile usually developers will use the Rule Designer being installed by IBM Installation Manager when you install Decision Server, they may need to extend an existing Eclipse environment (for instance, an environment where they already have other tools installed). This is possible:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/installdsdesigner/tskdesigner_install.html\n\nTroubleshooting\n\n Starting Rule Designer in a different locale and missing bundles\nYou can start Rule Designer in a different locale by adding the osgi.nl line in the\n\n/configuration/config.ini\nFor instance\nosgi.nl=en_US\nto force the start in English. \n\nYou can also use the -nl\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.install/startingtopics/tskstartruledesignerlocale.html\n\nWhen you start in a specific locale, if you do not see the menu showing up properly in that language, it is likely that this language was not selected during the installation. \nIn that case, you need to run IBM Installation Manager, and select the “Modify” menu, select your ODM version, then make sure you select properly the different languages that you need.\n\nNote that if you receive a project that was written in a specific locale, you need to make sure you start Rule Designer in the same locale to be able to import it properly.\n\nImport/Export a project\nTo export a project, go to File = Export = General = Archive File\nThen select all the artifacts and save in zip format \nYou can then share this project.\n\nTo import a project exported as above:\nMake sure you are first in Rule Perspective\nThen go to File = Import = General = Existing Project into Workspace = Select Archive file \nhttps://www.ibm.com/support/knowledgecenter/SSQP768.8.1/com.ibm.odm.rules.embedded.samples/procedures/tskrulesembeddedimpexp_ruledesigner.html\n\nCommon import problems:\nWhen you import a customer project, the XOM may not build properly because of missing jars.\nIf the customer is using some 3rd party libraries you will need to request them and add them to the project.\n\n Data Collection\nhttps://www.ibm.com/support/pages/collecting-data-reporting-problem-rule-designer-event-designer-and-insight-designer\n\nRule Designer is an Eclipse Environment.\n\nAccordingly the main information are being provided by Eclipse.\nThe first place to look for is in the Help Menu of Rule Designer. \nYou will find all the Installation details in the “About Eclipse SDK” especially in the “Installation Details”.\n\nOther place to look for:\nA “.log” file is being generated in the .metadata folder of the workspace.\n\nThis file is  the first one to look for potential exception. This file will likely be available even when Rule Designer studio does not start (usually an issue with JVM incorrectly being set), so open it for details. \n\nIt will show the exceptions, but also the command line that was used to start eclipse.\n\nFor synchronization issue with DC or DS:\n\nIn that case, the issue might be not on the Rule Designer side, but on the DC or DS side. \nSo look for exception in the DC or DS application Server log.\n\nAlso, in that case you can edit the eclise.ini to generate network logs. For details on this:\nhttps://www.ibm.com/support/pages/collecting-data-reporting-problem-rule-designer-event-designer-and-insight-designer\n\nCommon issues:\n\n**Unexpected behavior such as hang\nYou should try to rebuild the workspace or restart Rule Designer**\n\nRule Designer (Eclipse) does not start\nCheck the .log file for reason.\nCommon root cause are: a .lock file remaining from a previous run or an incorrect JVM setting (such as inexistent folder set for the JDK)\nTo change the JVM:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.install/installdsdesigner/tskdesignerchangejvm.html\n\nOut Of Memory\nIf you see OutOfMemory in the .log file you may be lacking memory to load the project\nIn that case, edit the eclipse.ini to change the -Xmx value\nFor details:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.migrating/odmtopics/tskmigrateeclipse_projects.html\n\nJDK Issues\nA common issue faced when using Rule Designer is starting with a wrong JDK\nThe JDK can be set in the eclipse.ini with the -vm parameter\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.install/installdsdesigner/tskdesignerchangejvm.html\n\nPerformance issues\nIf the build is taking too much time, you may try to remove some check being performed during the build.\nGo to File = Preferences = Rule Designer = Build\nThen you can remove the “checks” on BOM to XOM or on IRL \nIt will build much faster but you will lack some extra checks.\n\nMore details on this settings is available in the following tuning guide for ODM, in the chapter “Rule Designer, Tuning Recommendations”\nhttps://www.ibm.com/community/automation/wp-content/uploads/sites/8/2019/02/ODM89xTuningGuideV2.0.pdf\n \nSync issues\nMake sure you check for errors or warnings in the “Synchronize View” of Rule Designer\nAlso, in that case you can edit the eclise.ini to generate network logs. For details on this:\nhttps://www.ibm.com/support/pages/collecting-data-synchronization-between-rule-designer-and-decision-center\n\nAlso, in case the issue is on the Application Server side, make sure to retrieve the DC/DS logs.\nFor details:\nhttps://www.ibm.com/support/pages/collecting-data-reporting-problem-ibm-decision-center\n\nXOM issue\nIf the XOM has changed, you need to perform the BOM Updates\nFor details:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.9.1/com.ibm.odm.dserver.rules.designer.author/designingbomtopics/tpcbomupdatingto_xom.html\n\n References\n\nRule Designer Tutorial:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutdesignertopics/tutruledesignertutorials.html\n\nInstall Rule Designer in existing Eclipse:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.icp/topics/tskinstall_designer.html\n\nCollecting Data for Rule Designer:\nhttps://www.ibm.com/support/pages/collecting-data-reporting-problem-rule-designer-event-designer-and-insight-designer\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"RES Console","description":"ELEBRAS@jp.ibm.com","owner":"@Erwan Le Bras","path":"/OperationalDecisionManager/DecisionServerRules/RESConsole","text":"Date:2019-12-26\n\nOverview\n\nThe IBM Operational Decision Manager (ODM) Rule Execution Server (RES) console provides a web-based graphical interface that you use for managing and monitoring RuleApps, ruleset archives, Java™ XOMs and libraries, and transparent decision services.\n\nIntroduction to the RES Console:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.console/topics/tpcresconsoverviewintro.html\n\nAcronyms\nPlease refer to the Acronym List\nhttps://pages.github.ibm.com/dba-support/DBA-Education//OperationalDecisionManager/GeneralODM/Acronymslist\n\nPrerequisites\n\n1.General Overview:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.overview/topics/odmdserverrulesoverview.html\nThe RES console is used for administration and monitoring.\n\n2.System Requirements:\nhttps://www.ibm.com/software/reports/compatibility/clarity-reports/report/html/softwareReqsForProduct?deliverableId=129684A045A711E9A023FC8C61764AD5&osPlatforms=AIX|Linux|Mac%20OS|Windows&duComponentIds=D002|S003|S006&mandatoryCapIds=30|1|13|25|26&optionalCapIds=341|47|9|1|121|8|15|223\n\n3.Cluster installation for RES Console: Ideal Topology on WAS\nWhen clients face cluster installation issues, it is always good to check if they are using a recommended topology. On WAS: https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.config.was/topics/contopology.html\n\n4.Creating the Decision Server Database\nBefore you can use the Decision Server after you have installed it, you need to set the Decision Server database. \nFor details:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.distrib.config.was/sharedconfigtopics/conres_db.html\n\n Components\n\nTo understand and get familiar on with how the RES Console works, following the tutorial is the best approach.\n1.Tutorial:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutrestopics/tutres_tutorials.html\n\n2.Debugging a remote Rule Execution Server application:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.tutorials/tutrestopics/tutdebugrmt.html\n\nData Collection\n\n1.Must Gather for IBM Rule Execution Server:\nhttps://www.ibm.com/support/pages/collecting-data-reporting-problem-ibm-rule-execution-server\n\n2.Setting the granularity of the logs: https://www.ibm.com/support/knowledgecenter/en/SSQP768.9.2/com.ibm.odm.dserver.rules.res.managing/topics/tskresmonitorevntloggran.html\n\n3.Performance Issues:\nhttps://www.ibm.com/community/automation/wp-content/uploads/sites/8/2019/02/ODM89xTuningGuideV2.0.pdf\n\n4.Viewing the Execution Unit (XU) execution traces (also known as XU Dump)\nIt is usually useful when experiencing unexpected execution results to retrieve the execution log (the XU dump). The process is described here:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.dserver.rules.res.console/topics/tskresconsresxudebugtrace.htm\n\n Troubleshooting\n\nWhen trying to troubleshoot issues on the RES console, it is important to get access to the RES console logs, as well as version details.\n\nWhen you open the RES console, you will see two tabs that are very useful for troubleshooting:\nThe Server Info tab, and the Diagnostics tab.\n\nIn the Server-Info tab, you can change the log level as shown in the above screen dump.\nAlso, you can see the path to the log file.\nRetrieving this log for analysis, and if needed, change the Log Level to “info” or “Debug” and reproducing the issue may help the investigation.\nAlso, you can see details, such as version, of the Execution Units (XUs) on this page.\n\nIn the Diagnostics tab, you can run diagnostics to see the status of the server. This is very useful when facing some kind of connectivity issues, as some of the above diagnostics are likely to show up as warnings or as errors.\n\nOther troubleshooting tips\n\n1.Increase the logging level for the RES Console when working on WAS Server\nGo to WAS admin console - Troubleshooting  Logs and Trace    Diagnostic Trace  Change log detail levels  Runtime \nSet the following filter:\n=info: com.ibm.rules.res.=fine: ilog.rules.res.*=fine\n\n2.General troubleshooting tips for RES console:\nA list of common issues with the RES console and how to deal with them:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/sharedconfigwebspheretopics/consupporttroubleshoot_res.html\n\n3.Class Loading issues:\nSymptoms: you get Error 500: java.lang.NoSuchMethodError when using the RES Console\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.troubleshooting/sharedconfigtopics/tsktrblshtclassloader_order.html\n\n4.Migrating RES Console from earlier version of ODM:\nFor most upgrades, first check the system requirements, then follow the instructions:\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.migrating/odmtopics/tskruntimeodm.html\n\n5.Client wants to avoid an outage when upgrading:\nFor newer versions (after 8.8.1) it is possible to avoid an outage when migrating, using the rolling update.\nNow clients may need to do it step by step (8.8.1 to 8.9.2 then 8.9.2 to 8.10.1 for instance)\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.distrib.migrating/sharedrollingupgtopics/conupgodmvnvn3.html\nIf a client is migrating from an earlier version, it is not possible to avoid an outage when upgrading.\n\n6.Unable to login to the RES console (security issue):\nIn the logs:\n[2/8/18 6:25:04:631 EST] 00000068 SecurityManag W   SECJ0314W: Current Java 2 Security policy reported a potential violation of Java 2 Security Permission. Refer to the InfoCenter for further information.\nPermission:\n      logs : Access denied (\"java.io.FilePermission\" \"logs\" \"read\")\n\nCode:\n\n     ilog.rules.res.console.util.LogManager  in  {file:/websoft/IBMWebAS/profiles/profileServer/installedApps/strodmcell88/jrules-res-management.ear/jrules-res-management.war/WEB-INF/lib/generic-jrules-res-management-8.8.1.1.jar}\n\nStack Trace:\njava.security.AccessControlException: Access denied (\"java.io.FilePermission\" \"logs\" \"read\")\n    at java.security.AccessController.throwACE(AccessController.java:100)\n    at java.security.AccessController.checkPermission(AccessController.java:174)\nResolution:\nIf J2C security is enabled in the server then it is required that the application provides a security policy. The RES application needs the security role definition \n\nModifying the file  jrules-res-management-WAS85.ear/META-INF/was.policy  as explained below should solve the problem. \n\nin the block  \ngrant codeBase \"file:jrules-res-management.war\" {\n\nadd the line:\npermission java.io.FilePermission \"logs\" \"read\";\n\n7.Other Login Issues:\nWhen trying to access the RES Console, error such as the following one appear:\n\nCWWKS9104A: Authorization failed for user user1 while invoking res on /protected/home.jsf. The user is not granted access to any of the required roles: [resAdministrators, resDeployers, resMonitors].\n\nResolution:\nTo allow the users to login to the RES console, you must map the users/groups to one of the three predefined RES security roles (resAdministrators, resDeployers and resMonitors). This is documented in: https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.icp/topics/condefault_users.html\n","wordCount":0,"topics":[],"type":"Content"},{"name":"RES Runtime","description":"ELEBRAS@jp.ibm.com","owner":"@Erwan Le Bras","path":"/OperationalDecisionManager/DecisionServerRules/RESruntime","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Decision Warehouse","description":"renyren@cn.ibm.com","owner":"@Ren Yan","path":"/OperationalDecisionManager/DecisionServerRules/DecisionWarehouse","text":"Date：2019-12-18\n\nOverview\n\nThe IBM Operational Decision Manager (ODM) Decision Warehouse (DW) is a Rule Execution Server (RES) console tool for monitoring ruleset execution. It stores execution traces in a database. The execution trace contains information about how a decision was made. It records the rule flow, the path of rule flow tasks, and the rules that were executed. These details are intended to help users, an auditor for example, understand what happened during the execution process. Users can access Decision Warehouse in the Rule Execution Server console.\n\nAcronyms:\nODM\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IBM Operational Decision Manager\nDW\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Decision Warehouse\nRES\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rule Execution Server\n\n Prerequisites\n\nOverview of Decision Warehouse:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/conresdwoverview.html\n\nComponents\n\n1.Create Decision Warehouse Database\nDecision Warehouse is not mandatory. Users only choose to create DW database schema when they need to store execution traces for monitoring and audit purposes. \nYou can create the DW database schema by one of the following methods:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Run the Installation Settings wizard from the Rule Execution Server console\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Or \n&nbsp;&nbsp;&nbsp;&nbsp;b. Execute trace_.sql  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(located in \\executionserver\\databases)\n\n2.Enable Execution Trace\nExecution trace is disabled by default. \nBefore deploying a ruleset in Rule Designer or Decision Center, you can add the following ruleset properties to enable tracing:\n\n&nbsp;&nbsp;&nbsp;&nbsp;monitoring.enabled = true\n&nbsp;&nbsp;&nbsp;&nbsp;ruleset.sequential.trace.enabled=true\n\nAfter a ruleset already has been deployed to the RES, you can add above ruleset properties in the RES console, or enable tracing in the monitoring options panel of the ruleset view:\n\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tskresconfigexec_monitoring.html\n\n3.Add multiple datasources\nYou can add dedicated datasource to Decision Warehouse\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tpcresconfigdwadddsrc_intro.html\n4.Optimize Decision Warehouse\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tpcresconfigoptimdwintro.html\n\n Troubleshooting\n \nData Collection and Analysis\n\nA typical issue when using Decision Warehouse is when no execution traces are logged in the database. First check if tracing is enabled for the current ruleset from the ruleset view in the RES console.\n\nIf the client provides the ruleapp archive, you can verify the related ruleset properties in the ruleapp.jar\\META-INF\\archive.xml file:\n\n        monitoring.enabled\n        true\n      \n      \n        ruleset.sequential.trace.enabled\n        true\n      \nIn the archive.xml file you can also check the filtering properties:\n      \n        monitoring.filters\n        INFOTOTALRULESFIRED=true,INFOEXECUTIONDATE=true,INFOTOTALTASKSEXECUTED=true,INFOTOTALRULESNOTFIRED=true,INFOEXECUTIONDURATION=true,INFOEXECUTIONEVENTS=true,INFORULESETPROPERTIES=true,INFOEXECUTIONOUTPUT=true,INFOTOTALTASKSNOTEXECUTED=true\n      \nIt is also useful to collect the RES server logs. There could be DW related errors in the log if problem occurred when persisting the traces into the database. You can find similar message like below:\nexecution     E   An error occurred when the process tried to save the trace.\nUsually there is also a complete stack trace about database errors. \n\nTypical Issues\n\nIssue1\nNo execution trace is logged in Decision Warehouse\nSymptom\nDecision Warehouse database schema is properly created, but nothing is logged in the database. Searching in Decision Warehouse tab does not return anything. \nResolving the Problem\nFirst check if the ruleset execution monitoring is activated for the ruleset. Make sure below ruleset properties are set to true: \nmonitoring.enabled = true\nruleset.sequential.trace.enabled=true\nIf the problem persists, ask client to provide:\n&nbsp;&nbsp;&nbsp;&nbsp;a. A screenshot of Monitoring Options part of the ruleset view or the ruleapp archive. \n&nbsp;&nbsp;&nbsp;&nbsp;b. The RES server logs\n&nbsp;&nbsp;&nbsp;&nbsp;c. Activate log “com.ibm.rules.res.persistence.sql=all” if nothing is found in the server log.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This will log SQL requests sent to RES DB including requests related to Decision Warehouse. Search for keyword ”EXECUTION_TRACE“ to locate the SQL queries reading or writing to DW database. \n\nIssue#2\nDecision Warehouse database grows fast\nSymptom\nThe Execution_Traces table keeps growing and fill up the database space quickly\nResolving the Problem\n1.Manually remove the outdated execution traces by using “Clear Decisions\" from Decision Warehouse tab of the RES console\n2.Reduce the size of execution trace by \n&nbsp;&nbsp;&nbsp;&nbsp;a. applying filters to reduce the data logged in the database. Refer to:\n&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tskresconfigruleset_filters.html  \n&nbsp;&nbsp;&nbsp;&nbsp;b. removing BOM serialization in case of large amount of input and output data\n&nbsp;&nbsp;&nbsp;&nbsp;https://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.res.managing/topics/tskresconfigrembomserial.html\n3.Use REST API to remove execution traces periodically. Refer to:\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.dserver.rules.ref.res/html/restapi/html/ecmapidecisiontraces_delete.html\n\nIssue#3\nDecision Warehouse database space is not reclaimed after removing execution traces\nSymptom\nUser has removed all execution traces from Decision Warehouse when the database space is used up. Searching in RES console returns 0 results which confirms the data is indeed deleted.  But the size of database space remains the same. \nResolving the Problem\nThis typically happens on DB2 when the tablespace is not automatically reclaimed after deleting table rows which contains CLOB data. User has to run a DB2 REORG to reclaim the spaces. Refer to DB2 documentation for details:\nhttps://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.perf.doc/doc/c0005406.html\nhttps://www.ibm.com/support/pages/how-reclaim-space-after-dropping-indexes-or-rows-db2-table\n\nRefer client to DB2 support if they need further help about table REORG. \n\nIssue#4\nDecision Warehouse missing to capture decisions\nSymptom\nWhen executing rulesets using webservice, only the very first execution is captured. All the subsequent request is not traced while errors like below is found in the server log:\ncom.ibm.websphere.ce.cm.DuplicateKeyException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'EIDUNQ' defined on 'EXECUTIONTRACES'.\nor\ncom.ibm.websphere.ce.cm.DuplicateKeyException: ORA-00001: unique constraint (ODMS2.EIDUNQ) violated or WARNING: An error occurred when executing the SQL query. java.sql.SQLIntegrityConstraintViolationException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'EIDUNQ' defined on 'EXECUTION_TRACES'\nResolving the Problem\nODM when monitoring, maps each execution to a sequence that the caller can manage the DecisionID. It's in the header column DecisionID of a REST call\nXML:  string\nJSON:   \"DecisionID\": \"string\"\nor in the WSDL\n\nThis DecisionID field is mapped into the database as EXECUTION_ID, that same column that supports a constraint:\nCONSTRAINT EIDUNQ UNIQUE (EXECUTIONID)\nThis constraint prevents user from running the same request with the same ID twice. An easy solution is to define this ID as a timestamp to ensure each time it run with a new unique ID. \nDW will also automatically generate a unique DecisionID is this ID is left as blank.  However, setting DecisionID in the request could optimize the response time\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"REST API","description":"","owner":"","path":"/OperationalDecisionManager/DecisionServerRules/REST API","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Decision Server Insights","description":"xiaohua@us.ibm.com","owner":"@Xiaohua Liu","path":"/OperationalDecisionManager/DecisionServerInsights","text":"Date:2019-12-27\n\nIntroduction\n\nDecision Server Insights is a scalable event processing system with rule-based temporal reasoning and analytics capabilities. It is built on top of WLP and WXS.\n\nEvents happen to real-world objects such as customers, patients, or trains, and these objects are modeled as entities. A Decision Server Insights solution can update the state of these entities as a result of an event and alert you to possible inefficiencies, opportunities, and threats in the real-world.\n\nDecision Server Insights uses a four-step approach to help your business decide what actions to take at the right time:\nSense what is happening.\nBuild the context of your situation.\nDecide what to do when something happens that affects the situation.\nAct on the changed situation by doing something.\n\n Starting point\n\nProduct tutorial\nhttps://www.ibm.com/support/knowledgecenter/SSQP768.10.x/com.ibm.odm.itoa.tutorial/topics/itoatut_intro.html\nMore in depth training\nZB-403G Developing Solutions with Decision Server Insights:  https://yourlearning.ibm.com/#activity/ITS-ZB403G\n\nWorking on Cases\n\nDSI cases can be in difference areas, both KC and dwAnswers forum contain answers to some known issues and questions.\nif it can be reproduced either in Insight Designer or the sample server, you can ask for the user for the projects zip & solution archive file (.esa file) and reproduce in a Castle or BD machine.\nIf it is something to do with the initial DSI cluster not working, it is probably due to the server configuration.  The detail instruction on server configuration is in KC.\n      https://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.itoa.config/topics/conconfigproductiontopol.html\n      \nSome common issues might occur:\n\n1.Customer is migrating from 892 and their server configure is not using the 8.10 server template, as ODM 8.10 uses  a version of WXS, and its configuration element in WLP is changed, the customer should regenerate the servers using the template.\n\n2.The WXS catalog server quorum is not configured properly. You can only set enableQuorum= true if there are at least 3 catalog servers.\nGrid not working after restart, please make sure the customer is following the recommended sequence and commands to start and stop the servers.  If DSI cluster is configured to use a database as the back store, also make sure either they run dataLoadManager properly so the grid is in ONLINE state.\nhttps://www.ibm.com/support/knowledgecenter/en/SSQP768.10.x/com.ibm.odm.itoa.admin/topics/tskrestorepersistentdata.html\nSometimes the question is more on WLP or WXS configuration, you should create a skill case to WAS team for help.\nIf it is something more complex, you should open a collaboration item in SF, before that, please make sure you gathered the must gather info according to the below two guides.\n  DSI mustgathers for L2: \n https://w3-connections.ibm.com/wikis/home?lang=en-us!/wiki/Wf0025e79110845e387df_9a521822f4db/page/DSI%20must-gathers\n  DSI problem Specific must gathers for L2: \n https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf0025e79110845e387df_9a521822f4db/page/DSI%20problem%20specific%20must-gathers\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Custom properties","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/Customproperties","text":"Date:2019-12-12\n\nOverview \n\nThe Custom Properties can be defined in Admin Console. You can customize the properties that are displayed in the Details tab for process blueprints and decision diagrams. \n\n&nbsp;\n Component\n\nPlease visit the URL - https://ibm.blueworkslive.com/scr/docs/bwl/topics/admcustaccount.html#customizingproperties\n\n&nbsp;\nTroubleshooting \n\nCommon Problems: \n\n1.How can I add a customized property for the activities in my account? \n\n A custom property is one that the user can define. An admin can define this by going to Admin page - Properties.  An account can have 10 text-based custom properties and ten numeric-based custom properties.  \nThe user must be an admin to access the admin console to edit custom properties. \n\n2.If an admin is having problems setting up custom Properties, following information will be useful to analyse the issue: \n\n&nbsp;&nbsp;&nbsp;&nbsp;a. A screenshot from the Admin - Properties page preferably showing the property with the issue \n&nbsp;&nbsp;&nbsp;&nbsp;b. A screenshot from the diagram’s activity box ‘Details’ \n&nbsp;&nbsp;&nbsp;&nbsp;c. Screenshots of error messages \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Customize account","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/Customizeaccount","text":"\n\nYou can customize your Blueworks Live account to meet the needs of your organization.\n\n Branding\n\nCustomize the account to look like an internal portal by changing the color scheme and uploading the company logo for both Blueworks Live and for printable documents from Blueworks Live.\n\nOn the Admin page, go to the Customization tab and configure the settings in the Branding section to:\n\nAdd a custom logo and choose a color scheme to apply to the header and footer of all Blueworks Live pages.\n\nCustomize the email notifications sent out by Blueworks Live to include a custom subject line and a company logo.\n\nAdd a custom logo to process documentation that is exported to Microsoft Word.\n\nAdd a footer to include custom text, such as \"Confidential. Do not distribute,\" in documentation that is exported to Microsoft Word.\n\nAdding a custom help page\n\nYou can provide custom help documentation to help users adhere to your organization-specific guidelines for using Blueworks Live.\n\nOn the Admin page, go to the Customization tab and configure the settings in the Help section.\n\n1.Click Custom help page.\n\n2.Provide a title for your help page and specify an Account Admin Contact who will be a contact person for the content in the help page.\n\n3.Use the rich text editor to enter your custom help content. You can add html links to more detailed documentation and policies governing your organization's use of Blueworks Live.\n\n4.Click Update to apply your changes.\n\nWhen the user clicks the Help link in the tool bar, your custom page will be displayed instead of the generic Blueworks Live help.\n\n Customizing properties\n\nYou can customize the properties that are displayed in the Details tab for process blueprints and decision diagrams.\n\nCustom properties are configured in the Properties tab of the Admin page.\n\nTo show or hide predefined properties such as Business Owners, Cost, and so on, use the check boxes to mark properties visible or invisible.\n\nTo add your own custom properties to process blueprints, click one of the links in the Custom Process Properties section and add either a text or number property. Optionally, specify a tooltip to provide users with additional information about the property.\n\nTo restrict a custom property to a specific set of values, click the Enumerated column. To add values, a glossary manager must open the glossary and add new values to the set of allowed values. You can also restrict the Systems property in the same way.\n\nEnabling email services\n\nYou can enable the prebuilt email service for your account, which allows users to configure service tasks that send email messages during the running of a process app.\n\nIn the Admin page, go to Process App Management  Service Catalog. Click the Enable check box to enable or disable the email service.\n\n Warning about adding non-preferred terms to the glossary\n\nIf your glossary managers want to encourage users to use specific glossary terms and discourage them from creating unnecessary new ones, you can enable a warning when users add non-preferred terms to the glossary.\n\nIn the Admin page, go to Customization  Library and check Allow glossary manager to enable warnings for users that enter non-preferred values. A glossary manager can now open each category in the glossary and decide whether to check the Warn users that enter non-preferred values check box. If the box is checked, a user who enters a non-preferred value in that category sees a warning and must close it before proceeding.\n\nFor more information, see Building a business glossary.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Manage users","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/Manageusers","text":"Date:2019-10-15\n\nYou can manage the list users who have access to Blueworks Live and configure the types of tasks they can perform.\n\nAdding users\nTo add users, you invite them.\n\nUser groups\nTo manage permissions for sets of users across an account, you can define user groups for the account and then add them to spaces. In this way, the individuals in a user group become participants of a space and can be assigned specific sets of privileges within that space. User groups can be either predefined or custom.\n\nSetting and changing permissions\nYou set and change permissions at the account level, the space level and, to a lesser degree, the artifact level. You can assign permissions by license type, user group, and at the individual user level. Default permissions are propagated for each space based on the user type (license type) and account-level customizations.\n\nParent topic: Administering your Blueworks Live account","wordCount":0,"topics":[],"type":"Content"},{"name":"Manage Billing","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/ManageBilling","text":"Date:2019-12-12\n\nOverview \n\nAs an account administrator, you can manage your billing details (if you have used a credit card) directly in your account. \n\n&nbsp;\n Component \n\nPlease visit the URL - https://www.ibm.com/support/pages/how-do-i-manage-billing-details-my-blueworks-live-account\n\n&nbsp;\nTroubleshooting \n\nCommon Problems with references: \n\n1.If the request is on Billing/ Invoices regarding an existing account, contact the correct Billing team. \nThe Billing contacts are found in this Wiki. \n\n2.If it is regarding an expired customer account, follow the internal process of “Handling External Account Expirations” \n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Manage Disk space","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/ManageDiskspace","text":"Date：2019-12-11\n\nOverview \n\nIBM Blueworks Live provides each account with 50 MB of storage per Editor. As an admin, you can go to the File Management tab to monitor the files attached to spaces, posts, policies, decisions, and process blueprints, and determine the amount of storage remaining. \n\n Component \n\nPlease visit the URL - https://www.blueworkslive.com/scr/docs/bwl/topics/monitoringfilestorage.html\n\nTroubleshooting \n\nCommon Problems and References \n\na. File storage exceeded. Can not add more attachments. \nSee: \nHow to manage disk space in a Blueworks Live account \n\nb. How to increase the allocated Storage? \nContact Billing. \nSee: Contact for Billing \n\nc. Managing and Deleting Data \nhttps://ibm.blueworkslive.com/scr/docs/bwl/topics/deletion.html \n\n \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Security","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/Security","text":"Date：2019-12-11\n\nOverview \n\nIBM Blueworks Live development is done in accordance with the IBM secure engineering framework. \n\nIBM maintains privacy and security policies that are published and communicated to IBM employees through IBM's intranet site. Employees are required to re-certify annually. \n\nIBM and its data center host each require privacy and security education training for individuals who support the data center where Blueworks Live is hosted. \n\nBlueworks Live security policies and standards are re-evaluated annually. \n\nBlueworks Live security incidents are handled in accordance with the incident response management program of the data center where Blueworks Live is hosted. \n\nBlueworks Live has a documented Disaster Recovery response plan and incident management plan. \n\nBlueworks Live has annual security audits. Blueworks Live allows customers to perform penetration testing and security assessments. To request a penetration test, open a support ticket through the Blueworks Live support portal or email <a href=\"mailto:support@blueworkslive.com\"support@blueworkslive.com . \n\n Component \n\nhttps://www.blueworkslive.com/scr/docs/bwl/topics/security_practices.html \n\nTroubleshooting \n\nCommon Problems and references\n\na. What are the 3 types of Authentication used in Blueworks Live and how to configure them? \nhttps://ibm.blueworkslive.com/scr/docs/bwl/topics/securauthentication.htmlsecurauthentication \n\nIBM ID Authentication \nBlueworks Live Authentication \nSingle Sign On \n\nb. How do I enable IBM ID authentication in Blueworks Live? \nhttps://www.ibm.com/support/pages/node/1074522 \n\nc. How do I manage Blueworks Live security? \nhttps://supportcontent.ibm.com/support/pages/how-do-i-manage-security \n\nd. How to restrict IP addresses? \nThis can be done on the Admin page -  ‘Security’ tab \nhttps://ibm.blueworkslive.com/scr/docs/bwl/topics/securconfiguring.html#securrestrictions \n\ne. Restricting IP addresses internally from IBM \nhttps://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/IP%20restrictions%20-%20access%20restrictions \n\nf. Why do we need to do 3 steps to login BWL now? \nhttps://developer.ibm.com/answers/questions/514924/why-do-we-need-to-do-3-steps-to-login-bwl-now.html?childToView=514926#answer-514926 \n\ng. How to prevent modifications in Blueworks Live account? \nhttps://www.ibm.com/support/pages/how-prevent-modifications-blueworks-live-account \n\nh. Can I do Penetration Tests for Blueworks Live Account \nhttps://www.ibm.com/support/pages/penetration-tests-blueworks-live-account \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Single sign on(SSO)","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/AdminConsole/SinglesignonSSO","text":"Date:2019-12-11\n\nOverview \n\nAs the account admin, you can enable single sign-on (SSO) support to allow your users to sign in to Blueworks Live using your company’s login credentials, eliminating the need to manage a separate password for Blueworks Live. \n\nYou can configure Blueworks Live to use your company’s corporate directory to authenticate users, based on the SAML 2.0 standard. IBM must enable your account for SSO before SSO can be configured. Contact Blueworks Live Support when you are ready to do this task. \n\nOnce your account allows SSO, a new tab is available on the Security tab of the Admin page. Click the Single Sign-On (SAML 2.0) tab and add the email domains of the users that you want to authenticate with SSO.  \n\nTip: After you enable SSO, you can go to the User Management tab and look at the Authentication column to see which users are now required to authenticate using SSO. \n\nIf a domain is configured for both SSO and IBMid authentication, SSO takes precedence. \n\n Component \n\nhttps://www.blueworkslive.com/scr/docs/bwl/topics/securauthentication.html#secursso\n\nTroubleshooting \n\nCommon Problems and references \n\na. How to download and install the IBM Blueworks Live Certificate? \n https://www.ibm.com/support/pages/how-download-and-install-ibm-blueworks-live-certificate \n\nb. How to Set Up Single Sign-On (SSO) in Blueworks Live \nhttps://www.ibm.com/support/pages/how-set-single-sign-sso-blueworks-live \n\nc. [Internal] How to support a request on a new SSO configuration – step by step guide \nhttps://w3-connections.ibm.com/wikis/home?lang=en-us!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Step-by-Step%20-%20New%20Clients \n\nd. How to update certificates for Blueworks Live accounts with SSO SAML2 \nhttps://www.ibm.com/support/pages/how-update-certificates-blueworks-live-accounts-sso-saml2 \n\ne. How to log in to an SSO account? \nTo log into an SSO account simply enter your email address and click login. The system does the rest for you. If you have login issues with an SSO account, please contact the account admins and check the login URL and also check your corporate credentials with the organization’s IT admins. \n\nf. How do I enable 'Just in Time Provisioning' on my SSO account? \nhttps://www.ibm.com/support/pages/just-time-provisioning \n\ng. [Internal] How do I test a client certificate? \nhttps://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Testing%20a%20Client%20Certificate\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"API","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/API","text":"Date:2019-12-12\n\nOverview \n\nThe Blueworks Live API provides access to a limited subset of the available Blueworks Live functions, such as search, list process details, and launch work instances. All access requires authentication using either a valid user name and password, which is restricted based on the normal Blueworks Live roles and permissions, or an access token that has global access to the account. \n\n Component \n\nhttps://www.ibm.com/support/knowledgecenter/en/SS2MKC/com.ibm.bwl.doc/topics/index.html \n\nTroubleshooting \n\n1.Use APIs when provisioning an account in bulk \n2.Use APIs when exporting process blueprints in bulk \n3.Use APIs when automating simple processes such as extracting reports \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Attach files","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/Attachfiles","text":"Date:2019-12-12\n\nOverview \n\nThere are times when you need to add more definition to an activity in your process blueprint. For example, if you work for an insurance company you may need to define a specific policy. If you work for an educational organization you may need to define specific teaching methods. \n\nThis is when attaching a document to a specific activity becomes very helpful to those using the process blueprint. \n\n Component \n\nDo the following to attach a document to an activity. \n\nNote: The document should already be created and located on your workstation. \n\n1.Open your process diagram and enter the Edit mode. \n2.Find the activity you need to attach the document to and open the Properties page. \n3.Click Attachments. \n4.Click Add. A selection box displays allowing you to navigate to where your document is located. \n5.Click on the document you need to attach. The document will automatically upload to the process blueprint and attach itself into the activity box you are working. \n\nTroubleshooting \n\n1.The process blueprint does not fully define the process without additional documentation. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Collaboration and Sharing","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/CollaborationandSharing","text":"Date:2019-12-11\n\nOverview \n\nThe power of Blueworks Live is evident when teams are working together on one project. Multiple people can collaborate on the same process blueprint at the same time. \n\nOnce development is completed, the blueprint can be shared in multiple ways such as, exporting to a document, or copying a space that contains that blueprint to another account. \n\n Component \n\nExporting to a document https://ibm.blueworkslive.com/scr/docs/bwl/topics/export_print.html \nSharing  and Collaborating  https://ibm.blueworkslive.com/scr/docs/search/sharing \n\nTroubleshooting \n\nShare when others need to see your work but belong on different accounts. \nPrint when others need to see your work but do not belong to any account.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Glossary","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/Glossary","text":"Date:2019-12-11\n\nOverview \n\nThe glossary is a place to define and store all of the important terms... business processes, policies and decisions.  Managing glossary access and contents means you can control who can view, edit and manage the glossary, and perform clean up tasks to consolidate duplicate glossary values. \n\n Component\n\nLearn how to use the glossary here:  \nhttps://www.blueworkslive.com/scr/docs/bwl/topics/transcriptglossaryusing.html\n\nTroubleshooting\n\nSome troubleshooting scenarios are defined below. For each please refer to the link above.\n\n1.I cannot merge two glossary components\n2.I cannot edit a glossary component\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Import,Export and Printing","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/Import,ExportandPrinting","text":"Date:2019-12-11\n\nOverview \n\nSharing and collaborating is one of Blueworks’s strength. To share you may have to print to PDF or export to a various file format. Another strength is being able to import Visio diagrams and have them translate to a process diagram. \n\n Component \n\nThe following links will show you how to do each process. \n\nImporting -  https://ibm.blueworkslive.com/scr/docs/bwl/topics/import_artifacts.html \nExporting and Printing - https://ibm.blueworkslive.com/scr/docs/bwl/topics/export_print.html \n\nTroubleshooting \n\nThese are some scenarios where importing, exporting or printing may resolve an issue \n\n Data Collection \n\n1.How do I import (or export) a process. \n2.What Visio file types can I import. \n3.How do I share my work with someone who is not in my Blueworks Live account. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Process app","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/Processapp","text":"Date:2019-12-11\n\nOverview \n\nA process app – process application – is a small application that you can design in Blueworkslive to automate certain types of workflows.  You can build and run two simple types of process apps: workflow and checklist. \n\nWorkflow apps include a sequence of tasks and approval steps that can be assigned to a set of users. Checklist apps include a set of tasks that are assigned all at once and can be completed in any order. \n\n Component \n\nhttps://ibm.blueworkslive.com/scr/docs/bwl/topics/buildchecklistapps.html \n\nTroubleshooting \n\nThe following lists some scenarios where a process app can help you in your design phase. \n\n1.You have designed your process diagram and you need to get it reviewed. You can setup a workflow app that automates the review process completely until completed. A workflow app is sequential so each step of the review must be done before the work flow app will proceed to the next step. All automatically. \n\n2.You have a list of things that need to be done in a process diagram your team has developed. You can setup a checklist app appointing people to each item in the checklist. Everyone can do this at their leisure. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Process diagram","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/Processdiagram","text":"Date:2019-12-11\n\nOverview \n\nA process diagram is a visual depiction of a process workflow. Blueworks Live process diagrams follow the rule of the BPMN2.0 specification. Process diagrams use notation artifacts such as activity boxes, gateways, subprocesses, in order to accurately show a process workflow from end to end. \n\n Component \n\nhttps://ibm.blueworkslive.com/scr/docs/bwl/topics/process_diagram.html \n\nTroubleshooting \n\nThe following scenarios depict some circumstances within which knowledge of how a process diagram is designed and created becomes important to troubleshooting any issue. \n\n1.How to create a subprocess \n2.When and how to use a gateway \n3.Under what circumstances do you need a parallel workflow \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Search and Filter Tools","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/SearchandFilterTools","text":"Date:2019-12-11\n\nOverview \n\nIBM Blueworks Live has two powerful tools to help you find process models or other artifacts: Search and Filter. \n\nSearch searches for all artifacts that match your search term. Filter limits the visible items to only those that match your term. \n\n Component \n\nPlease visit the URL - https://www.blueworkslive.com/scr/docs/bwl/topics/search_filter.html\n\nTroubleshooting \n\nCommon Problems and references\n\n1.Why don’t I see different results when searching with the same input as my colleague? \nThe user only sees the content that they have access to. \n\n2.Do I have to use filters every time I want to locate my space or the process?\nNo. The user can mark the commonly used spaces/ processes as ‘favorite’ by clicking on the yellow star next to the artefact. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Space","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/BlueworksLiveService/Space","text":"Date:2019-12-11\n\nOverview \n\nA space is an area within your account where you can create and organize Blueworks Live artifacts. You can add other users and groups to your space to allow them to view and edit your artifacts before you share them with a wider group of users in your account. \n\n Component \n\nPlease visit the URL - https://www.blueworkslive.com/scr/docs/bwl/topics/spaces.html#spaces \n\nTroubleshooting \n\nCommon Problems and references\n\n1.How to restrict a space to only those that have a need to know? \nSee:https://www.ibm.com/support/pages/restricted-space \n\n2.How to add users to a space? \nSee section b] of: [This Page \n\n3.When I login, I do not see the spaces? \nSee: https://www.ibm.com/support/pages/when-i-log-i-see-nothing \n\n4.Is there a shelf life for archived spaces or processes in Blueworks Live?\nSee: https://developer.ibm.com/answers/questions/484914/is-there-a-shelf-life-for-archived-spaces-or-proce.html\n\n5.How do I create Top-Level spaces? What kind of spaces do I need? \nSee: https://community.ibm.com/community/user/automation/blogs/genevieve-van-den-boer1/2019/10/08/organizing-top-level-spaces-in-your-ibm-blueworks \n\n6.How do I use Activity Streams and commenting to collaborate with the team? \nSee: https://www.blueworkslive.com/scr/docs/bwl/topics/collaboratingwithyourteam.html \n\n7.How do I move or copy spaces and process diagrams? \nBlueworks Live allows to \n &nbsp;&nbsp;&nbsp;&nbsp;-  copy processes within the same space, or to another space of the same account. \n &nbsp;&nbsp;&nbsp;&nbsp;-  copy spaces - within the same account, or to another account.\nSee: https://www.ibm.com/support/pages/how-do-i-move-or-copy-spaces-and-process-diagrams \n\n8.How do IBM internals share content to a client or other company? \nAs the accounts are not on the same Blueworks Live servers, exporting is recommended. \nSee: https://developer.ibm.com/answers/questions/461905/blueworks-sharing-content-to-a-client-or-other-com.html \n\n9.How to transfer Blueworks Live users, licenses, and artifacts to another account? \nSee: https://www.ibm.com/support/pages/how-transfer-blueworks-live-users-licenses-and-artifacts-another-account \n\n10.How to set up Space Permissions? \nSee: https://www.ibm.com/support/pages/setting-space-permissions \n\n11.Error when trying to access a space: “You do not have permissions to View this page” \nSee: https://www.ibm.com/developerworks/community/blogs/f37f6f3c-d39f-49c9-884b-a1665b7e2ca3/entry/ThesecurityconceptofBlueworksLiveageneraloverview?lang=en \n\n12.Error at login itself: \"You do not have permission to view this page\" \nSee: https://www.ibm.com/support/pages/node/1076421 \n\n13.What can Editor/ Contributor/Viewer/ Community users can do on Spaces? \nSee: https://ibm.blueworkslive.com/scr/docs/bwl/topics/addingusers.html \n\n14.How do I make a space private? \nSee: https://www.ibm.com/support/knowledgecenter/en/SS2MKC/com.ibm.bwl.doc/topics/faqspaceprivate.html \n\n15.How to prevent editors from creating spaces at the top level of the space hierarchy? \nSee: https://www.ibm.com/support/pages/how-prevent-editors-creating-spaces-top-level-space-hierarchy \n\n16.Some users I have explicitely added to my space are showing up only with their email address  \nSee: https://www.ibm.com/support/pages/how-prevent-editors-creating-spaces-top-level-space-hierarchy \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Personalize Account","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/Account/PersonalizeAccount","text":"Date:2019-12-11\n\nOverview \n\nYou can personalize the way Blueworks Live works for you by updating your user settings, choosing your start page, and customizing the properties that you see in your view. \n\n Component \n\nhttps://www.blueworkslive.com/scr/docs/bwl/topics/personalize.html \n\nTroubleshooting \n\nUse the above link as your guide when personalizing your environment. \n\n1.Decide which properties will display in your activity boxes \n2.Set what you want to be notified on. \n3.Decide whether to automatically follow artifacts that you create or edit, work that you launch, or posts that you create. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"User Settings","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/Account/UserSettings","text":"Date:2019-12-11\n\nOverview \n\nYou can personalize Blueworks Live by updating your user setting. To open the My Settings dialogue, click your login name in the upper right corner. \n\nUser settings include: \n\nNotifications – daily updates, weekly updates, or immediate notifications of things you have worked on. \nAuto-follow settings -  you can choose to set up auto-following on the Profile tab. \nTime zone and language settings - You can update your current time zone and language preference on the Location tab of the My User Settings dialogue. User Settin\n\n Component \n\nhttps://www.blueworkslive.com/scr/docs/bwl/topics/user_settings.html \n\nTroubleshooting \n\nUse the above link as a guide when setting your preferences \n\n1.Language preferences \n2.Time zone preferences \n3.Notification preferences \n\n \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Operations","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/Operations","text":"Date:2019-12-27\n\nOverview\n\nAll server side requests are handled by Blueworks Live Operations team. This includes Server maintenance and downtime, SSAE requests, Vulnerability checks, Backups and Recovery and many other server related issues.\n\nWhen a customer raises a possible enhancement request or a defect, the Development is involved.\n\n Component\n\nPlease see the references below.\n\nTroubleshooting\n\nCommon Problems and references\n\n1.How to raise an enhancement request?\nThe client has to raise this directly with the development using the RFE tool.\nhttps://www.ibm.com/developerworks/rfe/execute?use_case=tutorials\n\n2.Business Continuity Plan (BCP) Drills\nhttps://www.ibm.com/support/pages/bcp-drills-business-continuity-plan\n\n3.Disaster Recovery Test Plan for Blueworks Live (2018)\nhttps://bwlwiki.canlab.ibm.com/pub/BWLManagement/BCPPlansandResults/BWLDRTestQ22018.doc\n\n4.How is security implemented inside Blueworks Live? \nBlueworks Live does regular security testing and audits, using a mix of manual penetration testing and automated scans, following IBM policies and practices.\n\nIn addition we participate in ISO compliance (27001, 27017, 27018) assessments which assess our security practices.\n\nOur security description can be found here: https://us001.blueworkslive.com/scr/docs/bwl/topics/securitypractices.htmlsecuritypolicy.\n \nNote: We're not in the practice of providing details about what is or is not tested; doing so would be a security exposure in itself. But we can certainly provide a copy of our last independent pen test report, which describes the test methodology used. \n\n5.Cloud Services Terms for Blueworks Live\nhttps://www-03.ibm.com/software/sla/sladb.nsf/sla/sd-6604-05\nhttps://www-03.ibm.com/software/sla/sladb.nsf/pdf/6604-05/$file/i126-6604-0511-2018en_US.pdf\n\n6.Data Encryption in Blueworks Live\nhttps://www.ibm.com/support/pages/data-encryption-bwl\n\n7.Does Blueworks Live integrate with Rational clear case\nhttps://www.ibm.com/support/pages/does-blueworks-live-integrate-rational-clear-case\n\n8.GDPR Compatibility\nhttps://ibm.blueworkslive.com/scr/home#!posts:102fc1199cd\n\n9.Download ISO/IEC 27001:2013 for Blueworks Live\nhttps://www.ibm.com/downloads/cas/EEO0NVLK\n\n10.What is the minimum list of domains my users need access to?\nhttps://www.ibm.com/support/knowledgecenter/SS2MKC/com.ibm.bwl.doc/topics/faq_domains.html\n\n11.How to request a SSAE SOC2 report for Blueworks Live?\n[Internal Reference] https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Customer%20Need%20SOC2%20%28also%20known%20as%20SSAE16%29%20Report\nor\nhttps://www.ibm.com/support/pages/how-request-ssae-soc2-report-blueworks-live\n\n12.Blueworks Live is Down or Unavailable\nhttps://www.ibm.com/support/pages/blueworks-live-down-or-unavailable\n\n13.System requirements and Data Protection\nhttps://www.ibm.com/software/reports/compatibility/clarity-reports/report/html/softwareReqsForProduct?deliverableId=1413347324489\n\n14.Lag time in the Documentation tab of an Activity\nhttps://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Issues%20with%20performance%20-%20latency%20-%20time%20lags\n\n15.Disaster recovery\nhttps://www.ibm.com/support/pages/disaster-recovery-0\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Account","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/SalesandBilling/Account","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Billing","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/SalesandBilling/Billing","text":"Date:2019-12-11\n\nOverview \n\nBlueworks Live has a very efficient sales group that assists clients who want Blueworks Live to establish their licensing requirements and the term of their subscription to Blueworks Live. Billing as well as provisioning for all paid client accounts is now handled by the IBM Project Office.  \n\nOnce Sales and the client have established all licensing requirements and term of operation, a method of purchase is established and a purchase order is generated.  At that point it goes to the IBM Project Office to setup a billing cycle …. the project office also handles provisioning the account. For example they will set how many Editor licenses or Contributor licenses are in the account and they will set the expiration date for the account. \n\nAny further licensing changes or date changes to the account are also handled by the IBM Project Office.\n\n Component \n\nIBM has a project office for each primary geographic area as listed below. \n\n1.USA  \ncloudppo@us.ibm.com (revised)  \n \n2.Canada\nstsswcan@br.ibm.com  \n\n3.Latin America \nBrazil: brpo@br.ibm.com \nMexico: mxpo@br.ibm.com \nSSA: ssapo@br.ibm.com \n\n4.Europe/EMEA Team \nEMEA SaaS PO Functional ID \nEUSAASPO@sk.ibm.com \nEMEA SaaS PO Task ID/Slovakia/IBM  \n\n5.AP Manilla Team - ANZ/ASEAN/ISA \nAP SaaS * Functional ID * \nsaaspmo@ph.ibm.com \nAP SaaS PMO MNL/Philippines/IBM \n \n6.Japan/China/Korea Team \nJP GCG KR Functional ID \nsaaspmo@cn.ibm.com \nJP GCG KR SaaS PMO DL/China/IBM\n\nTroubleshooting \n\nThe following scenarios describe instances where you may need to contact Sales and/or Billing \n\nA sales representative has contacted you requesting that you make changes to a client’s licensing.  Refer the sales representative to the correct IBM Project Office \n\nA client has contacted you asking how to go about getting a Blueworks Live account.  Check the client’s email on the suadmin tool. If the email cannot be found then the client can open their own trial account at  https://www.ibm.com/account/reg/us-en/signup?formid=urx-37086 . If you do find the client’s email associated to an account the the client will need to go through Sales to go through the IBM Project Office to setup a new account. \n\nA sales represntative has contacted you to reset a clietn account expiration date. Contact the correct IBM Project Office. \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Request Access to Community","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/Support/RequestAccesstoCommunity","text":"Date:2019-12-11\n\nOverview \n\nCustomer registration requests for Blueworks Live Clients will be assigned to the BWL Support. It will appear on the Support queue with the title \"Request Access To Community\" \n\nThe details entered by the customer in the provided registration form will be visible in the case “Description” field.\n\n Component \n\nhttps://w3-connections.ibm.com/wikis/home?lang=en-us#%21/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Assisting%20a%20Client%20with%20SaaS%20Registration%20-%20BlueID%20pending%20-%20Request%20access%20to%20community\n\nTroubleshooting \n\nCommon Problems and references \n\na. How do I create an IBM ID? \nhttps://www.ibm.com/account/reg/us-en/signup?formid=urx-19776 \n\nb. End user Support with IBM ID cases \n[Internal] https://apps.na.collabserv.com/wikis/home?lang=en-us!/wiki/Wec93c6bf8bfd431a899c_797078532d70/page/Support \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Clients with Special Support","description":"sthilini@au1.ibm.com","owner":"@Thilini Silva","path":"/BlueworksLive/Support/Clients with Special Support","text":"Date:2019-12-11\n\nOverview\n\nSome of the Blueworks Live clients require Support to handle their requests differently.\nEx: Barclays\n\n Component\n\nPlease see the clients that request special handling below.\n\nTroubleshooting\n\na. Handling Barclays Issues\nPlease see this page in Wiki: https://w3-connections.ibm.com/wikis/home?lang=en-us!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Special%20Handling%20for%20all%20Barclays%20accounts\n\nb. Handling RBS Issues\nPlease see this Wiki Page: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Special%20Handling%20for%20RBS27\n\nc. Handling Covestro1 issues\nPlease see this Wki Page: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Special%20Handling%20for%20Covestro1\n\nd. Handling All Japanese cases including Alpine\nPlease see this Wiki Page: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/How%20to%20handle%20tickets%20from%20Alpine%20System\n\ne. Eli Lilly Password reset issues\nPlease see this Wiki page: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/Special%20Handling%20for%20Eli%20Lilly\n\nf. Constantly check storage for TDAmeritrade and ZionsBank (It should be 0)\nPlease see this Wiki page: https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/W415e0ec58a854b75b9d4_f172a6e1e57d/page/TDAmeritrade%20and%20ZionsBank%20allowed%20storage%20should%20always%20be%200\n","wordCount":0,"topics":[],"type":"Content"},{"name":"AA Installer/Post Install Config","description":"bjdickey@us.ibm.com","owner":"@Brandon Dickey","path":"/RoboticProcessAutomation/AA Installer/Post Install Config","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Application Development/Bot Creator","description":"rusna@my.ibm.com","owner":"@Rusna Mustaffa","path":"/RoboticProcessAutomation/Application Development/Bot Creator","text":"Date：2019-12-12\n\nOverview \n\nBot Creator is one of the components in IBM Robotic Process Automation (RPA) with the Automation Anywhere product. The othehaor two components are Control Room (CR) and Bot Runner. Bot Creator is a desktop application that used to create bots, upload, and download bots to and from the Control Room.  Bot Creator contains user interface components and background services. Developers use Bot Creator to create bots. Once created, bots are uploaded to the Control Room for execution. Bots also can be downloaded from Control Room for further processing or modification. \n\nThere are three types of bots that can be created to automate processes, namely Task Bot, Meta Bot, and IQ Bot. Task Bot is the most used bots for automation. Meta Bots are highly reusable, create it once, and use it everywhere bots. Meta Bots are the building blocks that perform visual captures that include GUI automation which is used for front end automation. It is designed in such a way that anytime if there is any change or update in the application, then it can be done by making minimal edits to the bots. IQ Bots provide the option to use highly advanced cognitive technology for automation. \n\n Prerequisites \n\nIn order to use Bot Creator, you should you have some understanding of Control Room and how RPA clients connect to the Control Room. Please refer to the following links for more details: \n\nhttps://www.ibm.com/support/knowledgecenter/de/SSMGNY11.0.0/com.ibm.wbpm.rpa.main.doc/topics/overviewrpa.html \nhttps://www.ibm.com/support/knowledgecenter/de/SSMGNY11.0.0/com.ibm.wbpm.rpa.main.doc/topics/gettingstartedrpacontrolroom.html \n\nUseful Bot Creator reference \n\nThe following lists all the resources that will help you understand the RPA client Bot Creator: \n\n1.Getting Started with Automation Anywhere  \nhttps://support.automationanywhere.com/hc/en-us/sections/206558028-Getting-Started-with-AA \n\n2.Installing RPA client \nhttps://www.ibm.com/support/knowledgecenter/de/SSMGNY11.0.0/com.ibm.wbpm.rpa.main.doc/topics/installrpa_client.html \n\n3.Uninstalling RPA client \nhttps://www.ibm.com/support/knowledgecenter/de/SSMGNY11.0.0/com.ibm.wbpm.rpa.main.doc/topics/uninstallrpa.html \n\n4.Working with Automation Tasks \nhttps://support.automationanywhere.com/hc/en-us/sections/206558148-Working-with-Automation-Tasks \n\n5.Commands that can be used in Automation Tasks \nhttps://support.automationanywhere.com/hc/en-us/sections/206558088-Commands \n\n6.Types of variables and how they work in Automation Tasks \nhttps://support.automationanywhere.com/hc/en-us/sections/206558128-Using-Variables \n\n7.Customizing Automation Client \nhttps://support.automationanywhere.com/hc/en-us/sections/206558108-Customizing-an-Automation-Client \n\n8.Special Features \nhttps://support.automationanywhere.com/hc/en-us/sections/206558048-Using-Special-Features \n\nTroubleshooting \n\nListed below are some common Bot Creator issues and how to resolve them: \n\n1.Client login errors.  \nThe following link has several recommendations to address client login errors\nhttps://support.automationanywhere.com/hc/en-us/articles/231697387-Client-Login-Errors \n\n2.Bot creator user is not able to login to CR from a new client machine \nThe user is already registered to log in from a different machine. In order to register the user to login from the new machine, you can delete and recreate the user in CR. Or remove the user bot creator license from this user and reapply it. \n\n3.\"Your session has expired. Login into your control room to renew your session\"  \nBot creators will disconnect from client if there is no activity in the client for over 8 hours. \n\n4.Nothing happens when trying to open the Repository \nCheck if the RPA client is supported for the existing Control Room version – refer to this link for compatibility matrix -\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/release-notes/cr-client-compatibity-matrix.html \n\n5.Unable to log in to Bot Creator  \nOn the client machine, check to make sure that Automation Anywhere Enterprise Client Service is running \n\n6.Scheduling Tasks to run \nhttps://support.automationanywhere.com/hc/en-us/articles/230202468-Scheduling-Tasks-to-Run \n\n Data Collection \n\nWhen troubleshooting issues related to bot creators, the following details would help: \n\n1.RPA client version - (C:\\ProgramData\\IBM\\RPA\\client-version.txt) \n2.Control Room version - C:\\ProgramData\\IBM\\RPA\\server-version.txt \n3.Errors observed when running the bots  \n4.A copy of the problem task file (.atmx file) \n5.Screenshot of the error seen on the screen \n6.Client request logs – the logs are located at \\LogFiles \n7.Windows Event Viewer logs \n8.Audit Log details from Control Room \n","wordCount":0,"topics":[],"type":"Content"},{"name":"Auto-Login","description":"kamelio@us.ibm.com","owner":"@Ken Amelio","path":"/RoboticProcessAutomation/Auto-Login","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Bot Runner","description":"shangjin@cn.ibm.com","owner":"@Jin Shang","path":"/RoboticProcessAutomation/Bot Runner","text":"Date:2019-12-12\n\nOverview\n\nThe Bot Runner is the IBM Robotic Process Automation (RPA) client that runs bots. After a bot is created using Bot Creator and is uploaded to Control Room, the bot can be deployed to Bot Runners to run at scale. Bot Runner contains desktop components and background services to provide capabilities to run bots.\n\n Component\n\nDesktop Components\n\n1.Bot Player\nIt is a component invoked by an RPA client when a task is executed. The Bot Player must close after the task completes successfully on the RPA client machine.\n\n2.Reports\nBot Runner provides graphical reports that display the status of tasks and workflows, as well as the ROI over time. You can view the following types of reports:\n\n&nbsp;&nbsp;&nbsp;&nbsp;a.\tTask Run: Displays how many times a task has run successfully, and how many times it has failed during the period.\n&nbsp;&nbsp;&nbsp;&nbsp;b.\tWorkflow Run: Displays how many times a workflow has run successfully and how many times it has failed during the period.\n&nbsp;&nbsp;&nbsp;&nbsp;c.\tTask Timeline: Displays task history in a graphical time line. Select a task and time line to view the number of times a task was run or modified during the period. It also shows whether the task was created or deleted during that time.\n&nbsp;&nbsp;&nbsp;&nbsp;d.\tWorkflow Timeline: Displays workflow history in a graphical time line. You can select a workflow and a time line to see the number of times the workflow was run or modified during the time period. It also tells you whether the workflow was created or deleted during that time.\n&nbsp;&nbsp;&nbsp;&nbsp;e.\tROI: Displays how much USD/Dollar Value has been saved by using Automation Anywhere during the time period.\n&nbsp;&nbsp;&nbsp;&nbsp;f.\tVisual Logs: Graphically displays tasks that have run by providing step-by-step SnapPoints for each action in a task.\n\n3.Event Watcher\nBot Runner logs all events that occur in the application. Major events, such as a task run, task creation, and changes to task properties are logged. To view this logged data, Bot Runner provides System Logs. The System Logs show all client activities. These reports are very useful for monitoring and troubleshooting.\n\nBackground Services\n\n1.Auto Login Service\nBots logging into the target machines to perform tasks, using the provided credentials.\n\n2.Client Service\nManaging communication between the Enterprise client and Enterprise Control Room.\n\n3.Scheduler Service\nComponent that runs the bots per the specified schedule on the machine that is local relative to the bot tasks.\n\nTroubleshooting\n\n Data Collection\n\n1.Enable Debugging Logging\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Open IBM RPA client application\n&nbsp;&nbsp;&nbsp;&nbsp;b. Navigate to Tools  Options  Advanced Settings\n&nbsp;&nbsp;&nbsp;&nbsp;c. Enable the debug level logs by checking \"Enable Debugging Logging\"\n&nbsp;&nbsp;&nbsp;&nbsp;d. Run the bot to reproduce the symptom and note the time.\n\n2.Export the services logs and application logs\n\n&nbsp;&nbsp;&nbsp;&nbsp;a. Open IBM RPA client application\n&nbsp;&nbsp;&nbsp;&nbsp;b. Navigate to Tools  Options  Advanced Settings\n&nbsp;&nbsp;&nbsp;&nbsp;c. Click on \"Export logs\" button\n&nbsp;&nbsp;&nbsp;&nbsp;d. Choose target folder and export logs\n&nbsp;&nbsp;&nbsp;&nbsp;e. Zip up the generated AAEClientLogs_timestamp folder and send in the zip file.\n\n3.To change the Rolling backup of file and file size follow the below steps:\n\nServices Logs:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Navigate to Common Folder (Default common folder “C:\\Users\\Public\\Documents\\Automation Anywhere Client Files\\v11\\ConfigFiles\\log4net-config.xml”)\n&nbsp;&nbsp;&nbsp;&nbsp;b. Edit “log4net-config.xml”.\n  \n    \n    \n    \n    \n    \n    \n      <conversionPattern value=\"%date{ISO8601} [%2thread] %-5level %logger - %message%newline\" /\n    \n  \n    \nmaxSizeRollBackups – Number of Files to be generated. By Default, 10 number of files get generated for each log.\nmaximumFileSize – File size of each log file, this value can be setup in “MB” depend upon the disk size availability.\n\nApplication Logs:\n&nbsp;&nbsp;&nbsp;&nbsp;a. Navigate to Application path (Default application path “C:\\Users\\Administrator\\Documents\\Automation Anywhere Files”)\n&nbsp;&nbsp;&nbsp;&nbsp;b. Edit “log4net-config.xml”.\n  \n    \n    \n    \n    \n    \n    \n      <conversionPattern value=\"%date{ISO8601} [%2thread] %-5level %logger - %message%newline\" /\n    \n  \n\nmaxSizeRollBackups – Number of Files to be generated. By Default, 10 number of files get generated for each log.\nmaximumFileSize – File size of each log file, this value can be setup in “MB” depend upon the disk size availability.\n\nData Analysis\n\nThe RPA client log data includes application logs and service logs. Application logs contain the execution logs of bot player. Service logs present logs of each background service.\n\nApplication Logs Analysis\nThe major log files are AAPlayer.log and AAMain.log. The AAPlayer logs cover the task execution traces. The AAMain logs maintain the communication details between Control Room and RPA Client.\n\n1.Key words:\nExecuteTask  Start task execution\n\nUsage:\nThe log entry indicates the task execution is started. The subsequent log entry contains the task bot name.\nSample: \n2019-11-21 09:07:29,143 [ 6] INFO  AAPlayer - ExecuteTask  Start task execution...\n2019-11-21 09:07:29,144 [ 6] INFO  AAPlayer - ExecuteTask  TaskFilePath : C:\\Users\\Administrator\\AppData\\Local\\Temp\\1b1ee251-c713-41c8-9364-91bcad31ecc4\\Automation Anywhere\\My Tasks\\Sample Tasks\\Files-Folders.atmx\n2.Key words:\nTaskExecutor:ExecuteCommands\n\nUsage:\nThe log entries with this prefix present the task commands execution behavior.\nSample: \n2019-11-21 09:07:29,611 [ 6] INFO  AAPlayer - TaskExecutor:ExecuteCommands  Started Executing Commands\n2019-11-21 09:07:29,612 [ 6] INFO  AAPlayer - TaskExecutor:ExecuteCommands  CommandGroup : OpenPrgFile, CommandName : OpenPrgFile, LineNo : 1, Task : C:\\Users\\Administrator\\AppData\\Local\\Temp\\1b1ee251-c713-41c8-9364-91bcad31ecc4\\Automation Anywhere\\My Tasks\\Sample Tasks\\Files-Folders.atmx\n2019-11-21 09:07:29,969 [ 6] INFO  AAPlayer - TaskExecutor:ExecuteCommands  CommandGroup : Delay, CommandName : Delay, LineNo : 2, Task : C:\\Users\\Administrator\\AppData\\Local\\Temp\\1b1ee251-c713-41c8-9364-91bcad31ecc4\\Automation Anywhere\\My Tasks\\Sample Tasks\\Files-Folders.atmx\n2019-11-21 09:08:02,139 [ 6] INFO  AAPlayer - TaskExecutor:ExecuterCommands  End Executing Commands\n3.Key words:\nExecuteTask  Task finished execution\n\nUsage:\nThe log entry indicates the task execution is finished.\nSample: \n2019-11-21 09:08:02,143 [ 6] INFO  AAPlayer - ExecuteTask  Task finished execution.\n\nService Logs Analysis\nThe AAClientService.log file contains Client Service logs. The AAAutoLogin.log contains Auto Login Service logs. The AASchedulerService.log contains Scheduler Service logs. Refer to individual log file for the different service issue. The Application Event Viewer of Windows platform is also useful for troubleshooting background services issue. The following forum topic is an example.\n\nhttps://www.ibm.com/mysupport/s/question/0D50z000062kotoCAA/my-client-service-of-rpa-stops-unexpectedly?language=enUS&utmcampaign=answers&utmmedium=email&utmsource=answers-new-question&utm_content=answers-answer-question\n\n Reference\n\n1.Bot Runner overview\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/aae-architecture-implementation/bot-runner-overview.html\n\n2.Collecting troubleshooting data for IBM Robotic Process Automation (RPA)\nhttps://www.ibm.com/support/pages/collecting-troubleshooting-data-ibm-robotic-process-automation-rpa\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Connectivity","description":"bjdickey@us.ibm.com","owner":"@Brandon Dickey","path":"/RoboticProcessAutomation/Connectivity","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Control Room","description":"rHenning.Burgmann@de.ibm.com","owner":"@Henning Burgmann","path":"/RoboticProcessAutomation/ControlRoom","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"Database Related","description":"bjdickey@us.ibm.com","owner":"@Brandon Dickey","path":"/RoboticProcessAutomation/Database Related","text":"to be added","wordCount":0,"topics":[],"type":"Content"},{"name":"IBM Installer","description":"bjdickey@us.ibm.com","owner":"@Brandon Dickey","path":"/RoboticProcessAutomation/IBM Installer","text":"Date:2019-11-25\n\nOverview\n\nThe RPA (Robotic Process Automation) Fundamentals Education is an overview of the different parts of RPA which is built on top of Automation Anywhere. This module teaches the basics of an IBM RPA install, how it differs from a normal AA install, and how to debug issues. \n\n Troubleshooting\n\nIBM Install/Upgrade Scripts:\n\nWhen downloading either the installation package from Passport Advantage or an upgrade package from Fix Central, you will see the following files contained in the package:\n\nAn installer or upgrade batch file \nThe setup folder where the AA installer executable is located along with the IBM license file\nA docs folder (only on more recent versions since ~11.0.0.3) containing all of the AA specific documentation that is normally provided with an AA download. This folder is included because normal IBM customers would not have access to those documents on the AA site\nThe IBM scripts and localization files contained in the native and resources folders\n\nPLEASE NOTE: Customer should only be running the install/upgrade .bat files when using IBM RPA. If a customer runs the AA installer, that will cause the install to be partially completed with all of the IBM customizations missing. If this happens, you need to perform a reinstall, but luckily if you point to the same databases/repository URL for the AA installer, then no data should be lost.\n\nWhen the IBM install/upgrade.bat file is run, it will perform several validation checks (such as verifying if you have admin permissions, making sure the correct version of VC++ 2013 is installed, if there is an already installed copy of RPA, etc). After that is done, it will check the license and verify what type of install you want to perform (Express vs Enterprise or Bot Runner vs Bot Creator).\n\nAfter the checks are completed and the installer knows the license option it will begin the install. At this point, the installer behavior will vary:\nIf you are installing or upgrading a Client, it will always perform the client install silently\nIf you are installing a Control Room, it will always bring up the AA installer in a GUI window\nIf you are upgrading a Control Room, then it will bring up a GUI installer if you selected a Custom install during the initial installation, or it will perform a silent install if you selected an Express install during the initial install\n\nPlease note that while the AA installer is running, the cmd window for the IBM RPA install will also be open. This window should not be closed while the AA installer is running in the background, otherwise the IBM customizations will not be added and it will be a partial install.\n\nAfter the AA installer is done, it is closed down and the IBMer installer will add the IBM RPA customizations. They consist primarily of the following:\nApply the IBM specific license file that AA requires, automatically applies it, and then hides the AA licensing page\nCopy over the CR help pages\nCopy the IBM text license and SWIDTAG files over to the installation directory \nSetups the IBM RPA License Metric Service to track the usage (as we are using that instead of the AA licenses)\nCreates an IBM specific uninstaller.bat in the installation directory and disable the AA uninstaller\n\nTroubleshooting files to collect:\n\nThe installer logs out to the C:\\ProgramData\\IBM\\RPA\\logs directory by default and the version files are included in the C:\\ProgramData\\IBM\\RPA directory. Always review the installer logs when there is an error on the IBM installer or if it looks like some of the IBM customizations are missing. \nFor more in depth analysis, it is good to get a copy of the install/upgrade files to compare against, especially if you suspect there is a defect or one of the prereq checks is failing unexpectedly. \n\nExample: \nA good example if this is if the VC++ 2013 check fails, if you look at the installControlRoom.bat script you can see the specific registry entry it is searching for:\nset vcinstalled=0\nfor /f \"tokens=1 delims=\" %%i in ('\"reg query 2nul HKLM\\SOFTWARE\\Classes\\Installer\\Dependencies\\{ef6b00ec-13e1-4c25-9064-b2f383cb8412}\"') do (\n    set vcinstalled=%%i\n)\nThat is a specific version of the VC++ 2013 we are searching for, and if you already have an installed copy it may be for the wrong version. Hence getting that registry ID from the installer is a useful way to check what you should be looking for in the registry to confirm if the right version is installed.\n\nIBM Uninstaller: \n\nWhen installing IBM RPA, it should create an installer in the AA installation directory. If you need to perform an uninstall, you must use this uninstaller. \nThe uninstall.bat file will perform the following:\nRemove the IBM RPA License Metric Service\nRemove the Help pages\nSilently uninstall AA by running the AA uninstaller\nRemove the IBM license files\nCleanup the AA directories\nDelete the IBM RPA specific version file located in the C:\\ProgramData\\IBM\\RPA\\ directory\n\nThe normal AA uninstaller in the Windows Control Panel should be disabled, but if the customer is somehow able to run it, then the uninstall will be partial as it would miss all of the IBM specific customizations. In that case, if you wish to perform a reinstall, you would need to manually remove any leftover files, otherwise the IBM installer may detect that there is already an IBM RPA installer.\n\nRollback/Reinstall steps and notes:\n\nPlease see the AA Installer/Post Install Config page for details first, as for the most part IBM RPA installers do not have any special steps on top of the AA supported ones (outside of making sure you run the IBM installers instead of the AA ones).\n\nThe one exception is when trying to roll back to one of the IBM ifix versions. The way you would perform a rollback is to restore the older DB/repository files from before the upgrade and then perform a reinstall of the original version you upgraded from. However, if you originated from an ifix version, then there is no direct installation version. This is due to how IBM packages certain AA versions as only ifixes rather than full releases on Passport Advantage. In comparison, AA normally provides the installation files as well for all versions, hence this is an unusual case that would only appear for an IBM RPA install. \n\nIn these use cases, we should consult with L3 when possible and try and get the rollback improved, but there is a possible workaround. In this case, modify the steps to use a blank database and repository directory. From there, install the most recent base version possible (for example, if you are trying to roll back to 11.0.0.7 ifix001, install 11.0.0.7) and then run the upgrade to the ifix level involved. After the upgrade is completed, then restore the older database and repository directory to get the older configuration back. \n\nThat said this is an untested/theoretical approach, hence we should make sure to get L3 sign off in the future and hopefully at some point get a test case for the process if L3 approves of it.\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Metabot","description":"rusna@my.ibm.com","owner":"@Rusna Mustaffa","path":"/RoboticProcessAutomation/Metabot","text":"Date:2019-12-13\n\nOverview\n\nA MetaBot is one of the three types of bots that you can use to automate a process. The other two types are TaskBot and IQBot.  A MetaBot can be created based on an application API, visual captures, or  Integration Flow.  MetaBots are automation building blocks that can be used and re-used in a wide variety of automated tasks.  MetaBots are app resilient and can be calibrated to adjust to any changes and updates in the application being automated. MetaBots do not work on their own; they must be called or initiated from TaskBots.\n\nThis document lists related resources and recordings to help understand MetaBots.\n\n Prerequisites\n\nYou should you have some understanding of Control Room and how RPA client connects to the Control Room. Refer to the following links:\n\nhttps://www.ibm.com/support/knowledgecenter/de/SSMGNY11.0.0/com.ibm.wbpm.rpa.main.doc/topics/overviewrpa.html\n\nhttps://www.ibm.com/support/knowledgecenter/de/SSMGNY11.0.0/com.ibm.wbpm.rpa.main.doc/topics/gettingstartedrpacontrolroom.html\n\nUseful resources to understand MetaBots\n\nThe following is a list of resources related to MetaBots:\n\n1.Getting Started with MetaBot Designer\nhttps://support.automationanywhere.com/hc/en-us/sections/206558188-Getting-Started-with-MetaBot-Designer\n \n2.MetaBot Commands\nhttps://support.automationanywhere.com/hc/en-us/sections/206558208-MetaBot-Commands\n \n3.MetaBot Variables\nhttps://support.automationanywhere.com/hc/en-us/sections/206558228-MetaBot-Variables\n \n4.MetaBots in Automation Anywhere Enterprise\nhttps://support.automationanywhere.com/hc/en-us/sections/206558248-MetaBots-in-Automation-Anywhere-Enterprise\n \n5.MetaBots tutorials:\nhttps://www.youtube.com/watch?v=XoWz8YmIL5I\nhttps://www.youtube.com/watch?v=1ez-CfwTJ8o\nhttps://www.youtube.com/watch?v=LjqMDBhJGyY\n \n6.MetaBots Guidelines PDF \nhttps://apeople.automationanywhere.com/s/question/0D56F00005jl5vnSAA/please-find-the-complete-user-guide-for-meta-bots\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Version Control","description":"rHenning.Burgmann@de.ibm.com","owner":"@Henning Burgmann","path":"/RoboticProcessAutomation/VersionControl","text":"Date:2019-12-13\n\nOverview\n\nThis module teaches the basic version control features of the Control Room and how to integrate the Robotic Process Automation (RPA) Control Room with an external Version Control System.\n\nInternal version control of the Control Room\n\nBy default the Control Room provides a simple central repository for development assets like bots, meta bots, scrips, documents and so forth. \n\nThe development assets are stored in a default folder structure:\nMy Docs\nMy Exes\nMy MetaBots\nMy Pushed Tasks\nMy Reports\nMy Scripts\nMy Tasks\nMy Workflow\n\nAdditional folders or sub folders can be created.\nThe folders and the assets are stored locally on the RPA client in the directory: APPLICATION_PATH\\Automation Anywhere \nPer default this is:\nC:\\Users\\\\Documents\\Automation Anywhere Files\\Automation Anywhere\n\nOn the server, data is stored in the directory:\nC:\\ProgramData\\AutomationAnywhere\\Server Files\\Default\\Automation Anywhere\n\nOnly the latest version of a file is stored on the server.\n\n1.Uploading and Downloading Tasks to the Server\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/aae-client/bot-creator/getting-started-with-aa/uploading-and-downloading-tasks-to-the-server.html\n2.Comparing Files that Reside on the Client and Server\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/aae-client/bot-creator/getting-started-with-aa/comparing-files-that-reside-on-the-client-and-server.html\n\nExternal Version Control System\n\nThe Control Room can optionally be integrated with an external Version Control Systems (VCS). \nWith an external VCS you gain additional features like a revision history, comparing/rolling back revisions and (exclusive) locking of files.\n\nMost commonly used with RPA is Subversion (SVN). The suggested Subversion server implementation is VisualSVN Server. The Control Room uses the SVNKit to connect to an SVN server.\n\n1.Supported VCS\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/aae-architecture-implementation/deployment-planning/requirements-version-control.html\n2.Impact of enabling and disabling version control settings\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/control-room/administration/settings/bots-configure-version-control.htmlBotsConfigVerCont__Impact\n3.Enabling Version Control in Automation Anywhere\nhttps://docs.automationanywhere.com/bundle/enterprise-v11.3/page/enterprise/topics/aae-client/bot-creator/using-special-features/enabling-version-control-in-automation-anywhere.html\n4.VisualSVN Server – Installation and configuration\nhttps://www.visualsvn.com/server/getting-started/\n5.Understanding VisualSVN Server Authentication options\nhttps://www.visualsvn.com/support/topic/00039/\n6.AAE - Integration With Version Control System - FAQs And Best Practices\nhttps://support.automationanywhere.com/hc/en-us/articles/115001365447-AAE-Integration-with-Version-Control-System-FAQs-and-Best-Practices\n\nTroubleshooting\n\nPotential problem areas:\nConfiguration of external VCS\n  Network connectivity problems (e.g. firewall)\n  Authentication errors\n  \n Data Collection\n\nLog output for Version Control is written to the file: \nWebCR_ServerRepository.log\n\nLocated in: \n% ProgramData%\\AutomationAnywhere\\Logs\n\nActivate DEBUG logs for Version Control by modifying the log configuration:\nC:\\Program Files\\Automation Anywhere\\Enterprise\\config\\log4j2.xml\n\nChange the following two loggers from (add level=\"DEBUG\"):\n        \n            \n              \n        \n            \n        \nTo:\n        \n            \n        \n        \n            \n        \n\nData Analysis\n\nAuthentication failure at login\n2019-Jul-15 Mon 13:52:57.568 ERROR - com.automationanywhere.common.util.filter.ExceptionFilter - handleDetailedException(ExceptionFilter.java:104) -\n      Exception handler com.automationanywhere.common.validation.DetailedException: Unable to connect to SVN repository\n\tat com.automationanywhere.common.exceptions.ExceptionHelper.buildDetailedException(ExceptionHelper.java:73) ~[kernel.jar:?]\n\tat com.automationanywhere.serverrepository.message.ServerRepositoryExceptionHelper.buildDetailedException(ServerRepositoryExceptionHelper.java:64) ~[kernel.jar:?]\n\tat com.automationanywhere.serverrepository.core.service.storage.impl.svn.AbstractSVNAdapterImpl.testSVNConnection(AbstractSVNAdapterImpl.java:92) ~[kernel.jar:?]\n\tat com.automationanywhere.serverrepository.core.service.impl.VCSSyncServiceImpl.testVCSConnection(VCSSyncServiceImpl.java:115) ~[kernel.jar:?]\n...\nCaused by: java.lang.IllegalArgumentException: svn: E170001: Negotiate authentication failed: 'No valid credentials provided'\n\tat com.automationanywhere.serverrepository.message.ServerRepositoryExceptionHelper.buildDetailedException(ServerRepositoryExceptionHelper.java:65) ~[kernel.jar:?]\n\t... 69 more\n\nSolution:\n\nAllow V11 Control Room To Use VisualSVN With Windows Authentication\nhttps://apeople.automationanywhere.com/s/article/Allow-V11-Control-Room-to-Use-VisualSVN-With-Windows-Authentication\n\n","wordCount":0,"topics":[],"type":"Content"},{"name":"Knowledge Buckets","description":"","path":"/RoboticProcessAutomation/Knowledge Buckets","text":"\nGetting to know Digital Business Automation (DBA) Series\n<table border=\"1px solid #ccc\" cellspacing=\"0\" cellpadding=\"0\"\n  \n    <th width=\"29%\" style=\"text-align:center;\";Topic\n    Link\n    <th width=\"20%\"style=\"text-align:center\"Date\n  \n  \n    Getting to know Digital Business Automation (DBA) - ECM and RPA\n    https://ec.yourlearning.ibm.com/w3/playback/10039164\n    2019-07\n  \n  \n","wordCount":0,"topics":[],"type":"Content"}]